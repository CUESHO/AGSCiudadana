(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var cR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function OE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var VE={exports:{}},Kd={},FE={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zu=Symbol.for("react.element"),hR=Symbol.for("react.portal"),dR=Symbol.for("react.fragment"),fR=Symbol.for("react.strict_mode"),pR=Symbol.for("react.profiler"),mR=Symbol.for("react.provider"),gR=Symbol.for("react.context"),_R=Symbol.for("react.forward_ref"),yR=Symbol.for("react.suspense"),vR=Symbol.for("react.memo"),wR=Symbol.for("react.lazy"),Lv=Symbol.iterator;function TR(t){return t===null||typeof t!="object"?null:(t=Lv&&t[Lv]||t["@@iterator"],typeof t=="function"?t:null)}var UE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},BE=Object.assign,zE={};function za(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||UE}za.prototype.isReactComponent={};za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function jE(){}jE.prototype=za.prototype;function Mg(t,e,n){this.props=t,this.context=e,this.refs=zE,this.updater=n||UE}var Og=Mg.prototype=new jE;Og.constructor=Mg;BE(Og,za.prototype);Og.isPureReactComponent=!0;var Nv=Array.isArray,HE=Object.prototype.hasOwnProperty,Vg={current:null},WE={key:!0,ref:!0,__self:!0,__source:!0};function qE(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)HE.call(e,i)&&!WE.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:Zu,type:t,key:o,ref:a,props:r,_owner:Vg.current}}function ER(t,e){return{$$typeof:Zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Zu}function PR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Dv=/\/+/g;function Yf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?PR(""+t.key):e.toString(36)}function xh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Zu:case hR:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+Yf(a,0):i,Nv(r)?(n="",t!=null&&(n=t.replace(Dv,"$&/")+"/"),xh(r,e,n,"",function(f){return f})):r!=null&&(Fg(r)&&(r=ER(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Dv,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Nv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+Yf(o,u);a+=xh(o,e,n,h,r)}else if(h=TR(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+Yf(o,u++),a+=xh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Xc(t,e,n){if(t==null)return t;var i=[],r=0;return xh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function SR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var en={current:null},Ah={transition:null},IR={ReactCurrentDispatcher:en,ReactCurrentBatchConfig:Ah,ReactCurrentOwner:Vg};function $E(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:Xc,forEach:function(t,e,n){Xc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Xc(t,function(){e++}),e},toArray:function(t){return Xc(t,function(e){return e})||[]},only:function(t){if(!Fg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=za;Te.Fragment=dR;Te.Profiler=pR;Te.PureComponent=Mg;Te.StrictMode=fR;Te.Suspense=yR;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IR;Te.act=$E;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=BE({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Vg.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)HE.call(e,h)&&!WE.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:Zu,type:t.type,key:r,ref:o,props:i,_owner:a}};Te.createContext=function(t){return t={$$typeof:gR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mR,_context:t},t.Consumer=t};Te.createElement=qE;Te.createFactory=function(t){var e=qE.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:_R,render:t}};Te.isValidElement=Fg;Te.lazy=function(t){return{$$typeof:wR,_payload:{_status:-1,_result:t},_init:SR}};Te.memo=function(t,e){return{$$typeof:vR,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Ah.transition;Ah.transition={};try{t()}finally{Ah.transition=e}};Te.unstable_act=$E;Te.useCallback=function(t,e){return en.current.useCallback(t,e)};Te.useContext=function(t){return en.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return en.current.useDeferredValue(t)};Te.useEffect=function(t,e){return en.current.useEffect(t,e)};Te.useId=function(){return en.current.useId()};Te.useImperativeHandle=function(t,e,n){return en.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return en.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return en.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return en.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return en.current.useReducer(t,e,n)};Te.useRef=function(t){return en.current.useRef(t)};Te.useState=function(t){return en.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return en.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return en.current.useTransition()};Te.version="18.3.1";FE.exports=Te;var Y=FE.exports;const Yh=OE(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xR=Y,AR=Symbol.for("react.element"),CR=Symbol.for("react.fragment"),RR=Object.prototype.hasOwnProperty,kR=xR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bR={key:!0,ref:!0,__self:!0,__source:!0};function GE(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)RR.call(e,i)&&!bR.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:AR,type:t,key:o,ref:a,props:r,_owner:kR.current}}Kd.Fragment=CR;Kd.jsx=GE;Kd.jsxs=GE;VE.exports=Kd;var V=VE.exports,Qp={},KE={exports:{}},Pn={},ZE={exports:{}},QE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,le){var J=$.length;$.push(le);e:for(;0<J;){var fe=J-1>>>1,Ee=$[fe];if(0<r(Ee,le))$[fe]=le,$[J]=Ee,J=fe;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var le=$[0],J=$.pop();if(J!==le){$[0]=J;e:for(var fe=0,Ee=$.length,Je=Ee>>>1;fe<Je;){var Re=2*(fe+1)-1,Pe=$[Re],pe=Re+1,Tt=$[pe];if(0>r(Pe,J))pe<Ee&&0>r(Tt,Pe)?($[fe]=Tt,$[pe]=J,fe=pe):($[fe]=Pe,$[Re]=J,fe=Re);else if(pe<Ee&&0>r(Tt,J))$[fe]=Tt,$[pe]=J,fe=pe;else break e}}return le}function r($,le){var J=$.sortIndex-le.sortIndex;return J!==0?J:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,_=null,v=3,P=!1,k=!1,b=!1,F=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A($){for(var le=n(f);le!==null;){if(le.callback===null)i(f);else if(le.startTime<=$)i(f),le.sortIndex=le.expirationTime,e(h,le);else break;le=n(f)}}function B($){if(b=!1,A($),!k)if(n(h)!==null)k=!0,ut(q);else{var le=n(f);le!==null&&Ue(B,le.startTime-$)}}function q($,le){k=!1,b&&(b=!1,x(E),E=-1),P=!0;var J=v;try{for(A(le),_=n(h);_!==null&&(!(_.expirationTime>le)||$&&!O());){var fe=_.callback;if(typeof fe=="function"){_.callback=null,v=_.priorityLevel;var Ee=fe(_.expirationTime<=le);le=t.unstable_now(),typeof Ee=="function"?_.callback=Ee:_===n(h)&&i(h),A(le)}else i(h);_=n(h)}if(_!==null)var Je=!0;else{var Re=n(f);Re!==null&&Ue(B,Re.startTime-le),Je=!1}return Je}finally{_=null,v=J,P=!1}}var K=!1,C=null,E=-1,R=5,N=-1;function O(){return!(t.unstable_now()-N<R)}function U(){if(C!==null){var $=t.unstable_now();N=$;var le=!0;try{le=C(!0,$)}finally{le?D():(K=!1,C=null)}}else K=!1}var D;if(typeof I=="function")D=function(){I(U)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,In=Ne.port2;Ne.port1.onmessage=U,D=function(){In.postMessage(null)}}else D=function(){F(U,0)};function ut($){C=$,K||(K=!0,D())}function Ue($,le){E=F(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||P||(k=!0,ut(q))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var le=3;break;default:le=v}var J=v;v=le;try{return $()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=v;v=$;try{return le()}finally{v=J}},t.unstable_scheduleCallback=function($,le,J){var fe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?fe+J:fe):J=fe,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=J+Ee,$={id:m++,callback:le,priorityLevel:$,startTime:J,expirationTime:Ee,sortIndex:-1},J>fe?($.sortIndex=J,e(f,$),n(h)===null&&$===n(f)&&(b?(x(E),E=-1):b=!0,Ue(B,J-fe))):($.sortIndex=Ee,e(h,$),k||P||(k=!0,ut(q))),$},t.unstable_shouldYield=O,t.unstable_wrapCallback=function($){var le=v;return function(){var J=v;v=le;try{return $.apply(this,arguments)}finally{v=J}}}})(QE);ZE.exports=QE;var LR=ZE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NR=Y,Tn=LR;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var YE=new Set,_u={};function oo(t,e){Ia(t,e),Ia(t+"Capture",e)}function Ia(t,e){for(_u[t]=e,t=0;t<e.length;t++)YE.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yp=Object.prototype.hasOwnProperty,DR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mv={},Ov={};function MR(t){return Yp.call(Ov,t)?!0:Yp.call(Mv,t)?!1:DR.test(t)?Ov[t]=!0:(Mv[t]=!0,!1)}function OR(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VR(t,e,n,i){if(e===null||typeof e>"u"||OR(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ug=/[\-:]([a-z])/g;function Bg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ug,Bg);Mt[e]=new tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ug,Bg);Mt[e]=new tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ug,Bg);Mt[e]=new tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new tn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zg(t,e,n,i){var r=Mt.hasOwnProperty(e)?Mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VR(e,n,r,i)&&(n=null),i||r===null?MR(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var dr=NR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jc=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Yo=Symbol.for("react.fragment"),jg=Symbol.for("react.strict_mode"),Xp=Symbol.for("react.profiler"),XE=Symbol.for("react.provider"),JE=Symbol.for("react.context"),Hg=Symbol.for("react.forward_ref"),Jp=Symbol.for("react.suspense"),em=Symbol.for("react.suspense_list"),Wg=Symbol.for("react.memo"),Ar=Symbol.for("react.lazy"),eP=Symbol.for("react.offscreen"),Vv=Symbol.iterator;function Cl(t){return t===null||typeof t!="object"?null:(t=Vv&&t[Vv]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,Xf;function Fl(t){if(Xf===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Xf=e&&e[1]||""}return`
`+Xf+t}var Jf=!1;function ep(t,e){if(!t||Jf)return"";Jf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{Jf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Fl(t):""}function FR(t){switch(t.tag){case 5:return Fl(t.type);case 16:return Fl("Lazy");case 13:return Fl("Suspense");case 19:return Fl("SuspenseList");case 0:case 2:case 15:return t=ep(t.type,!1),t;case 11:return t=ep(t.type.render,!1),t;case 1:return t=ep(t.type,!0),t;default:return""}}function tm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yo:return"Fragment";case Qo:return"Portal";case Xp:return"Profiler";case jg:return"StrictMode";case Jp:return"Suspense";case em:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case JE:return(t.displayName||"Context")+".Consumer";case XE:return(t._context.displayName||"Context")+".Provider";case Hg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wg:return e=t.displayName||null,e!==null?e:tm(t.type)||"Memo";case Ar:e=t._payload,t=t._init;try{return tm(t(e))}catch{}}return null}function UR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tm(e);case 8:return e===jg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function tP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BR(t){var e=tP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eh(t){t._valueTracker||(t._valueTracker=BR(t))}function nP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=tP(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Xh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nm(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Fv(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Yr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function iP(t,e){e=e.checked,e!=null&&zg(t,"checked",e,!1)}function im(t,e){iP(t,e);var n=Yr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?rm(t,e.type,n):e.hasOwnProperty("defaultValue")&&rm(t,e.type,Yr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Uv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function rm(t,e,n){(e!=="number"||Xh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ul=Array.isArray;function pa(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Yr(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function sm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Ul(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yr(n)}}function rP(t,e){var n=Yr(e.value),i=Yr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function zv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function sP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function om(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?sP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var th,oP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(th=th||document.createElement("div"),th.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=th.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zR=["Webkit","ms","Moz","O"];Object.keys(Yl).forEach(function(t){zR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yl[e]=Yl[t]})});function aP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Yl.hasOwnProperty(t)&&Yl[t]?(""+e).trim():e+"px"}function lP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=aP(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var jR=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function am(t,e){if(e){if(jR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function lm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var um=null;function qg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cm=null,ma=null,ga=null;function jv(t){if(t=Xu(t)){if(typeof cm!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Jd(e),cm(t.stateNode,t.type,e))}}function uP(t){ma?ga?ga.push(t):ga=[t]:ma=t}function cP(){if(ma){var t=ma,e=ga;if(ga=ma=null,jv(t),e)for(t=0;t<e.length;t++)jv(e[t])}}function hP(t,e){return t(e)}function dP(){}var tp=!1;function fP(t,e,n){if(tp)return t(e,n);tp=!0;try{return hP(t,e,n)}finally{tp=!1,(ma!==null||ga!==null)&&(dP(),cP())}}function vu(t,e){var n=t.stateNode;if(n===null)return null;var i=Jd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var hm=!1;if(ir)try{var Rl={};Object.defineProperty(Rl,"passive",{get:function(){hm=!0}}),window.addEventListener("test",Rl,Rl),window.removeEventListener("test",Rl,Rl)}catch{hm=!1}function HR(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var Xl=!1,Jh=null,ed=!1,dm=null,WR={onError:function(t){Xl=!0,Jh=t}};function qR(t,e,n,i,r,o,a,u,h){Xl=!1,Jh=null,HR.apply(WR,arguments)}function $R(t,e,n,i,r,o,a,u,h){if(qR.apply(this,arguments),Xl){if(Xl){var f=Jh;Xl=!1,Jh=null}else throw Error(X(198));ed||(ed=!0,dm=f)}}function ao(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Hv(t){if(ao(t)!==t)throw Error(X(188))}function GR(t){var e=t.alternate;if(!e){if(e=ao(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return Hv(r),t;if(o===i)return Hv(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function mP(t){return t=GR(t),t!==null?gP(t):null}function gP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=gP(t);if(e!==null)return e;t=t.sibling}return null}var _P=Tn.unstable_scheduleCallback,Wv=Tn.unstable_cancelCallback,KR=Tn.unstable_shouldYield,ZR=Tn.unstable_requestPaint,lt=Tn.unstable_now,QR=Tn.unstable_getCurrentPriorityLevel,$g=Tn.unstable_ImmediatePriority,yP=Tn.unstable_UserBlockingPriority,td=Tn.unstable_NormalPriority,YR=Tn.unstable_LowPriority,vP=Tn.unstable_IdlePriority,Zd=null,Ti=null;function XR(t){if(Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(Zd,t,void 0,(t.current.flags&128)===128)}catch{}}var ni=Math.clz32?Math.clz32:tk,JR=Math.log,ek=Math.LN2;function tk(t){return t>>>=0,t===0?32:31-(JR(t)/ek|0)|0}var nh=64,ih=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nd(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Bl(u):(o&=a,o!==0&&(i=Bl(o)))}else a=n&~r,a!==0?i=Bl(a):o!==0&&(i=Bl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ni(e),r=1<<n,i|=t[n],e&=~r;return i}function nk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ik(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ni(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=nk(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function fm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function wP(){var t=nh;return nh<<=1,!(nh&4194240)&&(nh=64),t}function np(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ni(e),t[e]=n}function rk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ni(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function Gg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ni(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Fe=0;function TP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var EP,Kg,PP,SP,IP,pm=!1,rh=[],Ur=null,Br=null,zr=null,wu=new Map,Tu=new Map,Rr=[],sk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qv(t,e){switch(t){case"focusin":case"focusout":Ur=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":wu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(e.pointerId)}}function kl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Xu(e),e!==null&&Kg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ok(t,e,n,i,r){switch(e){case"focusin":return Ur=kl(Ur,t,e,n,i,r),!0;case"dragenter":return Br=kl(Br,t,e,n,i,r),!0;case"mouseover":return zr=kl(zr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return wu.set(o,kl(wu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Tu.set(o,kl(Tu.get(o)||null,t,e,n,i,r)),!0}return!1}function xP(t){var e=Fs(t.target);if(e!==null){var n=ao(e);if(n!==null){if(e=n.tag,e===13){if(e=pP(n),e!==null){t.blockedOn=e,IP(t.priority,function(){PP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ch(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=mm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);um=i,n.target.dispatchEvent(i),um=null}else return e=Xu(n),e!==null&&Kg(e),t.blockedOn=n,!1;e.shift()}return!0}function $v(t,e,n){Ch(t)&&n.delete(e)}function ak(){pm=!1,Ur!==null&&Ch(Ur)&&(Ur=null),Br!==null&&Ch(Br)&&(Br=null),zr!==null&&Ch(zr)&&(zr=null),wu.forEach($v),Tu.forEach($v)}function bl(t,e){t.blockedOn===e&&(t.blockedOn=null,pm||(pm=!0,Tn.unstable_scheduleCallback(Tn.unstable_NormalPriority,ak)))}function Eu(t){function e(r){return bl(r,t)}if(0<rh.length){bl(rh[0],t);for(var n=1;n<rh.length;n++){var i=rh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ur!==null&&bl(Ur,t),Br!==null&&bl(Br,t),zr!==null&&bl(zr,t),wu.forEach(e),Tu.forEach(e),n=0;n<Rr.length;n++)i=Rr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Rr.length&&(n=Rr[0],n.blockedOn===null);)xP(n),n.blockedOn===null&&Rr.shift()}var _a=dr.ReactCurrentBatchConfig,id=!0;function lk(t,e,n,i){var r=Fe,o=_a.transition;_a.transition=null;try{Fe=1,Zg(t,e,n,i)}finally{Fe=r,_a.transition=o}}function uk(t,e,n,i){var r=Fe,o=_a.transition;_a.transition=null;try{Fe=4,Zg(t,e,n,i)}finally{Fe=r,_a.transition=o}}function Zg(t,e,n,i){if(id){var r=mm(t,e,n,i);if(r===null)dp(t,e,i,rd,n),qv(t,i);else if(ok(r,t,e,n,i))i.stopPropagation();else if(qv(t,i),e&4&&-1<sk.indexOf(t)){for(;r!==null;){var o=Xu(r);if(o!==null&&EP(o),o=mm(t,e,n,i),o===null&&dp(t,e,i,rd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else dp(t,e,i,null,n)}}var rd=null;function mm(t,e,n,i){if(rd=null,t=qg(i),t=Fs(t),t!==null)if(e=ao(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rd=t,null}function AP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QR()){case $g:return 1;case yP:return 4;case td:case YR:return 16;case vP:return 536870912;default:return 16}default:return 16}}var Or=null,Qg=null,Rh=null;function CP(){if(Rh)return Rh;var t,e=Qg,n=e.length,i,r="value"in Or?Or.value:Or.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Rh=r.slice(t,1<i?1-i:void 0)}function kh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function sh(){return!0}function Gv(){return!1}function Sn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?sh:Gv,this.isPropagationStopped=Gv,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=sh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=sh)},persist:function(){},isPersistent:sh}),e}var ja={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yg=Sn(ja),Yu=Ye({},ja,{view:0,detail:0}),ck=Sn(Yu),ip,rp,Ll,Qd=Ye({},Yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Xg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ll&&(Ll&&t.type==="mousemove"?(ip=t.screenX-Ll.screenX,rp=t.screenY-Ll.screenY):rp=ip=0,Ll=t),ip)},movementY:function(t){return"movementY"in t?t.movementY:rp}}),Kv=Sn(Qd),hk=Ye({},Qd,{dataTransfer:0}),dk=Sn(hk),fk=Ye({},Yu,{relatedTarget:0}),sp=Sn(fk),pk=Ye({},ja,{animationName:0,elapsedTime:0,pseudoElement:0}),mk=Sn(pk),gk=Ye({},ja,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_k=Sn(gk),yk=Ye({},ja,{data:0}),Zv=Sn(yk),vk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ek(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tk[t])?!!e[t]:!1}function Xg(){return Ek}var Pk=Ye({},Yu,{key:function(t){if(t.key){var e=vk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=kh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Xg,charCode:function(t){return t.type==="keypress"?kh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?kh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sk=Sn(Pk),Ik=Ye({},Qd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qv=Sn(Ik),xk=Ye({},Yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Xg}),Ak=Sn(xk),Ck=Ye({},ja,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rk=Sn(Ck),kk=Ye({},Qd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bk=Sn(kk),Lk=[9,13,27,32],Jg=ir&&"CompositionEvent"in window,Jl=null;ir&&"documentMode"in document&&(Jl=document.documentMode);var Nk=ir&&"TextEvent"in window&&!Jl,RP=ir&&(!Jg||Jl&&8<Jl&&11>=Jl),Yv=" ",Xv=!1;function kP(t,e){switch(t){case"keyup":return Lk.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xo=!1;function Dk(t,e){switch(t){case"compositionend":return bP(e);case"keypress":return e.which!==32?null:(Xv=!0,Yv);case"textInput":return t=e.data,t===Yv&&Xv?null:t;default:return null}}function Mk(t,e){if(Xo)return t==="compositionend"||!Jg&&kP(t,e)?(t=CP(),Rh=Qg=Or=null,Xo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return RP&&e.locale!=="ko"?null:e.data;default:return null}}var Ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ok[t.type]:e==="textarea"}function LP(t,e,n,i){uP(i),e=sd(e,"onChange"),0<e.length&&(n=new Yg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var eu=null,Pu=null;function Vk(t){HP(t,0)}function Yd(t){var e=ta(t);if(nP(e))return t}function Fk(t,e){if(t==="change")return e}var NP=!1;if(ir){var op;if(ir){var ap="oninput"in document;if(!ap){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),ap=typeof ew.oninput=="function"}op=ap}else op=!1;NP=op&&(!document.documentMode||9<document.documentMode)}function tw(){eu&&(eu.detachEvent("onpropertychange",DP),Pu=eu=null)}function DP(t){if(t.propertyName==="value"&&Yd(Pu)){var e=[];LP(e,Pu,t,qg(t)),fP(Vk,e)}}function Uk(t,e,n){t==="focusin"?(tw(),eu=e,Pu=n,eu.attachEvent("onpropertychange",DP)):t==="focusout"&&tw()}function Bk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yd(Pu)}function zk(t,e){if(t==="click")return Yd(e)}function jk(t,e){if(t==="input"||t==="change")return Yd(e)}function Hk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var si=typeof Object.is=="function"?Object.is:Hk;function Su(t,e){if(si(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!Yp.call(e,r)||!si(t[r],e[r]))return!1}return!0}function nw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iw(t,e){var n=nw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nw(n)}}function MP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?MP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function OP(){for(var t=window,e=Xh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xh(t.document)}return e}function e_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wk(t){var e=OP(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&MP(n.ownerDocument.documentElement,n)){if(i!==null&&e_(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=iw(n,o);var a=iw(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qk=ir&&"documentMode"in document&&11>=document.documentMode,Jo=null,gm=null,tu=null,_m=!1;function rw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_m||Jo==null||Jo!==Xh(i)||(i=Jo,"selectionStart"in i&&e_(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),tu&&Su(tu,i)||(tu=i,i=sd(gm,"onSelect"),0<i.length&&(e=new Yg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Jo)))}function oh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ea={animationend:oh("Animation","AnimationEnd"),animationiteration:oh("Animation","AnimationIteration"),animationstart:oh("Animation","AnimationStart"),transitionend:oh("Transition","TransitionEnd")},lp={},VP={};ir&&(VP=document.createElement("div").style,"AnimationEvent"in window||(delete ea.animationend.animation,delete ea.animationiteration.animation,delete ea.animationstart.animation),"TransitionEvent"in window||delete ea.transitionend.transition);function Xd(t){if(lp[t])return lp[t];if(!ea[t])return t;var e=ea[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in VP)return lp[t]=e[n];return t}var FP=Xd("animationend"),UP=Xd("animationiteration"),BP=Xd("animationstart"),zP=Xd("transitionend"),jP=new Map,sw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function us(t,e){jP.set(t,e),oo(e,[t])}for(var up=0;up<sw.length;up++){var cp=sw[up],$k=cp.toLowerCase(),Gk=cp[0].toUpperCase()+cp.slice(1);us($k,"on"+Gk)}us(FP,"onAnimationEnd");us(UP,"onAnimationIteration");us(BP,"onAnimationStart");us("dblclick","onDoubleClick");us("focusin","onFocus");us("focusout","onBlur");us(zP,"onTransitionEnd");Ia("onMouseEnter",["mouseout","mouseover"]);Ia("onMouseLeave",["mouseout","mouseover"]);Ia("onPointerEnter",["pointerout","pointerover"]);Ia("onPointerLeave",["pointerout","pointerover"]);oo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));oo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));oo("onBeforeInput",["compositionend","keypress","textInput","paste"]);oo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));oo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kk=new Set("cancel close invalid load scroll toggle".split(" ").concat(zl));function ow(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,$R(i,e,void 0,t),t.currentTarget=null}function HP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;ow(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;ow(r,u,f),o=h}}}if(ed)throw t=dm,ed=!1,dm=null,t}function We(t,e){var n=e[Em];n===void 0&&(n=e[Em]=new Set);var i=t+"__bubble";n.has(i)||(WP(e,t,2,!1),n.add(i))}function hp(t,e,n){var i=0;e&&(i|=4),WP(n,t,i,e)}var ah="_reactListening"+Math.random().toString(36).slice(2);function Iu(t){if(!t[ah]){t[ah]=!0,YE.forEach(function(n){n!=="selectionchange"&&(Kk.has(n)||hp(n,!1,t),hp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ah]||(e[ah]=!0,hp("selectionchange",!1,e))}}function WP(t,e,n,i){switch(AP(e)){case 1:var r=lk;break;case 4:r=uk;break;default:r=Zg}n=r.bind(null,e,n,t),r=void 0,!hm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function dp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Fs(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}fP(function(){var f=o,m=qg(n),_=[];e:{var v=jP.get(t);if(v!==void 0){var P=Yg,k=t;switch(t){case"keypress":if(kh(n)===0)break e;case"keydown":case"keyup":P=Sk;break;case"focusin":k="focus",P=sp;break;case"focusout":k="blur",P=sp;break;case"beforeblur":case"afterblur":P=sp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=Kv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=dk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=Ak;break;case FP:case UP:case BP:P=mk;break;case zP:P=Rk;break;case"scroll":P=ck;break;case"wheel":P=bk;break;case"copy":case"cut":case"paste":P=_k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=Qv}var b=(e&4)!==0,F=!b&&t==="scroll",x=b?v!==null?v+"Capture":null:v;b=[];for(var I=f,A;I!==null;){A=I;var B=A.stateNode;if(A.tag===5&&B!==null&&(A=B,x!==null&&(B=vu(I,x),B!=null&&b.push(xu(I,B,A)))),F)break;I=I.return}0<b.length&&(v=new P(v,k,null,n,m),_.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",P=t==="mouseout"||t==="pointerout",v&&n!==um&&(k=n.relatedTarget||n.fromElement)&&(Fs(k)||k[rr]))break e;if((P||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,P?(k=n.relatedTarget||n.toElement,P=f,k=k?Fs(k):null,k!==null&&(F=ao(k),k!==F||k.tag!==5&&k.tag!==6)&&(k=null)):(P=null,k=f),P!==k)){if(b=Kv,B="onMouseLeave",x="onMouseEnter",I="mouse",(t==="pointerout"||t==="pointerover")&&(b=Qv,B="onPointerLeave",x="onPointerEnter",I="pointer"),F=P==null?v:ta(P),A=k==null?v:ta(k),v=new b(B,I+"leave",P,n,m),v.target=F,v.relatedTarget=A,B=null,Fs(m)===f&&(b=new b(x,I+"enter",k,n,m),b.target=A,b.relatedTarget=F,B=b),F=B,P&&k)t:{for(b=P,x=k,I=0,A=b;A;A=qo(A))I++;for(A=0,B=x;B;B=qo(B))A++;for(;0<I-A;)b=qo(b),I--;for(;0<A-I;)x=qo(x),A--;for(;I--;){if(b===x||x!==null&&b===x.alternate)break t;b=qo(b),x=qo(x)}b=null}else b=null;P!==null&&aw(_,v,P,b,!1),k!==null&&F!==null&&aw(_,F,k,b,!0)}}e:{if(v=f?ta(f):window,P=v.nodeName&&v.nodeName.toLowerCase(),P==="select"||P==="input"&&v.type==="file")var q=Fk;else if(Jv(v))if(NP)q=jk;else{q=Bk;var K=Uk}else(P=v.nodeName)&&P.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=zk);if(q&&(q=q(t,f))){LP(_,q,n,m);break e}K&&K(t,v,f),t==="focusout"&&(K=v._wrapperState)&&K.controlled&&v.type==="number"&&rm(v,"number",v.value)}switch(K=f?ta(f):window,t){case"focusin":(Jv(K)||K.contentEditable==="true")&&(Jo=K,gm=f,tu=null);break;case"focusout":tu=gm=Jo=null;break;case"mousedown":_m=!0;break;case"contextmenu":case"mouseup":case"dragend":_m=!1,rw(_,n,m);break;case"selectionchange":if(qk)break;case"keydown":case"keyup":rw(_,n,m)}var C;if(Jg)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Xo?kP(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(RP&&n.locale!=="ko"&&(Xo||E!=="onCompositionStart"?E==="onCompositionEnd"&&Xo&&(C=CP()):(Or=m,Qg="value"in Or?Or.value:Or.textContent,Xo=!0)),K=sd(f,E),0<K.length&&(E=new Zv(E,t,null,n,m),_.push({event:E,listeners:K}),C?E.data=C:(C=bP(n),C!==null&&(E.data=C)))),(C=Nk?Dk(t,n):Mk(t,n))&&(f=sd(f,"onBeforeInput"),0<f.length&&(m=new Zv("onBeforeInput","beforeinput",null,n,m),_.push({event:m,listeners:f}),m.data=C))}HP(_,e)})}function xu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=vu(t,n),o!=null&&i.unshift(xu(t,o,r)),o=vu(t,e),o!=null&&i.push(xu(t,o,r))),t=t.return}return i}function qo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aw(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=vu(n,o),h!=null&&a.unshift(xu(n,h,u))):r||(h=vu(n,o),h!=null&&a.push(xu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Zk=/\r\n?/g,Qk=/\u0000|\uFFFD/g;function lw(t){return(typeof t=="string"?t:""+t).replace(Zk,`
`).replace(Qk,"")}function lh(t,e,n){if(e=lw(e),lw(t)!==e&&n)throw Error(X(425))}function od(){}var ym=null,vm=null;function wm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Tm=typeof setTimeout=="function"?setTimeout:void 0,Yk=typeof clearTimeout=="function"?clearTimeout:void 0,uw=typeof Promise=="function"?Promise:void 0,Xk=typeof queueMicrotask=="function"?queueMicrotask:typeof uw<"u"?function(t){return uw.resolve(null).then(t).catch(Jk)}:Tm;function Jk(t){setTimeout(function(){throw t})}function fp(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Eu(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Eu(e)}function jr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ha=Math.random().toString(36).slice(2),vi="__reactFiber$"+Ha,Au="__reactProps$"+Ha,rr="__reactContainer$"+Ha,Em="__reactEvents$"+Ha,eb="__reactListeners$"+Ha,tb="__reactHandles$"+Ha;function Fs(t){var e=t[vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rr]||n[vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cw(t);t!==null;){if(n=t[vi])return n;t=cw(t)}return e}t=n,n=t.parentNode}return null}function Xu(t){return t=t[vi]||t[rr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ta(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Jd(t){return t[Au]||null}var Pm=[],na=-1;function cs(t){return{current:t}}function qe(t){0>na||(t.current=Pm[na],Pm[na]=null,na--)}function He(t,e){na++,Pm[na]=t.current,t.current=e}var Xr={},$t=cs(Xr),cn=cs(!1),Ks=Xr;function xa(t,e){var n=t.type.contextTypes;if(!n)return Xr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function hn(t){return t=t.childContextTypes,t!=null}function ad(){qe(cn),qe($t)}function hw(t,e,n){if($t.current!==Xr)throw Error(X(168));He($t,e),He(cn,n)}function qP(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,UR(t)||"Unknown",r));return Ye({},n,i)}function ld(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xr,Ks=$t.current,He($t,t),He(cn,cn.current),!0}function dw(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=qP(t,e,Ks),i.__reactInternalMemoizedMergedChildContext=t,qe(cn),qe($t),He($t,t)):qe(cn),He(cn,n)}var Gi=null,ef=!1,pp=!1;function $P(t){Gi===null?Gi=[t]:Gi.push(t)}function nb(t){ef=!0,$P(t)}function hs(){if(!pp&&Gi!==null){pp=!0;var t=0,e=Fe;try{var n=Gi;for(Fe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Gi=null,ef=!1}catch(r){throw Gi!==null&&(Gi=Gi.slice(t+1)),_P($g,hs),r}finally{Fe=e,pp=!1}}return null}var ia=[],ra=0,ud=null,cd=0,On=[],Vn=0,Zs=null,Ki=1,Zi="";function Ns(t,e){ia[ra++]=cd,ia[ra++]=ud,ud=t,cd=e}function GP(t,e,n){On[Vn++]=Ki,On[Vn++]=Zi,On[Vn++]=Zs,Zs=t;var i=Ki;t=Zi;var r=32-ni(i)-1;i&=~(1<<r),n+=1;var o=32-ni(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Ki=1<<32-ni(e)+r|n<<r|i,Zi=o+t}else Ki=1<<o|n<<r|i,Zi=t}function t_(t){t.return!==null&&(Ns(t,1),GP(t,1,0))}function n_(t){for(;t===ud;)ud=ia[--ra],ia[ra]=null,cd=ia[--ra],ia[ra]=null;for(;t===Zs;)Zs=On[--Vn],On[Vn]=null,Zi=On[--Vn],On[Vn]=null,Ki=On[--Vn],On[Vn]=null}var vn=null,_n=null,Ge=!1,Jn=null;function KP(t,e){var n=Bn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vn=t,_n=jr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vn=t,_n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zs!==null?{id:Ki,overflow:Zi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Bn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vn=t,_n=null,!0):!1;default:return!1}}function Sm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Im(t){if(Ge){var e=_n;if(e){var n=e;if(!fw(t,e)){if(Sm(t))throw Error(X(418));e=jr(n.nextSibling);var i=vn;e&&fw(t,e)?KP(i,n):(t.flags=t.flags&-4097|2,Ge=!1,vn=t)}}else{if(Sm(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ge=!1,vn=t}}}function pw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vn=t}function uh(t){if(t!==vn)return!1;if(!Ge)return pw(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wm(t.type,t.memoizedProps)),e&&(e=_n)){if(Sm(t))throw ZP(),Error(X(418));for(;e;)KP(t,e),e=jr(e.nextSibling)}if(pw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_n=jr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_n=null}}else _n=vn?jr(t.stateNode.nextSibling):null;return!0}function ZP(){for(var t=_n;t;)t=jr(t.nextSibling)}function Aa(){_n=vn=null,Ge=!1}function i_(t){Jn===null?Jn=[t]:Jn.push(t)}var ib=dr.ReactCurrentBatchConfig;function Nl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function ch(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mw(t){var e=t._init;return e(t._payload)}function QP(t){function e(x,I){if(t){var A=x.deletions;A===null?(x.deletions=[I],x.flags|=16):A.push(I)}}function n(x,I){if(!t)return null;for(;I!==null;)e(x,I),I=I.sibling;return null}function i(x,I){for(x=new Map;I!==null;)I.key!==null?x.set(I.key,I):x.set(I.index,I),I=I.sibling;return x}function r(x,I){return x=$r(x,I),x.index=0,x.sibling=null,x}function o(x,I,A){return x.index=A,t?(A=x.alternate,A!==null?(A=A.index,A<I?(x.flags|=2,I):A):(x.flags|=2,I)):(x.flags|=1048576,I)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function u(x,I,A,B){return I===null||I.tag!==6?(I=Tp(A,x.mode,B),I.return=x,I):(I=r(I,A),I.return=x,I)}function h(x,I,A,B){var q=A.type;return q===Yo?m(x,I,A.props.children,B,A.key):I!==null&&(I.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ar&&mw(q)===I.type)?(B=r(I,A.props),B.ref=Nl(x,I,A),B.return=x,B):(B=Vh(A.type,A.key,A.props,null,x.mode,B),B.ref=Nl(x,I,A),B.return=x,B)}function f(x,I,A,B){return I===null||I.tag!==4||I.stateNode.containerInfo!==A.containerInfo||I.stateNode.implementation!==A.implementation?(I=Ep(A,x.mode,B),I.return=x,I):(I=r(I,A.children||[]),I.return=x,I)}function m(x,I,A,B,q){return I===null||I.tag!==7?(I=Ws(A,x.mode,B,q),I.return=x,I):(I=r(I,A),I.return=x,I)}function _(x,I,A){if(typeof I=="string"&&I!==""||typeof I=="number")return I=Tp(""+I,x.mode,A),I.return=x,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Jc:return A=Vh(I.type,I.key,I.props,null,x.mode,A),A.ref=Nl(x,null,I),A.return=x,A;case Qo:return I=Ep(I,x.mode,A),I.return=x,I;case Ar:var B=I._init;return _(x,B(I._payload),A)}if(Ul(I)||Cl(I))return I=Ws(I,x.mode,A,null),I.return=x,I;ch(x,I)}return null}function v(x,I,A,B){var q=I!==null?I.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return q!==null?null:u(x,I,""+A,B);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Jc:return A.key===q?h(x,I,A,B):null;case Qo:return A.key===q?f(x,I,A,B):null;case Ar:return q=A._init,v(x,I,q(A._payload),B)}if(Ul(A)||Cl(A))return q!==null?null:m(x,I,A,B,null);ch(x,A)}return null}function P(x,I,A,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return x=x.get(A)||null,u(I,x,""+B,q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case Jc:return x=x.get(B.key===null?A:B.key)||null,h(I,x,B,q);case Qo:return x=x.get(B.key===null?A:B.key)||null,f(I,x,B,q);case Ar:var K=B._init;return P(x,I,A,K(B._payload),q)}if(Ul(B)||Cl(B))return x=x.get(A)||null,m(I,x,B,q,null);ch(I,B)}return null}function k(x,I,A,B){for(var q=null,K=null,C=I,E=I=0,R=null;C!==null&&E<A.length;E++){C.index>E?(R=C,C=null):R=C.sibling;var N=v(x,C,A[E],B);if(N===null){C===null&&(C=R);break}t&&C&&N.alternate===null&&e(x,C),I=o(N,I,E),K===null?q=N:K.sibling=N,K=N,C=R}if(E===A.length)return n(x,C),Ge&&Ns(x,E),q;if(C===null){for(;E<A.length;E++)C=_(x,A[E],B),C!==null&&(I=o(C,I,E),K===null?q=C:K.sibling=C,K=C);return Ge&&Ns(x,E),q}for(C=i(x,C);E<A.length;E++)R=P(C,x,E,A[E],B),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?E:R.key),I=o(R,I,E),K===null?q=R:K.sibling=R,K=R);return t&&C.forEach(function(O){return e(x,O)}),Ge&&Ns(x,E),q}function b(x,I,A,B){var q=Cl(A);if(typeof q!="function")throw Error(X(150));if(A=q.call(A),A==null)throw Error(X(151));for(var K=q=null,C=I,E=I=0,R=null,N=A.next();C!==null&&!N.done;E++,N=A.next()){C.index>E?(R=C,C=null):R=C.sibling;var O=v(x,C,N.value,B);if(O===null){C===null&&(C=R);break}t&&C&&O.alternate===null&&e(x,C),I=o(O,I,E),K===null?q=O:K.sibling=O,K=O,C=R}if(N.done)return n(x,C),Ge&&Ns(x,E),q;if(C===null){for(;!N.done;E++,N=A.next())N=_(x,N.value,B),N!==null&&(I=o(N,I,E),K===null?q=N:K.sibling=N,K=N);return Ge&&Ns(x,E),q}for(C=i(x,C);!N.done;E++,N=A.next())N=P(C,x,E,N.value,B),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?E:N.key),I=o(N,I,E),K===null?q=N:K.sibling=N,K=N);return t&&C.forEach(function(U){return e(x,U)}),Ge&&Ns(x,E),q}function F(x,I,A,B){if(typeof A=="object"&&A!==null&&A.type===Yo&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Jc:e:{for(var q=A.key,K=I;K!==null;){if(K.key===q){if(q=A.type,q===Yo){if(K.tag===7){n(x,K.sibling),I=r(K,A.props.children),I.return=x,x=I;break e}}else if(K.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Ar&&mw(q)===K.type){n(x,K.sibling),I=r(K,A.props),I.ref=Nl(x,K,A),I.return=x,x=I;break e}n(x,K);break}else e(x,K);K=K.sibling}A.type===Yo?(I=Ws(A.props.children,x.mode,B,A.key),I.return=x,x=I):(B=Vh(A.type,A.key,A.props,null,x.mode,B),B.ref=Nl(x,I,A),B.return=x,x=B)}return a(x);case Qo:e:{for(K=A.key;I!==null;){if(I.key===K)if(I.tag===4&&I.stateNode.containerInfo===A.containerInfo&&I.stateNode.implementation===A.implementation){n(x,I.sibling),I=r(I,A.children||[]),I.return=x,x=I;break e}else{n(x,I);break}else e(x,I);I=I.sibling}I=Ep(A,x.mode,B),I.return=x,x=I}return a(x);case Ar:return K=A._init,F(x,I,K(A._payload),B)}if(Ul(A))return k(x,I,A,B);if(Cl(A))return b(x,I,A,B);ch(x,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,I!==null&&I.tag===6?(n(x,I.sibling),I=r(I,A),I.return=x,x=I):(n(x,I),I=Tp(A,x.mode,B),I.return=x,x=I),a(x)):n(x,I)}return F}var Ca=QP(!0),YP=QP(!1),hd=cs(null),dd=null,sa=null,r_=null;function s_(){r_=sa=dd=null}function o_(t){var e=hd.current;qe(hd),t._currentValue=e}function xm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ya(t,e){dd=t,r_=sa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(un=!0),t.firstContext=null)}function jn(t){var e=t._currentValue;if(r_!==t)if(t={context:t,memoizedValue:e,next:null},sa===null){if(dd===null)throw Error(X(308));sa=t,dd.dependencies={lanes:0,firstContext:t}}else sa=sa.next=t;return e}var Us=null;function a_(t){Us===null?Us=[t]:Us.push(t)}function XP(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,a_(e)):(n.next=r.next,r.next=n),e.interleaved=n,sr(t,i)}function sr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Cr=!1;function l_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function JP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,sr(t,n)}return r=i.interleaved,r===null?(e.next=e,a_(i)):(e.next=r.next,r.next=e),i.interleaved=e,sr(t,n)}function bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Gg(t,n)}}function gw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fd(t,e,n,i){var r=t.updateQueue;Cr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var _=r.baseState;a=0,m=f=h=null,u=o;do{var v=u.lane,P=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:P,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,b=u;switch(v=e,P=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){_=k.call(P,_,v);break e}_=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,v=typeof k=="function"?k.call(P,_,v):k,v==null)break e;_=Ye({},_,v);break e;case 2:Cr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else P={eventTime:P,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=P,h=_):m=m.next=P,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(h=_),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);Ys|=a,t.lanes=a,t.memoizedState=_}}function _w(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var Ju={},Ei=cs(Ju),Cu=cs(Ju),Ru=cs(Ju);function Bs(t){if(t===Ju)throw Error(X(174));return t}function u_(t,e){switch(He(Ru,e),He(Cu,t),He(Ei,Ju),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:om(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=om(e,t)}qe(Ei),He(Ei,e)}function Ra(){qe(Ei),qe(Cu),qe(Ru)}function eS(t){Bs(Ru.current);var e=Bs(Ei.current),n=om(e,t.type);e!==n&&(He(Cu,t),He(Ei,n))}function c_(t){Cu.current===t&&(qe(Ei),qe(Cu))}var Ke=cs(0);function pd(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var mp=[];function h_(){for(var t=0;t<mp.length;t++)mp[t]._workInProgressVersionPrimary=null;mp.length=0}var Lh=dr.ReactCurrentDispatcher,gp=dr.ReactCurrentBatchConfig,Qs=0,Qe=null,_t=null,At=null,md=!1,nu=!1,ku=0,rb=0;function Ft(){throw Error(X(321))}function d_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function f_(t,e,n,i,r,o){if(Qs=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lh.current=t===null||t.memoizedState===null?lb:ub,t=n(i,r),nu){o=0;do{if(nu=!1,ku=0,25<=o)throw Error(X(301));o+=1,At=_t=null,e.updateQueue=null,Lh.current=cb,t=n(i,r)}while(nu)}if(Lh.current=gd,e=_t!==null&&_t.next!==null,Qs=0,At=_t=Qe=null,md=!1,e)throw Error(X(300));return t}function p_(){var t=ku!==0;return ku=0,t}function _i(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return At===null?Qe.memoizedState=At=t:At=At.next=t,At}function Hn(){if(_t===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=At===null?Qe.memoizedState:At.next;if(e!==null)At=e,_t=t;else{if(t===null)throw Error(X(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},At===null?Qe.memoizedState=At=t:At=At.next=t}return At}function bu(t,e){return typeof e=="function"?e(t):e}function _p(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=_t,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((Qs&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var _={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=_,a=i):h=h.next=_,Qe.lanes|=m,Ys|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,si(i,e.memoizedState)||(un=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Qe.lanes|=o,Ys|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function yp(t){var e=Hn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);si(o,e.memoizedState)||(un=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function tS(){}function nS(t,e){var n=Qe,i=Hn(),r=e(),o=!si(i.memoizedState,r);if(o&&(i.memoizedState=r,un=!0),i=i.queue,m_(sS.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||At!==null&&At.memoizedState.tag&1){if(n.flags|=2048,Lu(9,rS.bind(null,n,i,r,e),void 0,null),Ct===null)throw Error(X(349));Qs&30||iS(n,e,r)}return r}function iS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rS(t,e,n,i){e.value=n,e.getSnapshot=i,oS(e)&&aS(t)}function sS(t,e,n){return n(function(){oS(e)&&aS(t)})}function oS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!si(t,n)}catch{return!0}}function aS(t){var e=sr(t,1);e!==null&&ii(e,t,1,-1)}function yw(t){var e=_i();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:t},e.queue=t,t=t.dispatch=ab.bind(null,Qe,t),[e.memoizedState,t]}function Lu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function lS(){return Hn().memoizedState}function Nh(t,e,n,i){var r=_i();Qe.flags|=t,r.memoizedState=Lu(1|e,n,void 0,i===void 0?null:i)}function tf(t,e,n,i){var r=Hn();i=i===void 0?null:i;var o=void 0;if(_t!==null){var a=_t.memoizedState;if(o=a.destroy,i!==null&&d_(i,a.deps)){r.memoizedState=Lu(e,n,o,i);return}}Qe.flags|=t,r.memoizedState=Lu(1|e,n,o,i)}function vw(t,e){return Nh(8390656,8,t,e)}function m_(t,e){return tf(2048,8,t,e)}function uS(t,e){return tf(4,2,t,e)}function cS(t,e){return tf(4,4,t,e)}function hS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dS(t,e,n){return n=n!=null?n.concat([t]):null,tf(4,4,hS.bind(null,e,t),n)}function g_(){}function fS(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&d_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function pS(t,e){var n=Hn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&d_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function mS(t,e,n){return Qs&21?(si(n,e)||(n=wP(),Qe.lanes|=n,Ys|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,un=!0),t.memoizedState=n)}function sb(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var i=gp.transition;gp.transition={};try{t(!1),e()}finally{Fe=n,gp.transition=i}}function gS(){return Hn().memoizedState}function ob(t,e,n){var i=qr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},_S(t))yS(e,n);else if(n=XP(t,e,n,i),n!==null){var r=Jt();ii(n,t,i,r),vS(n,e,i)}}function ab(t,e,n){var i=qr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(_S(t))yS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,si(u,a)){var h=e.interleaved;h===null?(r.next=r,a_(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=XP(t,e,r,i),n!==null&&(r=Jt(),ii(n,t,i,r),vS(n,e,i))}}function _S(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function yS(t,e){nu=md=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Gg(t,n)}}var gd={readContext:jn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},lb={readContext:jn,useCallback:function(t,e){return _i().memoizedState=[t,e===void 0?null:e],t},useContext:jn,useEffect:vw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Nh(4194308,4,hS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Nh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Nh(4,2,t,e)},useMemo:function(t,e){var n=_i();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=_i();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ob.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=_i();return t={current:t},e.memoizedState=t},useState:yw,useDebugValue:g_,useDeferredValue:function(t){return _i().memoizedState=t},useTransition:function(){var t=yw(!1),e=t[0];return t=sb.bind(null,t[1]),_i().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Qe,r=_i();if(Ge){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ct===null)throw Error(X(349));Qs&30||iS(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,vw(sS.bind(null,i,o,t),[t]),i.flags|=2048,Lu(9,rS.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=_i(),e=Ct.identifierPrefix;if(Ge){var n=Zi,i=Ki;n=(i&~(1<<32-ni(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ku++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ub={readContext:jn,useCallback:fS,useContext:jn,useEffect:m_,useImperativeHandle:dS,useInsertionEffect:uS,useLayoutEffect:cS,useMemo:pS,useReducer:_p,useRef:lS,useState:function(){return _p(bu)},useDebugValue:g_,useDeferredValue:function(t){var e=Hn();return mS(e,_t.memoizedState,t)},useTransition:function(){var t=_p(bu)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:nS,useId:gS,unstable_isNewReconciler:!1},cb={readContext:jn,useCallback:fS,useContext:jn,useEffect:m_,useImperativeHandle:dS,useInsertionEffect:uS,useLayoutEffect:cS,useMemo:pS,useReducer:yp,useRef:lS,useState:function(){return yp(bu)},useDebugValue:g_,useDeferredValue:function(t){var e=Hn();return _t===null?e.memoizedState=t:mS(e,_t.memoizedState,t)},useTransition:function(){var t=yp(bu)[0],e=Hn().memoizedState;return[t,e]},useMutableSource:tS,useSyncExternalStore:nS,useId:gS,unstable_isNewReconciler:!1};function Yn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Am(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var nf={isMounted:function(t){return(t=t._reactInternals)?ao(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=qr(t),o=Xi(i,r);o.payload=e,n!=null&&(o.callback=n),e=Hr(t,o,r),e!==null&&(ii(e,t,r,i),bh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=qr(t),o=Xi(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Hr(t,o,r),e!==null&&(ii(e,t,r,i),bh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=qr(t),r=Xi(n,i);r.tag=2,e!=null&&(r.callback=e),e=Hr(t,r,i),e!==null&&(ii(e,t,i,n),bh(e,t,i))}};function ww(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Su(n,i)||!Su(r,o):!0}function wS(t,e,n){var i=!1,r=Xr,o=e.contextType;return typeof o=="object"&&o!==null?o=jn(o):(r=hn(e)?Ks:$t.current,i=e.contextTypes,o=(i=i!=null)?xa(t,r):Xr),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function Tw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&nf.enqueueReplaceState(e,e.state,null)}function Cm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},l_(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=jn(o):(o=hn(e)?Ks:$t.current,r.context=xa(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Am(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&nf.enqueueReplaceState(r,r.state,null),fd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function ka(t,e){try{var n="",i=e;do n+=FR(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function vp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hb=typeof WeakMap=="function"?WeakMap:Map;function TS(t,e,n){n=Xi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){yd||(yd=!0,Um=i),Rm(t,e)},n}function ES(t,e,n){n=Xi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Rm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Rm(t,e),typeof i!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ew(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new hb;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=Ib.bind(null,t,e,n),e.then(t,t))}function Pw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sw(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xi(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var db=dr.ReactCurrentOwner,un=!1;function Xt(t,e,n,i){e.child=t===null?YP(e,null,n,i):Ca(e,t.child,n,i)}function Iw(t,e,n,i,r){n=n.render;var o=e.ref;return ya(e,r),i=f_(t,e,n,i,o,r),n=p_(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,or(t,e,r)):(Ge&&n&&t_(e),e.flags|=1,Xt(t,e,i,r),e.child)}function xw(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!S_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,PS(t,e,o,i,r)):(t=Vh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Su,n(a,i)&&t.ref===e.ref)return or(t,e,r)}return e.flags|=1,t=$r(o,i),t.ref=e.ref,t.return=e,e.child=t}function PS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Su(o,i)&&t.ref===e.ref)if(un=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(un=!0);else return e.lanes=t.lanes,or(t,e,r)}return km(t,e,n,i,r)}function SS(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(aa,mn),mn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(aa,mn),mn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,He(aa,mn),mn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,He(aa,mn),mn|=i;return Xt(t,e,r,n),e.child}function IS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function km(t,e,n,i,r){var o=hn(n)?Ks:$t.current;return o=xa(e,o),ya(e,r),n=f_(t,e,n,i,o,r),i=p_(),t!==null&&!un?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,or(t,e,r)):(Ge&&i&&t_(e),e.flags|=1,Xt(t,e,n,r),e.child)}function Aw(t,e,n,i,r){if(hn(n)){var o=!0;ld(e)}else o=!1;if(ya(e,r),e.stateNode===null)Dh(t,e),wS(e,n,i),Cm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=jn(f):(f=hn(n)?Ks:$t.current,f=xa(e,f));var m=n.getDerivedStateFromProps,_=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&Tw(e,a,i,f),Cr=!1;var v=e.memoizedState;a.state=v,fd(e,i,a,r),h=e.memoizedState,u!==i||v!==h||cn.current||Cr?(typeof m=="function"&&(Am(e,n,m,i),h=e.memoizedState),(u=Cr||ww(e,n,u,i,v,h,f))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,JP(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:Yn(e.type,u),a.props=f,_=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=jn(h):(h=hn(n)?Ks:$t.current,h=xa(e,h));var P=n.getDerivedStateFromProps;(m=typeof P=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==_||v!==h)&&Tw(e,a,i,h),Cr=!1,v=e.memoizedState,a.state=v,fd(e,i,a,r);var k=e.memoizedState;u!==_||v!==k||cn.current||Cr?(typeof P=="function"&&(Am(e,n,P,i),k=e.memoizedState),(f=Cr||ww(e,n,f,i,v,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return bm(t,e,n,i,o,r)}function bm(t,e,n,i,r,o){IS(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&dw(e,n,!1),or(t,e,o);i=e.stateNode,db.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Ca(e,t.child,null,o),e.child=Ca(e,null,u,o)):Xt(t,e,u,o),e.memoizedState=i.state,r&&dw(e,n,!0),e.child}function xS(t){var e=t.stateNode;e.pendingContext?hw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hw(t,e.context,!1),u_(t,e.containerInfo)}function Cw(t,e,n,i,r){return Aa(),i_(r),e.flags|=256,Xt(t,e,n,i),e.child}var Lm={dehydrated:null,treeContext:null,retryLane:0};function Nm(t){return{baseLanes:t,cachePool:null,transitions:null}}function AS(t,e,n){var i=e.pendingProps,r=Ke.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),He(Ke,r&1),t===null)return Im(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=of(a,i,0,null),t=Ws(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Nm(n),e.memoizedState=Lm,t):__(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return fb(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=$r(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=$r(u,o):(o=Ws(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Nm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Lm,i}return o=t.child,t=o.sibling,i=$r(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function __(t,e){return e=of({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hh(t,e,n,i){return i!==null&&i_(i),Ca(e,t.child,null,n),t=__(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fb(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=vp(Error(X(422))),hh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=of({mode:"visible",children:i.children},r,0,null),o=Ws(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ca(e,t.child,null,a),e.child.memoizedState=Nm(a),e.memoizedState=Lm,o);if(!(e.mode&1))return hh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=vp(o,i,void 0),hh(t,e,a,i)}if(u=(a&t.childLanes)!==0,un||u){if(i=Ct,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,sr(t,r),ii(i,t,r,-1))}return P_(),i=vp(Error(X(421))),hh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=xb.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,_n=jr(r.nextSibling),vn=e,Ge=!0,Jn=null,t!==null&&(On[Vn++]=Ki,On[Vn++]=Zi,On[Vn++]=Zs,Ki=t.id,Zi=t.overflow,Zs=e),e=__(e,i.children),e.flags|=4096,e)}function Rw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),xm(t.return,e,n)}function wp(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function CS(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Xt(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rw(t,n,e);else if(t.tag===19)Rw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(He(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&pd(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),wp(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pd(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}wp(e,!0,n,null,o);break;case"together":wp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Dh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ys|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pb(t,e,n){switch(e.tag){case 3:xS(e),Aa();break;case 5:eS(e);break;case 1:hn(e.type)&&ld(e);break;case 4:u_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;He(hd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(He(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?AS(t,e,n):(He(Ke,Ke.current&1),t=or(t,e,n),t!==null?t.sibling:null);He(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return CS(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),He(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,SS(t,e,n)}return or(t,e,n)}var RS,Dm,kS,bS;RS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Dm=function(){};kS=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Bs(Ei.current);var o=null;switch(n){case"input":r=nm(t,r),i=nm(t,i),o=[];break;case"select":r=Ye({},r,{value:void 0}),i=Ye({},i,{value:void 0}),o=[];break;case"textarea":r=sm(t,r),i=sm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=od)}am(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(_u.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(_u.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&We("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};bS=function(t,e,n,i){n!==i&&(e.flags|=4)};function Dl(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function mb(t,e,n){var i=e.pendingProps;switch(n_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return hn(e.type)&&ad(),Ut(e),null;case 3:return i=e.stateNode,Ra(),qe(cn),qe($t),h_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(uh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(jm(Jn),Jn=null))),Dm(t,e),Ut(e),null;case 5:c_(e);var r=Bs(Ru.current);if(n=e.type,t!==null&&e.stateNode!=null)kS(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Ut(e),null}if(t=Bs(Ei.current),uh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[vi]=e,i[Au]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(r=0;r<zl.length;r++)We(zl[r],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":Fv(i,o),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},We("invalid",i);break;case"textarea":Bv(i,o),We("invalid",i)}am(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&lh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&lh(i.textContent,u,t),r=["children",""+u]):_u.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&We("scroll",i)}switch(n){case"input":eh(i),Uv(i,o,!0);break;case"textarea":eh(i),zv(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=od)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=sP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[vi]=e,t[Au]=i,RS(t,e,!1,!1),e.stateNode=t;e:{switch(a=lm(n,i),n){case"dialog":We("cancel",t),We("close",t),r=i;break;case"iframe":case"object":case"embed":We("load",t),r=i;break;case"video":case"audio":for(r=0;r<zl.length;r++)We(zl[r],t);r=i;break;case"source":We("error",t),r=i;break;case"img":case"image":case"link":We("error",t),We("load",t),r=i;break;case"details":We("toggle",t),r=i;break;case"input":Fv(t,i),r=nm(t,i),We("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ye({},i,{value:void 0}),We("invalid",t);break;case"textarea":Bv(t,i),r=sm(t,i),We("invalid",t);break;default:r=i}am(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?lP(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&oP(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&yu(t,h):typeof h=="number"&&yu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(_u.hasOwnProperty(o)?h!=null&&o==="onScroll"&&We("scroll",t):h!=null&&zg(t,o,h,a))}switch(n){case"input":eh(t),Uv(t,i,!1);break;case"textarea":eh(t),zv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Yr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?pa(t,!!i.multiple,o,!1):i.defaultValue!=null&&pa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=od)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)bS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=Bs(Ru.current),Bs(Ei.current),uh(e)){if(i=e.stateNode,n=e.memoizedProps,i[vi]=e,(o=i.nodeValue!==n)&&(t=vn,t!==null))switch(t.tag){case 3:lh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[vi]=e,e.stateNode=i}return Ut(e),null;case 13:if(qe(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&_n!==null&&e.mode&1&&!(e.flags&128))ZP(),Aa(),e.flags|=98560,o=!1;else if(o=uh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[vi]=e}else Aa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),o=!1}else Jn!==null&&(jm(Jn),Jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?yt===0&&(yt=3):P_())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Ra(),Dm(t,e),t===null&&Iu(e.stateNode.containerInfo),Ut(e),null;case 10:return o_(e.type._context),Ut(e),null;case 17:return hn(e.type)&&ad(),Ut(e),null;case 19:if(qe(Ke),o=e.memoizedState,o===null)return Ut(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)Dl(o,!1);else{if(yt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=pd(t),a!==null){for(e.flags|=128,Dl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&lt()>ba&&(e.flags|=128,i=!0,Dl(o,!1),e.lanes=4194304)}else{if(!i)if(t=pd(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Dl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ge)return Ut(e),null}else 2*lt()-o.renderingStartTime>ba&&n!==1073741824&&(e.flags|=128,i=!0,Dl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=lt(),e.sibling=null,n=Ke.current,He(Ke,i?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return E_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?mn&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function gb(t,e){switch(n_(e),e.tag){case 1:return hn(e.type)&&ad(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ra(),qe(cn),qe($t),h_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return c_(e),null;case 13:if(qe(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Aa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ke),null;case 4:return Ra(),null;case 10:return o_(e.type._context),null;case 22:case 23:return E_(),null;case 24:return null;default:return null}}var dh=!1,Ht=!1,_b=typeof WeakSet=="function"?WeakSet:Set,se=null;function oa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){nt(t,e,i)}else n.current=null}function Mm(t,e,n){try{n()}catch(i){nt(t,e,i)}}var kw=!1;function yb(t,e){if(ym=id,t=OP(),e_(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,_=t,v=null;t:for(;;){for(var P;_!==n||r!==0&&_.nodeType!==3||(u=a+r),_!==o||i!==0&&_.nodeType!==3||(h=a+i),_.nodeType===3&&(a+=_.nodeValue.length),(P=_.firstChild)!==null;)v=_,_=P;for(;;){if(_===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++m===i&&(h=a),(P=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=P}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(vm={focusedElem:t,selectionRange:n},id=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,F=k.memoizedState,x=e.stateNode,I=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:Yn(e.type,b),F);x.__reactInternalSnapshotBeforeUpdate=I}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(B){nt(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return k=kw,kw=!1,k}function iu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Mm(e,n,o)}r=r.next}while(r!==i)}}function rf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Om(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LS(t){var e=t.alternate;e!==null&&(t.alternate=null,LS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vi],delete e[Au],delete e[Em],delete e[eb],delete e[tb])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NS(t){return t.tag===5||t.tag===3||t.tag===4}function bw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=od));else if(i!==4&&(t=t.child,t!==null))for(Vm(t,e,n),t=t.sibling;t!==null;)Vm(t,e,n),t=t.sibling}function Fm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Fm(t,e,n),t=t.sibling;t!==null;)Fm(t,e,n),t=t.sibling}var kt=null,Xn=!1;function Sr(t,e,n){for(n=n.child;n!==null;)DS(t,e,n),n=n.sibling}function DS(t,e,n){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(Zd,n)}catch{}switch(n.tag){case 5:Ht||oa(n,e);case 6:var i=kt,r=Xn;kt=null,Sr(t,e,n),kt=i,Xn=r,kt!==null&&(Xn?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(Xn?(t=kt,n=n.stateNode,t.nodeType===8?fp(t.parentNode,n):t.nodeType===1&&fp(t,n),Eu(t)):fp(kt,n.stateNode));break;case 4:i=kt,r=Xn,kt=n.stateNode.containerInfo,Xn=!0,Sr(t,e,n),kt=i,Xn=r;break;case 0:case 11:case 14:case 15:if(!Ht&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Mm(n,e,a),r=r.next}while(r!==i)}Sr(t,e,n);break;case 1:if(!Ht&&(oa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){nt(n,e,u)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(Ht=(i=Ht)||n.memoizedState!==null,Sr(t,e,n),Ht=i):Sr(t,e,n);break;default:Sr(t,e,n)}}function Lw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _b),e.forEach(function(i){var r=Ab.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Zn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:kt=u.stateNode,Xn=!1;break e;case 3:kt=u.stateNode.containerInfo,Xn=!0;break e;case 4:kt=u.stateNode.containerInfo,Xn=!0;break e}u=u.return}if(kt===null)throw Error(X(160));DS(o,a,r),kt=null,Xn=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){nt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MS(e,t),e=e.sibling}function MS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zn(e,t),gi(t),i&4){try{iu(3,t,t.return),rf(3,t)}catch(b){nt(t,t.return,b)}try{iu(5,t,t.return)}catch(b){nt(t,t.return,b)}}break;case 1:Zn(e,t),gi(t),i&512&&n!==null&&oa(n,n.return);break;case 5:if(Zn(e,t),gi(t),i&512&&n!==null&&oa(n,n.return),t.flags&32){var r=t.stateNode;try{yu(r,"")}catch(b){nt(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&iP(r,o),lm(u,a);var f=lm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],_=h[a+1];m==="style"?lP(r,_):m==="dangerouslySetInnerHTML"?oP(r,_):m==="children"?yu(r,_):zg(r,m,_,f)}switch(u){case"input":im(r,o);break;case"textarea":rP(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var P=o.value;P!=null?pa(r,!!o.multiple,P,!1):v!==!!o.multiple&&(o.defaultValue!=null?pa(r,!!o.multiple,o.defaultValue,!0):pa(r,!!o.multiple,o.multiple?[]:"",!1))}r[Au]=o}catch(b){nt(t,t.return,b)}}break;case 6:if(Zn(e,t),gi(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){nt(t,t.return,b)}}break;case 3:if(Zn(e,t),gi(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Eu(e.containerInfo)}catch(b){nt(t,t.return,b)}break;case 4:Zn(e,t),gi(t);break;case 13:Zn(e,t),gi(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(w_=lt())),i&4&&Lw(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(f=Ht)||m,Zn(e,t),Ht=f):Zn(e,t),gi(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(se=t,m=t.child;m!==null;){for(_=se=m;se!==null;){switch(v=se,P=v.child,v.tag){case 0:case 11:case 14:case 15:iu(4,v,v.return);break;case 1:oa(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){nt(i,n,b)}}break;case 5:oa(v,v.return);break;case 22:if(v.memoizedState!==null){Dw(_);continue}}P!==null?(P.return=v,se=P):Dw(_)}m=m.sibling}e:for(m=null,_=t;;){if(_.tag===5){if(m===null){m=_;try{r=_.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=_.stateNode,h=_.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=aP("display",a))}catch(b){nt(t,t.return,b)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=f?"":_.memoizedProps}catch(b){nt(t,t.return,b)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:Zn(e,t),gi(t),i&4&&Lw(t);break;case 21:break;default:Zn(e,t),gi(t)}}function gi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NS(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(yu(r,""),i.flags&=-33);var o=bw(t);Fm(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=bw(t);Vm(t,u,a);break;default:throw Error(X(161))}}catch(h){nt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vb(t,e,n){se=t,OS(t)}function OS(t,e,n){for(var i=(t.mode&1)!==0;se!==null;){var r=se,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||dh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Ht;u=dh;var f=Ht;if(dh=a,(Ht=h)&&!f)for(se=r;se!==null;)a=se,h=a.child,a.tag===22&&a.memoizedState!==null?Mw(r):h!==null?(h.return=a,se=h):Mw(r);for(;o!==null;)se=o,OS(o),o=o.sibling;se=r,dh=u,Ht=f}Nw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,se=o):Nw(t)}}function Nw(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||rf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ht)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:Yn(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&_w(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_w(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&Eu(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Ht||e.flags&512&&Om(e)}catch(v){nt(e,e.return,v)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function Dw(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function Mw(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rf(4,e)}catch(h){nt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){nt(e,r,h)}}var o=e.return;try{Om(e)}catch(h){nt(e,o,h)}break;case 5:var a=e.return;try{Om(e)}catch(h){nt(e,a,h)}}}catch(h){nt(e,e.return,h)}if(e===t){se=null;break}var u=e.sibling;if(u!==null){u.return=e.return,se=u;break}se=e.return}}var wb=Math.ceil,_d=dr.ReactCurrentDispatcher,y_=dr.ReactCurrentOwner,zn=dr.ReactCurrentBatchConfig,ke=0,Ct=null,ft=null,Dt=0,mn=0,aa=cs(0),yt=0,Nu=null,Ys=0,sf=0,v_=0,ru=null,ln=null,w_=0,ba=1/0,$i=null,yd=!1,Um=null,Wr=null,fh=!1,Vr=null,vd=0,su=0,Bm=null,Mh=-1,Oh=0;function Jt(){return ke&6?lt():Mh!==-1?Mh:Mh=lt()}function qr(t){return t.mode&1?ke&2&&Dt!==0?Dt&-Dt:ib.transition!==null?(Oh===0&&(Oh=wP()),Oh):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:AP(t.type)),t):1}function ii(t,e,n,i){if(50<su)throw su=0,Bm=null,Error(X(185));Qu(t,n,i),(!(ke&2)||t!==Ct)&&(t===Ct&&(!(ke&2)&&(sf|=n),yt===4&&kr(t,Dt)),dn(t,i),n===1&&ke===0&&!(e.mode&1)&&(ba=lt()+500,ef&&hs()))}function dn(t,e){var n=t.callbackNode;ik(t,e);var i=nd(t,t===Ct?Dt:0);if(i===0)n!==null&&Wv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Wv(n),e===1)t.tag===0?nb(Ow.bind(null,t)):$P(Ow.bind(null,t)),Xk(function(){!(ke&6)&&hs()}),n=null;else{switch(TP(i)){case 1:n=$g;break;case 4:n=yP;break;case 16:n=td;break;case 536870912:n=vP;break;default:n=td}n=WS(n,VS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function VS(t,e){if(Mh=-1,Oh=0,ke&6)throw Error(X(327));var n=t.callbackNode;if(va()&&t.callbackNode!==n)return null;var i=nd(t,t===Ct?Dt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=wd(t,i);else{e=i;var r=ke;ke|=2;var o=US();(Ct!==t||Dt!==e)&&($i=null,ba=lt()+500,Hs(t,e));do try{Pb();break}catch(u){FS(t,u)}while(!0);s_(),_d.current=o,ke=r,ft!==null?e=0:(Ct=null,Dt=0,e=yt)}if(e!==0){if(e===2&&(r=fm(t),r!==0&&(i=r,e=zm(t,r))),e===1)throw n=Nu,Hs(t,0),kr(t,i),dn(t,lt()),n;if(e===6)kr(t,i);else{if(r=t.current.alternate,!(i&30)&&!Tb(r)&&(e=wd(t,i),e===2&&(o=fm(t),o!==0&&(i=o,e=zm(t,o))),e===1))throw n=Nu,Hs(t,0),kr(t,i),dn(t,lt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:Ds(t,ln,$i);break;case 3:if(kr(t,i),(i&130023424)===i&&(e=w_+500-lt(),10<e)){if(nd(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Tm(Ds.bind(null,t,ln,$i),e);break}Ds(t,ln,$i);break;case 4:if(kr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ni(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=lt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wb(i/1960))-i,10<i){t.timeoutHandle=Tm(Ds.bind(null,t,ln,$i),i);break}Ds(t,ln,$i);break;case 5:Ds(t,ln,$i);break;default:throw Error(X(329))}}}return dn(t,lt()),t.callbackNode===n?VS.bind(null,t):null}function zm(t,e){var n=ru;return t.current.memoizedState.isDehydrated&&(Hs(t,e).flags|=256),t=wd(t,e),t!==2&&(e=ln,ln=n,e!==null&&jm(e)),t}function jm(t){ln===null?ln=t:ln.push.apply(ln,t)}function Tb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!si(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kr(t,e){for(e&=~v_,e&=~sf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ni(e),i=1<<n;t[n]=-1,e&=~i}}function Ow(t){if(ke&6)throw Error(X(327));va();var e=nd(t,0);if(!(e&1))return dn(t,lt()),null;var n=wd(t,e);if(t.tag!==0&&n===2){var i=fm(t);i!==0&&(e=i,n=zm(t,i))}if(n===1)throw n=Nu,Hs(t,0),kr(t,e),dn(t,lt()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,ln,$i),dn(t,lt()),null}function T_(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(ba=lt()+500,ef&&hs())}}function Xs(t){Vr!==null&&Vr.tag===0&&!(ke&6)&&va();var e=ke;ke|=1;var n=zn.transition,i=Fe;try{if(zn.transition=null,Fe=1,t)return t()}finally{Fe=i,zn.transition=n,ke=e,!(ke&6)&&hs()}}function E_(){mn=aa.current,qe(aa)}function Hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yk(n)),ft!==null)for(n=ft.return;n!==null;){var i=n;switch(n_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ad();break;case 3:Ra(),qe(cn),qe($t),h_();break;case 5:c_(i);break;case 4:Ra();break;case 13:qe(Ke);break;case 19:qe(Ke);break;case 10:o_(i.type._context);break;case 22:case 23:E_()}n=n.return}if(Ct=t,ft=t=$r(t.current,null),Dt=mn=e,yt=0,Nu=null,v_=sf=Ys=0,ln=ru=null,Us!==null){for(e=0;e<Us.length;e++)if(n=Us[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Us=null}return t}function FS(t,e){do{var n=ft;try{if(s_(),Lh.current=gd,md){for(var i=Qe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}md=!1}if(Qs=0,At=_t=Qe=null,nu=!1,ku=0,y_.current=null,n===null||n.return===null){yt=1,Nu=e,ft=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Dt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var P=Pw(a);if(P!==null){P.flags&=-257,Sw(P,a,u,o,e),P.mode&1&&Ew(o,f,e),e=P,h=f;var k=e.updateQueue;if(k===null){var b=new Set;b.add(h),e.updateQueue=b}else k.add(h);break e}else{if(!(e&1)){Ew(o,f,e),P_();break e}h=Error(X(426))}}else if(Ge&&u.mode&1){var F=Pw(a);if(F!==null){!(F.flags&65536)&&(F.flags|=256),Sw(F,a,u,o,e),i_(ka(h,u));break e}}o=h=ka(h,u),yt!==4&&(yt=2),ru===null?ru=[o]:ru.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=TS(o,h,e);gw(o,x);break e;case 1:u=h;var I=o.type,A=o.stateNode;if(!(o.flags&128)&&(typeof I.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Wr===null||!Wr.has(A)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=ES(o,u,e);gw(o,B);break e}}o=o.return}while(o!==null)}zS(n)}catch(q){e=q,ft===n&&n!==null&&(ft=n=n.return);continue}break}while(!0)}function US(){var t=_d.current;return _d.current=gd,t===null?gd:t}function P_(){(yt===0||yt===3||yt===2)&&(yt=4),Ct===null||!(Ys&268435455)&&!(sf&268435455)||kr(Ct,Dt)}function wd(t,e){var n=ke;ke|=2;var i=US();(Ct!==t||Dt!==e)&&($i=null,Hs(t,e));do try{Eb();break}catch(r){FS(t,r)}while(!0);if(s_(),ke=n,_d.current=i,ft!==null)throw Error(X(261));return Ct=null,Dt=0,yt}function Eb(){for(;ft!==null;)BS(ft)}function Pb(){for(;ft!==null&&!KR();)BS(ft)}function BS(t){var e=HS(t.alternate,t,mn);t.memoizedProps=t.pendingProps,e===null?zS(t):ft=e,y_.current=null}function zS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gb(n,e),n!==null){n.flags&=32767,ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{yt=6,ft=null;return}}else if(n=mb(n,e,mn),n!==null){ft=n;return}if(e=e.sibling,e!==null){ft=e;return}ft=e=t}while(e!==null);yt===0&&(yt=5)}function Ds(t,e,n){var i=Fe,r=zn.transition;try{zn.transition=null,Fe=1,Sb(t,e,n,i)}finally{zn.transition=r,Fe=i}return null}function Sb(t,e,n,i){do va();while(Vr!==null);if(ke&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(rk(t,o),t===Ct&&(ft=Ct=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fh||(fh=!0,WS(td,function(){return va(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=zn.transition,zn.transition=null;var a=Fe;Fe=1;var u=ke;ke|=4,y_.current=null,yb(t,n),MS(n,t),Wk(vm),id=!!ym,vm=ym=null,t.current=n,vb(n),ZR(),ke=u,Fe=a,zn.transition=o}else t.current=n;if(fh&&(fh=!1,Vr=t,vd=r),o=t.pendingLanes,o===0&&(Wr=null),XR(n.stateNode),dn(t,lt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(yd)throw yd=!1,t=Um,Um=null,t;return vd&1&&t.tag!==0&&va(),o=t.pendingLanes,o&1?t===Bm?su++:(su=0,Bm=t):su=0,hs(),null}function va(){if(Vr!==null){var t=TP(vd),e=zn.transition,n=Fe;try{if(zn.transition=null,Fe=16>t?16:t,Vr===null)var i=!1;else{if(t=Vr,Vr=null,vd=0,ke&6)throw Error(X(331));var r=ke;for(ke|=4,se=t.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(se=f;se!==null;){var m=se;switch(m.tag){case 0:case 11:case 15:iu(8,m,o)}var _=m.child;if(_!==null)_.return=m,se=_;else for(;se!==null;){m=se;var v=m.sibling,P=m.return;if(LS(m),m===f){se=null;break}if(v!==null){v.return=P,se=v;break}se=P}}}var k=o.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var F=b.sibling;b.sibling=null,b=F}while(b!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:iu(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,se=x;break e}se=o.return}}var I=t.current;for(se=I;se!==null;){a=se;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,se=A;else e:for(a=I;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:rf(9,u)}}catch(q){nt(u,u.return,q)}if(u===a){se=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,se=B;break e}se=u.return}}if(ke=r,hs(),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(Zd,t)}catch{}i=!0}return i}finally{Fe=n,zn.transition=e}}return!1}function Vw(t,e,n){e=ka(n,e),e=TS(t,e,1),t=Hr(t,e,1),e=Jt(),t!==null&&(Qu(t,1,e),dn(t,e))}function nt(t,e,n){if(t.tag===3)Vw(t,t,n);else for(;e!==null;){if(e.tag===3){Vw(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Wr===null||!Wr.has(i))){t=ka(n,t),t=ES(e,t,1),e=Hr(e,t,1),t=Jt(),e!==null&&(Qu(e,1,t),dn(e,t));break}}e=e.return}}function Ib(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Dt&n)===n&&(yt===4||yt===3&&(Dt&130023424)===Dt&&500>lt()-w_?Hs(t,0):v_|=n),dn(t,e)}function jS(t,e){e===0&&(t.mode&1?(e=ih,ih<<=1,!(ih&130023424)&&(ih=4194304)):e=1);var n=Jt();t=sr(t,e),t!==null&&(Qu(t,e,n),dn(t,n))}function xb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),jS(t,n)}function Ab(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),jS(t,n)}var HS;HS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||cn.current)un=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return un=!1,pb(t,e,n);un=!!(t.flags&131072)}else un=!1,Ge&&e.flags&1048576&&GP(e,cd,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Dh(t,e),t=e.pendingProps;var r=xa(e,$t.current);ya(e,n),r=f_(null,e,i,t,r,n);var o=p_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,hn(i)?(o=!0,ld(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,l_(e),r.updater=nf,e.stateNode=r,r._reactInternals=e,Cm(e,i,t,n),e=bm(null,e,i,!0,o,n)):(e.tag=0,Ge&&o&&t_(e),Xt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Dh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Rb(i),t=Yn(i,t),r){case 0:e=km(null,e,i,t,n);break e;case 1:e=Aw(null,e,i,t,n);break e;case 11:e=Iw(null,e,i,t,n);break e;case 14:e=xw(null,e,i,Yn(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),km(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),Aw(t,e,i,r,n);case 3:e:{if(xS(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,JP(t,e),fd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=ka(Error(X(423)),e),e=Cw(t,e,i,n,r);break e}else if(i!==r){r=ka(Error(X(424)),e),e=Cw(t,e,i,n,r);break e}else for(_n=jr(e.stateNode.containerInfo.firstChild),vn=e,Ge=!0,Jn=null,n=YP(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Aa(),i===r){e=or(t,e,n);break e}Xt(t,e,i,n)}e=e.child}return e;case 5:return eS(e),t===null&&Im(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,wm(i,r)?a=null:o!==null&&wm(i,o)&&(e.flags|=32),IS(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&Im(e),null;case 13:return AS(t,e,n);case 4:return u_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ca(e,null,i,n):Xt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),Iw(t,e,i,r,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,He(hd,i._currentValue),i._currentValue=a,o!==null)if(si(o.value,a)){if(o.children===r.children&&!cn.current){e=or(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=Xi(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),xm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),xm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Xt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ya(e,n),r=jn(r),i=i(r),e.flags|=1,Xt(t,e,i,n),e.child;case 14:return i=e.type,r=Yn(i,e.pendingProps),r=Yn(i.type,r),xw(t,e,i,r,n);case 15:return PS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yn(i,r),Dh(t,e),e.tag=1,hn(i)?(t=!0,ld(e)):t=!1,ya(e,n),wS(e,i,r),Cm(e,i,r,n),bm(null,e,i,!0,t,n);case 19:return CS(t,e,n);case 22:return SS(t,e,n)}throw Error(X(156,e.tag))};function WS(t,e){return _P(t,e)}function Cb(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bn(t,e,n,i){return new Cb(t,e,n,i)}function S_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Rb(t){if(typeof t=="function")return S_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Hg)return 11;if(t===Wg)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=Bn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Vh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")S_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Yo:return Ws(n.children,r,o,e);case jg:a=8,r|=8;break;case Xp:return t=Bn(12,n,e,r|2),t.elementType=Xp,t.lanes=o,t;case Jp:return t=Bn(13,n,e,r),t.elementType=Jp,t.lanes=o,t;case em:return t=Bn(19,n,e,r),t.elementType=em,t.lanes=o,t;case eP:return of(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case XE:a=10;break e;case JE:a=9;break e;case Hg:a=11;break e;case Wg:a=14;break e;case Ar:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Bn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Ws(t,e,n,i){return t=Bn(7,t,i,e),t.lanes=n,t}function of(t,e,n,i){return t=Bn(22,t,i,e),t.elementType=eP,t.lanes=n,t.stateNode={isHidden:!1},t}function Tp(t,e,n){return t=Bn(6,t,null,e),t.lanes=n,t}function Ep(t,e,n){return e=Bn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kb(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=np(0),this.expirationTimes=np(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=np(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function I_(t,e,n,i,r,o,a,u,h){return t=new kb(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Bn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},l_(o),t}function bb(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function qS(t){if(!t)return Xr;t=t._reactInternals;e:{if(ao(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(hn(n))return qP(t,n,e)}return e}function $S(t,e,n,i,r,o,a,u,h){return t=I_(n,i,!0,t,r,o,a,u,h),t.context=qS(null),n=t.current,i=Jt(),r=qr(n),o=Xi(i,r),o.callback=e??null,Hr(n,o,r),t.current.lanes=r,Qu(t,r,i),dn(t,i),t}function af(t,e,n,i){var r=e.current,o=Jt(),a=qr(r);return n=qS(n),e.context===null?e.context=n:e.pendingContext=n,e=Xi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Hr(r,e,a),t!==null&&(ii(t,r,a,o),bh(t,r,a)),a}function Td(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function x_(t,e){Fw(t,e),(t=t.alternate)&&Fw(t,e)}function Lb(){return null}var GS=typeof reportError=="function"?reportError:function(t){console.error(t)};function A_(t){this._internalRoot=t}lf.prototype.render=A_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));af(t,e,null,null)};lf.prototype.unmount=A_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xs(function(){af(null,t,null,null)}),e[rr]=null}};function lf(t){this._internalRoot=t}lf.prototype.unstable_scheduleHydration=function(t){if(t){var e=SP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Rr.length&&e!==0&&e<Rr[n].priority;n++);Rr.splice(n,0,t),n===0&&xP(t)}};function C_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function uf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uw(){}function Nb(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Td(a);o.call(f)}}var a=$S(e,i,t,0,null,!1,!1,"",Uw);return t._reactRootContainer=a,t[rr]=a.current,Iu(t.nodeType===8?t.parentNode:t),Xs(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Td(h);u.call(f)}}var h=I_(t,0,!1,null,null,!1,!1,"",Uw);return t._reactRootContainer=h,t[rr]=h.current,Iu(t.nodeType===8?t.parentNode:t),Xs(function(){af(e,h,n,i)}),h}function cf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Td(a);u.call(h)}}af(e,a,t,r)}else a=Nb(n,e,t,r,i);return Td(a)}EP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bl(e.pendingLanes);n!==0&&(Gg(e,n|1),dn(e,lt()),!(ke&6)&&(ba=lt()+500,hs()))}break;case 13:Xs(function(){var i=sr(t,1);if(i!==null){var r=Jt();ii(i,t,1,r)}}),x_(t,1)}};Kg=function(t){if(t.tag===13){var e=sr(t,134217728);if(e!==null){var n=Jt();ii(e,t,134217728,n)}x_(t,134217728)}};PP=function(t){if(t.tag===13){var e=qr(t),n=sr(t,e);if(n!==null){var i=Jt();ii(n,t,e,i)}x_(t,e)}};SP=function(){return Fe};IP=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};cm=function(t,e,n){switch(e){case"input":if(im(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Jd(i);if(!r)throw Error(X(90));nP(i),im(i,r)}}}break;case"textarea":rP(t,n);break;case"select":e=n.value,e!=null&&pa(t,!!n.multiple,e,!1)}};hP=T_;dP=Xs;var Db={usingClientEntryPoint:!1,Events:[Xu,ta,Jd,uP,cP,T_]},Ml={findFiberByHostInstance:Fs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mb={bundleType:Ml.bundleType,version:Ml.version,rendererPackageName:Ml.rendererPackageName,rendererConfig:Ml.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mP(t),t===null?null:t.stateNode},findFiberByHostInstance:Ml.findFiberByHostInstance||Lb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ph=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ph.isDisabled&&ph.supportsFiber)try{Zd=ph.inject(Mb),Ti=ph}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Db;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!C_(e))throw Error(X(200));return bb(t,e,null,n)};Pn.createRoot=function(t,e){if(!C_(t))throw Error(X(299));var n=!1,i="",r=GS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=I_(t,1,!1,null,null,n,!1,i,r),t[rr]=e.current,Iu(t.nodeType===8?t.parentNode:t),new A_(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=mP(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return Xs(t)};Pn.hydrate=function(t,e,n){if(!uf(e))throw Error(X(200));return cf(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!C_(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=GS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=$S(e,null,t,1,n??null,r,!1,o,a),t[rr]=e.current,Iu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new lf(e)};Pn.render=function(t,e,n){if(!uf(e))throw Error(X(200));return cf(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!uf(t))throw Error(X(40));return t._reactRootContainer?(Xs(function(){cf(null,null,t,!1,function(){t._reactRootContainer=null,t[rr]=null})}),!0):!1};Pn.unstable_batchedUpdates=T_;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!uf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return cf(t,e,n,!1,i)};Pn.version="18.3.1-next-f1338f8080-20240426";function KS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(KS)}catch(t){console.error(t)}}KS(),KE.exports=Pn;var ZS=KE.exports,Bw=ZS;Qp.createRoot=Bw.createRoot,Qp.hydrateRoot=Bw.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ob={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Rt=(t,e)=>{const n=Y.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>Y.createElement("svg",{ref:m,...Ob,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${Vb(t)}`,u].join(" "),...f},[...e.map(([_,v])=>Y.createElement(_,v)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=Rt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QS=Rt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=Rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YS=Rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=Rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=Rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=Rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XS=Rt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=Rt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JS=Rt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=Rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=Rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hm=Rt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=Rt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gb=Rt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=Rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=Rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function Zb({activeTab:t,setActiveTab:e}){return V.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 pb-safe",children:V.jsxs("div",{className:"flex justify-around items-center h-16",children:[V.jsxs("button",{onClick:()=>e("home"),className:`flex flex-col items-center p-2 ${t==="home"?"text-primary-600":"text-gray-400"}`,children:[V.jsx(Hb,{size:24}),V.jsx("span",{className:"text-xs mt-1",children:"Inicio"})]}),V.jsxs("button",{onClick:()=>e("report"),className:"flex flex-col items-center p-2 -mt-6",children:[V.jsx("div",{className:"bg-primary-600 rounded-full p-4 shadow-lg text-white transform transition-transform active:scale-95 border-4 border-white",children:V.jsx($b,{size:32})}),V.jsx("span",{className:"text-xs mt-1 text-gray-400",children:"Reportar"})]}),V.jsxs("button",{onClick:()=>e("profile"),className:`flex flex-col items-center p-2 ${t==="profile"?"text-primary-600":"text-gray-400"}`,children:[V.jsx(R_,{size:24}),V.jsx("span",{className:"text-xs mt-1",children:"Perfil"})]})]})})}function Qb({children:t,activeTab:e,setActiveTab:n}){return V.jsx("div",{className:"h-[100dvh] w-full bg-gray-100 flex justify-center overflow-hidden",children:V.jsxs("div",{className:"w-full max-w-md bg-white h-full shadow-2xl relative flex flex-col",children:[V.jsx("div",{className:"flex-1 overflow-y-auto pb-20 scrollbar-hide",children:t}),V.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-100",children:V.jsx(Zb,{activeTab:e,setActiveTab:n})})]})})}const Yb=()=>{};var zw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},Xb=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},nI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,_=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,P=f&63;h||(P=64,a||(v=64)),i.push(n[m],n[_],n[v],n[P])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Xb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const _=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||_==null)throw new Jb;const v=o<<2|u>>4;if(i.push(v),f!==64){const P=u<<4&240|f>>2;if(i.push(P),_!==64){const k=f<<6&192|_;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Jb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eL=function(t){const e=tI(t);return nI.encodeByteArray(e,!0)},Ed=function(t){return eL(t).replace(/\./g,"")},iI=function(t){try{return nI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=()=>tL().__FIREBASE_DEFAULTS__,iL=()=>{if(typeof process>"u"||typeof zw>"u")return;const t=zw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&iI(t[1]);return e&&JSON.parse(e)},hf=()=>{try{return Yb()||nL()||iL()||rL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},rI=t=>{var e,n;return(n=(e=hf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},sI=t=>{const e=rI(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},oI=()=>{var t;return(t=hf())==null?void 0:t.config},aI=t=>{var e;return(e=hf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function k_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Ed(JSON.stringify(n)),Ed(JSON.stringify(a)),""].join(".")}const ou={};function oL(){const t={prod:[],emulator:[]};for(const e of Object.keys(ou))ou[e]?t.emulator.push(e):t.prod.push(e);return t}function aL(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let jw=!1;function b_(t,e){if(typeof window>"u"||typeof document>"u"||!ds(window.location.host)||ou[t]===e||ou[t]||jw)return;ou[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=oL().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,P){v.setAttribute("width","24"),v.setAttribute("id",P),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{jw=!0,a()},v}function m(v,P){v.setAttribute("id",P),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function _(){const v=aL(i),P=n("text"),k=document.getElementById(P)||document.createElement("span"),b=n("learnmore"),F=document.getElementById(b)||document.createElement("a"),x=n("preprendIcon"),I=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const A=v.element;u(A),m(F,b);const B=f();h(I,x),A.append(I,k,F,B),document.body.appendChild(A)}o?(k.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lL(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function uL(){var e;const t=(e=hf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cL(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dL(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fL(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pL(){return!uL()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mL(){try{return typeof indexedDB=="object"}catch{return!1}}function gL(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L="FirebaseError";class Ni extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=_L,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ec.prototype.create)}}class ec{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?yL(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Ni(r,u,i)}}function yL(t,e){return t.replace(vL,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const vL=/\{\$([^}]+)}/g;function wL(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Js(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(Hw(o)&&Hw(a)){if(!Js(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Hw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Hl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function TL(t,e){const n=new EL(t,e);return n.subscribe.bind(n)}class EL{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");PL(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Pp),r.error===void 0&&(r.error=Pp),r.complete===void 0&&(r.complete=Pp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function PL(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class Jr{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SL{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new sL;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(xL(e))try{this.getOrInitializeService({instanceIdentifier:Ms})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Ms){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ms){return this.instances.has(e)}getOptions(e=Ms){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:IL(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ms){return this.component?this.component.multipleInstances?e:Ms:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IL(t){return t===Ms?void 0:t}function xL(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SL(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const CL={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},RL=Se.INFO,kL={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},bL=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=kL[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class L_{constructor(e){this.name=e,this._logLevel=RL,this._logHandler=bL,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const LL=(t,e)=>e.some(n=>t instanceof n);let Ww,qw;function NL(){return Ww||(Ww=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function DL(){return qw||(qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uI=new WeakMap,Wm=new WeakMap,cI=new WeakMap,Sp=new WeakMap,N_=new WeakMap;function ML(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Gr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&uI.set(n,t)}).catch(()=>{}),N_.set(e,t),e}function OL(t){if(Wm.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Wm.set(t,e)}let qm={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cI.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function VL(t){qm=t(qm)}function FL(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Ip(this),e,...n);return cI.set(i,e.sort?e.sort():[e]),Gr(i)}:DL().includes(t)?function(...e){return t.apply(Ip(this),e),Gr(uI.get(this))}:function(...e){return Gr(t.apply(Ip(this),e))}}function UL(t){return typeof t=="function"?FL(t):(t instanceof IDBTransaction&&OL(t),LL(t,NL())?new Proxy(t,qm):t)}function Gr(t){if(t instanceof IDBRequest)return ML(t);if(Sp.has(t))return Sp.get(t);const e=UL(t);return e!==t&&(Sp.set(t,e),N_.set(e,t)),e}const Ip=t=>N_.get(t);function BL(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Gr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Gr(a.result),h.oldVersion,h.newVersion,Gr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const zL=["get","getKey","getAll","getAllKeys","count"],jL=["put","add","delete","clear"],xp=new Map;function $w(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xp.get(e))return xp.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=jL.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||zL.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return xp.set(e,o),o}VL(t=>({...t,get:(e,n,i)=>$w(e,n)||t.get(e,n,i),has:(e,n)=>!!$w(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HL{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WL(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function WL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $m="@firebase/app",Gw="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new L_("@firebase/app"),qL="@firebase/app-compat",$L="@firebase/analytics-compat",GL="@firebase/analytics",KL="@firebase/app-check-compat",ZL="@firebase/app-check",QL="@firebase/auth",YL="@firebase/auth-compat",XL="@firebase/database",JL="@firebase/data-connect",eN="@firebase/database-compat",tN="@firebase/functions",nN="@firebase/functions-compat",iN="@firebase/installations",rN="@firebase/installations-compat",sN="@firebase/messaging",oN="@firebase/messaging-compat",aN="@firebase/performance",lN="@firebase/performance-compat",uN="@firebase/remote-config",cN="@firebase/remote-config-compat",hN="@firebase/storage",dN="@firebase/storage-compat",fN="@firebase/firestore",pN="@firebase/ai",mN="@firebase/firestore-compat",gN="firebase",_N="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm="[DEFAULT]",yN={[$m]:"fire-core",[qL]:"fire-core-compat",[GL]:"fire-analytics",[$L]:"fire-analytics-compat",[ZL]:"fire-app-check",[KL]:"fire-app-check-compat",[QL]:"fire-auth",[YL]:"fire-auth-compat",[XL]:"fire-rtdb",[JL]:"fire-data-connect",[eN]:"fire-rtdb-compat",[tN]:"fire-fn",[nN]:"fire-fn-compat",[iN]:"fire-iid",[rN]:"fire-iid-compat",[sN]:"fire-fcm",[oN]:"fire-fcm-compat",[aN]:"fire-perf",[lN]:"fire-perf-compat",[uN]:"fire-rc",[cN]:"fire-rc-compat",[hN]:"fire-gcs",[dN]:"fire-gcs-compat",[fN]:"fire-fst",[mN]:"fire-fst-compat",[pN]:"fire-vertex","fire-js":"fire-js",[gN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd=new Map,vN=new Map,Km=new Map;function Kw(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function eo(t){const e=t.name;if(Km.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;Km.set(e,t);for(const n of Pd.values())Kw(n,t);for(const n of vN.values())Kw(n,t);return!0}function df(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new ec("app","Firebase",wN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo=_N;function hI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:Gm,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Kr.create("bad-app-name",{appName:String(r)});if(n||(n=oI()),!n)throw Kr.create("no-options");const o=Pd.get(r);if(o){if(Js(n,o.options)&&Js(i,o.config))return o;throw Kr.create("duplicate-app",{appName:r})}const a=new AL(r);for(const h of Km.values())a.addComponent(h);const u=new TN(n,i,a);return Pd.set(r,u),u}function D_(t=Gm){const e=Pd.get(t);if(!e&&t===Gm&&oI())return hI();if(!e)throw Kr.create("no-app",{appName:t});return e}function Pi(t,e,n){let i=yN[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(a.join(" "));return}eo(new Jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN="firebase-heartbeat-database",PN=1,Du="firebase-heartbeat-store";let Ap=null;function dI(){return Ap||(Ap=BL(EN,PN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Du)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),Ap}async function SN(t){try{const n=(await dI()).transaction(Du),i=await n.objectStore(Du).get(fI(t));return await n.done,i}catch(e){if(e instanceof Ni)ar.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function Zw(t,e){try{const i=(await dI()).transaction(Du,"readwrite");await i.objectStore(Du).put(e,fI(t)),await i.done}catch(n){if(n instanceof Ni)ar.warn(n.message);else{const i=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(i.message)}}}function fI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IN=1024,xN=30;class AN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new RN(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Qw();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>xN){const a=kN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ar.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Qw(),{heartbeatsToSend:i,unsentEntries:r}=CN(this._heartbeatsCache.heartbeats),o=Ed(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ar.warn(n),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function CN(t,e=IN){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),Yw(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Yw(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class RN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mL()?gL().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return Zw(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Yw(t){return Ed(JSON.stringify({version:2,heartbeats:t})).length}function kN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(t){eo(new Jr("platform-logger",e=>new HL(e),"PRIVATE")),eo(new Jr("heartbeat",e=>new AN(e),"PRIVATE")),Pi($m,Gw,t),Pi($m,Gw,"esm2020"),Pi("fire-js","")}bN("");function pI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LN=pI,mI=new ec("auth","Firebase",pI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sd=new L_("@firebase/auth");function NN(t,...e){Sd.logLevel<=Se.WARN&&Sd.warn(`Auth (${lo}): ${t}`,...e)}function Fh(t,...e){Sd.logLevel<=Se.ERROR&&Sd.error(`Auth (${lo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oi(t,...e){throw M_(t,...e)}function Si(t,...e){return M_(t,...e)}function gI(t,e,n){const i={...LN(),[e]:n};return new ec("auth","Firebase",i).create(e,{appName:t.name})}function Ji(t){return gI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function M_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return mI.create(t,...e)}function he(t,e,...n){if(!t)throw M_(e,...n)}function Qi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Fh(e),new Error(e)}function lr(t,e){t||Qi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function DN(){return Xw()==="http:"||Xw()==="https:"}function Xw(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DN()||hL()||"connection"in navigator)?navigator.onLine:!0}function ON(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=lL()||dL()}get(){return MN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],UN=new nc(3e4,6e4);function fs(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ps(t,e,n,i,r={}){return yI(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=tc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return cL()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&ds(t.emulatorConfig.host)&&(f.credentials="include"),_I.fetch()(await vI(t,t.config.apiHost,n,u),f)})}async function yI(t,e,n){t._canInitEmulator=!1;const i={...VN,...e};try{const r=new zN(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw mh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw mh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw mh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw mh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw gI(t,m,f);oi(t,m)}}catch(r){if(r instanceof Ni)throw r;oi(t,"network-request-failed",{message:String(r)})}}async function ic(t,e,n,i,r={}){const o=await ps(t,e,n,i,r);return"mfaPendingCredential"in o&&oi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function vI(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?O_(t.config,r):`${t.config.apiScheme}://${r}`;return FN.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function BN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Si(this.auth,"network-request-failed")),UN.get())})}}function mh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Si(t,e,i);return r.customData._tokenResponse=n,r}function Jw(t){return t!==void 0&&t.enterprise!==void 0}class jN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return BN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HN(t,e){return ps(t,"GET","/v2/recaptchaConfig",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WN(t,e){return ps(t,"POST","/v1/accounts:delete",e)}async function Id(t,e){return ps(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qN(t,e=!1){const n=wt(t),i=await n.getIdToken(e),r=V_(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:au(Cp(r.auth_time)),issuedAtTime:au(Cp(r.iat)),expirationTime:au(Cp(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Cp(t){return Number(t)*1e3}function V_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Fh("JWT malformed, contained fewer than 3 sections"),null;try{const r=iI(n);return r?JSON.parse(r):(Fh("Failed to decode base64 JWT payload"),null)}catch(r){return Fh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function e0(t){const e=V_(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Ni&&$N(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function $N({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xd(t){var _;const e=t.auth,n=await t.getIdToken(),i=await Mu(t,Id(e,{idToken:n}));he(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?wI(r.providerUserInfo):[],a=ZN(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Qm(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function KN(t){const e=wt(t);await xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ZN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function wI(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(t,e){const n=await yI(t,{},async()=>{const i=tc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await vI(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&ds(t.emulatorConfig.host)&&(h.credentials="include"),_I.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YN(t,e){return ps(t,"POST","/v2/accounts:revokeToken",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):e0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=e0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await QN(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new wa;return i&&(he(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(he(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wa,this.toJSON())}_performRefresh(){return Qi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ir(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ei{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new GN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Qm(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Mu(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qN(this,e)}reload(){return KN(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ei({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await xd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(Ji(this.auth));const e=await this.getIdToken();return await Mu(this,WN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:_,emailVerified:v,isAnonymous:P,providerData:k,stsTokenManager:b}=n;he(_&&b,e,"internal-error");const F=wa.fromJSON(this.name,b);he(typeof _=="string",e,"internal-error"),Ir(i,e.name),Ir(r,e.name),he(typeof v=="boolean",e,"internal-error"),he(typeof P=="boolean",e,"internal-error"),Ir(o,e.name),Ir(a,e.name),Ir(u,e.name),Ir(h,e.name),Ir(f,e.name),Ir(m,e.name);const x=new ei({uid:_,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:P,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:F,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(x.providerData=k.map(I=>({...I}))),h&&(x._redirectEventId=h),x}static async _fromIdTokenResponse(e,n,i=!1){const r=new wa;r.updateFromServerResponse(n);const o=new ei({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await xd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];he(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?wI(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new wa;u.updateFromIdToken(i);const h=new ei({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new Qm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;function Yi(t){lr(t instanceof Function,"Expected a class definition");let e=t0.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,t0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}TI.type="NONE";const n0=TI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uh(t,e,n){return`firebase:${t}:${e}:${n}`}class Ta{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=Uh(this.userKey,r.apiKey,o),this.fullPersistenceKey=Uh("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Id(this.auth,{idToken:e}).catch(()=>{});return n?ei._fromGetAccountInfoResponse(this.auth,n,e):null}return ei._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ta(Yi(n0),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||Yi(n0);const a=Uh(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let _;if(typeof m=="string"){const v=await Id(e,{idToken:m}).catch(()=>{});if(!v)break;_=await ei._fromGetAccountInfoResponse(e,v,m)}else _=ei._fromJSON(e,m);f!==o&&(u=_),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ta(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ta(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(II(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(EI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(AI(e))return"Blackberry";if(CI(e))return"Webos";if(PI(e))return"Safari";if((e.includes("chrome/")||SI(e))&&!e.includes("edge/"))return"Chrome";if(xI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function EI(t=Gt()){return/firefox\//i.test(t)}function PI(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SI(t=Gt()){return/crios\//i.test(t)}function II(t=Gt()){return/iemobile/i.test(t)}function xI(t=Gt()){return/android/i.test(t)}function AI(t=Gt()){return/blackberry/i.test(t)}function CI(t=Gt()){return/webos/i.test(t)}function F_(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function XN(t=Gt()){var e;return F_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function JN(){return fL()&&document.documentMode===10}function RI(t=Gt()){return F_(t)||xI(t)||CI(t)||AI(t)||/windows phone/i.test(t)||II(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e=[]){let n;switch(t){case"Browser":n=i0(Gt());break;case"Worker":n=`${i0(Gt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${lo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t2(t,e={}){return ps(t,"GET","/v2/passwordPolicy",fs(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=6;class i2{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??n2,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new r0(this),this.idTokenSubscription=new r0(this),this.beforeStateQueue=new e2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Yi(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Ta.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Id(this,{idToken:e}),i=await ei._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(gn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await xd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ON()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(Ji(this));const n=e?wt(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(Ji(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(Ji(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Yi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await t2(this),n=new i2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ec("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await YN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Yi(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Ta.create(this,[Yi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&NN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function uo(t){return wt(t)}class r0{constructor(e){this.auth=e,this.observer=null,this.addObserver=TL(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function s2(t){ff=t}function bI(t){return ff.loadJS(t)}function o2(){return ff.recaptchaEnterpriseScript}function a2(){return ff.gapiScript}function l2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class u2{constructor(){this.enterprise=new c2}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class c2{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const h2="recaptcha-enterprise",LI="NO_RECAPTCHA";class d2{constructor(e){this.type=h2,this.auth=uo(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{HN(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new jN(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(h=>{u(h)})})}function r(o,a,u){const h=window.grecaptcha;Jw(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(LI)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new u2().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&Jw(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=o2();h.length!==0&&(h+=u),bI(h).then(()=>{r(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function s0(t,e,n,i=!1,r=!1){const o=new d2(t);let a;if(r)a=LI;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function Ym(t,e,n,i,r){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await s0(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await s0(t,e,n,n==="getOobCode");return i(t,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(t,e){const n=df(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(Js(o,e??{}))return r;oi(r,"already-initialized")}return n.initialize({options:e})}function p2(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Yi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function m2(t,e,n){const i=uo(t);he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=NI(e),{host:a,port:u}=g2(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){he(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),he(Js(f,i.config.emulator)&&Js(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,ds(a)?(k_(`${o}//${a}${h}`),b_("Auth",!0)):_2()}function NI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function g2(t){const e=NI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:o0(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:o0(a)}}}function o0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U_{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qi("not implemented")}_getIdTokenResponse(e){return Qi("not implemented")}_linkToIdToken(e,n){return Qi("not implemented")}_getReauthenticationResolver(e){return Qi("not implemented")}}async function y2(t,e){return ps(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(t,e){return ic(t,"POST","/v1/accounts:signInWithPassword",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(t,e){return ic(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}async function T2(t,e){return ic(t,"POST","/v1/accounts:signInWithEmailLink",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou extends U_{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ou(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ou(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,n,"signInWithPassword",v2);case"emailLink":return w2(e,{email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ym(e,i,"signUpPassword",y2);case"emailLink":return T2(e,{idToken:n,email:this._email,oobCode:this._password});default:oi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ea(t,e){return ic(t,"POST","/v1/accounts:signInWithIdp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2="http://localhost";class to extends U_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):oi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new to(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ea(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ea(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ea(e,n)}buildRequest(){const e={requestUri:E2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function S2(t){const e=jl(Hl(t)).link,n=e?jl(Hl(e)).deep_link_id:null,i=jl(Hl(t)).deep_link_id;return(i?jl(Hl(i)).link:null)||i||n||e||t}class B_{constructor(e){const n=jl(Hl(e)),i=n.apiKey??null,r=n.oobCode??null,o=P2(n.mode??null);he(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=S2(e);try{return new B_(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,n){return Ou._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=B_.parseLink(n);return he(i,"argument-error"),Ou._fromEmailAndCode(e,i.code,i.tenantId)}}Wa.PROVIDER_ID="password";Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends DI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends rc{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return br.credential(e.oauthAccessToken)}catch{return null}}}br.FACEBOOK_SIGN_IN_METHOD="facebook.com";br.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends rc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return to._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Lr.credential(n,i)}catch{return null}}}Lr.GOOGLE_SIGN_IN_METHOD="google.com";Lr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends rc{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends rc{constructor(){super("twitter.com")}static credential(e,n){return to._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Dr.credential(n,i)}catch{return null}}}Dr.TWITTER_SIGN_IN_METHOD="twitter.com";Dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I2(t,e){return ic(t,"POST","/v1/accounts:signUp",fs(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await ei._fromIdTokenResponse(e,i,r),a=a0(i);return new no({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=a0(i);return new no({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function a0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad extends Ni{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Ad.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Ad(e,n,i,r)}}function MI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Ad._fromErrorAndOperation(t,o,e,i):o})}async function x2(t,e,n=!1){const i=await Mu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return no._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e,n=!1){const{auth:i}=t;if(gn(i.app))return Promise.reject(Ji(i));const r="reauthenticate";try{const o=await Mu(t,MI(i,r,e,t),n);he(o.idToken,i,"internal-error");const a=V_(o.idToken);he(a,i,"internal-error");const{sub:u}=a;return he(t.uid===u,i,"user-mismatch"),no._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&oi(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t,e,n=!1){if(gn(t.app))return Promise.reject(Ji(t));const i="signIn",r=await MI(t,i,e),o=await no._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function C2(t,e){return OI(uo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VI(t){const e=uo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function R2(t,e,n){if(gn(t.app))return Promise.reject(Ji(t));const i=uo(t),a=await Ym(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I2).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&VI(t),h}),u=await no._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function k2(t,e,n){return gn(t.app)?Promise.reject(Ji(t)):C2(wt(t),Wa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&VI(t),i})}function b2(t,e,n,i){return wt(t).onIdTokenChanged(e,n,i)}function L2(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function N2(t,e,n,i){return wt(t).onAuthStateChanged(e,n,i)}function D2(t){return wt(t).signOut()}const Cd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cd,"1"),this.storage.removeItem(Cd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=1e3,O2=10;class UI extends FI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=RI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);JN()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,O2):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},M2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}UI.type="LOCAL";const V2=UI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI extends FI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BI.type="SESSION";const zI=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new pf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await F2(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}pf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=z_("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(){return window}function B2(t){Ii().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return typeof Ii().WorkerGlobalScope<"u"&&typeof Ii().importScripts=="function"}async function z2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function j2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function H2(){return jI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI="firebaseLocalStorageDb",W2=1,Rd="firebaseLocalStorage",WI="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function mf(t,e){return t.transaction([Rd],e?"readwrite":"readonly").objectStore(Rd)}function q2(){const t=indexedDB.deleteDatabase(HI);return new sc(t).toPromise()}function Xm(){const t=indexedDB.open(HI,W2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Rd,{keyPath:WI})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Rd)?e(i):(i.close(),await q2(),e(await Xm()))})})}async function l0(t,e,n){const i=mf(t,!0).put({[WI]:e,value:n});return new sc(i).toPromise()}async function $2(t,e){const n=mf(t,!1).get(e),i=await new sc(n).toPromise();return i===void 0?null:i.value}function u0(t,e){const n=mf(t,!0).delete(e);return new sc(n).toPromise()}const G2=800,K2=3;class qI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>K2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=pf._getInstance(H2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await z2(),!this.activeServiceWorker)return;this.sender=new U2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||j2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xm();return await l0(e,Cd,"1"),await u0(e,Cd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>l0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>$2(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>u0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=mf(r,!1).getAll();return new sc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),G2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qI.type="LOCAL";const Z2=qI;new nc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e){return e?Yi(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends U_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ea(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ea(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ea(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Y2(t){return OI(t.auth,new j_(t),t.bypassAuthState)}function X2(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),A2(n,new j_(t),t.bypassAuthState)}async function J2(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),x2(n,new j_(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Y2;case"linkViaPopup":case"linkViaRedirect":return J2;case"reauthViaPopup":case"reauthViaRedirect":return X2;default:oi(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new nc(2e3,1e4);class la extends $I{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,la.currentPopupAction&&la.currentPopupAction.cancel(),la.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=z_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Si(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Si(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,la.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Si(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,eD.get())};e()}}la.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tD="pendingRedirect",Bh=new Map;class nD extends $I{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Bh.get(this.auth._key());if(!e){try{const i=await iD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Bh.set(this.auth._key(),e)}return this.bypassAuthState||Bh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iD(t,e){const n=oD(e),i=sD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function rD(t,e){Bh.set(t._key(),e)}function sD(t){return Yi(t._redirectPersistence)}function oD(t){return Uh(tD,t.config.apiKey,t.name)}async function aD(t,e,n=!1){if(gn(t.app))return Promise.reject(Ji(t));const i=uo(t),r=Q2(i,e),a=await new nD(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=10*60*1e3;class uD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!GI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Si(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lD&&this.cachedEventUids.clear(),this.cachedEventUids.has(c0(e))}saveEventToCache(e){this.cachedEventUids.add(c0(e)),this.lastProcessedEventTime=Date.now()}}function c0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function GI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD(t,e={}){return ps(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fD=/^https?/;async function pD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hD(t);for(const n of e)try{if(mD(n))return}catch{}oi(t,"unauthorized-domain")}function mD(t){const e=Zm(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!fD.test(n))return!1;if(dD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=new nc(3e4,6e4);function h0(){const t=Ii().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _D(t){return new Promise((e,n)=>{var r,o,a;function i(){h0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{h0(),n(Si(t,"network-request-failed"))},timeout:gD.get()})}if((o=(r=Ii().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=Ii().gapi)!=null&&a.load)i();else{const u=l2("iframefcb");return Ii()[u]=()=>{gapi.load?i():n(Si(t,"network-request-failed"))},bI(`${a2()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw zh=null,e})}let zh=null;function yD(t){return zh=zh||_D(t),zh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD=new nc(5e3,15e3),wD="__/auth/iframe",TD="emulator/auth/iframe",ED={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},PD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SD(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?O_(e,TD):`https://${t.config.authDomain}/${wD}`,i={apiKey:e.apiKey,appName:t.name,v:lo},r=PD.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${tc(i).slice(1)}`}async function ID(t){const e=await yD(t),n=Ii().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:SD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ED,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Si(t,"network-request-failed"),u=Ii().setTimeout(()=>{o(a)},vD.get());function h(){Ii().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},AD=500,CD=600,RD="_blank",kD="http://localhost";class d0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bD(t,e,n,i=AD,r=CD){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...xD,width:i.toString(),height:r.toString(),top:o,left:a},f=Gt().toLowerCase();n&&(u=SI(f)?RD:n),EI(f)&&(e=e||kD,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[P,k])=>`${v}${P}=${k},`,"");if(XN(f)&&u!=="_self")return LD(e||"",u),new d0(null);const _=window.open(e||"",u,m);he(_,t,"popup-blocked");try{_.focus()}catch{}return new d0(_)}function LD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND="__/auth/handler",DD="emulator/auth/handler",MD=encodeURIComponent("fac");async function f0(t,e,n,i,r,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:lo,eventId:r};if(e instanceof DI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",wL(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries({}))a[m]=_}if(e instanceof rc){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${MD}=${encodeURIComponent(h)}`:"";return`${OD(t)}?${tc(u).slice(1)}${f}`}function OD({config:t}){return t.emulator?O_(t,DD):`https://${t.authDomain}/${ND}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp="webStorageSupport";class VD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zI,this._completeRedirectFn=aD,this._overrideRedirectResult=rD}async _openPopup(e,n,i,r){var a;lr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await f0(e,n,i,Zm(),r);return bD(e,o,z_())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await f0(e,n,i,Zm(),r);return B2(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(lr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ID(e),i=new uD(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Rp,{type:Rp},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[Rp];o!==void 0&&n(!!o),oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=pD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return RI()||PI()||F_()}}const FD=VD;var p0="@firebase/auth",m0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zD(t){eo(new Jr("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kI(t)},f=new r2(i,r,o,h);return p2(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),eo(new Jr("auth-internal",e=>{const n=uo(e.getProvider("auth").getImmediate());return(i=>new UD(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pi(p0,m0,BD(t)),Pi(p0,m0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD=5*60,HD=aI("authIdTokenMaxAge")||jD;let g0=null;const WD=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>HD)return;const r=n==null?void 0:n.token;g0!==r&&(g0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function qD(t=D_()){const e=df(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f2(t,{popupRedirectResolver:FD,persistence:[Z2,V2,zI]}),i=aI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=WD(o.toString());L2(n,a,()=>a(n.currentUser)),b2(n,u=>a(u))}}const r=rI("auth");return r&&m2(n,`http://${r}`),n}function $D(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}s2({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Si("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",$D().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zD("Browser");var _0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zr,KI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function R(){}R.prototype=E.prototype,C.F=E.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(N,O,U){for(var D=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)D[Ne-2]=arguments[Ne];return E.prototype[O].apply(N,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,E,R){R||(R=0);const N=Array(16);if(typeof E=="string")for(var O=0;O<16;++O)N[O]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(O=0;O<16;++O)N[O]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=C.g[0],R=C.g[1],O=C.g[2];let U=C.g[3],D;D=E+(U^R&(O^U))+N[0]+3614090360&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[1]+3905402710&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[2]+606105819&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[3]+3250441966&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(U^R&(O^U))+N[4]+4118548399&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[5]+1200080426&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[6]+2821735955&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[7]+4249261313&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(U^R&(O^U))+N[8]+1770035416&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[9]+2336552879&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[10]+4294925233&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[11]+2304563134&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(U^R&(O^U))+N[12]+1804603682&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[13]+4254626195&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[14]+2792965006&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[15]+1236535329&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(O^U&(R^O))+N[1]+4129170786&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[6]+3225465664&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[11]+643717713&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[0]+3921069994&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(O^U&(R^O))+N[5]+3593408605&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[10]+38016083&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[15]+3634488961&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[4]+3889429448&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(O^U&(R^O))+N[9]+568446438&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[14]+3275163606&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[3]+4107603335&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[8]+1163531501&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(O^U&(R^O))+N[13]+2850285829&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[2]+4243563512&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[7]+1735328473&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[12]+2368359562&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(R^O^U)+N[5]+4294588738&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[8]+2272392833&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[11]+1839030562&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[14]+4259657740&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(R^O^U)+N[1]+2763975236&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[4]+1272893353&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[7]+4139469664&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[10]+3200236656&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(R^O^U)+N[13]+681279174&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[0]+3936430074&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[3]+3572445317&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[6]+76029189&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(R^O^U)+N[9]+3654602809&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[12]+3873151461&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[15]+530742520&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[2]+3299628645&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(O^(R|~U))+N[0]+4096336452&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[7]+1126891415&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[14]+2878612391&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[5]+4237533241&4294967295,R=O+(D<<21&4294967295|D>>>11),D=E+(O^(R|~U))+N[12]+1700485571&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[3]+2399980690&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[10]+4293915773&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[1]+2240044497&4294967295,R=O+(D<<21&4294967295|D>>>11),D=E+(O^(R|~U))+N[8]+1873313359&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[15]+4264355552&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[6]+2734768916&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[13]+1309151649&4294967295,R=O+(D<<21&4294967295|D>>>11),D=E+(O^(R|~U))+N[4]+4149444226&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[11]+3174756917&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[2]+718787259&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+U&4294967295}i.prototype.v=function(C,E){E===void 0&&(E=C.length);const R=E-this.blockSize,N=this.C;let O=this.h,U=0;for(;U<E;){if(O==0)for(;U<=R;)r(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<E;)if(N[O++]=C.charCodeAt(U++),O==this.blockSize){r(this,N),O=0;break}}else for(;U<E;)if(N[O++]=C[U++],O==this.blockSize){r(this,N),O=0;break}}this.h=O,this.o+=E},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;E=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=E&255,E/=256;for(this.v(C),C=Array(16),E=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)C[E++]=this.g[R]>>>N&255;return C};function o(C,E){var R=u;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=E(C)}function a(C,E){this.h=E;const R=[];let N=!0;for(let O=C.length-1;O>=0;O--){const U=C[O]|0;N&&U==E||(R[O]=U,N=!1)}this.g=R}var u={};function h(C){return-128<=C&&C<128?o(C,function(E){return new a([E|0],E<0?-1:0)}):new a([C|0],C<0?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return _;if(C<0)return F(f(-C));const E=[];let R=1;for(let N=0;C>=R;N++)E[N]=C/R|0,R*=4294967296;return new a(E,0)}function m(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return F(m(C.substring(1),E));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=f(Math.pow(E,8));let N=_;for(let U=0;U<C.length;U+=8){var O=Math.min(8,C.length-U);const D=parseInt(C.substring(U,U+O),E);O<8?(O=f(Math.pow(E,O)),N=N.j(O).add(f(D))):(N=N.j(R),N=N.add(f(D)))}return N}var _=h(0),v=h(1),P=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-F(this).m();let C=0,E=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);C+=(N>=0?N:4294967296+N)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(b(this))return"-"+F(this).toString(C);const E=f(Math.pow(C,6));var R=this;let N="";for(;;){const O=B(R,E).g;R=x(R,O.j(E));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=O,k(R))return U+N;for(;U.length<6;)U="0"+U;N=U+N}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(let E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function b(C){return C.h==-1}t.l=function(C){return C=x(this,C),b(C)?-1:k(C)?0:1};function F(C){const E=C.g.length,R=[];for(let N=0;N<E;N++)R[N]=~C.g[N];return new a(R,~C.h).add(v)}t.abs=function(){return b(this)?F(this):this},t.add=function(C){const E=Math.max(this.g.length,C.g.length),R=[];let N=0;for(let O=0;O<=E;O++){let U=N+(this.i(O)&65535)+(C.i(O)&65535),D=(U>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);N=D>>>16,U&=65535,D&=65535,R[O]=D<<16|U}return new a(R,R[R.length-1]&-2147483648?-1:0)};function x(C,E){return C.add(F(E))}t.j=function(C){if(k(this)||k(C))return _;if(b(this))return b(C)?F(this).j(F(C)):F(F(this).j(C));if(b(C))return F(this.j(F(C)));if(this.l(P)<0&&C.l(P)<0)return f(this.m()*C.m());const E=this.g.length+C.g.length,R=[];for(var N=0;N<2*E;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let O=0;O<C.g.length;O++){const U=this.i(N)>>>16,D=this.i(N)&65535,Ne=C.i(O)>>>16,In=C.i(O)&65535;R[2*N+2*O]+=D*In,I(R,2*N+2*O),R[2*N+2*O+1]+=U*In,I(R,2*N+2*O+1),R[2*N+2*O+1]+=D*Ne,I(R,2*N+2*O+1),R[2*N+2*O+2]+=U*Ne,I(R,2*N+2*O+2)}for(C=0;C<E;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=E;C<2*E;C++)R[C]=0;return new a(R,0)};function I(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function A(C,E){this.g=C,this.h=E}function B(C,E){if(k(E))throw Error("division by zero");if(k(C))return new A(_,_);if(b(C))return E=B(F(C),E),new A(F(E.g),F(E.h));if(b(E))return E=B(C,F(E)),new A(F(E.g),E.h);if(C.g.length>30){if(b(C)||b(E))throw Error("slowDivide_ only works with positive integers.");for(var R=v,N=E;N.l(C)<=0;)R=q(R),N=q(N);var O=K(R,1),U=K(N,1);for(N=K(N,2),R=K(R,2);!k(N);){var D=U.add(N);D.l(C)<=0&&(O=O.add(R),U=D),N=K(N,1),R=K(R,1)}return E=x(C,O.j(E)),new A(O,E)}for(O=_;C.l(E)>=0;){for(R=Math.max(1,Math.floor(C.m()/E.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),U=f(R),D=U.j(E);b(D)||D.l(C)>0;)R-=N,U=f(R),D=U.j(E);k(U)&&(U=v),O=O.add(U),C=x(C,D)}return new A(O,C)}t.B=function(C){return B(this,C).h},t.and=function(C){const E=Math.max(this.g.length,C.g.length),R=[];for(let N=0;N<E;N++)R[N]=this.i(N)&C.i(N);return new a(R,this.h&C.h)},t.or=function(C){const E=Math.max(this.g.length,C.g.length),R=[];for(let N=0;N<E;N++)R[N]=this.i(N)|C.i(N);return new a(R,this.h|C.h)},t.xor=function(C){const E=Math.max(this.g.length,C.g.length),R=[];for(let N=0;N<E;N++)R[N]=this.i(N)^C.i(N);return new a(R,this.h^C.h)};function q(C){const E=C.g.length+1,R=[];for(let N=0;N<E;N++)R[N]=C.i(N)<<1|C.i(N-1)>>>31;return new a(R,C.h)}function K(C,E){const R=E>>5;E%=32;const N=C.g.length-R,O=[];for(let U=0;U<N;U++)O[U]=E>0?C.i(U+R)>>>E|C.i(U+R+1)<<32-E:C.i(U+R);return new a(O,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,KI=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Zr=a}).apply(typeof _0<"u"?_0:typeof self<"u"?self:typeof window<"u"?window:{});var gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZI,Wl,QI,jh,Jm,YI,XI,JI;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof gh=="object"&&gh];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,g){if(g)e:{var w=i;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in w))break e;w=w[z]}c=c[c.length-1],S=w[c],g=g(S),g!=S&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(g){var w=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&w.push([S,g[S]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function h(c,g,w){return c.call.apply(c.bind,arguments)}function f(c,g,w){return f=h,f.apply(null,arguments)}function m(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function _(c,g){function w(){}w.prototype=g.prototype,c.Z=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(S,z,H){for(var ee=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)ee[ge-2]=arguments[ge];return g.prototype[z].apply(S,ee)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function P(c){const g=c.length;if(g>0){const w=Array(g);for(let S=0;S<g;S++)w[S]=c[S];return w}return[]}function k(c,g){for(let S=1;S<arguments.length;S++){const z=arguments[S];var w=typeof z;if(w=w!="object"?w:z?Array.isArray(z)?"array":w:"null",w=="array"||w=="object"&&typeof z.length=="number"){w=c.length||0;const H=z.length||0;c.length=w+H;for(let ee=0;ee<H;ee++)c[w+ee]=z[ee]}else c.push(z)}}class b{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(c){a.setTimeout(()=>{throw c},0)}function x(){var c=C;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class I{constructor(){this.h=this.g=null}add(g,w){const S=A.get();S.set(g,w),this.h?this.h.next=S:this.g=S,this.h=S}}var A=new b(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,K=!1,C=new I,E=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(R)}};function R(){for(var c;c=x();){try{c.h.call(c.g)}catch(w){F(w)}var g=A;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}K=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,g),a.removeEventListener("test",w,g)}catch{}return c}();function D(c){return/^[\s\xa0]*$/.test(c)}function Ne(c,g){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}_(Ne,O),Ne.prototype.init=function(c,g){const w=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var In="closure_listenable_"+(Math.random()*1e6|0),ut=0;function Ue(c,g,w,S,z){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!S,this.ha=z,this.key=++ut,this.da=this.fa=!1}function $(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function le(c,g,w){for(const S in c)g.call(w,c[S],S,c)}function J(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function fe(c){const g={};for(const w in c)g[w]=c[w];return g}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Je(c,g){let w,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(w in S)c[w]=S[w];for(let H=0;H<Ee.length;H++)w=Ee[H],Object.prototype.hasOwnProperty.call(S,w)&&(c[w]=S[w])}}function Re(c){this.src=c,this.g={},this.h=0}Re.prototype.add=function(c,g,w,S,z){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const ee=pe(c,g,S,z);return ee>-1?(g=c[ee],w||(g.fa=!1)):(g=new Ue(g,this.src,H,!!S,z),g.fa=w,c.push(g)),g};function Pe(c,g){const w=g.type;if(w in c.g){var S=c.g[w],z=Array.prototype.indexOf.call(S,g,void 0),H;(H=z>=0)&&Array.prototype.splice.call(S,z,1),H&&($(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function pe(c,g,w,S){for(let z=0;z<c.length;++z){const H=c[z];if(!H.da&&H.listener==g&&H.capture==!!w&&H.ha==S)return z}return-1}var Tt="closure_lm_"+(Math.random()*1e6|0),xn={};function Ja(c,g,w,S,z){if(Array.isArray(g)){for(let H=0;H<g.length;H++)Ja(c,g[H],w,S,z);return null}return w=ys(w),c&&c[In]?c.J(g,w,u(S)?!!S.capture:!1,z):el(c,g,w,!1,S,z)}function el(c,g,w,S,z,H){if(!g)throw Error("Invalid event type");const ee=u(z)?!!z.capture:!!z;let ge=_o(c);if(ge||(c[Tt]=ge=new Re(c)),w=ge.add(g,w,S,ee,H),w.proxy)return w;if(S=tl(),w.proxy=S,S.src=c,S.listener=w,c.addEventListener)U||(z=ee),z===void 0&&(z=!1),c.addEventListener(g.toString(),S,z);else if(c.attachEvent)c.attachEvent(yc(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function tl(){function c(w){return g.call(c.src,c.listener,w)}const g=vc;return c}function fr(c,g,w,S,z){if(Array.isArray(g))for(var H=0;H<g.length;H++)fr(c,g[H],w,S,z);else S=u(S)?!!S.capture:!!S,w=ys(w),c&&c[In]?(c=c.i,H=String(g).toString(),H in c.g&&(g=c.g[H],w=pe(g,w,S,z),w>-1&&($(g[w]),Array.prototype.splice.call(g,w,1),g.length==0&&(delete c.g[H],c.h--)))):c&&(c=_o(c))&&(g=c.g[g.toString()],c=-1,g&&(c=pe(g,w,S,z)),(w=c>-1?g[c]:null)&&gs(w))}function gs(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[In])Pe(g.i,c);else{var w=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(w,S,c.capture):g.detachEvent?g.detachEvent(yc(w),S):g.addListener&&g.removeListener&&g.removeListener(S),(w=_o(g))?(Pe(w,c),w.h==0&&(w.src=null,g[Tt]=null)):$(c)}}}function yc(c){return c in xn?xn[c]:xn[c]="on"+c}function vc(c,g){if(c.da)c=!0;else{g=new Ne(g,this);const w=c.listener,S=c.ha||c.src;c.fa&&gs(c),c=w.call(S,g)}return c}function _o(c){return c=c[Tt],c instanceof Re?c:null}var _s="__closure_events_fn_"+(Math.random()*1e9>>>0);function ys(c){return typeof c=="function"?c:(c[_s]||(c[_s]=function(g){return c.handleEvent(g)}),c[_s])}function Et(){N.call(this),this.i=new Re(this),this.M=this,this.G=null}_(Et,N),Et.prototype[In]=!0,Et.prototype.removeEventListener=function(c,g,w,S){fr(this,c,g,w,S)};function Pt(c,g){var w,S=c.G;if(S)for(w=[];S;S=S.G)w.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new O(g,c);else if(g instanceof O)g.target=g.target||c;else{var z=g;g=new O(S,c),Je(g,z)}z=!0;let H,ee;if(w)for(ee=w.length-1;ee>=0;ee--)H=g.g=w[ee],z=pr(H,S,!0,g)&&z;if(H=g.g=c,z=pr(H,S,!0,g)&&z,z=pr(H,S,!1,g)&&z,w)for(ee=0;ee<w.length;ee++)H=g.g=w[ee],z=pr(H,S,!1,g)&&z}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const w=c.g[g];for(let S=0;S<w.length;S++)$(w[S]);delete c.g[g],c.h--}}this.G=null},Et.prototype.J=function(c,g,w,S){return this.i.add(String(c),g,!1,w,S)},Et.prototype.K=function(c,g,w,S){return this.i.add(String(c),g,!0,w,S)};function pr(c,g,w,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let H=0;H<g.length;++H){const ee=g[H];if(ee&&!ee.da&&ee.capture==w){const ge=ee.listener,Le=ee.ha||ee.src;ee.fa&&Pe(c.i,ee),z=ge.call(Le,S)!==!1&&z}}return z&&!S.defaultPrevented}function wc(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:a.setTimeout(c,g||0)}function nl(c){c.g=wc(()=>{c.g=null,c.i&&(c.i=!1,nl(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Ff extends N{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:nl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(c){N.call(this),this.h=c,this.g={}}_(vs,N);var yo=[];function il(c){le(c.g,function(g,w){this.g.hasOwnProperty(w)&&gs(g)},c),c.g={}}vs.prototype.N=function(){vs.Z.N.call(this),il(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vo=a.JSON.stringify,Uf=a.JSON.parse,Tc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function rl(){}function Ec(){}var mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ws(){O.call(this,"d")}_(ws,O);function wo(){O.call(this,"c")}_(wo,O);var Di={},gr=null;function To(){return gr=gr||new Et}Di.Ia="serverreachability";function Pc(c){O.call(this,Di.Ia,c)}_(Pc,O);function _r(c){const g=To();Pt(g,new Pc(g))}Di.STAT_EVENT="statevent";function sl(c,g){O.call(this,Di.STAT_EVENT,c),this.stat=g}_(sl,O);function St(c){const g=To();Pt(g,new sl(g,c))}Di.Ja="timingevent";function Sc(c,g){O.call(this,Di.Ja,c),this.size=g}_(Sc,O);function Ts(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function Es(){this.g=!0}Es.prototype.ua=function(){this.g=!1};function Bf(c,g,w,S,z,H){c.info(function(){if(c.g)if(H){var ee="",ge=H.split("&");for(let Me=0;Me<ge.length;Me++){var Le=ge[Me].split("=");if(Le.length>1){const st=Le[0];Le=Le[1];const bn=st.split("_");ee=bn.length>=2&&bn[1]=="type"?ee+(st+"="+Le+"&"):ee+(st+"=redacted&")}}}else ee=null;else ee=H;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+g+`
`+w+`
`+ee})}function zf(c,g,w,S,z,H,ee){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+g+`
`+w+`
`+H+" "+ee})}function yr(c,g,w,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+jf(c,w)+(S?" "+S:"")})}function ol(c,g){c.info(function(){return"TIMEOUT: "+g})}Es.prototype.info=function(){};function jf(c,g){if(!c.g)return g;if(!g)return null;try{const H=JSON.parse(g);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var w=H[c];if(!(w.length<2)){var S=w[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ee=1;ee<S.length;ee++)S[ee]=""}}}}return vo(H)}catch{return g}}var Eo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ic={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},xc;function nn(){}_(nn,rl),nn.prototype.g=function(){return new XMLHttpRequest},xc=new nn;function oe(c){return encodeURIComponent(String(c))}function Ac(c){var g=1;c=c.split(":");const w=[];for(;g>0&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function Wn(c,g,w,S){this.j=c,this.i=g,this.l=w,this.S=S||1,this.V=new vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new al}function al(){this.i=null,this.g="",this.h=!1}var ll={},Ps={};function Po(c,g,w){c.M=1,c.A=ze(Kt(g)),c.u=w,c.R=!0,Mi(c,null)}function Mi(c,g){c.F=Date.now(),So(c),c.B=Kt(c.A);var w=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),Ro(w.i,"t",S),c.C=0,w=c.j.L,c.h=new al,c.g=El(c.j,w?g:null,!c.u),c.P>0&&(c.O=new Ff(f(c.Y,c,c.g),c.P)),g=c.V,w=c.g,S=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(yo[0]=z.toString()),z=yo);for(let H=0;H<z.length;H++){const ee=Ja(w,z[H],S||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=c.J?fe(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),_r(),Bf(c.i,c.v,c.B,c.l,c.S,c.u)}Wn.prototype.ba=function(c){c=c.target;const g=this.O;g&&hi(c)==3?g.j():this.Y(c)},Wn.prototype.Y=function(c){try{if(c==this.g)e:{const ge=hi(this.g),Le=this.g.ya(),Me=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||ml(this.g)))){this.K||ge!=4||Le==7||(Le==8||Me<=0?_r(3):_r(2)),Io(this);var g=this.g.ca();this.X=g;var w=Cc(this);if(this.o=g==200,zf(this.i,this.v,this.B,this.l,this.S,ge,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var H=S;break t}}H=null}if(c=H)yr(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ul(this,c);else{this.o=!1,this.m=3,St(12),An(this),Ss(this);break e}}if(this.R){c=!0;let st;for(;!this.K&&this.C<w.length;)if(st=Hf(this,w),st==Ps){ge==4&&(this.m=4,St(14),c=!1),yr(this.i,this.l,null,"[Incomplete Response]");break}else if(st==ll){this.m=4,St(15),yr(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else yr(this.i,this.l,st,null),ul(this,st);if(Rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||w.length!=0||this.h.h||(this.m=1,St(16),c=!1),this.o=this.o&&c,!c)yr(this.i,this.l,w,"[Invalid Chunked Response]"),An(this),Ss(this);else if(w.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),wl(ee),ee.P=!0,St(11))}}else yr(this.i,this.l,w,null),ul(this,w);ge==4&&An(this),this.o&&!this.K&&(ge==4?pn(this.j,this):(this.o=!1,So(this)))}else gl(this.g),g==400&&w.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),An(this),Ss(this)}}}catch{}finally{}};function Cc(c){if(!Rc(c))return c.g.la();const g=ml(c.g);if(g==="")return"";let w="";const S=g.length,z=hi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return An(c),Ss(c),"";c.h.i=new a.TextDecoder}for(let H=0;H<S;H++)c.h.h=!0,w+=c.h.i.decode(g[H],{stream:!(z&&H==S-1)});return g.length=0,c.h.g+=w,c.C=0,c.h.g}function Rc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Hf(c,g){var w=c.C,S=g.indexOf(`
`,w);return S==-1?Ps:(w=Number(g.substring(w,S)),isNaN(w)?ll:(S+=1,S+w>g.length?Ps:(g=g.slice(S,S+w),c.C=S+w,g)))}Wn.prototype.cancel=function(){this.K=!0,An(this)};function So(c){c.T=Date.now()+c.H,kc(c,c.H)}function kc(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Ts(f(c.aa,c),g)}function Io(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Wn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(ol(this.i,this.B),this.M!=2&&(_r(),St(17)),An(this),this.m=2,Ss(this)):kc(this,this.T-c)};function Ss(c){c.j.I==0||c.K||pn(c.j,c)}function An(c){Io(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,il(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function ul(c,g){try{var w=c.j;if(w.I!=0&&(w.g==c||Is(w.h,c))){if(!c.L&&Is(w.h,c)&&w.I==3){try{var S=w.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)Do(w),Lo(w);else break e;vl(w),St(18)}}else w.xa=z[1],0<w.xa-w.K&&z[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=Ts(f(w.Va,w),6e3));Nc(w.h)<=1&&w.ta&&(w.ta=void 0)}else fi(w,11)}else if((c.L||w.g==c)&&Do(w),!D(g))for(z=w.Ba.g.parse(g),g=0;g<z.length;g++){let Me=z[g];const st=Me[0];if(!(st<=w.K))if(w.K=st,Me=Me[1],w.I==2)if(Me[0]=="c"){w.M=Me[1],w.ba=Me[2];const bn=Me[3];bn!=null&&(w.ka=bn,w.j.info("VER="+w.ka));const Gn=Me[4];Gn!=null&&(w.za=Gn,w.j.info("SVER="+w.za));const Ln=Me[5];Ln!=null&&typeof Ln=="number"&&Ln>0&&(S=1.5*Ln,w.O=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const pi=c.g;if(pi){const Vo=pi.g?pi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vo){var H=S.h;H.g||Vo.indexOf("spdy")==-1&&Vo.indexOf("quic")==-1&&Vo.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Oi(H,H.h),H.h=null))}if(S.G){const Fo=pi.g?pi.g.getResponseHeader("X-HTTP-Session-Id"):null;Fo&&(S.wa=Fo,re(S.J,S.G,Fo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),S=w;var ee=c;if(S.na=Tl(S,S.L?S.ba:null,S.W),ee.L){cl(S.h,ee);var ge=ee,Le=S.O;Le&&(ge.H=Le),ge.D&&(Io(ge),So(ge)),S.g=ee}else yl(S);w.i.length>0&&di(w)}else Me[0]!="stop"&&Me[0]!="close"||fi(w,7);else w.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?fi(w,7):ve(w):Me[0]!="noop"&&w.l&&w.l.qa(Me),w.A=0)}}_r(4)}catch{}}var Wf=class{constructor(c,g){this.g=c,this.map=g}};function bc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Lc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Nc(c){return c.h?1:c.g?c.g.size:0}function Is(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Oi(c,g){c.g?c.g.add(g):c.h=g}function cl(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}bc.prototype.cancel=function(){if(this.i=hl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function hl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.G);return g}return P(c.i)}var vr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ae(c,g){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const S=c[w].indexOf("=");let z,H=null;S>=0?(z=c[w].substring(0,S),H=c[w].substring(S+1)):z=c[w],g(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function be(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof be?(this.l=c.l,Cn(this,c.j),this.o=c.o,this.g=c.g,Rn(this,c.u),this.h=c.h,xs(this,As(c.i)),this.m=c.m):c&&(g=String(c).match(vr))?(this.l=!1,Cn(this,g[1]||"",!0),this.o=Vi(g[2]||""),this.g=Vi(g[3]||"",!0),Rn(this,g[4]),this.h=Vi(g[5]||"",!0),xs(this,g[6]||"",!0),this.m=Vi(g[7]||"")):(this.l=!1,this.i=new qn(null,this.l))}be.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(li(g,Dc,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(li(g,Dc,!0),"@"),c.push(oe(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(li(w,w.charAt(0)=="/"?Fi:xo,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",li(w,Ui)),c.join("")},be.prototype.resolve=function(c){const g=Kt(this);let w=!!c.j;w?Cn(g,c.j):w=!!c.o,w?g.o=c.o:w=!!c.g,w?g.g=c.g:w=c.u!=null;var S=c.h;if(w)Rn(g,c.u);else if(w=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=g.h.lastIndexOf("/");z!=-1&&(S=g.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let ee=0;ee<z.length;){const ge=z[ee++];ge=="."?S&&ee==z.length&&H.push(""):ge==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ee==z.length&&H.push("")):(H.push(ge),S=!0)}S=H.join("/")}else S=z}return w?g.h=S:w=c.i.toString()!=="",w?xs(g,As(c.i)):w=!!c.m,w&&(g.m=c.m),g};function Kt(c){return new be(c)}function Cn(c,g,w){c.j=w?Vi(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Rn(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function xs(c,g,w){g instanceof qn?(c.i=g,dl(c.i,c.l)):(w||(g=li(g,et)),c.i=new qn(g,c.l))}function re(c,g,w){c.i.set(g,w)}function ze(c){return re(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Vi(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function li(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,rn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function rn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Dc=/[#\/\?@]/g,xo=/[#\?:]/g,Fi=/[#\?]/g,et=/[#\?@]/g,Ui=/#/g;function qn(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function fn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ae(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=qn.prototype,t.add=function(c,g){fn(this),this.i=null,c=ui(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function Ao(c,g){fn(c),g=ui(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function wr(c,g){return fn(c),g=ui(c,g),c.g.has(g)}t.forEach=function(c,g){fn(this),this.g.forEach(function(w,S){w.forEach(function(z){c.call(g,z,S,this)},this)},this)};function Co(c,g){fn(c);let w=[];if(typeof g=="string")wr(c,g)&&(w=w.concat(c.g.get(ui(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)w=w.concat(c[g]);return w}t.set=function(c,g){return fn(this),this.i=null,c=ui(this,c),wr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=Co(this,c),c.length>0?String(c[0]):g):g};function Ro(c,g,w){Ao(c,g),w.length>0&&(c.i=null,c.g.set(ui(c,g),P(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var w=g[S];const z=oe(w);w=Co(this,w);for(let H=0;H<w.length;H++){let ee=z;w[H]!==""&&(ee+="="+oe(w[H])),c.push(ee)}}return this.i=c.join("&")};function As(c){const g=new qn;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function ui(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function dl(c,g){g&&!c.j&&(fn(c),c.i=null,c.g.forEach(function(w,S){const z=S.toLowerCase();S!=z&&(Ao(this,S),Ro(this,z,w))},c)),c.j=g}function ko(c,g){const w=new Es;if(a.Image){const S=new Image;S.onload=m(kn,w,"TestLoadImage: loaded",!0,g,S),S.onerror=m(kn,w,"TestLoadImage: error",!1,g,S),S.onabort=m(kn,w,"TestLoadImage: abort",!1,g,S),S.ontimeout=m(kn,w,"TestLoadImage: timeout",!1,g,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function Mc(c,g){const w=new Es,S=new AbortController,z=setTimeout(()=>{S.abort(),kn(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(z),H.ok?kn(w,"TestPingServer: ok",!0,g):kn(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),kn(w,"TestPingServer: error",!1,g)})}function kn(c,g,w,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(w)}catch{}}function qf(){this.g=new Tc}function me(c){this.i=c.Sb||null,this.h=c.ab||!1}_(me,rl),me.prototype.g=function(){return new Zt(this.i,this.h)};function Zt(c,g){Et.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Zt,Et),t=Zt.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,Bi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||a).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Tr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Bi(this)),this.g&&(this.readyState=3,Bi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ve(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ve(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Tr(this):Bi(this),this.readyState==3&&Ve(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Tr(this))},t.Na=function(c){this.g&&(this.response=c,Tr(this))},t.ga=function(){this.g&&Tr(this)};function Tr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Bi(c)}t.setRequestHeader=function(c,g){this.A.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function Bi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function bo(c){let g="";return le(c,function(w,S){g+=S,g+=":",g+=w,g+=`\r
`}),g}function Cs(c,g,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=bo(w),typeof c=="string"?w!=null&&oe(w):re(c,g,w))}function De(c){Et.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(De,Et);var fl=/^https?$/i,Rs=["POST","PUT"];t=De.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,g,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():xc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(H){ct(this,H);return}if(c=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)w.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())w.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(H=>H.toLowerCase()=="content-type"),z=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Rs,g,void 0)>=0)||S||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ee]of w)this.g.setRequestHeader(H,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){ct(this,H)}};function ct(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,ci(c),ks(c)}function ci(c){c.A||(c.A=!0,Pt(c,"complete"),Pt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Pt(this,"complete"),Pt(this,"abort"),ks(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ks(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?pl(this):this.Xa())},t.Xa=function(){pl(this)};function pl(c){if(c.h&&typeof o<"u"){if(c.v&&hi(c)==4)setTimeout(c.Ca.bind(c),0);else if(Pt(c,"readystatechange"),hi(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var S;if(S=H===0){let ee=String(c.D).match(vr)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),S=!fl.test(ee?ee.toLowerCase():"")}w=S}if(w)Pt(c,"complete"),Pt(c,"success");else{c.o=6;try{var z=hi(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",ci(c)}}finally{ks(c)}}}}function ks(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,g||Pt(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function hi(c){return c.g?c.g.readyState:0}t.ca=function(){try{return hi(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Uf(g)}};function ml(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function gl(c){const g={};c=(c.g&&hi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(D(c[S]))continue;var w=Ac(c[S]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const H=g[z]||[];g[z]=H,H.push(w)}J(g,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bs(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function _l(c){this.za=0,this.i=[],this.j=new Es,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bs("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bs("baseRetryDelayMs",5e3,c),this.Za=bs("retryDelaySeedMs",1e4,c),this.Ta=bs("forwardChannelMaxRetries",2,c),this.va=bs("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new bc(c&&c.concurrentRequestLimit),this.Ba=new qf,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_l.prototype,t.ka=8,t.I=1,t.connect=function(c,g,w,S){St(0),this.W=c,this.H=g||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.J=Tl(this,null,this.W),di(this)};function ve(c){if(sn(c),c.I==3){var g=c.V++,w=Kt(c.J);if(re(w,"SID",c.M),re(w,"RID",g),re(w,"TYPE","terminate"),zi(c,w),g=new Wn(c,c.j,g),g.M=2,g.A=ze(Kt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(g.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=g.A,w=!0),w||(g.g=El(g.j,null),g.g.ea(g.A)),g.F=Date.now(),So(g)}$n(c)}function Lo(c){c.g&&(wl(c),c.g.cancel(),c.g=null)}function sn(c){Lo(c),c.v&&(a.clearTimeout(c.v),c.v=null),Do(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function di(c){if(!Lc(c.h)&&!c.m){c.m=!0;var g=c.Ea;q||E(),K||(q(),K=!0),C.add(g,c),c.D=0}}function Oc(c,g){return Nc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Ts(f(c.Ea,c,g),Uc(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new Wn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=fe(H),Je(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=Fc(this,z,g),w=Kt(this.J),re(w,"RID",c),re(w,"CVER",22),this.G&&re(w,"X-HTTP-Session-Id",this.G),zi(this,w),H&&(this.R?g="headers="+oe(bo(H))+"&"+g:this.u&&Cs(w,this.u,H)),Oi(this.h,z),this.Ra&&re(w,"TYPE","init"),this.S?(re(w,"$req",g),re(w,"SID","null"),z.U=!0,Po(z,w,null)):Po(z,w,g),this.I=2}}else this.I==3&&(c?Vc(this,c):this.i.length==0||Lc(this.h)||Vc(this))};function Vc(c,g){var w;g?w=g.l:w=c.V++;const S=Kt(c.J);re(S,"SID",c.M),re(S,"RID",w),re(S,"AID",c.K),zi(c,S),c.u&&c.o&&Cs(S,c.u,c.o),w=new Wn(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),g&&(c.i=g.G.concat(c.i)),g=Fc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Oi(c.h,w),Po(w,S,g)}function zi(c,g){c.H&&le(c.H,function(w,S){re(g,S,w)}),c.l&&le({},function(w,S){re(g,S,w)})}function Fc(c,g,w){w=Math.min(c.i.length,w);const S=c.l?f(c.l.Ka,c.l,c):null;e:{var z=c.i;let ge=-1;for(;;){const Le=["count="+w];ge==-1?w>0?(ge=z[0].g,Le.push("ofs="+ge)):ge=0:Le.push("ofs="+ge);let Me=!0;for(let st=0;st<w;st++){var H=z[st].g;const bn=z[st].map;if(H-=ge,H<0)ge=Math.max(0,z[st].g-100),Me=!1;else try{H="req"+H+"_"||"";try{var ee=bn instanceof Map?bn:Object.entries(bn);for(const[Gn,Ln]of ee){let pi=Ln;u(Ln)&&(pi=vo(Ln)),Le.push(H+Gn+"="+encodeURIComponent(pi))}}catch(Gn){throw Le.push(H+"type="+encodeURIComponent("_badmap")),Gn}}catch{S&&S(bn)}}if(Me){ee=Le.join("&");break e}}ee=void 0}return c=c.i.splice(0,w),g.G=c,ee}function yl(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;q||E(),K||(q(),K=!0),C.add(g,c),c.A=0}}function vl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Ts(f(c.Da,c),Uc(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,No(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Ts(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Lo(this),No(this))};function wl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function No(c){c.g=new Wn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=Kt(c.na);re(g,"RID","rpc"),re(g,"SID",c.M),re(g,"AID",c.K),re(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&re(g,"TO",c.ia),re(g,"TYPE","xmlhttp"),zi(c,g),c.u&&c.o&&Cs(g,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=ze(Kt(g)),w.u=null,w.R=!0,Mi(w,c)}t.Va=function(){this.C!=null&&(this.C=null,Lo(this),vl(this),St(19))};function Do(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function pn(c,g){var w=null;if(c.g==g){Do(c),wl(c),c.g=null;var S=2}else if(Is(c.h,g))w=g.G,cl(c.h,g),S=1;else return;if(c.I!=0){if(g.o)if(S==1){w=g.u?g.u.length:0,g=Date.now()-g.F;var z=c.D;S=To(),Pt(S,new Sc(S,w)),di(c)}else yl(c);else if(z=g.m,z==3||z==0&&g.X>0||!(S==1&&Oc(c,g)||S==2&&vl(c)))switch(w&&w.length>0&&(g=c.h,g.i=g.i.concat(w)),z){case 1:fi(c,5);break;case 4:fi(c,10);break;case 3:fi(c,6);break;default:fi(c,2)}}}function Uc(c,g){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*g}function fi(c,g){if(c.j.info("Error code "+g),g==2){var w=f(c.bb,c),S=c.Ua;const z=!S;S=new be(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Cn(S,"https"),ze(S),z?ko(S.toString(),w):Mc(S.toString(),w)}else St(2);c.I=0,c.l&&c.l.pa(g),$n(c),sn(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function $n(c){if(c.I=0,c.ja=[],c.l){const g=hl(c.h);(g.length!=0||c.i.length!=0)&&(k(c.ja,g),k(c.ja,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.oa()}}function Tl(c,g,w){var S=w instanceof be?Kt(w):new be(w);if(S.g!="")g&&(S.g=g+"."+S.g),Rn(S,S.u);else{var z=a.location;S=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const H=new be(null);S&&Cn(H,S),g&&(H.g=g),z&&Rn(H,z),w&&(H.h=w),S=H}return w=c.G,g=c.wa,w&&g&&re(S,w,g),re(S,"VER",c.ka),zi(c,S),S}function El(c,g,w){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new De(new me({ab:w})):new De(c.ma),g.Fa(c.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Mo(){}t=Mo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Oo(){}Oo.prototype.g=function(c,g){return new Vt(c,g)};function Vt(c,g){Et.call(this),this.g=new _l(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!D(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Er(this)}_(Vt,Et),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){ve(this.g)},Vt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=vo(c),c=w);g.i.push(new Wf(g.Ya++,c)),g.I==3&&di(g)},Vt.prototype.N=function(){this.g.l=null,delete this.j,ve(this.g),delete this.g,Vt.Z.N.call(this)};function Pl(c){ws.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}_(Pl,ws);function Bc(){wo.call(this),this.status=1}_(Bc,wo);function Er(c){this.g=c}_(Er,Mo),Er.prototype.ra=function(){Pt(this.g,"a")},Er.prototype.qa=function(c){Pt(this.g,new Pl(c))},Er.prototype.pa=function(c){Pt(this.g,new Bc)},Er.prototype.oa=function(){Pt(this.g,"b")},Oo.prototype.createWebChannel=Oo.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,JI=function(){return new Oo},XI=function(){return To()},YI=Di,Jm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Eo.NO_ERROR=0,Eo.TIMEOUT=8,Eo.HTTP_ERROR=6,jh=Eo,Ic.COMPLETE="complete",QI=Ic,Ec.EventType=mr,mr.OPEN="a",mr.CLOSE="b",mr.ERROR="c",mr.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Wl=Ec,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,ZI=De}).apply(typeof gh<"u"?gh:typeof self<"u"?self:typeof window<"u"?window:{});const y0="@firebase/firestore",v0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qa="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new L_("@firebase/firestore");function $o(){return io.logLevel}function ie(t,...e){if(io.logLevel<=Se.DEBUG){const n=e.map(H_);io.debug(`Firestore (${qa}): ${t}`,...n)}}function ur(t,...e){if(io.logLevel<=Se.ERROR){const n=e.map(H_);io.error(`Firestore (${qa}): ${t}`,...n)}}function La(t,...e){if(io.logLevel<=Se.WARN){const n=e.map(H_);io.warn(`Firestore (${qa}): ${t}`,...n)}}function H_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,ex(t,i,n)}function ex(t,e,n){let i=`FIRESTORE (${qa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw ur(i),new Error(i)}function Oe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||ex(e,r,i)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class GD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class KD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ZD{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new er;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new er,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new er)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string",31837,{l:i}),new tx(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class QD{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class YD{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new QD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class w0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class XD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new w0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new w0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=JD(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Ie(t,e){return t<e?-1:t>e?1:0}function eg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return kp(r)===kp(o)?Ie(r,o):kp(r)?1:-1}return Ie(t.length,e.length)}const eM=55296,tM=57343;function kp(t){const e=t.charCodeAt(0);return e>=eM&&e<=tM}function Na(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T0="__name__";class yi{constructor(e,n,i){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&de(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return yi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof yi?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=yi.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Ie(e.length,n.length)}static compareSegments(e,n){const i=yi.isNumericId(e),r=yi.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?yi.extractNumericId(e).compare(yi.extractNumericId(n)):eg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zr.fromString(e.substring(4,e.length-2))}}class je extends yi{construct(e,n,i){return new je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new je(n)}static emptyPath(){return new je([])}}const nM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends yi{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return nM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===T0}static keyField(){return new Nt([T0])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new te(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new te(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new te(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new te(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(je.fromString(e))}static fromName(e){return new ae(je.fromString(e).popFirst(5))}static empty(){return new ae(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e,n){if(!n)throw new te(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iM(t,e,n,i){if(e===!0&&i===!0)throw new te(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function E0(t){if(!ae.isDocumentKey(t))throw new te(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function P0(t){if(ae.isDocumentKey(t))throw new te(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ix(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function es(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gf(t);throw new te(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(t,e){const n={typeString:t};return e&&(n.value=e),n}function oc(t,e){if(!ix(t))throw new te(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new te(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=-62135596800,I0=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*I0);return new Be(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<S0)throw new te(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/I0}_compareTo(e){return this.seconds===e.seconds?Ie(this.nanoseconds,e.nanoseconds):Ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(oc(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-S0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:mt("string",Be._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new Be(0,0))}static max(){return new _e(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vu=-1;function rM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=_e.fromTimestamp(i===1e9?new Be(n+1,0):new Be(n,i));return new ts(r,ae.empty(),e)}function sM(t){return new ts(t.readTime,t.key,Vu)}class ts{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ts(_e.min(),ae.empty(),Vu)}static max(){return new ts(_e.max(),ae.empty(),Vu)}}function oM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==aM)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function uM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_f.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q_=-1;function yf(t){return t==null}function kd(t){return t===0&&1/t==-1/0}function cM(t){return typeof t=="number"&&Number.isInteger(t)&&!kd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="";function hM(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=x0(e)),e=dM(t.get(n),e);return x0(e)}function dM(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case rx:n+="";break;default:n+=o}}return n}function x0(t){return t+rx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function co(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _h(this.root,e,this.comparator,!1)}getReverseIterator(){return new _h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _h(this.root,e,this.comparator,!0)}}class _h{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=o??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C0(this.data.getIterator())}getIteratorFrom(e){return new C0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new vt(this.comparator);return n.data=e,n}}class C0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new ti([])}unionWith(e){let n=new vt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new ti(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Na(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new ox("Invalid base64 string: "+o):o}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const fM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=fM.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:at(t.seconds),nanos:at(t.nanos)}}function at(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function is(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="server_timestamp",lx="__type__",ux="__previous_value__",cx="__local_write_time__";function $_(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[lx])==null?void 0:i.stringValue)===ax}function vf(t){const e=t.mapValue.fields[ux];return $_(e)?vf(e):e}function Fu(t){const e=ns(t.mapValue.fields[cx].timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const bd="(default)";class Uu{constructor(e,n){this.projectId=e,this.database=n||bd}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database===bd}isEqual(e){return e instanceof Uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="__type__",mM="__max__",yh={mapValue:{}},dx="__vector__",Ld="value";function rs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$_(t)?4:_M(t)?9007199254740991:gM(t)?10:11:de(28295,{value:t})}function Li(t,e){if(t===e)return!0;const n=rs(t);if(n!==rs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fu(t).isEqual(Fu(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=ns(r.timestampValue),u=ns(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return is(r.bytesValue).isEqual(is(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return at(r.geoPointValue.latitude)===at(o.geoPointValue.latitude)&&at(r.geoPointValue.longitude)===at(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return at(r.integerValue)===at(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=at(r.doubleValue),u=at(o.doubleValue);return a===u?kd(a)===kd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Na(t.arrayValue.values||[],e.arrayValue.values||[],Li);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(A0(a)!==A0(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Li(a[h],u[h])))return!1;return!0}(t,e);default:return de(52216,{left:t})}}function Bu(t,e){return(t.values||[]).find(n=>Li(n,e))!==void 0}function Da(t,e){if(t===e)return 0;const n=rs(t),i=rs(e);if(n!==i)return Ie(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ie(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=at(o.integerValue||o.doubleValue),h=at(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return R0(t.timestampValue,e.timestampValue);case 4:return R0(Fu(t),Fu(e));case 5:return eg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=is(o),h=is(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Ie(u[f],h[f]);if(m!==0)return m}return Ie(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Ie(at(o.latitude),at(a.latitude));return u!==0?u:Ie(at(o.longitude),at(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k0(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,P,k,b;const u=o.fields||{},h=a.fields||{},f=(v=u[Ld])==null?void 0:v.arrayValue,m=(P=h[Ld])==null?void 0:P.arrayValue,_=Ie(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return _!==0?_:k0(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===yh.mapValue&&a===yh.mapValue)return 0;if(o===yh.mapValue)return 1;if(a===yh.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let _=0;_<h.length&&_<m.length;++_){const v=eg(h[_],m[_]);if(v!==0)return v;const P=Da(u[h[_]],f[m[_]]);if(P!==0)return P}return Ie(h.length,m.length)}(t.mapValue,e.mapValue);default:throw de(23264,{he:n})}}function R0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ie(t,e);const n=ns(t),i=ns(e),r=Ie(n.seconds,i.seconds);return r!==0?r:Ie(n.nanos,i.nanos)}function k0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=Da(n[r],i[r]);if(o)return o}return Ie(n.length,i.length)}function Ma(t){return tg(t)}function tg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=ns(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return is(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=tg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${tg(n.fields[a])}`;return r+"}"}(t.mapValue):de(61005,{value:t})}function Hh(t){switch(rs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vf(t);return e?16+Hh(e):16;case 5:return 2*t.stringValue.length;case 6:return is(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Hh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return co(i.fields,(o,a)=>{r+=o.length+Hh(a)}),r}(t.mapValue);default:throw de(13486,{value:t})}}function b0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ng(t){return!!t&&"integerValue"in t}function G_(t){return!!t&&"arrayValue"in t}function L0(t){return!!t&&"nullValue"in t}function N0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wh(t){return!!t&&"mapValue"in t}function gM(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[hx])==null?void 0:i.stringValue)===dx}function lu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return co(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=lu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=lu(t.arrayValue.values[n]);return e}return{...t}}function _M(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===mM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=lu(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=lu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Li(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Wh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){co(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new Fn(lu(this.value))}}function fx(t){const e=[];return co(t.fields,(n,i)=>{const r=new Nt([n]);if(Wh(i)){const o=fx(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new ti(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Wt(e,0,_e.min(),_e.min(),_e.min(),Fn.empty(),0)}static newFoundDocument(e,n,i,r){return new Wt(e,1,n,_e.min(),i,r,0)}static newNoDocument(e,n){return new Wt(e,2,n,_e.min(),_e.min(),Fn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,_e.min(),_e.min(),Fn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,n){this.position=e,this.inclusive=n}}function D0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ae.comparator(ae.fromName(a.referenceValue),n.key):i=Da(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function M0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Li(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function yM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{}class pt extends px{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new wM(e,n,i):n==="array-contains"?new PM(e,i):n==="in"?new SM(e,i):n==="not-in"?new IM(e,i):n==="array-contains-any"?new xM(e,i):new pt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new TM(e,i):new EM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Da(n,this.value)):n!==null&&rs(this.value)===rs(n)&&this.matchesComparison(Da(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends px{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ai(e,n)}matches(e){return mx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function mx(t){return t.op==="and"}function gx(t){return vM(t)&&mx(t)}function vM(t){for(const e of t.filters)if(e instanceof ai)return!1;return!0}function ig(t){if(t instanceof pt)return t.field.canonicalString()+t.op.toString()+Ma(t.value);if(gx(t))return t.filters.map(e=>ig(e)).join(",");{const e=t.filters.map(n=>ig(n)).join(",");return`${t.op}(${e})`}}function _x(t,e){return t instanceof pt?function(i,r){return r instanceof pt&&i.op===r.op&&i.field.isEqual(r.field)&&Li(i.value,r.value)}(t,e):t instanceof ai?function(i,r){return r instanceof ai&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&_x(a,r.filters[u]),!0):!1}(t,e):void de(19439)}function yx(t){return t instanceof pt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ma(n.value)}`}(t):t instanceof ai?function(n){return n.op.toString()+" {"+n.getFilters().map(yx).join(" ,")+"}"}(t):"Filter"}class wM extends pt{constructor(e,n,i){super(e,n,i),this.key=ae.fromName(i.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class TM extends pt{constructor(e,n){super(e,"in",n),this.keys=vx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class EM extends pt{constructor(e,n){super(e,"not-in",n),this.keys=vx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vx(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ae.fromName(i.referenceValue))}class PM extends pt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return G_(n)&&Bu(n.arrayValue,this.value)}}class SM extends pt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Bu(this.value.arrayValue,n)}}class IM extends pt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Bu(this.value.arrayValue,n)}}class xM extends pt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!G_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Bu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function O0(t,e=null,n=[],i=[],r=null,o=null,a=null){return new AM(t,e,n,i,r,o,a)}function K_(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>ig(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),yf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ma(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ma(i)).join(",")),e.Te=n}return e.Te}function Z_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!yM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!_x(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!M0(t.startAt,e.startAt)&&M0(t.endAt,e.endAt)}function rg(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function CM(t,e,n,i,r,o,a,u){return new Ka(t,e,n,i,r,o,a,u)}function Q_(t){return new Ka(t)}function V0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wx(t){return t.collectionGroup!==null}function uu(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new vt(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new zu(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new zu(Nt.keyField(),i))}return e.Ie}function xi(t){const e=ye(t);return e.Ee||(e.Ee=RM(e,uu(t))),e.Ee}function RM(t,e){if(t.limitType==="F")return O0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new zu(r.field,o)});const n=t.endAt?new Nd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Nd(t.startAt.position,t.startAt.inclusive):null;return O0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function sg(t,e){const n=t.filters.concat([e]);return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function og(t,e,n){return new Ka(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wf(t,e){return Z_(xi(t),xi(e))&&t.limitType===e.limitType}function Tx(t){return`${K_(xi(t))}|lt:${t.limitType}`}function Go(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>yx(r)).join(", ")}]`),yf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ma(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ma(r)).join(",")),`Target(${i})`}(xi(t))}; limitType=${t.limitType})`}function Tf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ae.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of uu(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=D0(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,uu(i),r)||i.endAt&&!function(a,u,h){const f=D0(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,uu(i),r))}(t,e)}function kM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function Ex(t){return(e,n)=>{let i=!1;for(const r of uu(t)){const o=bM(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function bM(t,e,n){const i=t.field.isKeyField()?ae.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?Da(h,f):de(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return de(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return sx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM=new Xe(ae.comparator);function cr(){return LM}const Px=new Xe(ae.comparator);function ql(...t){let e=Px;for(const n of t)e=e.insert(n.key,n);return e}function Sx(t){let e=Px;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function zs(){return cu()}function Ix(){return cu()}function cu(){return new ho(t=>t.toString(),(t,e)=>t.isEqual(e))}const NM=new Xe(ae.comparator),DM=new vt(ae.comparator);function xe(...t){let e=DM;for(const n of t)e=e.add(n);return e}const MM=new vt(Ie);function OM(){return MM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kd(e)?"-0":e}}function xx(t){return{integerValue:""+t}}function VM(t,e){return cM(e)?xx(e):Y_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(){this._=void 0}}function FM(t,e,n){return t instanceof Dd?function(r,o){const a={fields:{[lx]:{stringValue:ax},[cx]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&$_(o)&&(o=vf(o)),o&&(a.fields[ux]=o),{mapValue:a}}(n,e):t instanceof ju?Cx(t,e):t instanceof Hu?Rx(t,e):function(r,o){const a=Ax(r,o),u=F0(a)+F0(r.Ae);return ng(a)&&ng(r.Ae)?xx(u):Y_(r.serializer,u)}(t,e)}function UM(t,e,n){return t instanceof ju?Cx(t,e):t instanceof Hu?Rx(t,e):n}function Ax(t,e){return t instanceof Md?function(i){return ng(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Dd extends Ef{}class ju extends Ef{constructor(e){super(),this.elements=e}}function Cx(t,e){const n=kx(e);for(const i of t.elements)n.some(r=>Li(r,i))||n.push(i);return{arrayValue:{values:n}}}class Hu extends Ef{constructor(e){super(),this.elements=e}}function Rx(t,e){let n=kx(e);for(const i of t.elements)n=n.filter(r=>!Li(r,i));return{arrayValue:{values:n}}}class Md extends Ef{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function F0(t){return at(t.integerValue||t.doubleValue)}function kx(t){return G_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BM(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof ju&&r instanceof ju||i instanceof Hu&&r instanceof Hu?Na(i.elements,r.elements,Li):i instanceof Md&&r instanceof Md?Li(i.Ae,r.Ae):i instanceof Dd&&r instanceof Dd}(t.transform,e.transform)}class zM{constructor(e,n){this.version=e,this.transformResults=n}}class Ai{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ai}static exists(e){return new Ai(void 0,e)}static updateTime(e){return new Ai(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pf{}function bx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Nx(t.key,Ai.none()):new ac(t.key,t.data,Ai.none());{const n=t.data,i=Fn.empty();let r=new vt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new fo(t.key,i,new ti(r.toArray()),Ai.none())}}function jM(t,e,n){t instanceof ac?function(r,o,a){const u=r.value.clone(),h=B0(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof fo?function(r,o,a){if(!qh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=B0(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(Lx(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function hu(t,e,n,i){return t instanceof ac?function(o,a,u,h){if(!qh(o.precondition,a))return u;const f=o.value.clone(),m=z0(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof fo?function(o,a,u,h){if(!qh(o.precondition,a))return u;const f=z0(o.fieldTransforms,h,a),m=a.data;return m.setAll(Lx(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(o,a,u){return qh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function HM(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=Ax(i.transform,r||null);o!=null&&(n===null&&(n=Fn.empty()),n.set(i.field,o))}return n||null}function U0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Na(i,r,(o,a)=>BM(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ac extends Pf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fo extends Pf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Lx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function B0(t,e,n){const i=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,UM(a,u,n[r]))}return i}function z0(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,FM(o,a,e))}return i}class Nx extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WM extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&jM(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=hu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=hu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=Ix();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=bx(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(_e.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&Na(this.mutations,e.mutations,(n,i)=>U0(n,i))&&Na(this.baseMutations,e.baseMutations,(n,i)=>U0(n,i))}}class X_{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Oe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return NM}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new X_(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Ce;function KM(t){switch(t){case G.OK:return de(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function Dx(t){if(t===void 0)return ur("GRPC error has no .code"),G.UNKNOWN;switch(t){case dt.OK:return G.OK;case dt.CANCELLED:return G.CANCELLED;case dt.UNKNOWN:return G.UNKNOWN;case dt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case dt.INTERNAL:return G.INTERNAL;case dt.UNAVAILABLE:return G.UNAVAILABLE;case dt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case dt.NOT_FOUND:return G.NOT_FOUND;case dt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case dt.ABORTED:return G.ABORTED;case dt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case dt.DATA_LOSS:return G.DATA_LOSS;default:return de(39323,{code:t})}}(Ce=dt||(dt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM=new Zr([4294967295,4294967295],0);function j0(t){const e=ZM().encode(t),n=new KI;return n.update(e),new Uint8Array(n.digest())}function H0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Zr([n,i],0),new Zr([r,o],0)]}class J_{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(i<0)throw new $l(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Zr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Zr.fromNumber(i)));return r.compare(QM)===1&&(r=new Zr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=j0(e),[i,r]=H0(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new J_(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=j0(e),[i,r]=H0(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,lc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Sf(_e.min(),r,new Xe(Ie),cr(),xe())}}class lc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new lc(i,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $h{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class Mx{constructor(e,n){this.targetId=e,this.Ce=n}}class Ox{constructor(e,n,i=Ot.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class W0{constructor(){this.ve=0,this.Fe=q0(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),i=xe();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:de(38017,{changeType:o})}}),new lc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=q0()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class YM{constructor(e){this.Ge=e,this.ze=new Map,this.je=cr(),this.Je=vh(),this.He=vh(),this.Ye=new Xe(Ie)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(rg(o))if(i===0){const a=new ae(o.path);this.et(n,a,Wt.newNoDocument(a,_e.min()))}else Oe(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=is(i).toUint8Array()}catch(h){if(h instanceof ox)return La("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new J_(a,r,o)}catch(h){return La(h instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&rg(u.target)){const h=new ae(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Wt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=xe();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Sf(e,n,this.Ye,this.je,i);return this.je=cr(),this.Je=vh(),this.He=vh(),this.Ye=new Xe(Ie),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new W0,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new vt(Ie),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new vt(Ie),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new W0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function vh(){return new Xe(ae.comparator)}function q0(){return new Xe(ae.comparator)}const XM={asc:"ASCENDING",desc:"DESCENDING"},JM={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eO={and:"AND",or:"OR"};class tO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function ag(t,e){return t.useProto3Json||yf(e)?e:{value:e}}function Od(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function nO(t,e){return Od(t,e.toTimestamp())}function Ci(t){return Oe(!!t,49232),_e.fromTimestamp(function(n){const i=ns(n);return new Be(i.seconds,i.nanos)}(t))}function ey(t,e){return lg(t,e).canonicalString()}function lg(t,e){const n=function(r){return new je(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Fx(t){const e=je.fromString(t);return Oe(Hx(e),10190,{key:e.toString()}),e}function ug(t,e){return ey(t.databaseId,e.path)}function bp(t,e){const n=Fx(e);if(n.get(1)!==t.databaseId.projectId)throw new te(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(Bx(n))}function Ux(t,e){return ey(t.databaseId,e)}function iO(t){const e=Fx(t);return e.length===4?je.emptyPath():Bx(e)}function cg(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Bx(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function $0(t,e,n){return{name:ug(t,e),fields:n.value.mapValue.fields}}function rO(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:de(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Oe(m===void 0||typeof m=="string",58123),Ot.fromBase64String(m||"")):(Oe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ot.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?G.UNKNOWN:Dx(f.code);return new te(m,f.message||"")}(a);n=new Ox(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=bp(t,i.document.name),o=Ci(i.document.updateTime),a=i.document.createTime?Ci(i.document.createTime):_e.min(),u=new Fn({mapValue:{fields:i.document.fields}}),h=Wt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new $h(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=bp(t,i.document),o=i.readTime?Ci(i.readTime):_e.min(),a=Wt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new $h([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=bp(t,i.document),o=i.removedTargetIds||[];n=new $h([],o,r,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new GM(r,o),u=i.targetId;n=new Mx(u,a)}}return n}function sO(t,e){let n;if(e instanceof ac)n={update:$0(t,e.key,e.value)};else if(e instanceof Nx)n={delete:ug(t,e.key)};else if(e instanceof fo)n={update:$0(t,e.key,e.data),updateMask:pO(e.fieldMask)};else{if(!(e instanceof WM))return de(16599,{Vt:e.type});n={verify:ug(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof Dd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof ju)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Hu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Md)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw de(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:nO(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de(27497)}(t,e.precondition)),n}function oO(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Ci(r.updateTime):Ci(o);return a.isEqual(_e.min())&&(a=Ci(o)),new zM(a,r.transformResults||[])}(n,e))):[]}function aO(t,e){return{documents:[Ux(t,e.path)]}}function lO(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Ux(t,r);const o=function(f){if(f.length!==0)return jx(ai.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:Ko(v.field),direction:hO(v.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=ag(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function uO(t){let e=iO(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Oe(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(_){const v=zx(_);return v instanceof ai&&gx(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(_){return _.map(v=>function(k){return new zu(Zo(k.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(_){let v;return v=typeof _=="object"?_.value:_,yf(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(_){const v=!!_.before,P=_.values||[];return new Nd(P,v)}(n.startAt));let f=null;return n.endAt&&(f=function(_){const v=!_.before,P=_.values||[];return new Nd(P,v)}(n.endAt)),CM(e,r,a,o,u,"F",h,f)}function cO(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Zo(n.unaryFilter.field);return pt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=Zo(n.unaryFilter.field);return pt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Zo(n.unaryFilter.field);return pt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zo(n.unaryFilter.field);return pt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(t):t.fieldFilter!==void 0?function(n){return pt.create(Zo(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ai.create(n.compositeFilter.filters.map(i=>zx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(n.compositeFilter.op))}(t):de(30097,{filter:t})}function hO(t){return XM[t]}function dO(t){return JM[t]}function fO(t){return eO[t]}function Ko(t){return{fieldPath:t.canonicalString()}}function Zo(t){return Nt.fromServerFormat(t.fieldPath)}function jx(t){return t instanceof pt?function(n){if(n.op==="=="){if(N0(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NAN"}};if(L0(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(N0(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NOT_NAN"}};if(L0(n.value))return{unaryFilter:{field:Ko(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(n.field),op:dO(n.op),value:n.value}}}(t):t instanceof ai?function(n){const i=n.getFilters().map(r=>jx(r));return i.length===1?i[0]:{compositeFilter:{op:fO(n.op),filters:i}}}(t):de(54877,{filter:t})}function pO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Hx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,n,i,r,o=_e.min(),a=_e.min(),u=Ot.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Fr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e){this.yt=e}}function gO(t){const e=uO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?og(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(){this.Cn=new yO}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(ts.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(ts.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class yO{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new vt(je.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new vt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wx=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(Wx,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Oa(0)}static cr(){return new Oa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="LruGarbageCollector",vO=1048576;function Z0([t,e],[n,i]){const r=Ie(t,n);return r===0?Ie(e,i):r}class wO{constructor(e){this.Ir=e,this.buffer=new vt(Z0),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();Z0(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class TO{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(K0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ga(n)?ie(K0,"Ignoring IndexedDB error during garbage collection: ",n):await $a(n)}await this.Vr(3e5)})}}class EO{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(_f.ce);const i=new wO(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(G0)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G0):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,a=Date.now(),this.nthSequenceNumber(e,r))).next(_=>(i=_,u=Date.now(),this.removeTargets(e,i,n))).next(_=>(o=_,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(f=Date.now(),$o()<=Se.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${_} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_})))}}function PO(t,e){return new EO(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SO{constructor(){this.changes=new ho(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&hu(i.mutation,r,ti.empty(),Be.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,xe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=xe()){const r=zs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=ql();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=zs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,xe()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=cr();const a=cu(),u=function(){return cu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof fo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),hu(m.mutation,f,m.mutation.getFieldMask(),Be.now())):a.set(f.key,ti.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new IO(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=cu();let r=new Xe((a,u)=>a-u),o=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||ti.empty();m=u.applyToLocalView(f,m),i.set(h,m);const _=(r.get(u.batchId)||xe()).add(h);r=r.insert(u.batchId,_)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,_=Ix();m.forEach(v=>{if(!o.has(v)){const P=bx(n.get(v),i.get(v));P!==null&&_.set(v,P),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,_))}return Z.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve(zs());let u=Vu,h=o;return a.next(f=>Z.forEach(f,(m,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(m)?Z.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,xe())).next(m=>({batchId:u,changes:Sx(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(i=>{let r=ql();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=ql();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,h=>{const f=function(_,v){return new Ka(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((_,v)=>{a=a.insert(_,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Wt.newInvalidDocument(m)))});let u=ql();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&hu(m.mutation,f,ti.empty(),Be.now()),Tf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ci(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:gO(r.bundledQuery),readTime:Ci(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(){this.overlays=new Xe(ae.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=zs();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=zs(),o=n.length+1,a=new ae(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Xe((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=zs(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=zs(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return Z.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new $M(n,i));let o=this.qr.get(n);o===void 0&&(o=xe(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(){this.Qr=new vt(xt.$r),this.Ur=new vt(xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new xt(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new xt(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ae(new je([])),i=new xt(n,e),r=new xt(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new je([])),i=new xt(n,e),r=new xt(n,e+1);let o=xe();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new xt(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class xt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||Ie(e.Yr,n.Yr)}static Kr(e,n){return Ie(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new vt(xt.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new qM(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new xt(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?q_:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new xt(n,0),r=new xt(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new vt(Ie);return n.forEach(r=>{const o=new xt(r,0),a=new xt(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ae.isDocumentKey(o)||(o=o.child(""));const a=new xt(new ae(o),0);let u=new vt(Ie);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),Z.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,r=>{const o=new xt(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new xt(n,0),r=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.ri=e,this.docs=function(){return new Xe(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let i=cr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Wt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=cr();const a=n.path,u=new ae(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||oM(sM(m),i)<=0||(r.has(m.key)||Tf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){de(9500)}ii(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new LO(this)}getSize(e){return Z.resolve(this.size)}}class LO extends SO{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NO{constructor(e){this.persistence=e,this.si=new ho(n=>K_(n),Z_),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new ty,this.targetCount=0,this.ai=Oa.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Oa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,n){this.ui={},this.overlays={},this.ci=new _f(0),this.li=!1,this.li=!0,this.hi=new RO,this.referenceDelegate=e(this),this.Pi=new NO(this),this.indexManager=new _O,this.remoteDocumentCache=function(r){return new bO(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new mO(n),this.Ii=new AO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new CO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new kO(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new DO(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class DO extends lM{constructor(e){super(),this.currentSequenceNumber=e}}class ny{constructor(e){this.persistence=e,this.Ri=new ty,this.Vi=null}static mi(e){return new ny(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,i=>{const r=ae.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,_e.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Vd{constructor(e,n){this.persistence=e,this.pi=new ho(i=>hM(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=PO(this,n)}static mi(e,n){return new Vd(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?Z.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,_e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hh(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Z.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=xe(),r=xe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new iy(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return pL()?8:uM(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new MO;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?($o()<=Se.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):($o()<=Se.DEBUG&&ie("QueryEngine","Query:",Go(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?($o()<=Se.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xi(n))):Z.resolve())}ys(e,n){if(V0(n))return Z.resolve(null);let i=xi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=og(n,null,"F"),i=xi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=xe(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,og(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return V0(n)||r.isEqual(_e.min())?Z.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?Z.resolve(null):($o()<=Se.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Go(n)),this.vs(e,a,n,rM(r,Vu)).next(u=>u))})}Ds(e,n){let i=new vt(Ex(e));return n.forEach((r,o)=>{Tf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return $o()<=Se.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Go(n)),this.ps.getDocumentsMatchingQuery(e,n,ts.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="LocalStore",VO=3e8;class FO{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Xe(Ie),this.xs=new ho(o=>K_(o),Z_),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xO(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function UO(t,e,n,i){return new FO(t,e,n,i)}async function $x(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=xe();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function BO(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const _=f.batch,v=_.keys();let P=Z.resolve();return v.forEach(k=>{P=P.next(()=>m.getEntry(h,k)).next(b=>{const F=f.docVersions.get(k);Oe(F!==null,48541),b.version.compareTo(F)<0&&(_.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),P.next(()=>u.mutationQueue.removeMutationBatch(h,_))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=xe();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Gx(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function zO(t,e){const n=ye(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,_)=>{const v=r.get(_);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,_).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,_)));let P=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?P=P.withResumeToken(Ot.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):m.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(m.resumeToken,i)),r=r.insert(_,P),function(b,F,x){return b.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=VO?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(v,P,m)&&u.push(n.Pi.updateTargetData(o,P))});let h=cr(),f=xe();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(jO(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(_e.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(_=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function jO(t,e,n){let i=xe(),r=xe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=cr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(_e.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ie(ry,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function HO(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=q_),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function WO(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new Fr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function hg(t,e,n){const i=ye(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!Ga(a))throw a;ie(ry,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function Q0(t,e,n){const i=ye(t);let r=_e.min(),o=xe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const _=ye(h),v=_.xs.get(m);return v!==void 0?Z.resolve(_.Ms.get(v)):_.Pi.getTargetData(f,m)}(i,a,xi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:_e.min(),n?o:xe())).next(u=>(qO(i,kM(e),u),{documents:u,Qs:o})))}function qO(t,e,n){let i=t.Os.get(e)||_e.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class Y0{constructor(){this.activeTargetIds=OM()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class $O{constructor(){this.Mo=new Y0,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Y0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X0="ConnectivityMonitor";class J0{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(X0,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(X0,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wh=null;function dg(){return wh===null?wh=function(){return 268435456+Math.round(2147483648*Math.random())}():wh++,"0x"+wh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lp="RestConnection",KO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class ZO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===bd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=dg(),u=this.zo(e,n.toUriEncodedString());ie(Lp,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=ds(f);return this.Jo(e,u,h,i,m).then(_=>(ie(Lp,`Received RPC '${e}' ${a}: `,_),_),_=>{throw La(Lp,`RPC '${e}' ${a} failed with error: `,_,"url: ",u,"request:",i),_})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=KO[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class YO extends ZO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=dg();return new Promise((u,h)=>{const f=new ZI;f.setWithCredentials(!0),f.listenOnce(QI.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case jh.NO_ERROR:const _=f.getResponseJson();ie(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case jh.TIMEOUT:ie(Bt,`RPC '${e}' ${a} timed out`),h(new te(G.DEADLINE_EXCEEDED,"Request time out"));break;case jh.HTTP_ERROR:const v=f.getStatus();if(ie(Bt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let P=f.getResponseJson();Array.isArray(P)&&(P=P[0]);const k=P==null?void 0:P.error;if(k&&k.status&&k.message){const b=function(x){const I=x.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(I)>=0?I:G.UNKNOWN}(k.status);h(new te(b,k.message))}else h(new te(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new te(G.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ie(Bt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ie(Bt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=dg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=JI(),u=XI(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ie(Bt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const _=a.createWebChannel(m,h);this.I_(_);let v=!1,P=!1;const k=new QO({Yo:F=>{P?ie(Bt,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(v||(ie(Bt,`Opening RPC '${e}' stream ${r} transport.`),_.open(),v=!0),ie(Bt,`RPC '${e}' stream ${r} sending:`,F),_.send(F))},Zo:()=>_.close()}),b=(F,x,I)=>{F.listen(x,A=>{try{I(A)}catch(B){setTimeout(()=>{throw B},0)}})};return b(_,Wl.EventType.OPEN,()=>{P||(ie(Bt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),b(_,Wl.EventType.CLOSE,()=>{P||(P=!0,ie(Bt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(_))}),b(_,Wl.EventType.ERROR,F=>{P||(P=!0,La(Bt,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),k.a_(new te(G.UNAVAILABLE,"The operation could not be completed")))}),b(_,Wl.EventType.MESSAGE,F=>{var x;if(!P){const I=F.data[0];Oe(!!I,16349);const A=I,B=(A==null?void 0:A.error)||((x=A[0])==null?void 0:x.error);if(B){ie(Bt,`RPC '${e}' stream ${r} received error:`,B);const q=B.status;let K=function(R){const N=dt[R];if(N!==void 0)return Dx(N)}(q),C=B.message;K===void 0&&(K=G.INTERNAL,C="Unknown error status: "+q+" with message "+B.message),P=!0,k.a_(new te(K,C)),_.close()}else ie(Bt,`RPC '${e}' stream ${r} received:`,I),k.u_(I)}}),b(u,YI.STAT_EVENT,F=>{F.stat===Jm.PROXY?ie(Bt,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===Jm.NOPROXY&&ie(Bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Np(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(t){return new tO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kx{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT="PersistentStream";class Zx{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new te(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(eT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(eT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XO extends Zx{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=rO(this.serializer,e),i=function(o){if(!("targetChange"in o))return _e.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?_e.min():a.readTime?Ci(a.readTime):_e.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=cg(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=rg(h)?{documents:aO(o,h)}:{query:lO(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Vx(o,a.resumeToken);const f=ag(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(_e.min())>0){u.readTime=Od(o,a.snapshotVersion.toTimestamp());const f=ag(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=cO(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=cg(this.serializer),n.removeTarget=e,this.q_(n)}}class JO extends Zx{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=oO(e.writeResults,e.commitTime),i=Ci(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=cg(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>sO(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{}class tV extends eV{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new te(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,lg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(G.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,lg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(G.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class nV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ur(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro="RemoteStore";class iV{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{po(this)&&(ie(ro,"Restarting streams for network reachability change."),await async function(h){const f=ye(h);f.Ea.add(4),await uc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await xf(f)}(this))})}),this.Ra=new nV(i,r)}}async function xf(t){if(po(t))for(const e of t.da)await e(!0)}async function uc(t){for(const e of t.da)await e(!1)}function Qx(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),ly(n)?ay(n):Za(n).O_()&&oy(n,e))}function sy(t,e){const n=ye(t),i=Za(n);n.Ia.delete(e),i.O_()&&Yx(n,e),n.Ia.size===0&&(i.O_()?i.L_():po(n)&&n.Ra.set("Unknown"))}function oy(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Za(t).Y_(e)}function Yx(t,e){t.Va.Ue(e),Za(t).Z_(e)}function ay(t){t.Va=new YM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Za(t).start(),t.Ra.ua()}function ly(t){return po(t)&&!Za(t).x_()&&t.Ia.size>0}function po(t){return ye(t).Ea.size===0}function Xx(t){t.Va=void 0}async function rV(t){t.Ra.set("Online")}async function sV(t){t.Ia.forEach((e,n)=>{oy(t,e)})}async function oV(t,e){Xx(t),ly(t)?(t.Ra.ha(e),ay(t)):t.Ra.set("Unknown")}async function aV(t,e,n){if(t.Ra.set("Online"),e instanceof Ox&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ie(ro,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fd(t,i)}else if(e instanceof $h?t.Va.Ze(e):e instanceof Mx?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const i=await Gx(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Ot.EMPTY_BYTE_STRING,m.snapshotVersion)),Yx(o,h);const _=new Fr(m.target,h,f,m.sequenceNumber);oy(o,_)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ie(ro,"Failed to raise snapshot:",i),await Fd(t,i)}}async function Fd(t,e,n){if(!Ga(e))throw e;t.Ea.add(1),await uc(t),t.Ra.set("Offline"),n||(n=()=>Gx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(ro,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xf(t)})}function Jx(t,e){return e().catch(n=>Fd(t,n,e))}async function Af(t){const e=ye(t),n=ss(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:q_;for(;lV(e);)try{const r=await HO(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,uV(e,r)}catch(r){await Fd(e,r)}eA(e)&&tA(e)}function lV(t){return po(t)&&t.Ta.length<10}function uV(t,e){t.Ta.push(e);const n=ss(t);n.O_()&&n.X_&&n.ea(e.mutations)}function eA(t){return po(t)&&!ss(t).x_()&&t.Ta.length>0}function tA(t){ss(t).start()}async function cV(t){ss(t).ra()}async function hV(t){const e=ss(t);for(const n of t.Ta)e.ea(n.mutations)}async function dV(t,e,n){const i=t.Ta.shift(),r=X_.from(i,e,n);await Jx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Af(t)}async function fV(t,e){e&&ss(t).X_&&await async function(i,r){if(function(a){return KM(a)&&a!==G.ABORTED}(r.code)){const o=i.Ta.shift();ss(i).B_(),await Jx(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Af(i)}}(t,e),eA(t)&&tA(t)}async function tT(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ie(ro,"RemoteStore received new credentials");const i=po(n);n.Ea.add(3),await uc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xf(n)}async function pV(t,e){const n=ye(t);e?(n.Ea.delete(2),await xf(n)):e||(n.Ea.add(2),await uc(n),n.Ra.set("Unknown"))}function Za(t){return t.ma||(t.ma=function(n,i,r){const o=ye(n);return o.sa(),new XO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:rV.bind(null,t),t_:sV.bind(null,t),r_:oV.bind(null,t),H_:aV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),ly(t)?ay(t):t.Ra.set("Unknown")):(await t.ma.stop(),Xx(t))})),t.ma}function ss(t){return t.fa||(t.fa=function(n,i,r){const o=ye(n);return o.sa(),new JO(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:cV.bind(null,t),r_:fV.bind(null,t),ta:hV.bind(null,t),na:dV.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Af(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(ro,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new uy(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cy(t,e){if(ur("AsyncQueue",`${e}: ${t}`),Ga(t))return new te(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ae.comparator(n.key,i.key):(n,i)=>ae.comparator(n.key,i.key),this.keyedMap=ql(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.ga=new Xe(ae.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class Va{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Va(e,n,Pa.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class gV{constructor(){this.queries=iT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=ye(n),o=r.queries;r.queries=iT(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new te(G.ABORTED,"Firestore shutting down"))}}function iT(){return new ho(t=>Tx(t),wf)}async function nA(t,e){const n=ye(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new mV,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=cy(a,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&hy(n)}async function iA(t,e){const n=ye(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function _V(t,e){const n=ye(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&hy(n)}function yV(t,e,n){const i=ye(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function hy(t){t.Ca.forEach(e=>{e.next()})}var fg,rT;(rT=fg||(fg={})).Ma="default",rT.Cache="cache";class rA{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Va(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Va.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==fg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.key=e}}class oA{constructor(e){this.key=e}}class vV{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=Ex(e),this.tu=new Pa(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new nT,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,_)=>{const v=r.get(m),P=Tf(this.query,_)?_:null,k=!!v&&this.mutatedKeys.has(v.key),b=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let F=!1;v&&P?v.data.isEqual(P.data)?k!==b&&(i.track({type:3,doc:P}),F=!0):this.su(v,P)||(i.track({type:2,doc:P}),F=!0,(h&&this.eu(P,h)>0||f&&this.eu(P,f)<0)&&(u=!0)):!v&&P?(i.track({type:0,doc:P}),F=!0):v&&!P&&(i.track({type:1,doc:v}),F=!0,(h||f)&&(u=!0)),F&&(P?(a=a.add(P),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,_)=>function(P,k){const b=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:F})}};return b(P)-b(k)}(m.type,_.type)||this.eu(m.doc,_.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new Va(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new nT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new oA(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new sA(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Va.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dy="SyncEngine";class wV{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class TV{constructor(e){this.key=e,this.hu=!1}}class EV{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new ho(u=>Tx(u),wf),this.Iu=new Map,this.Eu=new Set,this.du=new Xe(ae.comparator),this.Au=new Map,this.Ru=new ty,this.Vu={},this.mu=new Map,this.fu=Oa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function PV(t,e,n=!0){const i=dA(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await aA(i,e,n,!0),r}async function SV(t,e){const n=dA(t);await aA(n,e,!0,!1)}async function aA(t,e,n,i){const r=await WO(t.localStore,xi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await IV(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Qx(t.remoteStore,r),u}async function IV(t,e,n,i,r){t.pu=(_,v,P)=>async function(b,F,x,I){let A=F.view.ru(x);A.Cs&&(A=await Q0(b.localStore,F.query,!1).then(({documents:C})=>F.view.ru(C,A)));const B=I&&I.targetChanges.get(F.targetId),q=I&&I.targetMismatches.get(F.targetId)!=null,K=F.view.applyChanges(A,b.isPrimaryClient,B,q);return oT(b,F.targetId,K.au),K.snapshot}(t,_,v,P);const o=await Q0(t.localStore,e,!0),a=new vV(e,o.Qs),u=a.ru(o.documents),h=lc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);oT(t,n,f.au);const m=new wV(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function xV(t,e,n){const i=ye(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!wf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await hg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&sy(i.remoteStore,r.targetId),pg(i,r.targetId)}).catch($a)):(pg(i,r.targetId),await hg(i.localStore,r.targetId,!0))}async function AV(t,e){const n=ye(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),sy(n.remoteStore,i.targetId))}async function CV(t,e,n){const i=MV(t);try{const r=await function(a,u){const h=ye(a),f=Be.now(),m=u.reduce((P,k)=>P.add(k.key),xe());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let k=cr(),b=xe();return h.Ns.getEntries(P,m).next(F=>{k=F,k.forEach((x,I)=>{I.isValidDocument()||(b=b.add(x))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,k)).next(F=>{_=F;const x=[];for(const I of u){const A=HM(I,_.get(I.key).overlayedDocument);A!=null&&x.push(new fo(I.key,A,fx(A.value.mapValue),Ai.exists(!0)))}return h.mutationQueue.addMutationBatch(P,f,x,u)}).next(F=>{v=F;const x=F.applyToLocalDocumentSet(_,b);return h.documentOverlayCache.saveOverlays(P,F.batchId,x)})}).then(()=>({batchId:v.batchId,changes:Sx(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new Xe(Ie)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await cc(i,r.changes),await Af(i.remoteStore)}catch(r){const o=cy(r,"Failed to persist write");n.reject(o)}}async function lA(t,e){const n=ye(t);try{const i=await zO(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Oe(a.hu,14607):r.removedDocuments.size>0&&(Oe(a.hu,42227),a.hu=!1))}),await cc(n,i,e)}catch(i){await $a(i)}}function sT(t,e,n){const i=ye(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=ye(a);h.onlineState=u;let f=!1;h.queries.forEach((m,_)=>{for(const v of _.Sa)v.va(u)&&(f=!0)}),f&&hy(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function RV(t,e,n){const i=ye(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new Xe(ae.comparator);a=a.insert(o,Wt.newNoDocument(o,_e.min()));const u=xe().add(o),h=new Sf(_e.min(),new Map,new Xe(Ie),a,u);await lA(i,h),i.du=i.du.remove(o),i.Au.delete(e),fy(i)}else await hg(i.localStore,e,!1).then(()=>pg(i,e,n)).catch($a)}async function kV(t,e){const n=ye(t),i=e.batch.batchId;try{const r=await BO(n.localStore,e);cA(n,i,null),uA(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await cc(n,r)}catch(r){await $a(r)}}async function bV(t,e,n){const i=ye(t);try{const r=await function(a,u){const h=ye(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(_=>(Oe(_!==null,37113),m=_.keys(),h.mutationQueue.removeMutationBatch(f,_))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);cA(i,e,n),uA(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await cc(i,r)}catch(r){await $a(r)}}function uA(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function cA(t,e,n){const i=ye(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function pg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||hA(t,i)})}function hA(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(sy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),fy(t))}function oT(t,e,n){for(const i of n)i instanceof sA?(t.Ru.addReference(i.key,e),LV(t,i)):i instanceof oA?(ie(dy,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||hA(t,i.key)):de(19791,{wu:i})}function LV(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ie(dy,"New document in limbo: "+n),t.Eu.add(i),fy(t))}function fy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(je.fromString(e)),i=t.fu.next();t.Au.set(i,new TV(n)),t.du=t.du.insert(n,i),Qx(t.remoteStore,new Fr(xi(Q_(n.path)),i,"TargetPurposeLimboResolution",_f.ce))}}async function cc(t,e,n){const i=ye(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const _=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(f){r.push(f);const _=iy.As(h.targetId,f);o.push(_)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=ye(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>Z.forEach(f,v=>Z.forEach(v.Es,P=>m.persistence.referenceDelegate.addReference(_,v.targetId,P)).next(()=>Z.forEach(v.ds,P=>m.persistence.referenceDelegate.removeReference(_,v.targetId,P)))))}catch(_){if(!Ga(_))throw _;ie(ry,"Failed to update sequence numbers: "+_)}for(const _ of f){const v=_.targetId;if(!_.fromCache){const P=m.Ms.get(v),k=P.snapshotVersion,b=P.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(v,b)}}}(i.localStore,o))}async function NV(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ie(dy,"User change. New user:",e.toKey());const i=await $x(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new te(G.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cc(n,i.Ls)}}function DV(t,e){const n=ye(t),i=n.Au.get(e);if(i&&i.hu)return xe().add(i.key);{let r=xe();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function dA(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=DV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RV.bind(null,e),e.Pu.H_=_V.bind(null,e.eventManager),e.Pu.yu=yV.bind(null,e.eventManager),e}function MV(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bV.bind(null,e),e}class Ud{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=If(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return UO(this.persistence,new OO,e.initialUser,this.serializer)}Cu(e){return new qx(ny.mi,this.serializer)}Du(e){return new $O}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ud.provider={build:()=>new Ud};class OV extends Ud{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof Vd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new TO(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new qx(i=>Vd.mi(i,n),this.serializer)}}class mg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>sT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=NV.bind(null,this.syncEngine),await pV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gV}()}createDatastore(e){const n=If(e.databaseInfo.databaseId),i=function(o){return new YO(o)}(e.databaseInfo);return function(o,a,u,h){return new tV(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new iV(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>sT(this.syncEngine,n,0),function(){return J0.v()?new J0:new GO}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const _=new EV(r,o,a,u,h,f);return m&&(_.gu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=ye(r);ie(ro,"RemoteStore shutting down."),o.Ea.add(5),await uc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}mg.provider={build:()=>new mg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os="FirestoreClient";class VV{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=jt.UNAUTHENTICATED,this.clientId=W_.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ie(os,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ie(os,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=cy(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Dp(t,e){t.asyncQueue.verifyOperationInProgress(),ie(os,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await $x(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function aT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await FV(t);ie(os,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>tT(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>tT(e.remoteStore,r)),t._onlineComponents=e}async function FV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(os,"Using user provided OfflineComponentProvider");try{await Dp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await Dp(t,new Ud)}}else ie(os,"Using default OfflineComponentProvider"),await Dp(t,new OV(void 0));return t._offlineComponents}async function pA(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(os,"Using user provided OnlineComponentProvider"),await aT(t,t._uninitializedComponentsProvider._online)):(ie(os,"Using default OnlineComponentProvider"),await aT(t,new mg))),t._onlineComponents}function UV(t){return pA(t).then(e=>e.syncEngine)}async function mA(t){const e=await pA(t),n=e.eventManager;return n.onListen=PV.bind(null,e.syncEngine),n.onUnlisten=xV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=SV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=AV.bind(null,e.syncEngine),n}function BV(t,e,n={}){const i=new er;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new fA({next:v=>{m.Nu(),a.enqueueAndForget(()=>iA(o,_));const P=v.docs.has(u);!P&&v.fromCache?f.reject(new te(G.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&v.fromCache&&h&&h.source==="server"?f.reject(new te(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),_=new rA(Q_(u.path),m,{includeMetadataChanges:!0,qa:!0});return nA(o,_)}(await mA(t),t.asyncQueue,e,n,i)),i.promise}function zV(t,e,n={}){const i=new er;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new fA({next:v=>{m.Nu(),a.enqueueAndForget(()=>iA(o,_)),v.fromCache&&h.source==="server"?f.reject(new te(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),_=new rA(u,m,{includeMetadataChanges:!0,qa:!0});return nA(o,_)}(await mA(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="firestore.googleapis.com",uT=!0;class cT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_A,this.ssl=uT}else this.host=e.host,this.ssl=e.ssl??uT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Wx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<vO)throw new te(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=gA(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Cf{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new cT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new cT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new GD;switch(i.type){case"firstParty":return new YD(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=lT.get(n);i&&(ie("ComponentProvider","Removing Datastore"),lT.delete(n),i.terminate())}(this),Promise.resolve()}}function jV(t,e,n,i={}){var f;t=es(t,Cf);const r=ds(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(k_(`https://${u}`),b_("Firestore",!0)),o.host!==_A&&o.host!==u&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!Js(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,_;if(typeof i.mockUserToken=="string")m=i.mockUserToken,_=jt.MOCK_USER;else{m=lI(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new te(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new jt(v)}t._authCredentials=new KD(new tx(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new mo(this.firestore,e,this._query)}}class gt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(oc(n,gt._jsonSchema))return new gt(e,i||null,new ae(je.fromString(n.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:mt("string",gt._jsonSchemaVersion),referencePath:mt("string")};class Qr extends mo{constructor(e,n,i){super(e,n,Q_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new ae(e))}withConverter(e){return new Qr(this.firestore,e,this._path)}}function yA(t,e,...n){if(t=wt(t),nx("collection","path",e),t instanceof Cf){const i=je.fromString(e,...n);return P0(i),new Qr(t,null,i)}{if(!(t instanceof gt||t instanceof Qr))throw new te(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return P0(i),new Qr(t.firestore,null,i)}}function Rf(t,e,...n){if(t=wt(t),arguments.length===1&&(e=W_.newId()),nx("doc","path",e),t instanceof Cf){const i=je.fromString(e,...n);return E0(i),new gt(t,null,new ae(i))}{if(!(t instanceof gt||t instanceof Qr))throw new te(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return E0(i),new gt(t.firestore,t instanceof Qr?t.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="AsyncQueue";class dT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kx(this,"async_queue_retry"),this._c=()=>{const i=Np();i&&ie(hT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=Np();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Np();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new er;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ga(e))throw e;ie(hT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,ur("INTERNAL UNHANDLED ERROR: ",fT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=uy.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&de(47125,{Pc:fT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function fT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class hc extends Cf{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new dT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dT(e),this._firestoreClient=void 0,await e}}}function HV(t,e){const n=typeof t=="object"?t:D_(),i=typeof t=="string"?t:bd,r=df(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=sI("firestore");o&&jV(r,...o)}return r}function py(t){if(t._terminated)throw new te(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||WV(t),t._firestoreClient}function WV(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new pM(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,gA(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new VV(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(Ot.fromBase64String(e))}catch(n){throw new te(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Un(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(oc(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:mt("string",Un._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ie(this._lat,e._lat)||Ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ri._jsonSchemaVersion}}static fromJSON(e){if(oc(e,ri._jsonSchema))return new ri(e.latitude,e.longitude)}}ri._jsonSchemaVersion="firestore/geoPoint/1.0",ri._jsonSchema={type:mt("string",ri._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ri._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(oc(e,Ri._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ri(e.vectorValues);throw new te(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ri._jsonSchemaVersion="firestore/vectorValue/1.0",Ri._jsonSchema={type:mt("string",Ri._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=/^__.*__$/;class $V{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,n,this.fieldTransforms):new ac(e,this.data,n,this.fieldTransforms)}}function wA(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:t})}}class gy{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new gy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(wA(this.Ac)&&qV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class GV{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||If(e)}Cc(e,n,i,r=!1){return new gy({Ac:e,methodName:n,Dc:i,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _y(t){const e=t._freezeSettings(),n=If(t._databaseId);return new GV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function TA(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);SA("Data must be an object, but it was:",a,i);const u=EA(i,a);let h,f;if(o.merge)h=new ti(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const _ of o.mergeFields){const v=ZV(e,_,n);if(!a.contains(v))throw new te(G.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);YV(m,v)||m.push(v)}h=new ti(m),f=a.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,f=a.fieldTransforms;return new $V(new Fn(u),h,f)}function KV(t,e,n,i=!1){return yy(n,t.Cc(i?4:3,e))}function yy(t,e){if(PA(t=wt(t)))return SA("Unsupported field value:",e,t),EA(t,e);if(t instanceof vA)return function(i,r){if(!wA(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=yy(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Be.fromDate(i);return{timestampValue:Od(r.serializer,o)}}if(i instanceof Be){const o=new Be(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Od(r.serializer,o)}}if(i instanceof ri)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Un)return{bytesValue:Vx(r.serializer,i._byteString)};if(i instanceof gt){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ey(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Ri)return function(a,u){return{mapValue:{fields:{[hx]:{stringValue:dx},[Ld]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Y_(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${gf(i)}`)}(t,e)}function EA(t,e){const n={};return sx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(t,(i,r)=>{const o=yy(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function PA(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof ri||t instanceof Un||t instanceof gt||t instanceof vA||t instanceof Ri)}function SA(t,e,n){if(!PA(n)||!ix(n)){const i=gf(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function ZV(t,e,n){if((e=wt(e))instanceof my)return e._internalPath;if(typeof e=="string")return IA(t,e);throw Bd("Field path arguments must be of type string or ",t,!1,void 0,n)}const QV=new RegExp("[~\\*/\\[\\]]");function IA(t,e,n){if(e.search(QV)>=0)throw Bd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new my(...e.split("."))._internalPath}catch{throw Bd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new te(G.INVALID_ARGUMENT,u+t+h)}function YV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(kf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XV extends xA{data(){return super.data()}}function kf(t,e){return typeof e=="string"?IA(t,e):e instanceof my?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vy{}class AA extends vy{}function e4(t,e,...n){let i=[];e instanceof vy&&i.push(e),i=i.concat(n),function(o){const a=o.filter(h=>h instanceof wy).length,u=o.filter(h=>h instanceof bf).length;if(a>1||a>0&&u>0)throw new te(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class bf extends AA{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new bf(e,n,i)}_apply(e){const n=this._parse(e);return CA(e._query,n),new mo(e.firestore,e.converter,sg(e._query,n))}_parse(e){const n=_y(e.firestore);return function(o,a,u,h,f,m,_){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new te(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){mT(_,m);const k=[];for(const b of _)k.push(pT(h,o,b));v={arrayValue:{values:k}}}else v=pT(h,o,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||mT(_,m),v=KV(u,a,_,m==="in"||m==="not-in");return pt.create(f,m,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function t4(t,e,n){const i=e,r=kf("where",t);return bf._create(r,i,n)}class wy extends vy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wy(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:ai.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const h of u)CA(a,h),a=sg(a,h)}(e._query,n),new mo(e.firestore,e.converter,sg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ty extends AA{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ty(e,n)}_apply(e){const n=function(r,o,a){if(r.startAt!==null)throw new te(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new te(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zu(o,a)}(e._query,this._field,this._direction);return new mo(e.firestore,e.converter,function(r,o){const a=r.explicitOrderBy.concat([o]);return new Ka(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function n4(t,e="asc"){const n=e,i=kf("orderBy",t);return Ty._create(i,n)}function pT(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new te(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wx(e)&&n.indexOf("/")!==-1)throw new te(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(je.fromString(n));if(!ae.isDocumentKey(i))throw new te(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return b0(t,new ae(i))}if(n instanceof gt)return b0(t,n._key);throw new te(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gf(n)}.`)}function mT(t,e){if(!Array.isArray(t)||t.length===0)throw new te(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function CA(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class i4{convertValue(e,n="none"){switch(rs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return at(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(is(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return co(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Ld].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>at(a.doubleValue));return new Ri(n)}convertGeoPoint(e){return new ri(at(e.latitude),at(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=vf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Fu(e));default:return null}}convertTimestamp(e){const n=ns(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=je.fromString(e);Oe(Hx(i),9688,{name:e});const r=new Uu(i.get(1),i.get(3)),o=new ae(i.popFirst(5));return r.isEqual(n)||ur(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RA(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class Gl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qs extends xA{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(kf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=qs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}qs._jsonSchemaVersion="firestore/documentSnapshot/1.0",qs._jsonSchema={type:mt("string",qs._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class Gh extends qs{data(e={}){return super.data(e)}}class Sa{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new Gl(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Gh(this._firestore,this._userDataWriter,i.key,i,new Gl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new Gh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Gl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Gh(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Gl(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:r4(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Sa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=W_.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function r4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(t){t=es(t,gt);const e=es(t.firestore,hc);return BV(py(e),t._key).then(n=>l4(e,t,n))}Sa._jsonSchemaVersion="firestore/querySnapshot/1.0",Sa._jsonSchema={type:mt("string",Sa._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class bA extends i4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,n)}}function s4(t){t=es(t,mo);const e=es(t.firestore,hc),n=py(e),i=new bA(e);return JV(t._query),zV(n,t._query).then(r=>new Sa(e,i,t,r))}function o4(t,e,n){t=es(t,gt);const i=es(t.firestore,hc),r=RA(t.converter,e);return LA(i,[TA(_y(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Ai.none())])}function a4(t,e){const n=es(t.firestore,hc),i=Rf(t),r=RA(t.converter,e);return LA(n,[TA(_y(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Ai.exists(!1))]).then(()=>i)}function LA(t,e){return function(i,r){const o=new er;return i.asyncQueue.enqueueAndForget(async()=>CV(await UV(i),r,o)),o.promise}(py(t),e)}function l4(t,e,n){const i=n.docs.get(e._key),r=new bA(t);return new qs(t,r,e._key,i,new Gl(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){qa=r})(lo),eo(new Jr("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new hc(new ZD(i.getProvider("auth-internal")),new XD(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new te(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),Pi(y0,v0,e),Pi(y0,v0,"esm2020")})();var u4="firebase",c4="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pi(u4,c4,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NA="firebasestorage.googleapis.com",DA="storageBucket",h4=2*60*1e3,d4=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt extends Ni{constructor(e,n,i=0){super(Mp(e),`Firebase Storage: ${n} (${Mp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Mp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var it;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(it||(it={}));function Mp(t){return"storage/"+t}function Ey(){const t="An unknown error occurred, please check the error payload for server response.";return new rt(it.UNKNOWN,t)}function f4(t){return new rt(it.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function p4(t){return new rt(it.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function m4(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new rt(it.UNAUTHENTICATED,t)}function g4(){return new rt(it.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function _4(t){return new rt(it.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function y4(){return new rt(it.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v4(){return new rt(it.CANCELED,"User canceled the upload/download.")}function w4(t){return new rt(it.INVALID_URL,"Invalid URL '"+t+"'.")}function T4(t){return new rt(it.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function E4(){return new rt(it.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+DA+"' property when initializing the app?")}function P4(){return new rt(it.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function S4(){return new rt(it.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function I4(t){return new rt(it.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function gg(t){return new rt(it.INVALID_ARGUMENT,t)}function MA(){return new rt(it.APP_DELETED,"The Firebase app was deleted.")}function x4(t){return new rt(it.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function du(t,e){return new rt(it.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Ol(t){throw new rt(it.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(i.path==="")return i;throw T4(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),h={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const m="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",P=new RegExp(`^https?://${_}/${m}/b/${r}/o${v}`,"i"),k={bucket:1,path:3},b=n===NA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",x=new RegExp(`^https?://${b}/${r}/${F}`,"i"),A=[{regex:u,indices:h,postModify:o},{regex:P,indices:k,postModify:f},{regex:x,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<A.length;B++){const q=A[B],K=q.regex.exec(e);if(K){const C=K[q.indices.bucket];let E=K[q.indices.path];E||(E=""),i=new yn(C,E),q.postModify(i);break}}if(i==null)throw w4(e);return i}}class A4{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C4(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function h(){return u===2}let f=!1;function m(...F){f||(f=!0,e.apply(null,F))}function _(F){r=setTimeout(()=>{r=null,t(P,h())},F)}function v(){o&&clearTimeout(o)}function P(F,...x){if(f){v();return}if(F){v(),m.call(null,F,...x);return}if(h()||a){v(),m.call(null,F,...x);return}i<64&&(i*=2);let A;u===1?(u=2,A=0):A=(i+Math.random())*1e3,_(A)}let k=!1;function b(F){k||(k=!0,v(),!f&&(r!==null?(F||(u=2),clearTimeout(r),_(0)):F||(u=1)))}return _(0),o=setTimeout(()=>{a=!0,b(!0)},n),b}function R4(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t){return t!==void 0}function b4(t){return typeof t=="object"&&!Array.isArray(t)}function Py(t){return typeof t=="string"||t instanceof String}function gT(t){return Sy()&&t instanceof Blob}function Sy(){return typeof Blob<"u"}function _T(t,e,n,i){if(i<e)throw gg(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw gg(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function OA(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var $s;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($s||($s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L4(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e,n,i,r,o,a,u,h,f,m,_,v=!0,P=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=_,this.retry=v,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,b)=>{this.resolve_=k,this.reject_=b,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Th(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===$s.NO_ERROR,h=o.getStatus();if(!u||L4(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===$s.ABORT;i(!1,new Th(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new Th(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());k4(h)?o(h):o()}catch(h){a(h)}else if(u!==null){const h=Ey();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(r.canceled){const h=this.appDelete_?MA():v4();a(h)}else{const h=y4();a(h)}};this.canceled_?n(!1,new Th(!1,null,!0)):this.backoffId_=C4(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&R4(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Th{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function D4(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function M4(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function O4(t,e){e&&(t["X-Firebase-GMPID"]=e)}function V4(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function F4(t,e,n,i,r,o,a=!0,u=!1){const h=OA(t.urlParams),f=t.url+h,m=Object.assign({},t.headers);return O4(m,e),D4(m,n),M4(m,o),V4(m,i),new N4(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U4(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function B4(...t){const e=U4();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(Sy())return new Blob(t);throw new rt(it.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function z4(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j4(t){if(typeof atob>"u")throw I4("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Op{constructor(e,n){this.data=e,this.contentType=n||null}}function H4(t,e){switch(t){case wi.RAW:return new Op(VA(e));case wi.BASE64:case wi.BASE64URL:return new Op(FA(t,e));case wi.DATA_URL:return new Op(q4(e),$4(e))}throw Ey()}function VA(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function W4(t){let e;try{e=decodeURIComponent(t)}catch{throw du(wi.DATA_URL,"Malformed data URL.")}return VA(e)}function FA(t,e){switch(t){case wi.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw du(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case wi.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw du(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=j4(e)}catch(r){throw r.message.includes("polyfill")?r:du(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class UA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw du(wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=G4(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function q4(t){const e=new UA(t);return e.base64?FA(wi.BASE64,e.rest):W4(e.rest)}function $4(t){return new UA(t).contentType}function G4(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,n){let i=0,r="";gT(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(gT(this.data_)){const i=this.data_,r=z4(i,e,n);return r===null?null:new Mr(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Mr(i,!0)}}static getBlob(...e){if(Sy()){const n=e.map(i=>i instanceof Mr?i.data_:i);return new Mr(B4.apply(null,n))}else{const n=e.map(a=>Py(a)?H4(wi.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new Mr(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BA(t){let e;try{e=JSON.parse(t)}catch{return null}return b4(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Z4(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function zA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q4(t,e){return e}class Yt{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||Q4}}let Eh=null;function Y4(t){return!Py(t)||t.length<2?t:zA(t)}function jA(){if(Eh)return Eh;const t=[];t.push(new Yt("bucket")),t.push(new Yt("generation")),t.push(new Yt("metageneration")),t.push(new Yt("name","fullPath",!0));function e(o,a){return Y4(a)}const n=new Yt("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new Yt("size");return r.xform=i,t.push(r),t.push(new Yt("timeCreated")),t.push(new Yt("updated")),t.push(new Yt("md5Hash",null,!0)),t.push(new Yt("cacheControl",null,!0)),t.push(new Yt("contentDisposition",null,!0)),t.push(new Yt("contentEncoding",null,!0)),t.push(new Yt("contentLanguage",null,!0)),t.push(new Yt("contentType",null,!0)),t.push(new Yt("metadata","customMetadata",!0)),Eh=t,Eh}function X4(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new yn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function J4(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return X4(i,t),i}function HA(t,e,n){const i=BA(e);return i===null?null:J4(t,i,n)}function eF(t,e,n,i){const r=BA(e);if(r===null||!Py(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,_=t.fullPath,v="/b/"+a(m)+"/o/"+a(_),P=Iy(v,n,i),k=OA({alt:"media",token:f});return P+k})[0]}function tF(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class WA{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t){if(!t)throw Ey()}function nF(t,e){function n(i,r){const o=HA(t,r,e);return qA(o!==null),o}return n}function iF(t,e){function n(i,r){const o=HA(t,r,e);return qA(o!==null),eF(o,r,t.host,t._protocol)}return n}function $A(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=g4():r=m4():n.getStatus()===402?r=p4(t.bucket):n.getStatus()===403?r=_4(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function rF(t){const e=$A(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=f4(t.path)),o.serverResponse=r.serverResponse,o}return n}function sF(t,e,n){const i=e.fullServerUrl(),r=Iy(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new WA(r,o,iF(t,n),a);return u.errorHandler=rF(e),u}function oF(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function aF(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=oF(null,e)),i}function lF(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let A="";for(let B=0;B<2;B++)A=A+Math.random().toString().slice(2);return A}const h=u();a["Content-Type"]="multipart/related; boundary="+h;const f=aF(e,i,r),m=tF(f,n),_="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",P=Mr.getBlob(_,i,v);if(P===null)throw P4();const k={name:f.fullPath},b=Iy(o,t.host,t._protocol),F="POST",x=t.maxUploadRetryTime,I=new WA(b,F,nF(t,n),x);return I.urlParams=k,I.headers=a,I.body=P.uploadData(),I.errorHandler=$A(e),I}class uF{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Ol("cannot .send() more than once");if(ds(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Ol("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Ol("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Ol("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Ol("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class cF extends uF{initXhr(){this.xhr_.responseType="text"}}function GA(){return new cF}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new so(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return zA(this._location.path)}get storage(){return this._service}get parent(){const e=K4(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new so(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw x4(e)}}function hF(t,e,n){t._throwIfRoot("uploadBytes");const i=lF(t.storage,t._location,jA(),new Mr(e,!0),n);return t.storage.makeRequestWithTokens(i,GA).then(r=>({metadata:r,ref:t}))}function dF(t){t._throwIfRoot("getDownloadURL");const e=sF(t.storage,t._location,jA());return t.storage.makeRequestWithTokens(e,GA).then(n=>{if(n===null)throw S4();return n})}function fF(t,e){const n=Z4(t._location.path,e),i=new yn(t._location.bucket,n);return new so(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(t){return/^[A-Za-z]+:\/\//.test(t)}function mF(t,e){return new so(t,e)}function KA(t,e){if(t instanceof xy){const n=t;if(n._bucket==null)throw E4();const i=new so(n,n._bucket);return e!=null?KA(i,e):i}else return e!==void 0?fF(t,e):t}function gF(t,e){if(e&&pF(e)){if(t instanceof xy)return mF(t,e);throw gg("To use ref(service, url), the first argument must be a Storage instance.")}else return KA(t,e)}function yT(t,e){const n=e==null?void 0:e[DA];return n==null?null:yn.makeFromBucketSpec(n,t)}function _F(t,e,n,i={}){t.host=`${e}:${n}`;const r=ds(e);r&&(k_(`https://${t.host}/b`),b_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:lI(o,t.app.options.projectId))}class xy{constructor(e,n,i,r,o,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=NA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=h4,this._maxUploadRetryTime=d4,this._requests=new Set,r!=null?this._bucket=yn.makeFromBucketSpec(r,this._host):this._bucket=yT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=yT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){_T("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){_T("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(gn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new so(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new A4(MA());{const a=F4(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const vT="@firebase/storage",wT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZA="storage";function yF(t,e,n){return t=wt(t),hF(t,e,n)}function vF(t){return t=wt(t),dF(t)}function wF(t,e){return t=wt(t),gF(t,e)}function TF(t=D_(),e){t=wt(t);const i=df(t,ZA).getImmediate({identifier:e}),r=sI("storage");return r&&EF(i,...r),i}function EF(t,e,n,i={}){_F(t,e,n,i)}function PF(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new xy(n,i,r,e,lo)}function SF(){eo(new Jr(ZA,PF,"PUBLIC").setMultipleInstances(!0)),Pi(vT,wT,""),Pi(vT,wT,"esm2020")}SF();const IF={apiKey:"YOUR_API_KEY",authDomain:"YOUR_PROJECT_ID.firebaseapp.com",projectId:"YOUR_PROJECT_ID",storageBucket:"YOUR_PROJECT_ID.appspot.com",messagingSenderId:"YOUR_MESSAGING_SENDER_ID",appId:"YOUR_APP_ID"},Ay=hI(IF),dc=HV(Ay),xF=TF(Ay),Lf=qD(Ay),AF=async(t,e,n)=>{try{const r=(await R2(Lf,e,n)).user;return await o4(Rf(dc,"users",r.uid),{uid:r.uid,name:t,email:e,createdAt:new Date().toISOString(),photoURL:null}),{success:!0,user:{uid:r.uid,name:t,email:e}}}catch(i){console.error("Error en signup:",i);let r="Error al crear la cuenta";return i.code==="auth/email-already-in-use"?r="El correo ya est registrado":i.code==="auth/weak-password"?r="La contrasea debe tener al menos 6 caracteres":i.code==="auth/invalid-email"&&(r="El correo electrnico no es vlido"),{success:!1,error:r}}},CF=async(t,e)=>{try{const i=(await k2(Lf,t,e)).user,o=(await kA(Rf(dc,"users",i.uid))).data();return{success:!0,user:{uid:i.uid,name:(o==null?void 0:o.name)||"Usuario",email:i.email,photoURL:(o==null?void 0:o.photoURL)||null}}}catch(n){console.error("Error en login:",n);let i="Error al iniciar sesin";return n.code==="auth/user-not-found"||n.code==="auth/wrong-password"?i="Credenciales invlidas":n.code==="auth/invalid-email"?i="El correo electrnico no es vlido":n.code==="auth/invalid-credential"&&(i="Credenciales invlidas"),{success:!1,error:i}}},RF=async()=>{try{return await D2(Lf),{success:!0}}catch(t){return console.error("Error en logout:",t),{success:!1,error:"Error al cerrar sesin"}}},kF=t=>N2(Lf,async e=>{if(e){const i=(await kA(Rf(dc,"users",e.uid))).data();t({uid:e.uid,name:(i==null?void 0:i.name)||"Usuario",email:e.email,photoURL:(i==null?void 0:i.photoURL)||null})}else t(null)}),QA=Y.createContext();function bF({children:t}){const[e,n]=Y.useState(null),[i,r]=Y.useState(!0);Y.useEffect(()=>{const h=kF(f=>{n(f),r(!1)});return()=>h()},[]);const o=async(h,f)=>{try{const m=await CF(h,f);return m.success&&n(m.user),m}catch(m){return console.error("Error en login:",m),{success:!1,error:"Error al iniciar sesin"}}},a=async(h,f,m)=>{try{const _=await AF(h,f,m);return _.success&&n(_.user),_}catch(_){return console.error("Error en signup:",_),{success:!1,error:"Error al crear la cuenta"}}},u=async()=>{try{await RF(),n(null)}catch(h){console.error("Error en logout:",h)}};return V.jsx(QA.Provider,{value:{user:e,login:o,signup:a,logout:u,loading:i},children:t})}const Qa=()=>Y.useContext(QA);function YA(t,e){const n=Y.useRef(e);Y.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const LF=1;function NF(t){return Object.freeze({__version:LF,map:t})}function DF(t,e){return Object.freeze({...t,...e})}const XA=Y.createContext(null),JA=XA.Provider;function Cy(){const t=Y.useContext(XA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function MF(t){function e(n,i){const{instance:r,context:o}=t(n).current;return Y.useImperativeHandle(i,()=>r),n.children==null?null:Yh.createElement(JA,{value:o},n.children)}return Y.forwardRef(e)}function OF(t){function e(n,i){const[r,o]=Y.useState(!1),{instance:a}=t(n,o).current;Y.useImperativeHandle(i,()=>a),Y.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?ZS.createPortal(n.children,u):null}return Y.forwardRef(e)}function VF(t){function e(n,i){const{instance:r}=t(n).current;return Y.useImperativeHandle(i,()=>r),null}return Y.forwardRef(e)}function e1(t,e){const n=Y.useRef();Y.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Ry(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function FF(t,e){return function(i,r){const o=Cy(),a=t(Ry(i,o),o);return YA(o.map,i.attribution),e1(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var _g={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(cR,function(n){var i="1.9.4";function r(s){var l,d,p,y;for(d=1,p=arguments.length;d<p;d++){y=arguments[d];for(l in y)s[l]=y[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,y,T,M;return M=function(){p=!1,y&&(T.apply(d,y),y=!1)},T=function(){p?y=arguments:(s.apply(d,arguments),setTimeout(M,l),p=!0)},T}function m(s,l,d){var p=l[1],y=l[0],T=p-y;return s===p&&d?s:((s-y)%T+T)%T+y}function _(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function P(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return P(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function F(s,l,d){var p=[];for(var y in s)p.push(encodeURIComponent(d?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var x=/\{ *([\w_ -]+) *\}/g;function I(s,l){return s.replace(x,function(d,p){var y=l[p];if(y===void 0)throw new Error("No value provided for variable "+d);return typeof y=="function"&&(y=y(l)),y})}var A=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var C=0;function E(s){var l=+new Date,d=Math.max(0,16-(l-C));return C=l+d,window.setTimeout(s,d)}var R=window.requestAnimationFrame||K("RequestAnimationFrame")||E,N=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,l,d){if(d&&R===E)s.call(l);else return R.call(window,a(s,l))}function U(s){s&&N.call(window,s)}var D={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:_,formatNum:v,trim:P,splitWords:k,setOptions:b,getParamString:F,template:I,isArray:A,indexOf:B,emptyImageUrl:q,requestFn:R,cancelFn:N,requestAnimFrame:O,cancelAnimFrame:U};function Ne(){}Ne.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return s.statics&&r(l,s.statics),s.includes&&(In(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,M=p._initHooks.length;T<M;T++)p._initHooks[T].call(this)}},l},Ne.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Ne.mergeOptions=function(s){return r(this.prototype.options,s),this},Ne.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function In(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=A(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ut={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var y=0,T=s.length;y<T;y++)this._on(s[y],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var y=arguments.length===1,T=0,M=s.length;T<M;T++)y?this._off(s[T]):this._off(s[T],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var y={fn:l,ctx:d};p&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,l,d){var p,y,T;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,T=p.length;y<T;y++)p[y].fn=_;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var M=this._listens(s,l,d);if(M!==!1){var j=p[M];this._firingCount&&(j.fn=_,this._events[s]=p=p.slice()),p.splice(M,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var T=0,M=y.length;T<M;T++){var j=y[T],W=j.fn;j.once&&this.off(s,W,j.ctx),W.call(j.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(p=!!l,y=void 0,d=void 0);var T=this._events&&this._events[s];if(T&&T.length&&this._listens(s,y,d)!==!1)return!0;if(p){for(var M in this._eventParents)if(this._eventParents[M].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var y=0,T=p.length;y<T;y++)if(p[y].fn===l&&p[y].ctx===d)return y;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var y=0,T=s.length;y<T;y++)this._on(s[y],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};ut.addEventListener=ut.on,ut.removeEventListener=ut.clearAllEventListeners=ut.off,ut.addOneTimeEventListener=ut.once,ut.fireEvent=ut.fire,ut.hasEventListeners=ut.listens;var Ue=Ne.extend(ut);function $(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var le=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new $(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new $(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof $?s:A(s)?new $(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new $(s.x,s.y):new $(s,l,d)}function fe(s,l){if(s)for(var d=l?[s,l]:s,p=0,y=d.length;p<y;p++)this.extend(d[p])}fe.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof $||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Ee(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof $?s=J(s):s=Ee(s),s instanceof fe?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Ee(s);var l=this.min,d=this.max,p=s.min,y=s.max,T=y.x>=l.x&&p.x<=d.x,M=y.y>=l.y&&p.y<=d.y;return T&&M},overlaps:function(s){s=Ee(s);var l=this.min,d=this.max,p=s.min,y=s.max,T=y.x>l.x&&p.x<d.x,M=y.y>l.y&&p.y<d.y;return T&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,y=Math.abs(l.y-d.y)*s;return Ee(J(l.x-p,l.y-y),J(d.x+p,d.y+y))},equals:function(s){return s?(s=Ee(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ee(s,l){return!s||s instanceof fe?s:new fe(s,l)}function Je(s,l){if(s)for(var d=l?[s,l]:s,p=0,y=d.length;p<y;p++)this.extend(d[p])}Je.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,y;if(s instanceof Pe)p=s,y=s;else if(s instanceof Je){if(p=s._southWest,y=s._northEast,!p||!y)return this}else return s?this.extend(pe(s)||Re(s)):this;return!l&&!d?(this._southWest=new Pe(p.lat,p.lng),this._northEast=new Pe(y.lat,y.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(y.lat,d.lat),d.lng=Math.max(y.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,y=Math.abs(l.lng-d.lng)*s;return new Je(new Pe(l.lat-p,l.lng-y),new Pe(d.lat+p,d.lng+y))},getCenter:function(){return new Pe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Pe(this.getNorth(),this.getWest())},getSouthEast:function(){return new Pe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Pe||"lat"in s?s=pe(s):s=Re(s);var l=this._southWest,d=this._northEast,p,y;return s instanceof Je?(p=s.getSouthWest(),y=s.getNorthEast()):p=y=s,p.lat>=l.lat&&y.lat<=d.lat&&p.lng>=l.lng&&y.lng<=d.lng},intersects:function(s){s=Re(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),T=y.lat>=l.lat&&p.lat<=d.lat,M=y.lng>=l.lng&&p.lng<=d.lng;return T&&M},overlaps:function(s){s=Re(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),T=y.lat>l.lat&&p.lat<d.lat,M=y.lng>l.lng&&p.lng<d.lng;return T&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Re(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Re(s,l){return s instanceof Je?s:new Je(s,l)}function Pe(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Pe.prototype={equals:function(s,l){if(!s)return!1;s=pe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return xn.distance(this,pe(s))},wrap:function(){return xn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Re([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Pe(this.lat,this.lng,this.alt)}};function pe(s,l,d){return s instanceof Pe?s:A(s)&&typeof s[0]!="object"?s.length===3?new Pe(s[0],s[1],s[2]):s.length===2?new Pe(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Pe(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Pe(s,l,d)}var Tt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),y=this.transformation.transform(l.max,d);return new fe(p,y)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Pe(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,y=l.lng-d.lng;if(p===0&&y===0)return s;var T=s.getSouthWest(),M=s.getNorthEast(),j=new Pe(T.lat-p,T.lng-y),W=new Pe(M.lat-p,M.lng-y);return new Je(j,W)}},xn=r({},Tt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,y=l.lat*d,T=Math.sin((l.lat-s.lat)*d/2),M=Math.sin((l.lng-s.lng)*d/2),j=T*T+Math.cos(p)*Math.cos(y)*M*M,W=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*W}}),Ja=6378137,el={R:Ja,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),y=Math.sin(p*l);return new $(this.R*s.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var l=180/Math.PI;return new Pe((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=Ja*Math.PI;return new fe([-s,-s],[s,s])}()};function tl(s,l,d,p){if(A(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}tl.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new $((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function fr(s,l,d,p){return new tl(s,l,d,p)}var gs=r({},xn,{code:"EPSG:3857",projection:el,transformation:function(){var s=.5/(Math.PI*el.R);return fr(s,.5,-s,.5)}()}),yc=r({},gs,{code:"EPSG:900913"});function vc(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function _o(s,l){var d="",p,y,T,M,j,W;for(p=0,T=s.length;p<T;p++){for(j=s[p],y=0,M=j.length;y<M;y++)W=j[y],d+=(y?"L":"M")+W.x+" "+W.y;d+=l?oe.svg?"z":"x":""}return d||"M0 0"}var _s=document.documentElement.style,ys="ActiveXObject"in window,Et=ys&&!document.addEventListener,Pt="msLaunchUri"in navigator&&!("documentMode"in document),pr=nn("webkit"),wc=nn("android"),nl=nn("android 2")||nn("android 3"),Ff=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),vs=wc&&nn("Google")&&Ff<537&&!("AudioNode"in window),yo=!!window.opera,il=!Pt&&nn("chrome"),vo=nn("gecko")&&!pr&&!yo&&!ys,Uf=!il&&nn("safari"),Tc=nn("phantom"),rl="OTransition"in _s,Ec=navigator.platform.indexOf("Win")===0,mr=ys&&"transition"in _s,ws="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!nl,wo="MozPerspective"in _s,Di=!window.L_DISABLE_3D&&(mr||ws||wo)&&!rl&&!Tc,gr=typeof orientation<"u"||nn("mobile"),To=gr&&pr,Pc=gr&&ws,_r=!window.PointerEvent&&window.MSPointerEvent,sl=!!(window.PointerEvent||_r),St="ontouchstart"in window||!!window.TouchEvent,Sc=!window.L_NO_TOUCH&&(St||sl),Ts=gr&&yo,Es=gr&&vo,Bf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zf=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return s}(),yr=function(){return!!document.createElement("canvas").getContext}(),ol=!!(document.createElementNS&&vc("svg").createSVGRect),jf=!!ol&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Eo=!ol&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Ic=navigator.platform.indexOf("Mac")===0,xc=navigator.platform.indexOf("Linux")===0;function nn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var oe={ie:ys,ielt9:Et,edge:Pt,webkit:pr,android:wc,android23:nl,androidStock:vs,opera:yo,chrome:il,gecko:vo,safari:Uf,phantom:Tc,opera12:rl,win:Ec,ie3d:mr,webkit3d:ws,gecko3d:wo,any3d:Di,mobile:gr,mobileWebkit:To,mobileWebkit3d:Pc,msPointer:_r,pointer:sl,touch:Sc,touchNative:St,mobileOpera:Ts,mobileGecko:Es,retina:Bf,passiveEvents:zf,canvas:yr,svg:ol,vml:Eo,inlineSvg:jf,mac:Ic,linux:xc},Ac=oe.msPointer?"MSPointerDown":"pointerdown",Wn=oe.msPointer?"MSPointerMove":"pointermove",al=oe.msPointer?"MSPointerUp":"pointerup",ll=oe.msPointer?"MSPointerCancel":"pointercancel",Ps={touchstart:Ac,touchmove:Wn,touchend:al,touchcancel:ll},Po={touchstart:ul,touchmove:An,touchend:An,touchcancel:An},Mi={},Cc=!1;function Rc(s,l,d){return l==="touchstart"&&Ss(),Po[l]?(d=Po[l].bind(this,d),s.addEventListener(Ps[l],d,!1),d):(console.warn("wrong event specified:",l),_)}function Hf(s,l,d){if(!Ps[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Ps[l],d,!1)}function So(s){Mi[s.pointerId]=s}function kc(s){Mi[s.pointerId]&&(Mi[s.pointerId]=s)}function Io(s){delete Mi[s.pointerId]}function Ss(){Cc||(document.addEventListener(Ac,So,!0),document.addEventListener(Wn,kc,!0),document.addEventListener(al,Io,!0),document.addEventListener(ll,Io,!0),Cc=!0)}function An(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Mi)l.touches.push(Mi[d]);l.changedTouches=[l],s(l)}}function ul(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ct(l),An(s,l)}function Wf(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var bc=200;function Lc(s,l){s.addEventListener("dblclick",l);var d=0,p;function y(T){if(T.detail!==1){p=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var M=pl(T);if(!(M.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!M.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var j=Date.now();j-d<=bc?(p++,p===2&&l(Wf(T))):p=1,d=j}}}return s.addEventListener("click",y),{dblclick:l,simDblclick:y}}function Nc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var Is=xo(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Oi=xo(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),cl=Oi==="webkitTransition"||Oi==="OTransition"?Oi+"End":"transitionend";function hl(s){return typeof s=="string"?document.getElementById(s):s}function vr(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function Ae(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function be(s){var l=s.parentNode;l&&l.removeChild(s)}function Kt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Cn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Rn(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function xs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=li(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function re(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,y=d.length;p<y;p++)s.classList.add(d[p]);else if(!xs(s,l)){var T=li(s);Vi(s,(T?T+" ":"")+l)}}function ze(s,l){s.classList!==void 0?s.classList.remove(l):Vi(s,P((" "+li(s)+" ").replace(" "+l+" "," ")))}function Vi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function li(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function rn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&Dc(s,l)}function Dc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function xo(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function Fi(s,l,d){var p=l||new $(0,0);s.style[Is]=(oe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function et(s,l){s._leaflet_pos=l,oe.any3d?Fi(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Ui(s){return s._leaflet_pos||new $(0,0)}var qn,fn,Ao;if("onselectstart"in document)qn=function(){me(window,"selectstart",ct)},fn=function(){Ve(window,"selectstart",ct)};else{var wr=xo(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);qn=function(){if(wr){var s=document.documentElement.style;Ao=s[wr],s[wr]="none"}},fn=function(){wr&&(document.documentElement.style[wr]=Ao,Ao=void 0)}}function Co(){me(window,"dragstart",ct)}function Ro(){Ve(window,"dragstart",ct)}var As,ui;function dl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(ko(),As=s,ui=s.style.outlineStyle,s.style.outlineStyle="none",me(window,"keydown",ko))}function ko(){As&&(As.style.outlineStyle=ui,As=void 0,ui=void 0,Ve(window,"keydown",ko))}function Mc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function kn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var qf={__proto__:null,TRANSFORM:Is,TRANSITION:Oi,TRANSITION_END:cl,get:hl,getStyle:vr,create:Ae,remove:be,empty:Kt,toFront:Cn,toBack:Rn,hasClass:xs,addClass:re,removeClass:ze,setClass:Vi,getClass:li,setOpacity:rn,testProp:xo,setTransform:Fi,setPosition:et,getPosition:Ui,get disableTextSelection(){return qn},get enableTextSelection(){return fn},disableImageDrag:Co,enableImageDrag:Ro,preventOutline:dl,restoreOutline:ko,getSizedParentNode:Mc,getScale:kn};function me(s,l,d,p){if(l&&typeof l=="object")for(var y in l)bo(s,y,l[y],d);else{l=k(l);for(var T=0,M=l.length;T<M;T++)bo(s,l[T],d,p)}return this}var Zt="_leaflet_events";function Ve(s,l,d,p){if(arguments.length===1)Tr(s),delete s[Zt];else if(l&&typeof l=="object")for(var y in l)Cs(s,y,l[y],d);else if(l=k(l),arguments.length===2)Tr(s,function(j){return B(l,j)!==-1});else for(var T=0,M=l.length;T<M;T++)Cs(s,l[T],d,p);return this}function Tr(s,l){for(var d in s[Zt]){var p=d.split(/\d/)[0];(!l||l(p))&&Cs(s,p,null,null,d)}}var Bi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function bo(s,l,d,p){var y=l+h(d)+(p?"_"+h(p):"");if(s[Zt]&&s[Zt][y])return this;var T=function(j){return d.call(p||s,j||window.event)},M=T;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?T=Rc(s,l,T):oe.touch&&l==="dblclick"?T=Lc(s,T):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Bi[l]||l,T,oe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(T=function(j){j=j||window.event,gl(s,j)&&M(j)},s.addEventListener(Bi[l],T,!1)):s.addEventListener(l,M,!1):s.attachEvent("on"+l,T),s[Zt]=s[Zt]||{},s[Zt][y]=T}function Cs(s,l,d,p,y){y=y||l+h(d)+(p?"_"+h(p):"");var T=s[Zt]&&s[Zt][y];if(!T)return this;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?Hf(s,l,T):oe.touch&&l==="dblclick"?Nc(s,T):"removeEventListener"in s?s.removeEventListener(Bi[l]||l,T,!1):s.detachEvent("on"+l,T),s[Zt][y]=null}function De(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function fl(s){return bo(s,"wheel",De),this}function Rs(s){return me(s,"mousedown touchstart dblclick contextmenu",De),s._leaflet_disable_click=!0,this}function ct(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function ci(s){return ct(s),De(s),this}function pl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function ks(s,l){if(!l)return new $(s.clientX,s.clientY);var d=kn(l),p=d.boundingClientRect;return new $((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var hi=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ml(s){return oe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/hi:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function gl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var bs={__proto__:null,on:me,off:Ve,stopPropagation:De,disableScrollPropagation:fl,disableClickPropagation:Rs,preventDefault:ct,stop:ci,getPropagationPath:pl,getMousePosition:ks,getWheelDelta:ml,isExternalTarget:gl,addListener:me,removeListener:Ve},_l=Ue.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Ui(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),et(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),ve=Ue.extend({options:{crs:gs,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(pe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Oi&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,cl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(pe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),y=this.getSize().divideBy(2),T=s instanceof $?s:this.latLngToContainerPoint(s),M=T.subtract(y).multiplyBy(1-1/p),j=this.containerPointToLatLng(y.add(M));return this.setView(j,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Re(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(s,!1,d.add(p));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var T=p.subtract(d).divideBy(2),M=this.project(s.getSouthWest(),y),j=this.project(s.getNorthEast(),y),W=this.unproject(M.add(j).divideBy(2).add(T),y);return{center:W,zoom:y}},fitBounds:function(s,l){if(s=Re(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new _l,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!oe.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),y=this.project(s),T=this.getSize(),M=this._zoom;s=pe(s),l=l===void 0?M:l;var j=Math.max(T.x,T.y),W=j*this.getZoomScale(M,l),Q=y.distanceTo(p)||1,ne=1.42,ce=ne*ne;function we(ht){var Yc=ht?-1:1,oR=ht?W:j,aR=W*W-j*j+Yc*ce*ce*Q*Q,lR=2*oR*ce*Q,Qf=aR/lR,bv=Math.sqrt(Qf*Qf+1)-Qf,uR=bv<1e-9?-18:Math.log(bv);return uR}function Qt(ht){return(Math.exp(ht)-Math.exp(-ht))/2}function It(ht){return(Math.exp(ht)+Math.exp(-ht))/2}function Nn(ht){return Qt(ht)/It(ht)}var on=we(0);function Wo(ht){return j*(It(on)/It(on+ne*ht))}function nR(ht){return j*(It(on)*Nn(on+ne*ht)-Qt(on))/ce}function iR(ht){return 1-Math.pow(1-ht,1.5)}var rR=Date.now(),Rv=(we(1)-on)/ne,sR=d.duration?1e3*d.duration:1e3*Rv*.8;function kv(){var ht=(Date.now()-rR)/sR,Yc=iR(ht)*Rv;ht<=1?(this._flyToFrame=O(kv,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(nR(Yc)/Q)),M),this.getScaleZoom(j/Wo(Yc),M),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),kv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Re(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Re(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),T=this.project(s),M=this.getPixelBounds(),j=Ee([M.min.add(d),M.max.subtract(p)]),W=j.getSize();if(!j.contains(T)){this._enforcingBounds=!0;var Q=T.subtract(j.getCenter()),ne=j.extend(T).getSize().subtract(W);y.x+=Q.x<0?-ne.x:ne.x,y.y+=Q.y<0?-ne.y:ne.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),y=d.divideBy(2).round(),T=p.subtract(y);return!T.x&&!T.y?this:(s.animate&&s.pan?this.panBy(T):(s.pan&&this._rawPanBy(T),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Pe(l,d),y=p.toBounds(s.coords.accuracy*2),T=this._locateOptions;if(T.setView){var M=this.getBoundsZoom(y);this.setView(p,T.maxZoom?Math.min(M,T.maxZoom):M)}var j={latlng:p,bounds:y,timestamp:s.timestamp};for(var W in s.coords)typeof s.coords[W]=="number"&&(j[W]=s.coords[W]);this.fire("locationfound",j)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),be(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)be(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=Ae("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Je(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Re(s),d=J(d||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),T=this.getMaxZoom(),M=s.getNorthWest(),j=s.getSouthEast(),W=this.getSize().subtract(d),Q=Ee(this.project(j,p),this.project(M,p)).getSize(),ne=oe.any3d?this.options.zoomSnap:1,ce=W.x/Q.x,we=W.y/Q.y,Qt=l?Math.max(ce,we):Math.min(ce,we);return p=this.getScaleZoom(Qt,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(y,Math.min(T,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(pe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(pe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(pe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Re(s))},distance:function(s,l){return this.options.crs.distance(pe(s),pe(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(s)))},mouseEventToContainerPoint:function(s){return ks(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=hl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,re(s,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=vr(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(s.markerPane,"leaflet-zoom-hide"),re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){et(this._mapPane,new $(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,d)._move(s,l)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((y||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){et(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Ve:me;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,y=l==="mouseout"||l==="mouseover",T=s.target||s.srcElement,M=!1;T;){if(p=this._targets[h(T)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){M=!0;break}if(p&&p.listens(l,!0)&&(y&&!gl(T,s)||(d.push(p),y))||T===this._container)break;T=T.parentNode}return!d.length&&!M&&!y&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&dl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var y=this._findEventTargets(s,l);if(d){for(var T=[],M=0;M<d.length;M++)d[M].listens(l,!0)&&T.push(d[M]);y=T.concat(y)}if(y.length){l==="contextmenu"&&ct(s);var j=y[0],W={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=j.getLatLng&&(!j._radius||j._radius<=10);W.containerPoint=Q?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(s),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Q?j.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(M=0;M<y.length;M++)if(y[M].fire(l,W,!0),W.originalEvent._stopped||y[M].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Ui(this._mapPane)||new $(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Ee([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),y=this.getSize().divideBy(2),T=new fe(p.subtract(y),p.add(y)),M=this._getBoundsOffset(T,d,l);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?s:this.unproject(p.add(M),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new fe(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Ee(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),y=p.min.subtract(s.min),T=p.max.subtract(s.max),M=this._rebound(y.x,-T.x),j=this._rebound(y.y,-T.y);return new $(M,j)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=oe.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ae("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=Is,p=this._proxy.style[d];Fi(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){be(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();Fi(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),y=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(y)?!1:(O(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Lo(s,l){return new ve(s,l)}var sn=Ne.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return re(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(be(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),di=function(s){return new sn(s)};ve.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ae("div",l+"control-container",this._container);function p(y,T){var M=l+y+" "+l+T;s[y+T]=Ae("div",M,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)be(this._controlCorners[s]);be(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Oc=sn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return sn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ae("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Rs(l),fl(l);var p=this._section=Ae("section",s+"-list");d&&(this._map.on("click",this.collapse,this),me(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Ae("a",s+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),me(y,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){ct(T),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ae("div",s+"-base",p),this._separator=Ae("div",s+"-separator",p),this._overlaysList=Ae("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Kt(this._baseLayersList),Kt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,y=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),me(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var T=document.createElement("span");l.appendChild(T),T.appendChild(p),T.appendChild(y);var M=s.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],y=[];this._handlingClick=!0;for(var T=s.length-1;T>=0;T--)l=s[T],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||y.push(d);for(T=0;T<y.length;T++)this._map.hasLayer(y[T])&&this._map.removeLayer(y[T]);for(T=0;T<p.length;T++)this._map.hasLayer(p[T])||this._map.addLayer(p[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),y=s.length-1;y>=0;y--)l=s[y],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,me(s,"click",ct),this.expand();var l=this;setTimeout(function(){Ve(s,"click",ct),l._preventClick=!1})}}),Vc=function(s,l,d){return new Oc(s,l,d)},zi=sn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ae("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,y){var T=Ae("a",d,p);return T.innerHTML=s,T.href="#",T.title=l,T.setAttribute("role","button"),T.setAttribute("aria-label",l),Rs(T),me(T,"click",ci),me(T,"click",y,this),me(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";ze(this._zoomInButton,l),ze(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(re(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(re(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ve.mergeOptions({zoomControl:!0}),ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new zi,this.addControl(this.zoomControl))});var Fc=function(s){return new zi(s)},yl=sn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ae("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ae("div",l,d)),s.imperial&&(this._iScale=Ae("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,y;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),vl=function(s){return new yl(s)},wl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',No=sn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?wl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ae("div","leaflet-control-attribution"),Rs(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});ve.mergeOptions({attributionControl:!0}),ve.addInitHook(function(){this.options.attributionControl&&new No().addTo(this)});var Do=function(s){return new No(s)};sn.Layers=Oc,sn.Zoom=zi,sn.Scale=yl,sn.Attribution=No,di.layers=Vc,di.zoom=Fc,di.scale=vl,di.attribution=Do;var pn=Ne.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pn.addTo=function(s,l){return s.addHandler(l,this),this};var Uc={Events:ut},fi=oe.touch?"touchstart mousedown":"mousedown",$n=Ue.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(me(this._dragStartTarget,fi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&($n._dragging===this&&this.finishDrag(!0),Ve(this._dragStartTarget,fi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!xs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){$n._dragging===this&&this.finishDrag();return}if(!($n._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&($n._dragging=this,this._preventOutline&&dl(this._element),Co(),qn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=Mc(this._element);this._startPoint=new $(l.clientX,l.clientY),this._startPos=Ui(this._element),this._parentScale=kn(d);var p=s.type==="mousedown";me(document,p?"mousemove":"touchmove",this._onMove,this),me(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new $(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,ct(s),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),et(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ve(document,"mousemove touchmove",this._onMove,this),Ve(document,"mouseup touchend touchcancel",this._onUp,this),Ro(),fn();var l=this._moved&&this._moving;this._moving=!1,$n._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Tl(s,l,d){var p,y=[1,4,2,8],T,M,j,W,Q,ne,ce,we;for(T=0,ne=s.length;T<ne;T++)s[T]._code=H(s[T],l);for(j=0;j<4;j++){for(ce=y[j],p=[],T=0,ne=s.length,M=ne-1;T<ne;M=T++)W=s[T],Q=s[M],W._code&ce?Q._code&ce||(we=z(Q,W,ce,l,d),we._code=H(we,l),p.push(we)):(Q._code&ce&&(we=z(Q,W,ce,l,d),we._code=H(we,l),p.push(we)),p.push(W));s=p}return s}function El(s,l){var d,p,y,T,M,j,W,Q,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Le(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ce=pe([0,0]),we=Re(s),Qt=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());Qt<1700&&(ce=Mo(s));var It=s.length,Nn=[];for(d=0;d<It;d++){var on=pe(s[d]);Nn.push(l.project(pe([on.lat-ce.lat,on.lng-ce.lng])))}for(j=W=Q=0,d=0,p=It-1;d<It;p=d++)y=Nn[d],T=Nn[p],M=y.y*T.x-T.y*y.x,W+=(y.x+T.x)*M,Q+=(y.y+T.y)*M,j+=M*3;j===0?ne=Nn[0]:ne=[W/j,Q/j];var Wo=l.unproject(J(ne));return pe([Wo.lat+ce.lat,Wo.lng+ce.lng])}function Mo(s){for(var l=0,d=0,p=0,y=0;y<s.length;y++){var T=pe(s[y]);l+=T.lat,d+=T.lng,p++}return pe([l/p,d/p])}var Oo={__proto__:null,clipPolygon:Tl,polygonCenter:El,centroid:Mo};function Vt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=g(s,d),s=Er(s,d),s}function Pl(s,l,d){return Math.sqrt(ge(s,l,d,!0))}function Bc(s,l,d){return ge(s,l,d)}function Er(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(d);y[0]=y[d-1]=1,c(s,y,l,0,d-1);var T,M=[];for(T=0;T<d;T++)y[T]&&M.push(s[T]);return M}function c(s,l,d,p,y){var T=0,M,j,W;for(j=p+1;j<=y-1;j++)W=ge(s[j],s[p],s[y],!0),W>T&&(M=j,T=W);T>d&&(l[M]=1,c(s,l,d,p,M),c(s,l,d,M,y))}function g(s,l){for(var d=[s[0]],p=1,y=0,T=s.length;p<T;p++)ee(s[p],s[y])>l&&(d.push(s[p]),y=p);return y<T-1&&d.push(s[T-1]),d}var w;function S(s,l,d,p,y){var T=p?w:H(s,d),M=H(l,d),j,W,Q;for(w=M;;){if(!(T|M))return[s,l];if(T&M)return!1;j=T||M,W=z(s,l,j,d,y),Q=H(W,d),j===T?(s=W,T=Q):(l=W,M=Q)}}function z(s,l,d,p,y){var T=l.x-s.x,M=l.y-s.y,j=p.min,W=p.max,Q,ne;return d&8?(Q=s.x+T*(W.y-s.y)/M,ne=W.y):d&4?(Q=s.x+T*(j.y-s.y)/M,ne=j.y):d&2?(Q=W.x,ne=s.y+M*(W.x-s.x)/T):d&1&&(Q=j.x,ne=s.y+M*(j.x-s.x)/T),new $(Q,ne,y)}function H(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ee(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function ge(s,l,d,p){var y=l.x,T=l.y,M=d.x-y,j=d.y-T,W=M*M+j*j,Q;return W>0&&(Q=((s.x-y)*M+(s.y-T)*j)/W,Q>1?(y=d.x,T=d.y):Q>0&&(y+=M*Q,T+=j*Q)),M=s.x-y,j=s.y-T,p?M*M+j*j:new $(y,T)}function Le(s){return!A(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Me(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Le(s)}function st(s,l){var d,p,y,T,M,j,W,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Le(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=pe([0,0]),ce=Re(s),we=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());we<1700&&(ne=Mo(s));var Qt=s.length,It=[];for(d=0;d<Qt;d++){var Nn=pe(s[d]);It.push(l.project(pe([Nn.lat-ne.lat,Nn.lng-ne.lng])))}for(d=0,p=0;d<Qt-1;d++)p+=It[d].distanceTo(It[d+1])/2;if(p===0)Q=It[0];else for(d=0,T=0;d<Qt-1;d++)if(M=It[d],j=It[d+1],y=M.distanceTo(j),T+=y,T>p){W=(T-p)/y,Q=[j.x-W*(j.x-M.x),j.y-W*(j.y-M.y)];break}var on=l.unproject(J(Q));return pe([on.lat+ne.lat,on.lng+ne.lng])}var bn={__proto__:null,simplify:Vt,pointToSegmentDistance:Pl,closestPointOnSegment:Bc,clipSegment:S,_getEdgeIntersection:z,_getBitCode:H,_sqClosestPointOnSegment:ge,isFlat:Le,_flat:Me,polylineCenter:st},Gn={project:function(s){return new $(s.lng,s.lat)},unproject:function(s){return new Pe(s.y,s.x)},bounds:new fe([-180,-90],[180,90])},Ln={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,y=this.R_MINOR/d,T=Math.sqrt(1-y*y),M=T*Math.sin(p),j=Math.tan(Math.PI/4-p/2)/Math.pow((1-M)/(1+M),T/2);return p=-d*Math.log(Math.max(j,1e-10)),new $(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,y=Math.sqrt(1-p*p),T=Math.exp(-s.y/d),M=Math.PI/2-2*Math.atan(T),j=0,W=.1,Q;j<15&&Math.abs(W)>1e-7;j++)Q=y*Math.sin(M),Q=Math.pow((1-Q)/(1+Q),y/2),W=Math.PI/2-2*Math.atan(T*Q)-M,M+=W;return new Pe(M*l,s.x*l/d)}},pi={__proto__:null,LonLat:Gn,Mercator:Ln,SphericalMercator:el},Vo=r({},xn,{code:"EPSG:3395",projection:Ln,transformation:function(){var s=.5/(Math.PI*Ln.R);return fr(s,.5,-s,.5)}()}),Fo=r({},xn,{code:"EPSG:4326",projection:Gn,transformation:fr(1/180,1,-1/180,.5)}),DC=r({},Tt,{projection:Gn,transformation:fr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Tt.Earth=xn,Tt.EPSG3395=Vo,Tt.EPSG3857=gs,Tt.EPSG900913=yc,Tt.EPSG4326=Fo,Tt.Simple=DC;var Kn=Ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ve.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?A(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Uo=Kn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),MC=function(s,l){return new Uo(s,l)},ji=Uo.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Uo.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Uo.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Je;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),OC=function(s,l){return new ji(s,l)},Bo=Ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var y=J(p),T=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),T&&(s.style.marginLeft=-T.x+"px",s.style.marginTop=-T.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return oe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function VC(s){return new Bo(s)}var Sl=Bo.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Sl.imagePath!="string"&&(Sl.imagePath=this._detectIconPath()),(this.options.imagePath||Sl.imagePath)+Bo.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,y){var T=p.exec(d);return T&&T[y]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ae("div","leaflet-default-icon-path",document.body),l=vr(s,"background-image")||vr(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),cv=pn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new $n(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,T=Ui(l._icon),M=d.getPixelBounds(),j=d.getPixelOrigin(),W=Ee(M.min._subtract(j).add(y),M.max._subtract(j).subtract(y));if(!W.contains(T)){var Q=J((Math.max(W.max.x,T.x)-W.max.x)/(M.max.x-W.max.x)-(Math.min(W.min.x,T.x)-W.min.x)/(M.min.x-W.min.x),(Math.max(W.max.y,T.y)-W.max.y)/(M.max.y-W.max.y)-(Math.min(W.min.y,T.y)-W.min.y)/(M.min.y-W.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),et(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Ui(l._icon),y=l._map.layerPointToLatLng(p);d&&et(d,p),l._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),zc=Kn.extend({options:{icon:new Sl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=pe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),re(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(d,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),T=!1;y!==this._shadow&&(this._removeShadow(),T=!0),y&&(re(y,l),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&T&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(this._icon,"focus",this._panOnFocus,this),be(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&be(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&et(this._icon,s),this._shadow&&et(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),cv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new cv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&rn(this._icon,s),this._shadow&&rn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function FC(s,l){return new zc(s,l)}var Pr=Kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),jc=Pr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=pe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return Pr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new fe(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function UC(s,l){return new jc(s,l)}var $f=jc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=pe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:Pr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===xn.distance){var y=Math.PI/180,T=this._mRadius/xn.R/y,M=d.project([l+T,s]),j=d.project([l-T,s]),W=M.add(j).divideBy(2),Q=d.unproject(W).lat,ne=Math.acos((Math.cos(T*y)-Math.sin(l*y)*Math.sin(Q*y))/(Math.cos(l*y)*Math.cos(Q*y)))/y;(isNaN(ne)||ne===0)&&(ne=T/Math.cos(Math.PI/180*l)),this._point=W.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:W.x-d.project([Q,s-ne]).x,this._radiusY=W.y-M.y}else{var ce=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ce).x}this._updateBounds()}});function BC(s,l,d){return new $f(s,l,d)}var Hi=Pr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=ge,y,T,M=0,j=this._parts.length;M<j;M++)for(var W=this._parts[M],Q=1,ne=W.length;Q<ne;Q++){y=W[Q-1],T=W[Q];var ce=p(s,y,T,!0);ce<l&&(l=ce,d=p(s,y,T))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return st(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=pe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Je,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Le(s),p=0,y=s.length;p<y;p++)d?(l[p]=pe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new $(s,s);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Pe,y=s.length,T,M;if(p){for(M=[],T=0;T<y;T++)M[T]=this._map.latLngToLayerPoint(s[T]),d.extend(M[T]);l.push(M)}else for(T=0;T<y;T++)this._projectLatlngs(s[T],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,y,T,M,j,W;for(d=0,y=0,T=this._rings.length;d<T;d++)for(W=this._rings[d],p=0,M=W.length;p<M-1;p++)j=S(W[p],W[p+1],s,p,!0),j&&(l[y]=l[y]||[],l[y].push(j[0]),(j[1]!==W[p+1]||p===M-2)&&(l[y].push(j[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Vt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,y,T,M,j,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,T=this._parts.length;d<T;d++)for(j=this._parts[d],p=0,M=j.length,y=M-1;p<M;y=p++)if(!(!l&&p===0)&&Pl(s,j[y],j[p])<=W)return!0;return!1}});function zC(s,l){return new Hi(s,l)}Hi._flat=Me;var zo=Hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return El(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Hi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Pe&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Hi.prototype._setLatLngs.call(this,s),Le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new $(l,l);if(s=new fe(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,T;p<y;p++)T=Tl(this._rings[p],s,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,y,T,M,j,W,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(T=0,W=this._parts.length;T<W;T++)for(d=this._parts[T],M=0,Q=d.length,j=Q-1;M<Q;j=M++)p=d[M],y=d[j],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(l=!l);return l||Hi.prototype._containsPoint.call(this,s,!0)}});function jC(s,l){return new zo(s,l)}var Wi=ji.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=A(s)?s:s.features,d,p,y;if(l){for(d=0,p=l.length;d<p;d++)y=l[d],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var T=this.options;if(T.filter&&!T.filter(s))return this;var M=Hc(s,T);return M?(M.feature=$c(s),M.defaultOptions=M.options,this.resetStyle(M),T.onEachFeature&&T.onEachFeature(s,M),this.addLayer(M)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Hc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,y=[],T=l&&l.pointToLayer,M=l&&l.coordsToLatLng||Gf,j,W,Q,ne;if(!p&&!d)return null;switch(d.type){case"Point":return j=M(p),hv(T,s,j,l);case"MultiPoint":for(Q=0,ne=p.length;Q<ne;Q++)j=M(p[Q]),y.push(hv(T,s,j,l));return new ji(y);case"LineString":case"MultiLineString":return W=Wc(p,d.type==="LineString"?0:1,M),new Hi(W,l);case"Polygon":case"MultiPolygon":return W=Wc(p,d.type==="Polygon"?1:2,M),new zo(W,l);case"GeometryCollection":for(Q=0,ne=d.geometries.length;Q<ne;Q++){var ce=Hc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);ce&&y.push(ce)}return new ji(y);case"FeatureCollection":for(Q=0,ne=d.features.length;Q<ne;Q++){var we=Hc(d.features[Q],l);we&&y.push(we)}return new ji(y);default:throw new Error("Invalid GeoJSON object.")}}function hv(s,l,d,p){return s?s(l,d):new zc(d,p&&p.markersInheritOptions&&p)}function Gf(s){return new Pe(s[1],s[0],s[2])}function Wc(s,l,d){for(var p=[],y=0,T=s.length,M;y<T;y++)M=l?Wc(s[y],l-1,d):(d||Gf)(s[y]),p.push(M);return p}function Kf(s,l){return s=pe(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function qc(s,l,d,p){for(var y=[],T=0,M=s.length;T<M;T++)y.push(l?qc(s[T],Le(s[T])?0:l-1,d,p):Kf(s[T],p));return!l&&d&&y.length>0&&y.push(y[0].slice()),y}function jo(s,l){return s.feature?r({},s.feature,{geometry:l}):$c(l)}function $c(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Zf={toGeoJSON:function(s){return jo(this,{type:"Point",coordinates:Kf(this.getLatLng(),s)})}};zc.include(Zf),$f.include(Zf),jc.include(Zf),Hi.include({toGeoJSON:function(s){var l=!Le(this._latlngs),d=qc(this._latlngs,l?1:0,!1,s);return jo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),zo.include({toGeoJSON:function(s){var l=!Le(this._latlngs),d=l&&!Le(this._latlngs[0]),p=qc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),jo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),Uo.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),jo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var T=y.toGeoJSON(s);if(d)p.push(T.geometry);else{var M=$c(T);M.type==="FeatureCollection"?p.push.apply(p,M.features):p.push(M)}}}),d?jo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function dv(s,l){return new Wi(s,l)}var HC=dv,Gc=Kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Re(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){be(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Cn(this._image),this},bringToBack:function(){return this._map&&Rn(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Re(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ae("img");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;Fi(this._image,d,l)},_reset:function(){var s=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();et(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){rn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),WC=function(s,l,d){return new Gc(s,l,d)},fv=Gc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ae("video");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],y=0;y<d.length;y++)p.push(d[y].src);this._url=d.length>0?p:[l.src];return}A(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var M=Ae("source");M.src=this._url[T],l.appendChild(M)}}});function qC(s,l,d){return new fv(s,l,d)}var pv=Gc.extend({_initImage:function(){var s=this._image=this._url;re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=_,s.onmousemove=_}});function $C(s,l,d){return new pv(s,l,d)}var mi=Kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Pe||A(s))?(this._latlng=pe(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&rn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&rn(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(rn(this._container,0),this._removeTimeout=setTimeout(a(be,void 0,this._container),200)):be(this._container),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=pe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Cn(this._container),this},bringToBack:function(){return this._map&&Rn(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof ji){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?et(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});ve.include({_initOverlay:function(s,l,d,p){var y=l;return y instanceof s||(y=new s(p).setContent(l)),d&&y.setLatLng(d),y}}),Kn.include({_initOverlay:function(s,l,d,p){var y=d;return y instanceof s?(b(y,p),y._source=this):(y=l&&!p?l:new s(p,this),y.setContent(d)),y}});var Kc=mi.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,mi.prototype.openOn.call(this,s)},onAdd:function(s){mi.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pr||this._source.on("preclick",De))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pr||this._source.off("preclick",De))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ae("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ae("div",s+"-content-wrapper",l);if(this._contentNode=Ae("div",s+"-content",d),Rs(l),fl(this._contentNode),me(l,"contextmenu",De),this._tipContainer=Ae("div",s+"-tip-container",l),this._tip=Ae("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=Ae("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',me(p,"click",function(y){ct(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,y=this.options.maxHeight,T="leaflet-popup-scrolled";y&&p>y?(l.height=y+"px",re(s,T)):ze(s,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();et(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(vr(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,y=new $(this._containerLeft,-d-this._containerBottom);y._add(Ui(this._container));var T=s.layerPointToContainerPoint(y),M=J(this.options.autoPanPadding),j=J(this.options.autoPanPaddingTopLeft||M),W=J(this.options.autoPanPaddingBottomRight||M),Q=s.getSize(),ne=0,ce=0;T.x+p+W.x>Q.x&&(ne=T.x+p-Q.x+W.x),T.x-ne-j.x<0&&(ne=T.x-j.x),T.y+d+W.y>Q.y&&(ce=T.y+d-Q.y+W.y),T.y-ce-j.y<0&&(ce=T.y-j.y),(ne||ce)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,ce]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),GC=function(s,l){return new Kc(s,l)};ve.mergeOptions({closePopupOnClick:!0}),ve.include({openPopup:function(s,l,d){return this._initOverlay(Kc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Kn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Kc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof ji||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){ci(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof Pr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Zc=mi.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){mi.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){mi.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=mi.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ae("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,y=this._container,T=p.latLngToContainerPoint(p.getCenter()),M=p.layerPointToContainerPoint(s),j=this.options.direction,W=y.offsetWidth,Q=y.offsetHeight,ne=J(this.options.offset),ce=this._getAnchor();j==="top"?(l=W/2,d=Q):j==="bottom"?(l=W/2,d=0):j==="center"?(l=W/2,d=Q/2):j==="right"?(l=0,d=Q/2):j==="left"?(l=W,d=Q/2):M.x<T.x?(j="right",l=0,d=Q/2):(j="left",l=W+(ne.x+ce.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ne).add(ce),ze(y,"leaflet-tooltip-right"),ze(y,"leaflet-tooltip-left"),ze(y,"leaflet-tooltip-top"),ze(y,"leaflet-tooltip-bottom"),re(y,"leaflet-tooltip-"+j),et(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&rn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),KC=function(s,l){return new Zc(s,l)};ve.include({openTooltip:function(s,l,d){return this._initOverlay(Zc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Kn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof ji||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(me(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),me(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var mv=Bo.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Kt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function ZC(s){return new mv(s)}Bo.Default=Sl;var Il=Kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),be(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Cn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Rn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof $?s:new $(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,y=l.length,T;p<y;p++)T=l[p].style.zIndex,l[p]!==this._container&&T&&(d=s(d,+T));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){rn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var T=Math.min(1,(s-y.loaded)/200);rn(y.el,T),T<1?l=!0:(y.active?d=!0:this._onOpaqueTile(y),y.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Ae("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(be(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],y=this._map;return p||(p=this._levels[s]={},p.el=Ae("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,y.getCenter(),y.getZoom()),_(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)be(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var y=Math.floor(s/2),T=Math.floor(l/2),M=d-1,j=new $(+y,+T);j.z=+M;var W=this._tileCoordsToKey(j),Q=this._tiles[W];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),M>p?this._retainParent(y,T,M,p):!1)},_retainChildren:function(s,l,d,p){for(var y=2*s;y<2*s+2;y++)for(var T=2*l;T<2*l+2;T++){var M=new $(y,T);M.z=d+1;var j=this._tileCoordsToKey(M),W=this._tiles[j];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);d+1<p&&this._retainChildren(y,T,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var T=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||T)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),y=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();oe.any3d?Fi(s.el,y,p):et(s.el,y)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),y=l.project(s,this._tileZoom).floor(),T=l.getSize().divideBy(p*2);return new fe(y.subtract(T),y.add(T))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(p),T=y.getCenter(),M=[],j=this.options.keepBuffer,W=new fe(y.getBottomLeft().subtract([j,-j]),y.getTopRight().add([j,-j]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ne=this._tiles[Q].coords;(ne.z!==this._tileZoom||!W.contains(new $(ne.x,ne.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ce=y.min.y;ce<=y.max.y;ce++)for(var we=y.min.x;we<=y.max.x;we++){var Qt=new $(we,ce);if(Qt.z=this._tileZoom,!!this._isValidTile(Qt)){var It=this._tiles[this._tileCoordsToKey(Qt)];It?It.current=!0:M.push(Qt)}}if(M.sort(function(on,Wo){return on.distanceTo(T)-Wo.distanceTo(T)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nn=document.createDocumentFragment();for(we=0;we<M.length;we++)this._addTile(M[we],Nn);this._level.el.appendChild(Nn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Re(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),y=p.add(d),T=l.unproject(p,s.z),M=l.unproject(y,s.z);return[T,M]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Je(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new $(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(be(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){re(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=_,s.onmousemove=_,oe.ielt9&&this.options.opacity<1&&rn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&O(a(this._tileReady,this,s,null,y)),et(y,d),this._tiles[p]={el:y,coords:s,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(rn(d.el,0),U(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(re(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new $(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new fe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function QC(s){return new Il(s)}var Ho=Il.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&oe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return me(d,"load",a(this._tileOnLoad,this,l,d)),me(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:oe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return I(this._url,r(l,this.options))},_tileOnLoad:function(s,l){oe.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=_,l.onerror=_,!l.complete)){l.src=q;var d=this._tiles[s].coords;be(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Il.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return Il.prototype._tileReady.call(this,s,l,d)}});function gv(s,l){return new Ho(s,l)}var _v=Ho.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var y=l.detectRetina&&oe.retina?2:1,T=this.getTileSize();d.width=T.x*y,d.height=T.y*y,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Ho.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Ee(d.project(l[0]),d.project(l[1])),y=p.min,T=p.max,M=(this._wmsVersion>=1.3&&this._crs===Fo?[y.y,y.x,T.y,T.x]:[y.x,y.y,T.x,T.y]).join(","),j=Ho.prototype.getTileUrl.call(this,s);return j+F(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function YC(s,l){return new _v(s,l)}Ho.WMS=_v,gv.wms=YC;var qi=Kn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),T=p.multiplyBy(-d).add(y).subtract(this._map._getNewPixelOrigin(s,l));oe.any3d?Fi(this._container,T,d):et(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new fe(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),yv=qi.extend({options:{tolerance:0},getEvents:function(){var s=qi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){qi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");me(s,"mousemove",this._onMouseMove,this),me(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,be(this._container),Ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=oe.retina?2:1;et(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){qi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,y;for(y=0;y<l.length;y++){if(p=Number(l[y]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,y,T,M=s._parts,j=M.length,W=this._ctx;if(j){for(W.beginPath(),d=0;d<j;d++){for(p=0,y=M[d].length;p<y;p++)T=M[d][p],W[p?"lineTo":"moveTo"](T.x,T.y);l&&W.closePath()}this._fillStroke(W,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||p)/p;y!==1&&(d.save(),d.scale(1,y)),d.beginPath(),d.arc(l.x,l.y/y,p,0,Math.PI*2,!1),y!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(ze(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(re(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function vv(s){return oe.canvas?new yv(s):null}var xl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),XC={_initContainer:function(){this._container=Ae("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(qi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=xl("shape");re(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=xl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;be(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,y=s._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(l||(l=s._stroke=xl("stroke")),y.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=A(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(y.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=xl("fill")),y.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(y.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Cn(s._container)},_bringToBack:function(s){Rn(s._container)}},Qc=oe.vml?xl:vc,Al=qi.extend({_initContainer:function(){this._container=Qc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Qc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){be(this._container),Ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){qi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),et(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Qc("path");s.options.className&&re(l,s.options.className),s.options.interactive&&re(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){be(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,_o(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,y="a"+d+","+p+" 0 1,0 ",T=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+y+d*2+",0 "+y+-d*2+",0 ";this._setPath(s,T)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Cn(s._path)},_bringToBack:function(s){Rn(s._path)}});oe.vml&&Al.include(XC);function wv(s){return oe.svg||oe.vml?new Al(s):null}ve.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&vv(s)||wv(s)}});var Tv=zo.extend({initialize:function(s,l){zo.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Re(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function JC(s,l){return new Tv(s,l)}Al.create=Qc,Al.pointsToPath=_o,Wi.geometryToLayer=Hc,Wi.coordsToLatLng=Gf,Wi.coordsToLatLngs=Wc,Wi.latLngToCoords=Kf,Wi.latLngsToCoords=qc,Wi.getFeature=jo,Wi.asFeature=$c,ve.mergeOptions({boxZoom:!0});var Ev=pn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){be(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),qn(),Co(),this._startPoint=this._map.mouseEventToContainerPoint(s),me(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ae("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new fe(this._point,this._startPoint),d=l.getSize();et(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(be(this._box),ze(this._container,"leaflet-crosshair")),fn(),Ro(),Ve(document,{contextmenu:ci,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ve.addInitHook("addHandler","boxZoom",Ev),ve.mergeOptions({doubleClickZoom:!0});var Pv=pn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,y=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(s.containerPoint,y)}});ve.addInitHook("addHandler","doubleClickZoom",Pv),ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sv=pn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new $n(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ze(this._map._container,"leaflet-grab"),ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Re(this._map.options.maxBounds);this._offsetLimit=Ee(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-l+d)%s+l-d,T=(p+l+d)%s-l-d,M=Math.abs(y+d)<Math.abs(T+d)?y:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,M=d.easeLinearity,j=y.multiplyBy(M/T),W=j.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,W),ne=j.multiplyBy(Q/W),ce=Q/(d.inertiaDeceleration*M),we=ne.multiplyBy(-ce/2).round();!we.x&&!we.y?l.fire("moveend"):(we=l._limitOffset(we,l.options.maxBounds),O(function(){l.panBy(we,{duration:ce,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});ve.addInitHook("addHandler","dragging",Sv),ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Iv=pn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),me(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,y;for(p=0,y=d.left.length;p<y;p++)l[d.left[p]]=[-1*s,0];for(p=0,y=d.right.length;p<y;p++)l[d.right[p]]=[s,0];for(p=0,y=d.down.length;p<y;p++)l[d.down[p]]=[0,s];for(p=0,y=d.up.length;p<y;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,y;for(p=0,y=d.zoomIn.length;p<y;p++)l[d.zoomIn[p]]=s;for(p=0,y=d.zoomOut.length;p<y;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var y=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(y)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;ci(s)}}});ve.addInitHook("addHandler","keyboard",Iv),ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var xv=pn.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=ml(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),ci(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,T=d?Math.ceil(y/d)*d:y,M=s._limitZoom(l+(this._delta>0?T:-T))-l;this._delta=0,this._startTime=null,M&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+M):s.setZoomAround(this._lastMousePos,l+M))}});ve.addInitHook("addHandler","scrollWheelZoom",xv);var eR=600;ve.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var Av=pn.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new $(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",ct),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),eR),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ve(document,"touchend",ct),Ve(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new $(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});ve.addInitHook("addHandler","tapHold",Av),ve.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var Cv=pn.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),ct(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),y=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var T=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&T.x===0&&T.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var M=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(M,this,!0),ct(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ve.addInitHook("addHandler","touchZoom",Cv),ve.BoxZoom=Ev,ve.DoubleClickZoom=Pv,ve.Drag=Sv,ve.Keyboard=Iv,ve.ScrollWheelZoom=xv,ve.TapHold=Av,ve.TouchZoom=Cv,n.Bounds=fe,n.Browser=oe,n.CRS=Tt,n.Canvas=yv,n.Circle=$f,n.CircleMarker=jc,n.Class=Ne,n.Control=sn,n.DivIcon=mv,n.DivOverlay=mi,n.DomEvent=bs,n.DomUtil=qf,n.Draggable=$n,n.Evented=Ue,n.FeatureGroup=ji,n.GeoJSON=Wi,n.GridLayer=Il,n.Handler=pn,n.Icon=Bo,n.ImageOverlay=Gc,n.LatLng=Pe,n.LatLngBounds=Je,n.Layer=Kn,n.LayerGroup=Uo,n.LineUtil=bn,n.Map=ve,n.Marker=zc,n.Mixin=Uc,n.Path=Pr,n.Point=$,n.PolyUtil=Oo,n.Polygon=zo,n.Polyline=Hi,n.Popup=Kc,n.PosAnimation=_l,n.Projection=pi,n.Rectangle=Tv,n.Renderer=qi,n.SVG=Al,n.SVGOverlay=pv,n.TileLayer=Ho,n.Tooltip=Zc,n.Transformation=tl,n.Util=D,n.VideoOverlay=fv,n.bind=a,n.bounds=Ee,n.canvas=vv,n.circle=BC,n.circleMarker=UC,n.control=di,n.divIcon=ZC,n.extend=r,n.featureGroup=OC,n.geoJSON=dv,n.geoJson=HC,n.gridLayer=QC,n.icon=VC,n.imageOverlay=WC,n.latLng=pe,n.latLngBounds=Re,n.layerGroup=MC,n.map=Lo,n.marker=FC,n.point=J,n.polygon=jC,n.polyline=zC,n.popup=GC,n.rectangle=JC,n.setOptions=b,n.stamp=h,n.svg=wv,n.svgOverlay=$C,n.tileLayer=gv,n.tooltip=KC,n.transformation=fr,n.version=i,n.videoOverlay=qC;var tR=window.L;n.noConflict=function(){return window.L=tR,this},window.L=n})})(_g,_g.exports);var fc=_g.exports;const t1=OE(fc);function ky(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function by(t,e){return e==null?function(i,r){const o=Y.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=Y.useRef();o.current||(o.current=t(i,r));const a=Y.useRef(i),{instance:u}=o.current;return Y.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function UF(t,e){Y.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function n1(t){return function(n){const i=Cy(),r=t(Ry(n,i),i);return YA(i.map,n.attribution),e1(r.current,n.eventHandlers),UF(r.current,i),r}}function BF(t,e){const n=by(t,e),i=n1(n);return MF(i)}function zF(t,e){const n=by(t),i=FF(n,e);return OF(i)}function jF(t,e){const n=by(t,e),i=n1(n);return VF(i)}function HF(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function WF(){return Cy().map}function yg(){return yg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},yg.apply(this,arguments)}function qF({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},_){const[v]=Y.useState({className:r,id:o,style:u}),[P,k]=Y.useState(null);Y.useImperativeHandle(_,()=>(P==null?void 0:P.map)??null,[P]);const b=Y.useCallback(x=>{if(x!==null&&P===null){const I=new fc.Map(x,m);n!=null&&f!=null?I.setView(n,f):t!=null&&I.fitBounds(t,e),h!=null&&I.whenReady(h),k(NF(I))}},[]);Y.useEffect(()=>()=>{P==null||P.map.remove()},[P]);const F=P?Yh.createElement(JA,{value:P},i):a??null;return Yh.createElement("div",yg({},v,{ref:b}),F)}const $F=Y.forwardRef(qF),GF=BF(function({position:e,...n},i){const r=new fc.Marker(e,n);return ky(r,DF(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),KF=zF(function(e,n){const i=new fc.Popup(e,n.overlayContainer);return ky(i,n)},function(e,n,{position:i},r){Y.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function h(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:h}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:u,popupclose:h}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),ZF=jF(function({url:e,...n},i){const r=new fc.TileLayer(e,Ry(n,i));return ky(r,i)},function(e,n,i){HF(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),QF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",YF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let XF=t1.icon({iconUrl:QF,shadowUrl:YF,iconSize:[25,41],iconAnchor:[12,41]});t1.Marker.prototype.options.icon=XF;function JF(){const[t,e]=Y.useState(null),n=WF(),i=()=>{n.locate({setView:!0,maxZoom:16,enableHighAccuracy:!0}).on("locationfound",function(r){e(r.latlng),n.flyTo(r.latlng,n.getZoom())}).on("locationerror",function(r){alert("No pudimos obtener tu ubicacin. Asegrate de tener el GPS activado y dar permisos. Nota: En celulares, esto requiere HTTPS o usar localhost."),console.error(r)})};return Y.useEffect(()=>{i()},[n]),V.jsxs(V.Fragment,{children:[V.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-[1000] bg-white p-2 rounded-lg shadow-md text-primary-600 active:scale-95",title:"Mi Ubicacin",children:V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[V.jsx("crosshairs",{cx:"12",cy:"12",r:"10"}),V.jsx("line",{x1:"22",y1:"12",x2:"18",y2:"12"}),V.jsx("line",{x1:"6",y1:"12",x2:"2",y2:"12"}),V.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),V.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"18"})]})}),t&&V.jsx(GF,{position:t,children:V.jsx(KF,{children:"Ests aqu!"})})]})}function i1({center:t=[21.8853,-102.2916],zoom:e=13}){return V.jsx("div",{className:"h-[300px] w-full rounded-xl overflow-hidden shadow-inner border border-gray-200 relative z-0",children:V.jsxs($F,{center:t,zoom:e,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[V.jsx(ZF,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),V.jsx(JF,{})]})})}function eU(){var e,n;const{user:t}=Qa();return V.jsxs("div",{className:"p-4 space-y-6 pb-24",children:[V.jsxs("header",{className:"flex justify-between items-center",children:[V.jsxs("div",{children:[V.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Hola, ",(e=t==null?void 0:t.name)==null?void 0:e.split(" ")[0]]}),V.jsx("p",{className:"text-gray-500 text-sm",children:"Qu quieres reportar hoy?"})]}),V.jsx("div",{className:"w-10 h-10 bg-primary-50 rounded-full flex items-center justify-center text-primary-600 font-bold border border-primary-100",children:((n=t==null?void 0:t.name)==null?void 0:n.charAt(0).toUpperCase())||"U"})]}),V.jsxs("section",{children:[V.jsxs("div",{className:"flex justify-between items-center mb-3",children:[V.jsx("h2",{className:"font-semibold text-gray-800",children:"Mapa de Reportes"}),V.jsx("button",{className:"text-primary-600 text-sm font-medium",children:"Ver todo"})]}),V.jsx(i1,{})]}),V.jsxs("section",{children:[V.jsx("h2",{className:"font-semibold text-gray-800 mb-3",children:"Reportes Recientes"}),V.jsxs("div",{className:"space-y-3",children:[V.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-xl shadow-sm flex gap-3",children:[V.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex-shrink-0 flex items-center justify-center text-red-600",children:V.jsx(QS,{size:24})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-medium text-gray-900",children:"Bache en Av. Universidad"}),V.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hace 2 horas  Pendiente"})]})]}),V.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-xl shadow-sm flex gap-3",children:[V.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex-shrink-0 flex items-center justify-center text-yellow-600",children:V.jsx(JS,{size:24})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-medium text-gray-900",children:"Luminaria fundida"}),V.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hace 5 horas  En proceso"})]})]}),V.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-xl shadow-sm flex gap-3",children:[V.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex-shrink-0 flex items-center justify-center text-blue-600",children:V.jsx(XS,{size:24})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-medium text-gray-900",children:"Fuga de agua"}),V.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ayer  Resuelto"})]})]})]})]})]})}function tU({onSwitchToSignUp:t}){const[e,n]=Y.useState(""),[i,r]=Y.useState(""),[o,a]=Y.useState(""),{login:u}=Qa(),h=async f=>{f.preventDefault(),a("");const m=await u(e,i);m.success||a(m.error)};return V.jsxs("div",{className:"min-h-screen bg-white p-6 flex flex-col justify-center",children:[V.jsxs("div",{className:"mb-10 text-center",children:[V.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-24 h-24 mx-auto mb-4 object-contain"}),V.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bienvenido de nuevo"}),V.jsx("p",{className:"text-gray-500",children:"Ingresa a tu cuenta para continuar"})]}),V.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o&&V.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center",children:o}),V.jsxs("div",{className:"relative",children:[V.jsx(R_,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"email",placeholder:"Correo electrnico",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:e,onChange:f=>n(f.target.value),required:!0})]}),V.jsxs("div",{className:"relative",children:[V.jsx(eI,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"password",placeholder:"Contrasea",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:i,onChange:f=>r(f.target.value),required:!0})]}),V.jsxs("button",{type:"submit",className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg shadow-primary-600/30 active:scale-95 transition-transform flex items-center justify-center gap-2",children:["Iniciar Sesin",V.jsx(YS,{size:20})]})]}),V.jsx("div",{className:"mt-8 text-center",children:V.jsxs("p",{className:"text-gray-500",children:["No tienes cuenta?"," ",V.jsx("button",{onClick:t,className:"text-primary-600 font-semibold hover:underline",children:"Regstrate"})]})})]})}function nU({onSwitchToLogin:t}){const[e,n]=Y.useState(""),[i,r]=Y.useState(""),[o,a]=Y.useState(""),[u,h]=Y.useState(""),{signup:f}=Qa(),m=async _=>{_.preventDefault(),h("");const v=await f(e,i,o);v.success||h(v.error)};return V.jsxs("div",{className:"min-h-screen bg-white p-6 flex flex-col justify-center",children:[V.jsxs("div",{className:"mb-10 text-center",children:[V.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Crear Cuenta"}),V.jsx("p",{className:"text-gray-500",children:"nete a AGSCiudadana"})]}),V.jsxs("form",{onSubmit:m,className:"space-y-4",children:[u&&V.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center",children:u}),V.jsxs("div",{className:"relative",children:[V.jsx(R_,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"text",placeholder:"Nombre completo",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:e,onChange:_=>n(_.target.value),required:!0})]}),V.jsxs("div",{className:"relative",children:[V.jsx(qb,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"email",placeholder:"Correo electrnico",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:i,onChange:_=>r(_.target.value),required:!0})]}),V.jsxs("div",{className:"relative",children:[V.jsx(eI,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"password",placeholder:"Contrasea",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:o,onChange:_=>a(_.target.value),required:!0})]}),V.jsxs("button",{type:"submit",className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg shadow-primary-600/30 active:scale-95 transition-transform flex items-center justify-center gap-2",children:["Registrarse",V.jsx(YS,{size:20})]})]}),V.jsx("div",{className:"mt-8 text-center",children:V.jsxs("p",{className:"text-gray-500",children:["Ya tienes cuenta?"," ",V.jsx("button",{onClick:t,className:"text-primary-600 font-semibold hover:underline",children:"Inicia Sesin"})]})})]})}const iU=async t=>{try{const{userId:e,userName:n,category:i,location:r,description:o,imageUrl:a}=t;if(!e||!i||!r||!o)throw new Error("Faltan datos requeridos");const u=new ri(r.lat,r.lng),h={userId:e,userName:n||"Usuario",category:{id:i.id,name:i.name},location:u,locationDetails:{lat:r.lat,lng:r.lng},description:o,imageUrls:a?[a]:[],status:"Pendiente",createdAt:Be.now(),updatedAt:Be.now()};return{success:!0,reportId:(await a4(yA(dc,"reports"),h)).id,message:"Reporte creado exitosamente"}}catch(e){return console.error("Error al crear reporte:",e),{success:!1,error:e.message||"Error al crear el reporte"}}},r1=async t=>{try{const e=e4(yA(dc,"reports"),t4("userId","==",t),n4("createdAt","desc")),n=await s4(e),i=[];return n.forEach(r=>{var a,u,h;const o=r.data();i.push({id:r.id,...o,date:(a=o.createdAt)==null?void 0:a.toDate().toLocaleDateString("es-MX",{day:"numeric",month:"short",year:"numeric"}),createdAt:(u=o.createdAt)==null?void 0:u.toDate(),updatedAt:(h=o.updatedAt)==null?void 0:h.toDate()})}),{success:!0,reports:i}}catch(e){return console.error("Error al obtener reportes:",e),{success:!1,error:e.message,reports:[]}}},rU=async t=>{try{const e=await r1(t);if(!e.success)throw new Error(e.error);const n=e.reports,i=n.length,r=n.filter(u=>u.status==="Resuelto").length,o=n.filter(u=>u.status==="En Proceso").length,a=n.filter(u=>u.status==="Pendiente").length;return{success:!0,stats:{total:i,resueltos:r,enProceso:o,pendientes:a,activos:o+a}}}catch(e){return console.error("Error al obtener estadsticas:",e),{success:!1,stats:{total:0,resueltos:0,enProceso:0,pendientes:0,activos:0}}}},sU=async(t,e)=>{try{if(!t)throw new Error("No se proporcion ningn archivo");if(!t.type.startsWith("image/"))throw new Error("El archivo debe ser una imagen");const n=5*1024*1024;if(t.size>n)throw new Error("La imagen no debe superar los 5MB");const i=Date.now(),r=`reports/${e}/${i}_${t.name}`,o=wF(xF,r),a=await yF(o,t);return{success:!0,url:await vF(a.ref)}}catch(n){return console.error("Error al subir imagen:",n),{success:!1,error:n.message}}},oU=[{id:"bache",name:"Bache",icon:QS,color:"bg-red-100 text-red-600"},{id:"alumbrado",name:"Alumbrado",icon:JS,color:"bg-yellow-100 text-yellow-600"},{id:"fuga",name:"Fuga de Agua",icon:XS,color:"bg-blue-100 text-blue-600"},{id:"basura",name:"Basura",icon:Kb,color:"bg-green-100 text-green-600"},{id:"seguridad",name:"Inseguridad",icon:Gb,color:"bg-purple-100 text-purple-600"}];function aU({onCancel:t,onSuccess:e}){const{user:n}=Qa(),[i,r]=Y.useState(1),[o,a]=Y.useState({category:null,location:null,description:"",image:null}),[u,h]=Y.useState(null),[f,m]=Y.useState(null),[_,v]=Y.useState(!1),[P,k]=Y.useState(""),b=A=>{a({...o,category:A}),r(2)},F=()=>{a({...o,location:{lat:21.8853,lng:-102.2916}}),r(3)},x=A=>{const B=A.target.files[0];if(B){h(B);const q=new FileReader;q.onloadend=()=>{m(q.result)},q.readAsDataURL(B)}},I=async A=>{A.preventDefault(),v(!0),k("");try{let B=null;if(u){const C=await sU(u,n.uid);if(!C.success)throw new Error(C.error);B=C.url}const q={userId:n.uid,userName:n.name,category:o.category,location:o.location,description:o.description,imageUrl:B},K=await iU(q);if(!K.success)throw new Error(K.error);setTimeout(()=>{v(!1),e()},500)}catch(B){console.error("Error al enviar reporte:",B),k(B.message||"Error al enviar el reporte"),v(!1)}};return V.jsxs("div",{className:"h-full flex flex-col bg-white",children:[V.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center gap-3",children:[i>1&&V.jsx("button",{onClick:()=>r(i-1),className:"p-1 -ml-2 text-gray-500",children:V.jsx(Ub,{size:24})}),V.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:[i===1&&"Selecciona una categora",i===2&&"Confirma la ubicacin",i===3&&"Detalles del reporte"]})]}),V.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i===1&&V.jsx("div",{className:"grid grid-cols-2 gap-4",children:oU.map(A=>V.jsxs("button",{onClick:()=>b(A),className:"flex flex-col items-center justify-center p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all bg-white active:scale-95",children:[V.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${A.color}`,children:V.jsx(A.icon,{size:32})}),V.jsx("span",{className:"font-medium text-gray-800",children:A.name})]},A.id))}),i===2&&V.jsxs("div",{className:"h-full flex flex-col",children:[V.jsxs("div",{className:"flex-1 rounded-xl overflow-hidden border border-gray-200 relative mb-4",children:[V.jsx(i1,{}),V.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[1000]",children:V.jsx(Hm,{size:48,className:"text-primary-600 -mt-12 drop-shadow-lg",fill:"currentColor"})})]}),V.jsx("div",{className:"bg-blue-50 p-4 rounded-xl text-sm text-blue-800 mb-4",children:V.jsxs("p",{className:"flex gap-2",children:[V.jsx(Hm,{size:16,className:"shrink-0 mt-0.5"}),"Mueve el mapa para ubicar el problema exactamente."]})}),V.jsx("button",{onClick:F,className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg active:scale-95 transition-transform",children:"Confirmar Ubicacin"})]}),i===3&&V.jsxs("form",{onSubmit:I,className:"space-y-6",children:[V.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl border border-gray-100",children:[V.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${o.category.color}`,children:V.jsx(o.category.icon,{size:24})}),V.jsxs("div",{children:[V.jsx("p",{className:"text-xs text-gray-500",children:"Categora"}),V.jsx("p",{className:"font-semibold text-gray-900",children:o.category.name})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),V.jsx("textarea",{className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 h-32 resize-none",placeholder:"Describe el problema...",value:o.description,onChange:A=>a({...o,description:A.target.value}),required:!0})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Evidencia (Opcional)"}),f?V.jsxs("div",{className:"relative",children:[V.jsx("img",{src:f,alt:"Preview",className:"w-full h-48 object-cover rounded-xl"}),V.jsx("button",{type:"button",onClick:()=>{h(null),m(null)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 shadow-lg hover:bg-red-600",children:""})]}):V.jsxs("label",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center text-gray-400 hover:bg-gray-50 transition-colors cursor-pointer",children:[V.jsx(zb,{size:32,className:"mb-2"}),V.jsx("span",{className:"text-sm",children:"Tomar foto o subir imagen"}),V.jsx("input",{type:"file",accept:"image/*",onChange:x,className:"hidden"})]})]}),P&&V.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl text-sm text-center",children:P}),V.jsx("button",{type:"submit",disabled:_,className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg active:scale-95 transition-transform flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:_?V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando..."]}):V.jsxs(V.Fragment,{children:["Enviar Reporte",V.jsx(jb,{size:20})]})})]})]})]})}function lU(){var f;const{user:t,logout:e}=Qa(),[n,i]=Y.useState([]),[r,o]=Y.useState({total:0,resueltos:0,activos:0}),[a,u]=Y.useState(!0);Y.useEffect(()=>{(async()=>{if(!t)return;u(!0);const _=await r1(t.uid);_.success&&i(_.reports);const v=await rU(t.uid);v.success&&o(v.stats),u(!1)})()},[t]);const h=m=>{switch(m){case"Pendiente":return"text-yellow-600 bg-yellow-100";case"En Proceso":return"text-blue-600 bg-blue-100";case"Resuelto":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return V.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[V.jsxs("div",{className:"bg-white p-6 border-b border-gray-100 flex flex-col items-center",children:[V.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 text-4xl font-bold mb-4 border-4 border-white shadow-lg",children:(f=t==null?void 0:t.name)==null?void 0:f.charAt(0).toUpperCase()}),V.jsx("h1",{className:"text-xl font-bold text-gray-900",children:t==null?void 0:t.name}),V.jsx("p",{className:"text-gray-500 text-sm",children:t==null?void 0:t.email}),V.jsxs("button",{onClick:e,className:"mt-4 flex items-center gap-2 text-red-600 px-4 py-2 rounded-full hover:bg-red-50 transition-colors text-sm font-medium",children:[V.jsx(Wb,{size:16}),"Cerrar Sesin"]})]}),V.jsxs("div",{className:"grid grid-cols-3 gap-1 p-4",children:[V.jsxs("div",{className:"bg-white p-3 rounded-xl text-center shadow-sm",children:[V.jsx("span",{className:"block text-2xl font-bold text-gray-900",children:r.total}),V.jsx("span",{className:"text-xs text-gray-500",children:"Reportes"})]}),V.jsxs("div",{className:"bg-white p-3 rounded-xl text-center shadow-sm",children:[V.jsx("span",{className:"block text-2xl font-bold text-gray-900",children:r.resueltos}),V.jsx("span",{className:"text-xs text-gray-500",children:"Resueltos"})]}),V.jsxs("div",{className:"bg-white p-3 rounded-xl text-center shadow-sm",children:[V.jsx("span",{className:"block text-2xl font-bold text-gray-900",children:r.activos}),V.jsx("span",{className:"text-xs text-gray-500",children:"Activos"})]})]}),V.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pt-0",children:[V.jsx("h2",{className:"font-semibold text-gray-800 mb-3 ml-1",children:"Mis Reportes"}),a?V.jsx("div",{className:"flex justify-center items-center py-12",children:V.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):n.length===0?V.jsxs("div",{className:"bg-white p-8 rounded-xl text-center text-gray-500",children:[V.jsx(Fb,{size:48,className:"mx-auto mb-3 text-gray-300"}),V.jsx("p",{className:"font-medium",children:"No tienes reportes an"}),V.jsx("p",{className:"text-sm mt-1",children:"Crea tu primer reporte para empezar"})]}):V.jsx("div",{className:"space-y-3",children:n.map(m=>{var _;return V.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[V.jsxs("div",{className:"flex justify-between items-start mb-2",children:[V.jsx("h3",{className:"font-medium text-gray-900",children:((_=m.category)==null?void 0:_.name)||"Reporte"}),V.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${h(m.status)}`,children:m.status})]}),V.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:m.description}),m.imageUrls&&m.imageUrls.length>0&&V.jsx("img",{src:m.imageUrls[0],alt:"Evidencia",className:"w-full h-32 object-cover rounded-lg mb-2"}),V.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[V.jsxs("div",{className:"flex items-center gap-1",children:[V.jsx(Bb,{size:12}),m.date]}),V.jsxs("div",{className:"flex items-center gap-1",children:[V.jsx(Hm,{size:12}),"Ver mapa"]})]})]},m.id)})})]})]})}const s1=Y.createContext({});function uU(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Ly=Y.createContext(null),o1=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function cU(t=!0){const e=Y.useContext(Ly);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=Y.useId();Y.useEffect(()=>{t&&r(o)},[t]);const a=Y.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,a]:[!0]}const Ny=typeof window<"u",hU=Ny?Y.useLayoutEffect:Y.useEffect,wn=t=>t;let a1=wn;function Dy(t){let e;return()=>(e===void 0&&(e=t()),e)}const Fa=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},tr=t=>t*1e3,nr=t=>t/1e3,dU={useManualTiming:!1};function fU(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),t()),f(a)}const h={schedule:(f,m=!1,_=!1)=>{const P=_&&i?e:n;return m&&o.add(f),P.has(f)||P.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(a=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(u),e.clear(),i=!1,r&&(r=!1,h.process(f))}};return h}const Ph=["read","resolveKeyframes","update","preRender","render","postRender"],pU=40;function l1(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=Ph.reduce((x,I)=>(x[I]=fU(o),x),{}),{read:u,resolveKeyframes:h,update:f,preRender:m,render:_,postRender:v}=a,P=()=>{const x=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(x-r.timestamp,pU),1),r.timestamp=x,r.isProcessing=!0,u.process(r),h.process(r),f.process(r),m.process(r),_.process(r),v.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(P))},k=()=>{n=!0,i=!0,r.isProcessing||t(P)};return{schedule:Ph.reduce((x,I)=>{const A=a[I];return x[I]=(B,q=!1,K=!1)=>(n||k(),A.schedule(B,q,K)),x},{}),cancel:x=>{for(let I=0;I<Ph.length;I++)a[Ph[I]].cancel(x)},state:r,steps:a}}const{schedule:$e,cancel:as,state:bt,steps:Vp}=l1(typeof requestAnimationFrame<"u"?requestAnimationFrame:wn,!0),u1=Y.createContext({strict:!1}),TT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ua={};for(const t in TT)Ua[t]={isEnabled:e=>TT[t].some(n=>!!e[n])};function mU(t){for(const e in t)Ua[e]={...Ua[e],...t[e]}}const gU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function zd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||gU.has(t)}let c1=t=>!zd(t);function _U(t){t&&(c1=e=>e.startsWith("on")?!zd(e):t(e))}try{_U(require("@emotion/is-prop-valid").default)}catch{}function yU(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(c1(r)||n===!0&&zd(r)||!e&&!zd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function vU(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const Nf=Y.createContext({});function Wu(t){return typeof t=="string"||Array.isArray(t)}function Df(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const My=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Oy=["initial",...My];function Mf(t){return Df(t.animate)||Oy.some(e=>Wu(t[e]))}function h1(t){return!!(Mf(t)||t.variants)}function wU(t,e){if(Mf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Wu(n)?n:void 0,animate:Wu(i)?i:void 0}}return t.inherit!==!1?e:{}}function TU(t){const{initial:e,animate:n}=wU(t,Y.useContext(Nf));return Y.useMemo(()=>({initial:e,animate:n}),[ET(e),ET(n)])}function ET(t){return Array.isArray(t)?t.join(" "):t}const EU=Symbol.for("motionComponentSymbol");function ua(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function PU(t,e,n){return Y.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ua(n)&&(n.current=i))},[e])}const Vy=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),SU="framerAppearId",d1="data-"+Vy(SU),{schedule:Fy}=l1(queueMicrotask,!1),f1=Y.createContext({});function IU(t,e,n,i,r){var o,a;const{visualElement:u}=Y.useContext(Nf),h=Y.useContext(u1),f=Y.useContext(Ly),m=Y.useContext(o1).reducedMotion,_=Y.useRef(null);i=i||h.renderer,!_.current&&i&&(_.current=i(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const v=_.current,P=Y.useContext(f1);v&&!v.projection&&r&&(v.type==="html"||v.type==="svg")&&xU(_.current,n,r,P);const k=Y.useRef(!1);Y.useInsertionEffect(()=>{v&&k.current&&v.update(n,f)});const b=n[d1],F=Y.useRef(!!b&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,b))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,b)));return hU(()=>{v&&(k.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),Fy.render(v.render),F.current&&v.animationState&&v.animationState.animateChanges())}),Y.useEffect(()=>{v&&(!F.current&&v.animationState&&v.animationState.animateChanges(),F.current&&(queueMicrotask(()=>{var x;(x=window.MotionHandoffMarkAsComplete)===null||x===void 0||x.call(window,b)}),F.current=!1))}),v}function xU(t,e,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:u,layoutScroll:h,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:p1(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||u&&ua(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:f})}function p1(t){if(t)return t.options.allowProjection!==!1?t.projection:p1(t.parent)}function AU({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,a;t&&mU(t);function u(f,m){let _;const v={...Y.useContext(o1),...f,layoutId:CU(f)},{isStatic:P}=v,k=TU(f),b=i(f,P);if(!P&&Ny){RU();const F=kU(v);_=F.MeasureLayout,k.visualElement=IU(r,b,v,e,F.ProjectionNode)}return V.jsxs(Nf.Provider,{value:k,children:[_&&k.visualElement?V.jsx(_,{visualElement:k.visualElement,...v}):null,n(r,f,PU(b,k.visualElement,m),b,P,k.visualElement)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const h=Y.forwardRef(u);return h[EU]=r,h}function CU({layoutId:t}){const e=Y.useContext(s1).id;return e&&t!==void 0?e+"-"+t:t}function RU(t,e){Y.useContext(u1).strict}function kU(t){const{drag:e,layout:n}=Ua;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const bU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Uy(t){return typeof t!="string"||t.includes("-")?!1:!!(bU.indexOf(t)>-1||/[A-Z]/u.test(t))}function PT(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function By(t,e,n,i){if(typeof e=="function"){const[r,o]=PT(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=PT(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const vg=t=>Array.isArray(t),LU=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),NU=t=>vg(t)?t[t.length-1]||0:t,qt=t=>!!(t&&t.getVelocity);function Kh(t){const e=qt(t)?t.get():t;return LU(e)?e.toValue():e}function DU({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const a={latestValues:MU(i,r,o,t),renderState:e()};return n&&(a.onMount=u=>n({props:i,current:u,...a}),a.onUpdate=u=>n(u)),a}const m1=t=>(e,n)=>{const i=Y.useContext(Nf),r=Y.useContext(Ly),o=()=>DU(t,e,i,r);return n?o():uU(o)};function MU(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=Kh(o[v]);let{initial:a,animate:u}=t;const h=Mf(t),f=h1(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const _=m?u:a;if(_&&typeof _!="boolean"&&!Df(_)){const v=Array.isArray(_)?_:[_];for(let P=0;P<v.length;P++){const k=By(t,v[P]);if(k){const{transitionEnd:b,transition:F,...x}=k;for(const I in x){let A=x[I];if(Array.isArray(A)){const B=m?A.length-1:0;A=A[B]}A!==null&&(r[I]=A)}for(const I in b)r[I]=b[I]}}}return r}const Ya=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],go=new Set(Ya),g1=t=>e=>typeof e=="string"&&e.startsWith(t),_1=g1("--"),OU=g1("var(--"),zy=t=>OU(t)?VU.test(t.split("/*")[0].trim()):!1,VU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,y1=(t,e)=>e&&typeof t=="number"?e.transform(t):t,hr=(t,e,n)=>n>e?e:n<t?t:n,Xa={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},qu={...Xa,transform:t=>hr(0,1,t)},Sh={...Xa,default:1},pc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),xr=pc("deg"),ki=pc("%"),ue=pc("px"),FU=pc("vh"),UU=pc("vw"),ST={...ki,parse:t=>ki.parse(t)/100,transform:t=>ki.transform(t*100)},BU={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue},zU={rotate:xr,rotateX:xr,rotateY:xr,rotateZ:xr,scale:Sh,scaleX:Sh,scaleY:Sh,scaleZ:Sh,skew:xr,skewX:xr,skewY:xr,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:qu,originX:ST,originY:ST,originZ:ue},IT={...Xa,transform:Math.round},jy={...BU,...zU,zIndex:IT,size:ue,fillOpacity:qu,strokeOpacity:qu,numOctaves:IT},jU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},HU=Ya.length;function WU(t,e,n){let i="",r=!0;for(let o=0;o<HU;o++){const a=Ya[o],u=t[a];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(a.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const f=y1(u,jy[a]);if(!h){r=!1;const m=jU[a]||a;i+=`${m}(${f}) `}n&&(e[a]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Hy(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let a=!1,u=!1;for(const h in e){const f=e[h];if(go.has(h)){a=!0;continue}else if(_1(h)){r[h]=f;continue}else{const m=y1(f,jy[h]);h.startsWith("origin")?(u=!0,o[h]=m):i[h]=m}}if(e.transform||(a||n?i.transform=WU(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=o;i.transformOrigin=`${h} ${f} ${m}`}}const qU={offset:"stroke-dashoffset",array:"stroke-dasharray"},$U={offset:"strokeDashoffset",array:"strokeDasharray"};function GU(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?qU:$U;t[o.offset]=ue.transform(-i);const a=ue.transform(e),u=ue.transform(n);t[o.array]=`${a} ${u}`}function xT(t,e,n){return typeof t=="string"?t:ue.transform(e+n*t)}function KU(t,e,n){const i=xT(e,t.x,t.width),r=xT(n,t.y,t.height);return`${i} ${r}`}function Wy(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,_){if(Hy(t,f,_),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:P,dimensions:k}=t;v.transform&&(k&&(P.transform=v.transform),delete v.transform),k&&(r!==void 0||o!==void 0||P.transform)&&(P.transformOrigin=KU(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),i!==void 0&&(v.scale=i),a!==void 0&&GU(v,a,u,h,!1)}const qy=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),v1=()=>({...qy(),attrs:{}}),$y=t=>typeof t=="string"&&t.toLowerCase()==="svg";function w1(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const T1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function E1(t,e,n,i){w1(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(T1.has(r)?r:Vy(r),e.attrs[r])}const jd={};function ZU(t){Object.assign(jd,t)}function P1(t,{layout:e,layoutId:n}){return go.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!jd[t]||t==="opacity")}function Gy(t,e,n){var i;const{style:r}=t,o={};for(const a in r)(qt(r[a])||e.style&&qt(e.style[a])||P1(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function S1(t,e,n){const i=Gy(t,e,n);for(const r in t)if(qt(t[r])||qt(e[r])){const o=Ya.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function QU(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const AT=["x","y","width","height","cx","cy","r"],YU={useVisualState:m1({scrapeMotionValuesFromProps:S1,createRenderState:v1,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in r)if(go.has(u)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let u=0;u<AT.length;u++){const h=AT[u];t[h]!==e[h]&&(a=!0)}a&&$e.read(()=>{QU(n,i),$e.render(()=>{Wy(i,r,$y(n.tagName),t.transformTemplate),E1(n,i)})})}})},XU={useVisualState:m1({scrapeMotionValuesFromProps:Gy,createRenderState:qy})};function I1(t,e,n){for(const i in e)!qt(e[i])&&!P1(i,n)&&(t[i]=e[i])}function JU({transformTemplate:t},e){return Y.useMemo(()=>{const n=qy();return Hy(n,e,t),Object.assign({},n.vars,n.style)},[e])}function e3(t,e){const n=t.style||{},i={};return I1(i,n,t),Object.assign(i,JU(t,e)),i}function t3(t,e){const n={},i=e3(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function n3(t,e,n,i){const r=Y.useMemo(()=>{const o=v1();return Wy(o,e,$y(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};I1(o,t.style,t),r.style={...o,...r.style}}return r}function i3(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(Uy(n)?n3:t3)(i,o,a,n),f=yU(i,typeof n=="string",t),m=n!==Y.Fragment?{...f,...h,ref:r}:{},{children:_}=i,v=Y.useMemo(()=>qt(_)?_.get():_,[_]);return Y.createElement(n,{...m,children:v})}}function r3(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...Uy(i)?YU:XU,preloadedFeatures:t,useRender:i3(r),createVisualElement:e,Component:i};return AU(a)}}function x1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Of(t,e,n){const i=t.getProps();return By(i,e,n!==void 0?n:i.custom,t)}const s3=Dy(()=>window.ScrollTimeline!==void 0);class o3{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(s3()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class a3 extends o3{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function Ky(t,e){return t?t[e]||t.default||t:void 0}const wg=2e4;function A1(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<wg;)e+=n,i=t.next(e);return e>=wg?1/0:e}function Zy(t){return typeof t=="function"}function CT(t,e){t.timeline=e,t.onfinish=null}const Qy=t=>Array.isArray(t)&&typeof t[0]=="number",l3={linearEasing:void 0};function u3(t,e){const n=Dy(t);return()=>{var i;return(i=l3[e])!==null&&i!==void 0?i:n()}}const Hd=u3(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),C1=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t(Fa(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function R1(t){return!!(typeof t=="function"&&Hd()||!t||typeof t=="string"&&(t in Tg||Hd())||Qy(t)||Array.isArray(t)&&t.every(R1))}const Kl=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Tg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kl([0,.65,.55,1]),circOut:Kl([.55,0,1,.45]),backIn:Kl([.31,.01,.66,-.59]),backOut:Kl([.33,1.53,.69,.99])};function k1(t,e){if(t)return typeof t=="function"&&Hd()?C1(t,e):Qy(t)?Kl(t):Array.isArray(t)?t.map(n=>k1(n,e)||Tg.easeOut):Tg[t]}const Qn={x:!1,y:!1};function b1(){return Qn.x||Qn.y}function c3(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function L1(t,e){const n=c3(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function RT(t){return e=>{e.pointerType==="touch"||b1()||t(e)}}function h3(t,e,n={}){const[i,r,o]=L1(t,n),a=RT(u=>{const{target:h}=u,f=e(u);if(typeof f!="function"||!h)return;const m=RT(_=>{f(_),h.removeEventListener("pointerleave",m)});h.addEventListener("pointerleave",m,r)});return i.forEach(u=>{u.addEventListener("pointerenter",a,r)}),o}const N1=(t,e)=>e?t===e?!0:N1(t,e.parentElement):!1,Yy=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,d3=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function f3(t){return d3.has(t.tagName)||t.tabIndex!==-1}const Zl=new WeakSet;function kT(t){return e=>{e.key==="Enter"&&t(e)}}function Fp(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const p3=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=kT(()=>{if(Zl.has(n))return;Fp(n,"down");const r=kT(()=>{Fp(n,"up")}),o=()=>Fp(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function bT(t){return Yy(t)&&!b1()}function m3(t,e,n={}){const[i,r,o]=L1(t,n),a=u=>{const h=u.currentTarget;if(!bT(u)||Zl.has(h))return;Zl.add(h);const f=e(u),m=(P,k)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",v),!(!bT(P)||!Zl.has(h))&&(Zl.delete(h),typeof f=="function"&&f(P,{success:k}))},_=P=>{m(P,n.useGlobalTarget||N1(h,P.target))},v=P=>{m(P,!1)};window.addEventListener("pointerup",_,r),window.addEventListener("pointercancel",v,r)};return i.forEach(u=>{!f3(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(n.useGlobalTarget?window:u).addEventListener("pointerdown",a,r),u.addEventListener("focus",f=>p3(f,r),r)}),o}function g3(t){return t==="x"||t==="y"?Qn[t]?null:(Qn[t]=!0,()=>{Qn[t]=!1}):Qn.x||Qn.y?null:(Qn.x=Qn.y=!0,()=>{Qn.x=Qn.y=!1})}const D1=new Set(["width","height","top","left","right","bottom",...Ya]);let Zh;function _3(){Zh=void 0}const bi={now:()=>(Zh===void 0&&bi.set(bt.isProcessing||dU.useManualTiming?bt.timestamp:performance.now()),Zh),set:t=>{Zh=t,queueMicrotask(_3)}};function Xy(t,e){t.indexOf(e)===-1&&t.push(e)}function Jy(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class ev{constructor(){this.subscriptions=[]}add(e){return Xy(this.subscriptions,e),()=>Jy(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function M1(t,e){return e?t*(1e3/e):0}const LT=30,y3=t=>!isNaN(parseFloat(t));class v3{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=bi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=bi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=y3(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ev);const i=this.events[e].add(n);return e==="change"?()=>{i(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=bi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>LT)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,LT);return M1(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $u(t,e){return new v3(t,e)}function w3(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$u(n))}function T3(t,e){const n=Of(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o){const u=NU(o[a]);w3(t,a,u)}}function E3(t){return!!(qt(t)&&t.add)}function Eg(t,e){const n=t.getValue("willChange");if(E3(n))return n.add(e)}function O1(t){return t.props[d1]}const V1=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,P3=1e-7,S3=12;function I3(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=V1(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>P3&&++u<S3);return a}function mc(t,e,n,i){if(t===e&&n===i)return wn;const r=o=>I3(o,0,1,t,n);return o=>o===0||o===1?o:V1(r(o),e,i)}const F1=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,U1=t=>e=>1-t(1-e),B1=mc(.33,1.53,.69,.99),tv=U1(B1),z1=F1(tv),j1=t=>(t*=2)<1?.5*tv(t):.5*(2-Math.pow(2,-10*(t-1))),nv=t=>1-Math.sin(Math.acos(t)),H1=U1(nv),W1=F1(nv),q1=t=>/^0[^.\s]+$/u.test(t);function x3(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||q1(t):!0}const fu=t=>Math.round(t*1e5)/1e5,iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function A3(t){return t==null}const C3=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,rv=(t,e)=>n=>!!(typeof n=="string"&&C3.test(n)&&n.startsWith(t)||e&&!A3(n)&&Object.prototype.hasOwnProperty.call(n,e)),$1=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,a,u]=i.match(iv);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},R3=t=>hr(0,255,t),Up={...Xa,transform:t=>Math.round(R3(t))},js={test:rv("rgb","red"),parse:$1("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Up.transform(t)+", "+Up.transform(e)+", "+Up.transform(n)+", "+fu(qu.transform(i))+")"};function k3(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Pg={test:rv("#"),parse:k3,transform:js.transform},ca={test:rv("hsl","hue"),parse:$1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+ki.transform(fu(e))+", "+ki.transform(fu(n))+", "+fu(qu.transform(i))+")"},zt={test:t=>js.test(t)||Pg.test(t)||ca.test(t),parse:t=>js.test(t)?js.parse(t):ca.test(t)?ca.parse(t):Pg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?js.transform(t):ca.transform(t)},b3=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function L3(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(iv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(b3))===null||n===void 0?void 0:n.length)||0)>0}const G1="number",K1="color",N3="var",D3="var(",NT="${}",M3=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Gu(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(M3,h=>(zt.test(h)?(i.color.push(o),r.push(K1),n.push(zt.parse(h))):h.startsWith(D3)?(i.var.push(o),r.push(N3),n.push(h)):(i.number.push(o),r.push(G1),n.push(parseFloat(h))),++o,NT)).split(NT);return{values:n,split:u,indexes:i,types:r}}function Z1(t){return Gu(t).values}function Q1(t){const{split:e,types:n}=Gu(t),i=e.length;return r=>{let o="";for(let a=0;a<i;a++)if(o+=e[a],r[a]!==void 0){const u=n[a];u===G1?o+=fu(r[a]):u===K1?o+=zt.transform(r[a]):o+=r[a]}return o}}const O3=t=>typeof t=="number"?0:t;function V3(t){const e=Z1(t);return Q1(t)(e.map(O3))}const ls={test:L3,parse:Z1,createTransformer:Q1,getAnimatableNone:V3},F3=new Set(["brightness","contrast","saturate","opacity"]);function U3(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(iv)||[];if(!i)return t;const r=n.replace(i,"");let o=F3.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const B3=/\b([a-z-]*)\(.*?\)/gu,Sg={...ls,getAnimatableNone:t=>{const e=t.match(B3);return e?e.map(U3).join(" "):t}},z3={...jy,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:Sg,WebkitFilter:Sg},sv=t=>z3[t];function Y1(t,e){let n=sv(t);return n!==Sg&&(n=ls),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const j3=new Set(["auto","none","0"]);function H3(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!j3.has(o)&&Gu(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=Y1(n,r)}const DT=t=>t===Xa||t===ue,MT=(t,e)=>parseFloat(t.split(", ")[e]),OT=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return MT(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?MT(o[1],t):0}},W3=new Set(["x","y","z"]),q3=Ya.filter(t=>!W3.has(t));function $3(t){const e=[];return q3.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Ba={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:OT(4,13),y:OT(5,14)};Ba.translateX=Ba.x;Ba.translateY=Ba.y;const Gs=new Set;let Ig=!1,xg=!1;function X1(){if(xg){const t=Array.from(Gs).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=$3(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,a])=>{var u;(u=i.getValue(o))===null||u===void 0||u.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}xg=!1,Ig=!1,Gs.forEach(t=>t.complete()),Gs.clear()}function J1(){Gs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(xg=!0)})}function G3(){J1(),X1()}class ov{constructor(e,n,i,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Gs.add(this),Ig||(Ig=!0,$e.read(J1),$e.resolveKeyframes(X1))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const h=i.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Gs.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Gs.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const eC=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),K3=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Z3(t){const e=K3.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function tC(t,e,n=1){const[i,r]=Z3(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return eC(a)?parseFloat(a):a}return zy(r)?tC(r,e,n+1):r}const nC=t=>e=>e.test(t),Q3={test:t=>t==="auto",parse:t=>t},iC=[Xa,ue,ki,xr,UU,FU,Q3],VT=t=>iC.find(nC(t));class rC extends ov{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),zy(f))){const m=tC(f,n.current);m!==void 0&&(e[h]=m),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!D1.has(i)||e.length!==2)return;const[r,o]=e,a=VT(r),u=VT(o);if(a!==u)if(DT(a)&&DT(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)x3(e[r])&&i.push(r);i.length&&H3(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ba[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Ba[i](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,f])=>{n.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const FT=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ls.test(t)||t==="0")&&!t.startsWith("url("));function Y3(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function X3(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=FT(r,e),u=FT(o,e);return!a||!u?!1:Y3(t)||(n==="spring"||Zy(n))&&i}const J3=t=>t!==null;function Vf(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(J3),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const eB=40;class sC{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=bi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>eB?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&G3(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=bi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:a,onComplete:u,onUpdate:h,isGenerator:f}=this.options;if(!f&&!X3(e,i,r,o))if(a)this.options.duration=0;else{h&&h(Vf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ze=(t,e,n)=>t+(e-t)*n;function Bp(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function tB({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=Bp(h,u,t+1/3),o=Bp(h,u,t),a=Bp(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function Wd(t,e){return n=>n>0?e:t}const zp=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},nB=[Pg,js,ca],iB=t=>nB.find(e=>e.test(t));function UT(t){const e=iB(t);if(!e)return!1;let n=e.parse(t);return e===ca&&(n=tB(n)),n}const BT=(t,e)=>{const n=UT(t),i=UT(e);if(!n||!i)return Wd(t,e);const r={...n};return o=>(r.red=zp(n.red,i.red,o),r.green=zp(n.green,i.green,o),r.blue=zp(n.blue,i.blue,o),r.alpha=Ze(n.alpha,i.alpha,o),js.transform(r))},rB=(t,e)=>n=>e(t(n)),gc=(...t)=>t.reduce(rB),Ag=new Set(["none","hidden"]);function sB(t,e){return Ag.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function oB(t,e){return n=>Ze(t,e,n)}function av(t){return typeof t=="number"?oB:typeof t=="string"?zy(t)?Wd:zt.test(t)?BT:uB:Array.isArray(t)?oC:typeof t=="object"?zt.test(t)?BT:aB:Wd}function oC(t,e){const n=[...t],i=n.length,r=t.map((o,a)=>av(o)(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}}function aB(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=av(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function lB(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],u=t.indexes[a][r[a]],h=(n=t.values[u])!==null&&n!==void 0?n:0;i[o]=h,r[a]++}return i}const uB=(t,e)=>{const n=ls.createTransformer(e),i=Gu(t),r=Gu(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Ag.has(t)&&!r.values.length||Ag.has(e)&&!i.values.length?sB(t,e):gc(oC(lB(i,r),r.values),n):Wd(t,e)};function aC(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ze(t,e,n):av(t)(t,e)}const cB=5;function lC(t,e,n){const i=Math.max(e-cB,0);return M1(n-t(i),e-i)}const tt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},jp=.001;function hB({duration:t=tt.duration,bounce:e=tt.bounce,velocity:n=tt.velocity,mass:i=tt.mass}){let r,o,a=1-e;a=hr(tt.minDamping,tt.maxDamping,a),t=hr(tt.minDuration,tt.maxDuration,nr(t)),a<1?(r=f=>{const m=f*a,_=m*t,v=m-n,P=Cg(f,a),k=Math.exp(-_);return jp-v/P*k},o=f=>{const _=f*a*t,v=_*n+n,P=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-_),b=Cg(Math.pow(f,2),a);return(-r(f)+jp>0?-1:1)*((v-P)*k)/b}):(r=f=>{const m=Math.exp(-f*t),_=(f-n)*t+1;return-jp+m*_},o=f=>{const m=Math.exp(-f*t),_=(n-f)*(t*t);return m*_});const u=5/t,h=fB(r,o,u);if(t=tr(t),isNaN(h))return{stiffness:tt.stiffness,damping:tt.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const dB=12;function fB(t,e,n){let i=n;for(let r=1;r<dB;r++)i=i-t(i)/e(i);return i}function Cg(t,e){return t*Math.sqrt(1-e*e)}const pB=["duration","bounce"],mB=["stiffness","damping","mass"];function zT(t,e){return e.some(n=>t[n]!==void 0)}function gB(t){let e={velocity:tt.velocity,stiffness:tt.stiffness,damping:tt.damping,mass:tt.mass,isResolvedFromDuration:!1,...t};if(!zT(t,mB)&&zT(t,pB))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*hr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:tt.mass,stiffness:r,damping:o}}else{const n=hB(t);e={...e,...n,mass:tt.mass},e.isResolvedFromDuration=!0}return e}function uC(t=tt.visualDuration,e=tt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:m,duration:_,velocity:v,isResolvedFromDuration:P}=gB({...n,velocity:-nr(n.velocity||0)}),k=v||0,b=f/(2*Math.sqrt(h*m)),F=a-o,x=nr(Math.sqrt(h/m)),I=Math.abs(F)<5;i||(i=I?tt.restSpeed.granular:tt.restSpeed.default),r||(r=I?tt.restDelta.granular:tt.restDelta.default);let A;if(b<1){const q=Cg(x,b);A=K=>{const C=Math.exp(-b*x*K);return a-C*((k+b*x*F)/q*Math.sin(q*K)+F*Math.cos(q*K))}}else if(b===1)A=q=>a-Math.exp(-x*q)*(F+(k+x*F)*q);else{const q=x*Math.sqrt(b*b-1);A=K=>{const C=Math.exp(-b*x*K),E=Math.min(q*K,300);return a-C*((k+b*x*F)*Math.sinh(E)+q*F*Math.cosh(E))/q}}const B={calculatedDuration:P&&_||null,next:q=>{const K=A(q);if(P)u.done=q>=_;else{let C=0;b<1&&(C=q===0?tr(k):lC(A,q,K));const E=Math.abs(C)<=i,R=Math.abs(a-K)<=r;u.done=E&&R}return u.value=u.done?a:K,u},toString:()=>{const q=Math.min(A1(B),wg),K=C1(C=>B.next(q*C).value,q,30);return q+"ms "+K}};return B}function jT({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const _=t[0],v={done:!1,value:_},P=E=>u!==void 0&&E<u||h!==void 0&&E>h,k=E=>u===void 0?h:h===void 0||Math.abs(u-E)<Math.abs(h-E)?u:h;let b=n*e;const F=_+b,x=a===void 0?F:a(F);x!==F&&(b=x-_);const I=E=>-b*Math.exp(-E/i),A=E=>x+I(E),B=E=>{const R=I(E),N=A(E);v.done=Math.abs(R)<=f,v.value=v.done?x:N};let q,K;const C=E=>{P(v.value)&&(q=E,K=uC({keyframes:[v.value,k(v.value)],velocity:lC(A,E,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return C(0),{calculatedDuration:null,next:E=>{let R=!1;return!K&&q===void 0&&(R=!0,B(E),C(E)),q!==void 0&&E>=q?K.next(E-q):(!R&&B(E),v)}}}const _B=mc(.42,0,1,1),yB=mc(0,0,.58,1),cC=mc(.42,0,.58,1),vB=t=>Array.isArray(t)&&typeof t[0]!="number",wB={linear:wn,easeIn:_B,easeInOut:cC,easeOut:yB,circIn:nv,circInOut:W1,circOut:H1,backIn:tv,backInOut:z1,backOut:B1,anticipate:j1},HT=t=>{if(Qy(t)){a1(t.length===4);const[e,n,i,r]=t;return mc(e,n,i,r)}else if(typeof t=="string")return wB[t];return t};function TB(t,e,n){const i=[],r=n||aC,o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||wn:e;u=gc(h,u)}i.push(u)}return i}function EB(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(a1(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=TB(e,i,r),h=u.length,f=m=>{if(a&&m<t[0])return e[0];let _=0;if(h>1)for(;_<t.length-2&&!(m<t[_+1]);_++);const v=Fa(t[_],t[_+1],m);return u[_](v)};return n?m=>f(hr(t[0],t[o-1],m)):f}function PB(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Fa(0,e,i);t.push(Ze(n,1,r))}}function SB(t){const e=[0];return PB(e,t.length-1),e}function IB(t,e){return t.map(n=>n*e)}function xB(t,e){return t.map(()=>e||cC).splice(0,t.length-1)}function qd({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=vB(i)?i.map(HT):HT(i),o={done:!1,value:e[0]},a=IB(n&&n.length===e.length?n:SB(e),t),u=EB(a,e,{ease:Array.isArray(r)?r:xB(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}const AB=t=>{const e=({timestamp:n})=>t(n);return{start:()=>$e.update(e,!0),stop:()=>as(e),now:()=>bt.isProcessing?bt.timestamp:bi.now()}},CB={decay:jT,inertia:jT,tween:qd,keyframes:qd,spring:uC},RB=t=>t/100;class lv extends sC{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||ov,u=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new a(o,u,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,u=Zy(n)?n:CB[n]||qd;let h,f;u!==qd&&typeof e[0]!="number"&&(h=gc(RB,aC(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=A1(m));const{calculatedDuration:_}=m,v=_+r,P=v*(i+1)-r;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:_,resolvedDuration:v,totalDuration:P}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:f,totalDuration:m,resolvedDuration:_}=i;if(this.startTime===null)return o.next(0);const{delay:v,repeat:P,repeatType:k,repeatDelay:b,onUpdate:F}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const x=this.currentTime-v*(this.speed>=0?1:-1),I=this.speed>=0?x<0:x>m;this.currentTime=Math.max(x,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let A=this.currentTime,B=o;if(P){const E=Math.min(this.currentTime,m)/_;let R=Math.floor(E),N=E%1;!N&&E>=1&&(N=1),N===1&&R--,R=Math.min(R,P+1),!!(R%2)&&(k==="reverse"?(N=1-N,b&&(N-=b/_)):k==="mirror"&&(B=a)),A=hr(0,1,N)*_}const q=I?{done:!1,value:h[0]}:B.next(A);u&&(q.value=u(q.value));let{done:K}=q;!I&&f!==null&&(K=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return C&&r!==void 0&&(q.value=Vf(h,this.options,r)),F&&F(q.value),C&&this.finish(),q}get duration(){const{resolved:e}=this;return e?nr(e.calculatedDuration):0}get time(){return nr(this.currentTime)}set time(e){e=tr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=nr(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=AB,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const kB=new Set(["opacity","clipPath","filter","transform"]);function bB(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:u="easeInOut",times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=k1(u,r);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const LB=Dy(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),$d=10,NB=2e4;function DB(t){return Zy(t.type)||t.type==="spring"||!R1(t.ease)}function MB(t,e){const n=new lv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<NB;)i=n.sample(o),r.push(i.value),o+=$d;return{times:void 0,keyframes:r,duration:o-$d,ease:"linear"}}const hC={anticipate:j1,backInOut:z1,circInOut:W1};function OB(t){return t in hC}class WT extends sC{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new rC(o,(a,u)=>this.onKeyframesResolved(a,u),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:a,motionValue:u,name:h,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&Hd()&&OB(o)&&(o=hC[o]),DB(this.options)){const{onComplete:_,onUpdate:v,motionValue:P,element:k,...b}=this.options,F=MB(e,b);e=F.keyframes,e.length===1&&(e[1]=e[0]),i=F.duration,r=F.times,o=F.ease,a="keyframes"}const m=bB(u.owner.current,h,e,{...this.options,duration:i,times:r,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(CT(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:_}=this.options;u.set(Vf(e,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return nr(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return nr(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=tr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return wn;const{animation:i}=n;CT(i,e)}return wn}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:_,element:v,...P}=this.options,k=new lv({...P,keyframes:i,duration:r,type:o,ease:a,times:u,isGenerator:!0}),b=tr(this.time);f.setWithVelocity(k.sample(b-$d).value,k.sample(b).value,$d)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=n.owner.getProps();return LB()&&i&&kB.has(i)&&!h&&!f&&!r&&o!=="mirror"&&a!==0&&u!=="inertia"}}const VB={type:"spring",stiffness:500,damping:25,restSpeed:10},FB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),UB={type:"keyframes",duration:.8},BB={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},zB=(t,{keyframes:e})=>e.length>2?UB:go.has(t)?t.startsWith("scale")?FB(e[1]):VB:BB;function jB({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}const uv=(t,e,n,i={},r,o)=>a=>{const u=Ky(i,t)||{},h=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-tr(h);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:r};jB(u)||(m={...m,...zB(t,m)}),m.duration&&(m.duration=tr(m.duration)),m.repeatDelay&&(m.repeatDelay=tr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let _=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(_=!0)),_&&!o&&e.get()!==void 0){const v=Vf(m.keyframes,u);if(v!==void 0)return $e.update(()=>{m.onUpdate(v),m.onComplete()}),new a3([])}return!o&&WT.supports(m)?new WT(m):new lv(m)};function HB({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function dC(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...h}=e;i&&(a=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const _ in h){const v=t.getValue(_,(o=t.latestValues[_])!==null&&o!==void 0?o:null),P=h[_];if(P===void 0||m&&HB(m,_))continue;const k={delay:n,...Ky(a||{},_)};let b=!1;if(window.MotionHandoffAnimation){const x=O1(t);if(x){const I=window.MotionHandoffAnimation(x,_,$e);I!==null&&(k.startTime=I,b=!0)}}Eg(t,_),v.start(uv(_,v,P,t.shouldReduceMotion&&D1.has(_)?{type:!1}:k,t,b));const F=v.animation;F&&f.push(F)}return u&&Promise.all(f).then(()=>{$e.update(()=>{u&&T3(t,u)})}),f}function Rg(t,e,n={}){var i;const r=Of(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(dC(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:_,staggerDirection:v}=o;return WB(t,e,m+f,_,v,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,m]=h==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(n.delay)])}function WB(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(qB).forEach((f,m)=>{f.notify("AnimationStart",e),a.push(Rg(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function qB(t,e){return t.sortNodePosition(e)}function $B(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>Rg(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=Rg(t,e,n);else{const r=typeof e=="function"?Of(t,e,n.custom):e;i=Promise.all(dC(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const GB=Oy.length;function fC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<GB;n++){const i=Oy[n],r=t.props[i];(Wu(r)||r===!1)&&(e[i]=r)}return e}const KB=[...My].reverse(),ZB=My.length;function QB(t){return e=>Promise.all(e.map(({animation:n,options:i})=>$B(t,n,i)))}function YB(t){let e=QB(t),n=qT(),i=!0;const r=h=>(f,m)=>{var _;const v=Of(t,m,h==="exit"?(_=t.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(v){const{transition:P,transitionEnd:k,...b}=v;f={...f,...b,...k}}return f};function o(h){e=h(t)}function a(h){const{props:f}=t,m=fC(t.parent)||{},_=[],v=new Set;let P={},k=1/0;for(let F=0;F<ZB;F++){const x=KB[F],I=n[x],A=f[x]!==void 0?f[x]:m[x],B=Wu(A),q=x===h?I.isActive:null;q===!1&&(k=F);let K=A===m[x]&&A!==f[x]&&B;if(K&&i&&t.manuallyAnimateOnMount&&(K=!1),I.protectedKeys={...P},!I.isActive&&q===null||!A&&!I.prevProp||Df(A)||typeof A=="boolean")continue;const C=XB(I.prevProp,A);let E=C||x===h&&I.isActive&&!K&&B||F>k&&B,R=!1;const N=Array.isArray(A)?A:[A];let O=N.reduce(r(x),{});q===!1&&(O={});const{prevResolvedValues:U={}}=I,D={...U,...O},Ne=Ue=>{E=!0,v.has(Ue)&&(R=!0,v.delete(Ue)),I.needsAnimating[Ue]=!0;const $=t.getValue(Ue);$&&($.liveStyle=!1)};for(const Ue in D){const $=O[Ue],le=U[Ue];if(P.hasOwnProperty(Ue))continue;let J=!1;vg($)&&vg(le)?J=!x1($,le):J=$!==le,J?$!=null?Ne(Ue):v.add(Ue):$!==void 0&&v.has(Ue)?Ne(Ue):I.protectedKeys[Ue]=!0}I.prevProp=A,I.prevResolvedValues=O,I.isActive&&(P={...P,...O}),i&&t.blockInitialAnimation&&(E=!1),E&&(!(K&&C)||R)&&_.push(...N.map(Ue=>({animation:Ue,options:{type:x}})))}if(v.size){const F={};v.forEach(x=>{const I=t.getBaseTarget(x),A=t.getValue(x);A&&(A.liveStyle=!0),F[x]=I??null}),_.push({animation:F})}let b=!!_.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(b=!1),i=!1,b?e(_):Promise.resolve()}function u(h,f){var m;if(n[h].isActive===f)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(v=>{var P;return(P=v.animationState)===null||P===void 0?void 0:P.setActive(h,f)}),n[h].isActive=f;const _=a(h);for(const v in n)n[v].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=qT(),i=!0}}}function XB(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!x1(e,t):!1}function Ls(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function qT(){return{animate:Ls(!0),whileInView:Ls(),whileHover:Ls(),whileTap:Ls(),whileDrag:Ls(),whileFocus:Ls(),exit:Ls()}}class ms{constructor(e){this.isMounted=!1,this.node=e}update(){}}class JB extends ms{constructor(e){super(e),e.animationState||(e.animationState=YB(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Df(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let ez=0;class tz extends ms{constructor(){super(...arguments),this.id=ez++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const nz={animation:{Feature:JB},exit:{Feature:tz}};function Ku(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function _c(t){return{point:{x:t.pageX,y:t.pageY}}}const iz=t=>e=>Yy(e)&&t(e,_c(e));function pu(t,e,n,i){return Ku(t,e,iz(n),i)}const $T=(t,e)=>Math.abs(t-e);function rz(t,e){const n=$T(t.x,e.x),i=$T(t.y,e.y);return Math.sqrt(n**2+i**2)}class pC{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=Wp(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,P=rz(_.offset,{x:0,y:0})>=3;if(!v&&!P)return;const{point:k}=_,{timestamp:b}=bt;this.history.push({...k,timestamp:b});const{onStart:F,onMove:x}=this.handlers;v||(F&&F(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),x&&x(this.lastMoveEvent,_)},this.handlePointerMove=(_,v)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=Hp(v,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(_,v)=>{this.end();const{onEnd:P,onSessionEnd:k,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=Wp(_.type==="pointercancel"?this.lastMoveEventInfo:Hp(v,this.transformPagePoint),this.history);this.startEvent&&P&&P(_,F),k&&k(_,F)},!Yy(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=_c(e),u=Hp(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=bt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,Wp(u,this.history)),this.removeListeners=gc(pu(this.contextWindow,"pointermove",this.handlePointerMove),pu(this.contextWindow,"pointerup",this.handlePointerUp),pu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),as(this.updatePoint)}}function Hp(t,e){return e?{point:e(t.point)}:t}function GT(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Wp({point:t},e){return{point:t,delta:GT(t,mC(e)),offset:GT(t,sz(e)),velocity:oz(e,.1)}}function sz(t){return t[0]}function mC(t){return t[t.length-1]}function oz(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=mC(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>tr(e)));)n--;if(!i)return{x:0,y:0};const o=nr(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const gC=1e-4,az=1-gC,lz=1+gC,_C=.01,uz=0-_C,cz=0+_C;function En(t){return t.max-t.min}function hz(t,e,n){return Math.abs(t-e)<=n}function KT(t,e,n,i=.5){t.origin=i,t.originPoint=Ze(e.min,e.max,t.origin),t.scale=En(n)/En(e),t.translate=Ze(n.min,n.max,t.origin)-t.originPoint,(t.scale>=az&&t.scale<=lz||isNaN(t.scale))&&(t.scale=1),(t.translate>=uz&&t.translate<=cz||isNaN(t.translate))&&(t.translate=0)}function mu(t,e,n,i){KT(t.x,e.x,n.x,i?i.originX:void 0),KT(t.y,e.y,n.y,i?i.originY:void 0)}function ZT(t,e,n){t.min=n.min+e.min,t.max=t.min+En(e)}function dz(t,e,n){ZT(t.x,e.x,n.x),ZT(t.y,e.y,n.y)}function QT(t,e,n){t.min=e.min-n.min,t.max=t.min+En(e)}function gu(t,e,n){QT(t.x,e.x,n.x),QT(t.y,e.y,n.y)}function fz(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Ze(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Ze(n,t,i.max):Math.min(t,n)),t}function YT(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function pz(t,{top:e,left:n,bottom:i,right:r}){return{x:YT(t.x,n,r),y:YT(t.y,e,i)}}function XT(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function mz(t,e){return{x:XT(t.x,e.x),y:XT(t.y,e.y)}}function gz(t,e){let n=.5;const i=En(t),r=En(e);return r>i?n=Fa(e.min,e.max-i,t.min):i>r&&(n=Fa(t.min,t.max-r,e.min)),hr(0,1,n)}function _z(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const kg=.35;function yz(t=kg){return t===!1?t=0:t===!0&&(t=kg),{x:JT(t,"left","right"),y:JT(t,"top","bottom")}}function JT(t,e,n){return{min:eE(t,e),max:eE(t,n)}}function eE(t,e){return typeof t=="number"?t:t[e]||0}const tE=()=>({translate:0,scale:1,origin:0,originPoint:0}),ha=()=>({x:tE(),y:tE()}),nE=()=>({min:0,max:0}),ot=()=>({x:nE(),y:nE()});function Mn(t){return[t("x"),t("y")]}function yC({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function vz({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function wz(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function qp(t){return t===void 0||t===1}function bg({scale:t,scaleX:e,scaleY:n}){return!qp(t)||!qp(e)||!qp(n)}function Os(t){return bg(t)||vC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vC(t){return iE(t.x)||iE(t.y)}function iE(t){return t&&t!=="0%"}function Gd(t,e,n){const i=t-n,r=e*i;return n+r}function rE(t,e,n,i,r){return r!==void 0&&(t=Gd(t,r,i)),Gd(t,n,i)+e}function Lg(t,e=0,n=1,i,r){t.min=rE(t.min,e,n,i,r),t.max=rE(t.max,e,n,i,r)}function wC(t,{x:e,y:n}){Lg(t.x,e.translate,e.scale,e.originPoint),Lg(t.y,n.translate,n.scale,n.originPoint)}const sE=.999999999999,oE=1.0000000000001;function Tz(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&fa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,wC(t,a)),i&&Os(o.latestValues)&&fa(t,o.latestValues))}e.x<oE&&e.x>sE&&(e.x=1),e.y<oE&&e.y>sE&&(e.y=1)}function da(t,e){t.min=t.min+e,t.max=t.max+e}function aE(t,e,n,i,r=.5){const o=Ze(t.min,t.max,r);Lg(t,e,n,o,i)}function fa(t,e){aE(t.x,e.x,e.scaleX,e.scale,e.originX),aE(t.y,e.y,e.scaleY,e.scale,e.originY)}function TC(t,e){return yC(wz(t.getBoundingClientRect(),e))}function Ez(t,e,n){const i=TC(t,n),{scroll:r}=e;return r&&(da(i.x,r.offset.x),da(i.y,r.offset.y)),i}const EC=({current:t})=>t?t.ownerDocument.defaultView:null,Pz=new WeakMap;class Sz{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ot(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(_c(m).point)},o=(m,_)=>{const{drag:v,dragPropagation:P,onDragStart:k}=this.getProps();if(v&&!P&&(this.openDragLock&&this.openDragLock(),this.openDragLock=g3(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Mn(F=>{let x=this.getAxisMotionValue(F).get()||0;if(ki.test(x)){const{projection:I}=this.visualElement;if(I&&I.layout){const A=I.layout.layoutBox[F];A&&(x=En(A)*(parseFloat(x)/100))}}this.originPoint[F]=x}),k&&$e.postRender(()=>k(m,_)),Eg(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,_)=>{const{dragPropagation:v,dragDirectionLock:P,onDirectionLock:k,onDrag:b}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:F}=_;if(P&&this.currentDirection===null){this.currentDirection=Iz(F),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",_.point,F),this.updateAxis("y",_.point,F),this.visualElement.render(),b&&b(m,_)},u=(m,_)=>this.stop(m,_),h=()=>Mn(m=>{var _;return this.getAnimationState(m)==="paused"&&((_=this.getAxisMotionValue(m).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new pC(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:EC(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&$e.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Ih(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=fz(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&ua(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=pz(r.layoutBox,n):this.constraints=!1,this.elastic=yz(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Mn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=_z(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ua(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=Ez(i,r.root,this.visualElement.getTransformPagePoint());let a=mz(r.layout.layoutBox,o);if(n){const u=n(vz(a));this.hasMutatedConstraints=!!u,u&&(a=yC(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Mn(m=>{if(!Ih(m,n,this.currentDirection))return;let _=h&&h[m]||{};a&&(_={min:0,max:0});const v=r?200:1e6,P=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:P,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Eg(this.visualElement,e),i.start(uv(e,i,0,n,this.visualElement,!1))}stopAnimation(){Mn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Mn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Mn(n=>{const{drag:i}=this.getProps();if(!Ih(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-Ze(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ua(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Mn(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const h=u.get();r[a]=gz({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Mn(a=>{if(!Ih(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(Ze(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;Pz.set(this.visualElement,this);const e=this.visualElement.current,n=pu(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();ua(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),$e.read(i);const a=Ku(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Mn(m=>{const _=this.getAxisMotionValue(m);_&&(this.originPoint[m]+=h[m].translate,_.set(_.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=kg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Ih(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Iz(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class xz extends ms{constructor(e){super(e),this.removeGroupControls=wn,this.removeListeners=wn,this.controls=new Sz(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const lE=t=>(e,n)=>{t&&$e.postRender(()=>t(e,n))};class Az extends ms{constructor(){super(...arguments),this.removePointerDownListener=wn}onPointerDown(e){this.session=new pC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:EC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:lE(e),onStart:lE(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&$e.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=pu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Qh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function uE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Vl={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=uE(t,e.target.x),i=uE(t,e.target.y);return`${n}% ${i}%`}},Cz={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ls.parse(t);if(r.length>5)return i;const o=ls.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=Ze(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class Rz extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;ZU(kz),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Qh.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||$e.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Fy.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function PC(t){const[e,n]=cU(),i=Y.useContext(s1);return V.jsx(Rz,{...t,layoutGroup:i,switchLayoutGroup:Y.useContext(f1),isPresent:e,safeToRemove:n})}const kz={borderRadius:{...Vl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Vl,borderTopRightRadius:Vl,borderBottomLeftRadius:Vl,borderBottomRightRadius:Vl,boxShadow:Cz};function bz(t,e,n){const i=qt(t)?t:$u(t);return i.start(uv("",i,e,n)),i.animation}function Lz(t){return t instanceof SVGElement&&t.tagName!=="svg"}const Nz=(t,e)=>t.depth-e.depth;class Dz{constructor(){this.children=[],this.isDirty=!1}add(e){Xy(this.children,e),this.isDirty=!0}remove(e){Jy(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Nz),this.isDirty=!1,this.children.forEach(e)}}function Mz(t,e){const n=bi.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(as(i),t(o-e))};return $e.read(i,!0),()=>as(i)}const SC=["TopLeft","TopRight","BottomLeft","BottomRight"],Oz=SC.length,cE=t=>typeof t=="string"?parseFloat(t):t,hE=t=>typeof t=="number"||ue.test(t);function Vz(t,e,n,i,r,o){r?(t.opacity=Ze(0,n.opacity!==void 0?n.opacity:1,Fz(i)),t.opacityExit=Ze(e.opacity!==void 0?e.opacity:1,0,Uz(i))):o&&(t.opacity=Ze(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<Oz;a++){const u=`border${SC[a]}Radius`;let h=dE(e,u),f=dE(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||hE(h)===hE(f)?(t[u]=Math.max(Ze(cE(h),cE(f),i),0),(ki.test(f)||ki.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Ze(e.rotate||0,n.rotate||0,i))}function dE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const Fz=IC(0,.5,H1),Uz=IC(.5,.95,wn);function IC(t,e,n){return i=>i<t?0:i>e?1:n(Fa(t,e,i))}function fE(t,e){t.min=e.min,t.max=e.max}function Dn(t,e){fE(t.x,e.x),fE(t.y,e.y)}function pE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function mE(t,e,n,i,r){return t-=e,t=Gd(t,1/n,i),r!==void 0&&(t=Gd(t,1/r,i)),t}function Bz(t,e=0,n=1,i=.5,r,o=t,a=t){if(ki.test(e)&&(e=parseFloat(e),e=Ze(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Ze(o.min,o.max,i);t===o&&(u-=e),t.min=mE(t.min,e,n,u,r),t.max=mE(t.max,e,n,u,r)}function gE(t,e,[n,i,r],o,a){Bz(t,e[n],e[i],e[r],e.scale,o,a)}const zz=["x","scaleX","originX"],jz=["y","scaleY","originY"];function _E(t,e,n,i){gE(t.x,e,zz,n?n.x:void 0,i?i.x:void 0),gE(t.y,e,jz,n?n.y:void 0,i?i.y:void 0)}function yE(t){return t.translate===0&&t.scale===1}function xC(t){return yE(t.x)&&yE(t.y)}function vE(t,e){return t.min===e.min&&t.max===e.max}function Hz(t,e){return vE(t.x,e.x)&&vE(t.y,e.y)}function wE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function AC(t,e){return wE(t.x,e.x)&&wE(t.y,e.y)}function TE(t){return En(t.x)/En(t.y)}function EE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class Wz{constructor(){this.members=[]}add(e){Xy(this.members,e),e.scheduleRender()}remove(e){if(Jy(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function qz(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:_,rotateY:v,skewX:P,skewY:k}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),_&&(i+=`rotateX(${_}deg) `),v&&(i+=`rotateY(${v}deg) `),P&&(i+=`skewX(${P}deg) `),k&&(i+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(i+=`scale(${u}, ${h})`),i||"none"}const Vs={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Ql=typeof window<"u"&&window.MotionDebug!==void 0,$p=["","X","Y","Z"],$z={visibility:"hidden"},PE=1e3;let Gz=0;function Gp(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function CC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=O1(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$e,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&CC(i)}function RC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=Gz++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ql&&(Vs.totalNodes=Vs.resolvedTargetDeltas=Vs.recalculatedProjection=0),this.nodes.forEach(Qz),this.nodes.forEach(t6),this.nodes.forEach(n6),this.nodes.forEach(Yz),Ql&&window.MotionDebug.record(Vs)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new Dz)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new ev),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Lz(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let _;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=Mz(v,250),Qh.hasAnimatedSinceResize&&(Qh.hasAnimatedSinceResize=!1,this.nodes.forEach(IE))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:v,hasRelativeTargetChanged:P,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||a6,{onLayoutAnimationStart:F,onLayoutAnimationComplete:x}=m.getProps(),I=!this.targetLayout||!AC(this.targetLayout,k)||P,A=!v&&P;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||A||v&&(I||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,A);const B={...Ky(b,"layout"),onPlay:F,onComplete:x};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||IE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,as(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(i6),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&CC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const _=this.path[m];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(SE);return}this.isUpdating||this.nodes.forEach(Jz),this.isUpdating=!1,this.nodes.forEach(e6),this.nodes.forEach(Kz),this.nodes.forEach(Zz),this.clearAllSnapshots();const u=bi.now();bt.delta=hr(0,1e3/60,u-bt.timestamp),bt.timestamp=u,bt.isProcessing=!0,Vp.update.process(bt),Vp.preRender.process(bt),Vp.render.process(bt),bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Fy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Xz),this.sharedNodes.forEach(r6)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ot(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!xC(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||Os(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),l6(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return ot();const h=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(u6))){const{scroll:m}=this.root;m&&(da(h.x,m.offset.x),da(h.y,m.offset.y))}return h}removeElementScroll(a){var u;const h=ot();if(Dn(h,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return h;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:_,options:v}=m;m!==this.root&&_&&v.layoutScroll&&(_.wasRoot&&Dn(h,a),da(h.x,_.offset.x),da(h.y,_.offset.y))}return h}applyTransform(a,u=!1){const h=ot();Dn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&fa(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),Os(m.latestValues)&&fa(h,m.latestValues)}return Os(this.latestValues)&&fa(h,this.latestValues),h}removeTransform(a){const u=ot();Dn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!Os(f.latestValues))continue;bg(f.latestValues)&&f.updateSnapshot();const m=ot(),_=f.measurePageBox();Dn(m,_),_E(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return Os(this.latestValues)&&_E(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:v}=this.options;if(!(!this.layout||!(_||v))){if(this.resolvedRelativeTargetAt=bt.timestamp,!this.targetDelta&&!this.relativeTarget){const P=this.getClosestProjectingParent();P&&P.layout&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),gu(this.relativeTargetOrigin,this.layout.layoutBox,P.layout.layoutBox),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=ot(),this.targetWithTransforms=ot()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),dz(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Dn(this.target,this.layout.layoutBox),wC(this.target,this.targetDelta)):Dn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const P=this.getClosestProjectingParent();P&&!!P.resumingFrom==!!this.resumingFrom&&!P.options.layoutScroll&&P.target&&this.animationProgress!==1?(this.relativeParent=P,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ot(),this.relativeTargetOrigin=ot(),gu(this.relativeTargetOrigin,this.target,P.target),Dn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ql&&Vs.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||bg(this.parent.latestValues)||vC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===bt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||_))return;Dn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,P=this.treeScale.y;Tz(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=ot());const{target:k}=u;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(pE(this.prevProjectionDelta.x,this.projectionDelta.x),pE(this.prevProjectionDelta.y,this.projectionDelta.y)),mu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==P||!EE(this.projectionDelta.x,this.prevProjectionDelta.x)||!EE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),Ql&&Vs.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ha(),this.projectionDelta=ha(),this.projectionDeltaWithTransform=ha()}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},_=ha();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=ot(),P=h?h.source:void 0,k=this.layout?this.layout.source:void 0,b=P!==k,F=this.getStack(),x=!F||F.members.length<=1,I=!!(b&&!x&&this.options.crossfade===!0&&!this.path.some(o6));this.animationProgress=0;let A;this.mixTargetDelta=B=>{const q=B/1e3;xE(_.x,a.x,q),xE(_.y,a.y,q),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(gu(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),s6(this.relativeTarget,this.relativeTargetOrigin,v,q),A&&Hz(this.relativeTarget,A)&&(this.isProjectionDirty=!1),A||(A=ot()),Dn(A,this.relativeTarget)),b&&(this.animationValues=m,Vz(m,f,this.latestValues,q,I,x)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(as(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{Qh.hasAnimatedSinceResize=!0,this.currentAnimation=bz(0,PE,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(PE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&kC(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||ot();const _=En(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+_;const v=En(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}Dn(u,h),fa(u,m),mu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new Wz),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&Gp("z",a,f,this.animationValues);for(let m=0;m<$p.length;m++)Gp(`rotate${$p[m]}`,a,f,this.animationValues),Gp(`skew${$p[m]}`,a,f,this.animationValues);a.render();for(const m in f)a.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return $z;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=Kh(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Kh(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Os(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=_.animationValues||_.latestValues;this.applyTransformsToTarget(),f.transform=qz(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:P,y:k}=this.projectionDelta;f.transformOrigin=`${P.origin*100}% ${k.origin*100}% 0`,_.animationValues?f.opacity=_===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=_===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in jd){if(v[b]===void 0)continue;const{correct:F,applyTo:x}=jd[b],I=f.transform==="none"?v[b]:F(v[b],_);if(x){const A=x.length;for(let B=0;B<A;B++)f[x[B]]=I}else f[b]=I}return this.options.layoutId&&(f.pointerEvents=_===this?Kh(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(SE),this.root.sharedNodes.clear()}}}function Kz(t){t.updateLayout()}function Zz(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Mn(_=>{const v=a?n.measuredBox[_]:n.layoutBox[_],P=En(v);v.min=i[_].min,v.max=v.min+P}):kC(o,n.layoutBox,i)&&Mn(_=>{const v=a?n.measuredBox[_]:n.layoutBox[_],P=En(i[_]);v.max=v.min+P,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+P)});const u=ha();mu(u,i,n.layoutBox);const h=ha();a?mu(h,t.applyTransform(r,!0),n.measuredBox):mu(h,i,n.layoutBox);const f=!xC(u);let m=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:v,layout:P}=_;if(v&&P){const k=ot();gu(k,n.layoutBox,v.layoutBox);const b=ot();gu(b,i,P.layoutBox),AC(k,b)||(m=!0),_.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=k,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function Qz(t){Ql&&Vs.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function Yz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function Xz(t){t.clearSnapshot()}function SE(t){t.clearMeasurements()}function Jz(t){t.isLayoutDirty=!1}function e6(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function IE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function t6(t){t.resolveTargetDelta()}function n6(t){t.calcProjection()}function i6(t){t.resetSkewAndRotation()}function r6(t){t.removeLeadSnapshot()}function xE(t,e,n){t.translate=Ze(e.translate,0,n),t.scale=Ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function AE(t,e,n,i){t.min=Ze(e.min,n.min,i),t.max=Ze(e.max,n.max,i)}function s6(t,e,n,i){AE(t.x,e.x,n.x,i),AE(t.y,e.y,n.y,i)}function o6(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const a6={duration:.45,ease:[.4,0,.1,1]},CE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),RE=CE("applewebkit/")&&!CE("chrome/")?Math.round:wn;function kE(t){t.min=RE(t.min),t.max=RE(t.max)}function l6(t){kE(t.x),kE(t.y)}function kC(t,e,n){return t==="position"||t==="preserve-aspect"&&!hz(TE(e),TE(n),.2)}function u6(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const c6=RC({attachResizeListener:(t,e)=>Ku(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Kp={current:void 0},bC=RC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Kp.current){const t=new c6({});t.mount(window),t.setOptions({layoutScroll:!0}),Kp.current=t}return Kp.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),h6={pan:{Feature:Az},drag:{Feature:xz,ProjectionNode:bC,MeasureLayout:PC}};function bE(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&$e.postRender(()=>o(e,_c(e)))}class d6 extends ms{mount(){const{current:e}=this.node;e&&(this.unmount=h3(e,n=>(bE(this.node,n,"Start"),i=>bE(this.node,i,"End"))))}unmount(){}}class f6 extends ms{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=gc(Ku(this.node.current,"focus",()=>this.onFocus()),Ku(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function LE(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&$e.postRender(()=>o(e,_c(e)))}class p6 extends ms{mount(){const{current:e}=this.node;e&&(this.unmount=m3(e,n=>(LE(this.node,n,"Start"),(i,{success:r})=>LE(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ng=new WeakMap,Zp=new WeakMap,m6=t=>{const e=Ng.get(t.target);e&&e(t)},g6=t=>{t.forEach(m6)};function _6({root:t,...e}){const n=t||document;Zp.has(n)||Zp.set(n,{});const i=Zp.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(g6,{root:t,...e})),i[r]}function y6(t,e,n){const i=_6(e);return Ng.set(t,n),i.observe(t),()=>{Ng.delete(t),i.unobserve(t)}}const v6={some:0,all:1};class w6 extends ms{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:v6[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:_}=this.node.getProps(),v=f?m:_;v&&v(h)};return y6(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(T6(e,n))&&this.startObserver()}unmount(){}}function T6({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const E6={inView:{Feature:w6},tap:{Feature:p6},focus:{Feature:f6},hover:{Feature:d6}},P6={layout:{ProjectionNode:bC,MeasureLayout:PC}},Dg={current:null},LC={current:!1};function S6(){if(LC.current=!0,!!Ny)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Dg.current=t.matches;t.addListener(e),e()}else Dg.current=!1}const I6=[...iC,zt,ls],x6=t=>I6.find(nC(t)),NE=new WeakMap;function A6(t,e,n){for(const i in e){const r=e[i],o=n[i];if(qt(r))t.addValue(i,r);else if(qt(o))t.addValue(i,$u(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,$u(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const DE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class C6{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ov,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const P=bi.now();this.renderScheduledAt<P&&(this.renderScheduledAt=P,$e.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:m}=a;this.onUpdate=m,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Mf(n),this.isVariantNode=h1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const P in v){const k=v[P];h[P]!==void 0&&qt(k)&&k.set(h[P],!1)}}mount(e){this.current=e,NE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),LC.current||S6(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){NE.delete(this.current),this.projection&&this.projection.unmount(),as(this.notifyUpdate),as(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=go.has(e),r=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&$e.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ua){const n=Ua[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ot()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<DE.length;i++){const r=DE[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=A6(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=$u(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(eC(r)||q1(r))?r=parseFloat(r):!x6(r)&&ls.test(n)&&(r=Y1(e,n)),this.setBaseTarget(e,qt(r)?r.get():r)),qt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=By(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!qt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ev),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NC extends C6{constructor(){super(...arguments),this.KeyframeResolver=rC}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function R6(t){return window.getComputedStyle(t)}class k6 extends NC{constructor(){super(...arguments),this.type="html",this.renderInstance=w1}readValueFromInstance(e,n){if(go.has(n)){const i=sv(n);return i&&i.default||0}else{const i=R6(e),r=(_1(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return TC(e,n)}build(e,n,i){Hy(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Gy(e,n,i)}}class b6 extends NC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ot}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(go.has(n)){const i=sv(n);return i&&i.default||0}return n=T1.has(n)?n:Vy(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return S1(e,n,i)}build(e,n,i){Wy(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){E1(e,n,i,r)}mount(e){this.isSVGTag=$y(e.tagName),super.mount(e)}}const L6=(t,e)=>Uy(t)?new b6(e):new k6(e,{allowProjection:t!==Y.Fragment}),N6=r3({...nz,...E6,...h6,...P6},L6),ME=vU(N6);function D6({onComplete:t}){return V.jsx(ME.div,{className:"fixed inset-0 bg-gray-100 flex items-center justify-center z-50",initial:{opacity:1},animate:{opacity:0},transition:{duration:.5,delay:2.5},onAnimationComplete:t,children:V.jsx(ME.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex flex-col items-center",children:V.jsx("img",{src:"/logo.jpg",alt:"AGSCiudadana Logo",className:"w-3/4 max-w-sm h-auto object-contain mb-4"})})})}function M6(){const[t,e]=Y.useState("home"),[n,i]=Y.useState(!0),[r,o]=Y.useState("login"),{user:a,loading:u}=Qa();return n?V.jsx(D6,{onComplete:()=>i(!1)}):u?null:a?V.jsxs(Qb,{activeTab:t,setActiveTab:e,children:[t==="home"&&V.jsx(eU,{}),t==="report"&&V.jsx(aU,{onCancel:()=>e("home"),onSuccess:()=>{alert("Reporte enviado con xito!"),e("home")}}),t==="profile"&&V.jsx(lU,{})]}):r==="login"?V.jsx(tU,{onSwitchToSignUp:()=>o("signup")}):V.jsx(nU,{onSwitchToLogin:()=>o("login")})}function O6(){return V.jsx(bF,{children:V.jsx(M6,{})})}Qp.createRoot(document.getElementById("root")).render(V.jsx(Yh.StrictMode,{children:V.jsx(O6,{})}));
