(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var ck=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dI={exports:{}},rf={},fI={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),hk=Symbol.for("react.portal"),dk=Symbol.for("react.fragment"),fk=Symbol.for("react.strict_mode"),pk=Symbol.for("react.profiler"),mk=Symbol.for("react.provider"),gk=Symbol.for("react.context"),_k=Symbol.for("react.forward_ref"),yk=Symbol.for("react.suspense"),vk=Symbol.for("react.memo"),wk=Symbol.for("react.lazy"),Xv=Symbol.iterator;function Tk(t){return t===null||typeof t!="object"?null:(t=Xv&&t[Xv]||t["@@iterator"],typeof t=="function"?t:null)}var pI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mI=Object.assign,gI={};function Za(t,e,n){this.props=t,this.context=e,this.refs=gI,this.updater=n||pI}Za.prototype.isReactComponent={};Za.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Za.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _I(){}_I.prototype=Za.prototype;function Xg(t,e,n){this.props=t,this.context=e,this.refs=gI,this.updater=n||pI}var Jg=Xg.prototype=new _I;Jg.constructor=Xg;mI(Jg,Za.prototype);Jg.isPureReactComponent=!0;var Jv=Array.isArray,yI=Object.prototype.hasOwnProperty,e_={current:null},vI={key:!0,ref:!0,__self:!0,__source:!0};function wI(t,e,n){var i,r={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)yI.call(e,i)&&!vI.hasOwnProperty(i)&&(r[i]=e[i]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var h=Array(u),f=0;f<u;f++)h[f]=arguments[f+2];r.children=h}if(t&&t.defaultProps)for(i in u=t.defaultProps,u)r[i]===void 0&&(r[i]=u[i]);return{$$typeof:ic,type:t,key:o,ref:a,props:r,_owner:e_.current}}function Ek(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function t_(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function Ik(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ew=/\/+/g;function cp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ik(""+t.key):e.toString(36)}function Nh(t,e,n,i,r){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ic:case hk:a=!0}}if(a)return a=t,r=r(a),t=i===""?"."+cp(a,0):i,Jv(r)?(n="",t!=null&&(n=t.replace(ew,"$&/")+"/"),Nh(r,e,n,"",function(f){return f})):r!=null&&(t_(r)&&(r=Ek(r,n+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(ew,"$&/")+"/")+t)),e.push(r)),1;if(a=0,i=i===""?".":i+":",Jv(t))for(var u=0;u<t.length;u++){o=t[u];var h=i+cp(o,u);a+=Nh(o,e,n,h,r)}else if(h=Tk(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=i+cp(o,u++),a+=Nh(o,e,n,h,r);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function sh(t,e,n){if(t==null)return t;var i=[],r=0;return Nh(t,i,"","",function(o){return e.call(n,o,r++)}),i}function Sk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var tn={current:null},Dh={transition:null},Pk={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:Dh,ReactCurrentOwner:e_};function TI(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:sh,forEach:function(t,e,n){sh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return sh(t,function(){e++}),e},toArray:function(t){return sh(t,function(e){return e})||[]},only:function(t){if(!t_(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Za;Te.Fragment=dk;Te.Profiler=pk;Te.PureComponent=Xg;Te.StrictMode=fk;Te.Suspense=yk;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Pk;Te.act=TI;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=mI({},t.props),r=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=e_.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)yI.call(e,h)&&!vI.hasOwnProperty(h)&&(i[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)i.children=n;else if(1<h){u=Array(h);for(var f=0;f<h;f++)u[f]=arguments[f+2];i.children=u}return{$$typeof:ic,type:t.type,key:r,ref:o,props:i,_owner:a}};Te.createContext=function(t){return t={$$typeof:gk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mk,_context:t},t.Consumer=t};Te.createElement=wI;Te.createFactory=function(t){var e=wI.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:_k,render:t}};Te.isValidElement=t_;Te.lazy=function(t){return{$$typeof:wk,_payload:{_status:-1,_result:t},_init:Sk}};Te.memo=function(t,e){return{$$typeof:vk,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=Dh.transition;Dh.transition={};try{t()}finally{Dh.transition=e}};Te.unstable_act=TI;Te.useCallback=function(t,e){return tn.current.useCallback(t,e)};Te.useContext=function(t){return tn.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return tn.current.useDeferredValue(t)};Te.useEffect=function(t,e){return tn.current.useEffect(t,e)};Te.useId=function(){return tn.current.useId()};Te.useImperativeHandle=function(t,e,n){return tn.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return tn.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return tn.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return tn.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return tn.current.useReducer(t,e,n)};Te.useRef=function(t){return tn.current.useRef(t)};Te.useState=function(t){return tn.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return tn.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return tn.current.useTransition()};Te.version="18.3.1";fI.exports=Te;var Y=fI.exports;const rd=hI(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ak=Y,xk=Symbol.for("react.element"),Ck=Symbol.for("react.fragment"),Rk=Object.prototype.hasOwnProperty,kk=Ak.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bk={key:!0,ref:!0,__self:!0,__source:!0};function EI(t,e,n){var i,r={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)Rk.call(e,i)&&!bk.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:xk,type:t,key:o,ref:a,props:r,_owner:kk.current}}rf.Fragment=Ck;rf.jsx=EI;rf.jsxs=EI;dI.exports=rf;var V=dI.exports,dm={},II={exports:{}},An={},SI={exports:{}},PI={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,le){var J=$.length;$.push(le);e:for(;0<J;){var fe=J-1>>>1,Ee=$[fe];if(0<r(Ee,le))$[fe]=le,$[J]=Ee,J=fe;else break e}}function n($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var le=$[0],J=$.pop();if(J!==le){$[0]=J;e:for(var fe=0,Ee=$.length,Je=Ee>>>1;fe<Je;){var Re=2*(fe+1)-1,Ie=$[Re],pe=Re+1,Tt=$[pe];if(0>r(Ie,J))pe<Ee&&0>r(Tt,Ie)?($[fe]=Tt,$[pe]=J,fe=pe):($[fe]=Ie,$[Re]=J,fe=Re);else if(pe<Ee&&0>r(Tt,J))$[fe]=Tt,$[pe]=J,fe=pe;else break e}}return le}function r($,le){var J=$.sortIndex-le.sortIndex;return J!==0?J:$.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],f=[],m=1,_=null,v=3,I=!1,k=!1,b=!1,F=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x($){for(var le=n(f);le!==null;){if(le.callback===null)i(f);else if(le.startTime<=$)i(f),le.sortIndex=le.expirationTime,e(h,le);else break;le=n(f)}}function B($){if(b=!1,x($),!k)if(n(h)!==null)k=!0,ct(q);else{var le=n(f);le!==null&&Ue(B,le.startTime-$)}}function q($,le){k=!1,b&&(b=!1,A(E),E=-1),I=!0;var J=v;try{for(x(le),_=n(h);_!==null&&(!(_.expirationTime>le)||$&&!O());){var fe=_.callback;if(typeof fe=="function"){_.callback=null,v=_.priorityLevel;var Ee=fe(_.expirationTime<=le);le=t.unstable_now(),typeof Ee=="function"?_.callback=Ee:_===n(h)&&i(h),x(le)}else i(h);_=n(h)}if(_!==null)var Je=!0;else{var Re=n(f);Re!==null&&Ue(B,Re.startTime-le),Je=!1}return Je}finally{_=null,v=J,I=!1}}var K=!1,C=null,E=-1,R=5,N=-1;function O(){return!(t.unstable_now()-N<R)}function U(){if(C!==null){var $=t.unstable_now();N=$;var le=!0;try{le=C(!0,$)}finally{le?D():(K=!1,C=null)}}else K=!1}var D;if(typeof P=="function")D=function(){P(U)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,Cn=Ne.port2;Ne.port1.onmessage=U,D=function(){Cn.postMessage(null)}}else D=function(){F(U,0)};function ct($){C=$,K||(K=!0,D())}function Ue($,le){E=F(function(){$(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){k||I||(k=!0,ct(q))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function($){switch(v){case 1:case 2:case 3:var le=3;break;default:le=v}var J=v;v=le;try{return $()}finally{v=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,le){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=v;v=$;try{return le()}finally{v=J}},t.unstable_scheduleCallback=function($,le,J){var fe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?fe+J:fe):J=fe,$){case 1:var Ee=-1;break;case 2:Ee=250;break;case 5:Ee=1073741823;break;case 4:Ee=1e4;break;default:Ee=5e3}return Ee=J+Ee,$={id:m++,callback:le,priorityLevel:$,startTime:J,expirationTime:Ee,sortIndex:-1},J>fe?($.sortIndex=J,e(f,$),n(h)===null&&$===n(f)&&(b?(A(E),E=-1):b=!0,Ue(B,J-fe))):($.sortIndex=Ee,e(h,$),k||I||(k=!0,ct(q))),$},t.unstable_shouldYield=O,t.unstable_wrapCallback=function($){var le=v;return function(){var J=v;v=le;try{return $.apply(this,arguments)}finally{v=J}}}})(PI);SI.exports=PI;var Lk=SI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nk=Y,Sn=Lk;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AI=new Set,Pu={};function fo(t,e){Na(t,e),Na(t+"Capture",e)}function Na(t,e){for(Pu[t]=e,t=0;t<e.length;t++)AI.add(e[t])}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fm=Object.prototype.hasOwnProperty,Dk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tw={},nw={};function Mk(t){return fm.call(nw,t)?!0:fm.call(tw,t)?!1:Dk.test(t)?nw[t]=!0:(tw[t]=!0,!1)}function Ok(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Vk(t,e,n,i){if(e===null||typeof e>"u"||Ok(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function nn(t,e,n,i,r,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var n_=/[\-:]([a-z])/g;function i_(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(n_,i_);Mt[e]=new nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(n_,i_);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(n_,i_);Mt[e]=new nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function r_(t,e,n,i){var r=Mt.hasOwnProperty(e)?Mt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Vk(e,n,r,i)&&(n=null),i||r===null?Mk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var gr=Nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oh=Symbol.for("react.element"),ia=Symbol.for("react.portal"),ra=Symbol.for("react.fragment"),s_=Symbol.for("react.strict_mode"),pm=Symbol.for("react.profiler"),xI=Symbol.for("react.provider"),CI=Symbol.for("react.context"),o_=Symbol.for("react.forward_ref"),mm=Symbol.for("react.suspense"),gm=Symbol.for("react.suspense_list"),a_=Symbol.for("react.memo"),br=Symbol.for("react.lazy"),RI=Symbol.for("react.offscreen"),iw=Symbol.iterator;function Ol(t){return t===null||typeof t!="object"?null:(t=iw&&t[iw]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,hp;function $l(t){if(hp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);hp=e&&e[1]||""}return`
`+hp+t}var dp=!1;function fp(t,e){if(!t||dp)return"";dp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(f){var i=f}Reflect.construct(t,[],e)}else{try{e.call()}catch(f){i=f}t.call(e.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var r=f.stack.split(`
`),o=i.stack.split(`
`),a=r.length-1,u=o.length-1;1<=a&&0<=u&&r[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(r[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||r[a]!==o[u]){var h=`
`+r[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{dp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$l(t):""}function Fk(t){switch(t.tag){case 5:return $l(t.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return t=fp(t.type,!1),t;case 11:return t=fp(t.type.render,!1),t;case 1:return t=fp(t.type,!0),t;default:return""}}function _m(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ra:return"Fragment";case ia:return"Portal";case pm:return"Profiler";case s_:return"StrictMode";case mm:return"Suspense";case gm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case CI:return(t.displayName||"Context")+".Consumer";case xI:return(t._context.displayName||"Context")+".Provider";case o_:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case a_:return e=t.displayName||null,e!==null?e:_m(t.type)||"Memo";case br:e=t._payload,t=t._init;try{return _m(t(e))}catch{}}return null}function Uk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _m(e);case 8:return e===s_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ts(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function kI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Bk(t){var e=kI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ah(t){t._valueTracker||(t._valueTracker=Bk(t))}function bI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=kI(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function sd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ym(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ts(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LI(t,e){e=e.checked,e!=null&&r_(t,"checked",e,!1)}function vm(t,e){LI(t,e);var n=ts(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wm(t,e.type,n):e.hasOwnProperty("defaultValue")&&wm(t,e.type,ts(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wm(t,e,n){(e!=="number"||sd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Gl=Array.isArray;function Ta(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ts(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Tm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ow(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(Gl(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ts(n)}}function NI(t,e){var n=ts(e.value),i=ts(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function aw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var lh,MI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(lh=lh||document.createElement("div"),lh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=lh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Au(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var su={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zk=["Webkit","ms","Moz","O"];Object.keys(su).forEach(function(t){zk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),su[e]=su[t]})});function OI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||su.hasOwnProperty(t)&&su[t]?(""+e).trim():e+"px"}function VI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=OI(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var jk=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Im(t,e){if(e){if(jk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pm=null;function l_(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Am=null,Ea=null,Ia=null;function lw(t){if(t=oc(t)){if(typeof Am!="function")throw Error(X(280));var e=t.stateNode;e&&(e=uf(e),Am(t.stateNode,t.type,e))}}function FI(t){Ea?Ia?Ia.push(t):Ia=[t]:Ea=t}function UI(){if(Ea){var t=Ea,e=Ia;if(Ia=Ea=null,lw(t),e)for(t=0;t<e.length;t++)lw(e[t])}}function BI(t,e){return t(e)}function zI(){}var pp=!1;function jI(t,e,n){if(pp)return t(e,n);pp=!0;try{return BI(t,e,n)}finally{pp=!1,(Ea!==null||Ia!==null)&&(zI(),UI())}}function xu(t,e){var n=t.stateNode;if(n===null)return null;var i=uf(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var xm=!1;if(ar)try{var Vl={};Object.defineProperty(Vl,"passive",{get:function(){xm=!0}}),window.addEventListener("test",Vl,Vl),window.removeEventListener("test",Vl,Vl)}catch{xm=!1}function Hk(t,e,n,i,r,o,a,u,h){var f=Array.prototype.slice.call(arguments,3);try{e.apply(n,f)}catch(m){this.onError(m)}}var ou=!1,od=null,ad=!1,Cm=null,Wk={onError:function(t){ou=!0,od=t}};function qk(t,e,n,i,r,o,a,u,h){ou=!1,od=null,Hk.apply(Wk,arguments)}function $k(t,e,n,i,r,o,a,u,h){if(qk.apply(this,arguments),ou){if(ou){var f=od;ou=!1,od=null}else throw Error(X(198));ad||(ad=!0,Cm=f)}}function po(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function HI(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function uw(t){if(po(t)!==t)throw Error(X(188))}function Gk(t){var e=t.alternate;if(!e){if(e=po(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var o=r.alternate;if(o===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return uw(r),t;if(o===i)return uw(r),e;o=o.sibling}throw Error(X(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,u=r.child;u;){if(u===n){a=!0,n=r,i=o;break}if(u===i){a=!0,i=r,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,i=r;break}if(u===i){a=!0,i=o,n=r;break}u=u.sibling}if(!a)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function WI(t){return t=Gk(t),t!==null?qI(t):null}function qI(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qI(t);if(e!==null)return e;t=t.sibling}return null}var $I=Sn.unstable_scheduleCallback,cw=Sn.unstable_cancelCallback,Kk=Sn.unstable_shouldYield,Zk=Sn.unstable_requestPaint,ut=Sn.unstable_now,Qk=Sn.unstable_getCurrentPriorityLevel,u_=Sn.unstable_ImmediatePriority,GI=Sn.unstable_UserBlockingPriority,ld=Sn.unstable_NormalPriority,Yk=Sn.unstable_LowPriority,KI=Sn.unstable_IdlePriority,sf=null,xi=null;function Xk(t){if(xi&&typeof xi.onCommitFiberRoot=="function")try{xi.onCommitFiberRoot(sf,t,void 0,(t.current.flags&128)===128)}catch{}}var ai=Math.clz32?Math.clz32:tb,Jk=Math.log,eb=Math.LN2;function tb(t){return t>>>=0,t===0?32:31-(Jk(t)/eb|0)|0}var uh=64,ch=4194304;function Kl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ud(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~r;u!==0?i=Kl(u):(o&=a,o!==0&&(i=Kl(o)))}else a=n&~r,a!==0?i=Kl(a):o!==0&&(i=Kl(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ai(e),r=1<<n,i|=t[n],e&=~r;return i}function nb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ib(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-ai(o),u=1<<a,h=r[a];h===-1?(!(u&n)||u&i)&&(r[a]=nb(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function Rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZI(){var t=uh;return uh<<=1,!(uh&4194240)&&(uh=64),t}function mp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function rc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ai(e),t[e]=n}function rb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ai(n),o=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~o}}function c_(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ai(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var Fe=0;function QI(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var YI,h_,XI,JI,eS,km=!1,hh=[],Hr=null,Wr=null,qr=null,Cu=new Map,Ru=new Map,Nr=[],sb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function hw(t,e){switch(t){case"focusin":case"focusout":Hr=null;break;case"dragenter":case"dragleave":Wr=null;break;case"mouseover":case"mouseout":qr=null;break;case"pointerover":case"pointerout":Cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ru.delete(e.pointerId)}}function Fl(t,e,n,i,r,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},e!==null&&(e=oc(e),e!==null&&h_(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function ob(t,e,n,i,r){switch(e){case"focusin":return Hr=Fl(Hr,t,e,n,i,r),!0;case"dragenter":return Wr=Fl(Wr,t,e,n,i,r),!0;case"mouseover":return qr=Fl(qr,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return Cu.set(o,Fl(Cu.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ru.set(o,Fl(Ru.get(o)||null,t,e,n,i,r)),!0}return!1}function tS(t){var e=Hs(t.target);if(e!==null){var n=po(e);if(n!==null){if(e=n.tag,e===13){if(e=HI(n),e!==null){t.blockedOn=e,eS(t.priority,function(){XI(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Pm=i,n.target.dispatchEvent(i),Pm=null}else return e=oc(n),e!==null&&h_(e),t.blockedOn=n,!1;e.shift()}return!0}function dw(t,e,n){Mh(t)&&n.delete(e)}function ab(){km=!1,Hr!==null&&Mh(Hr)&&(Hr=null),Wr!==null&&Mh(Wr)&&(Wr=null),qr!==null&&Mh(qr)&&(qr=null),Cu.forEach(dw),Ru.forEach(dw)}function Ul(t,e){t.blockedOn===e&&(t.blockedOn=null,km||(km=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,ab)))}function ku(t){function e(r){return Ul(r,t)}if(0<hh.length){Ul(hh[0],t);for(var n=1;n<hh.length;n++){var i=hh[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Hr!==null&&Ul(Hr,t),Wr!==null&&Ul(Wr,t),qr!==null&&Ul(qr,t),Cu.forEach(e),Ru.forEach(e),n=0;n<Nr.length;n++)i=Nr[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Nr.length&&(n=Nr[0],n.blockedOn===null);)tS(n),n.blockedOn===null&&Nr.shift()}var Sa=gr.ReactCurrentBatchConfig,cd=!0;function lb(t,e,n,i){var r=Fe,o=Sa.transition;Sa.transition=null;try{Fe=1,d_(t,e,n,i)}finally{Fe=r,Sa.transition=o}}function ub(t,e,n,i){var r=Fe,o=Sa.transition;Sa.transition=null;try{Fe=4,d_(t,e,n,i)}finally{Fe=r,Sa.transition=o}}function d_(t,e,n,i){if(cd){var r=bm(t,e,n,i);if(r===null)Pp(t,e,i,hd,n),hw(t,i);else if(ob(r,t,e,n,i))i.stopPropagation();else if(hw(t,i),e&4&&-1<sb.indexOf(t)){for(;r!==null;){var o=oc(r);if(o!==null&&YI(o),o=bm(t,e,n,i),o===null&&Pp(t,e,i,hd,n),o===r)break;r=o}r!==null&&i.stopPropagation()}else Pp(t,e,i,null,n)}}var hd=null;function bm(t,e,n,i){if(hd=null,t=l_(i),t=Hs(t),t!==null)if(e=po(t),e===null)t=null;else if(n=e.tag,n===13){if(t=HI(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return hd=t,null}function nS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qk()){case u_:return 1;case GI:return 4;case ld:case Yk:return 16;case KI:return 536870912;default:return 16}default:return 16}}var Br=null,f_=null,Oh=null;function iS(){if(Oh)return Oh;var t,e=f_,n=e.length,i,r="value"in Br?Br.value:Br.textContent,o=r.length;for(t=0;t<n&&e[t]===r[t];t++);var a=n-t;for(i=1;i<=a&&e[n-i]===r[o-i];i++);return Oh=r.slice(t,1<i?1-i:void 0)}function Vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function dh(){return!0}function fw(){return!1}function xn(t){function e(n,i,r,o,a){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?dh:fw,this.isPropagationStopped=fw,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=dh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=dh)},persist:function(){},isPersistent:dh}),e}var Qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},p_=xn(Qa),sc=Ye({},Qa,{view:0,detail:0}),cb=xn(sc),gp,_p,Bl,of=Ye({},sc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:m_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bl&&(Bl&&t.type==="mousemove"?(gp=t.screenX-Bl.screenX,_p=t.screenY-Bl.screenY):_p=gp=0,Bl=t),gp)},movementY:function(t){return"movementY"in t?t.movementY:_p}}),pw=xn(of),hb=Ye({},of,{dataTransfer:0}),db=xn(hb),fb=Ye({},sc,{relatedTarget:0}),yp=xn(fb),pb=Ye({},Qa,{animationName:0,elapsedTime:0,pseudoElement:0}),mb=xn(pb),gb=Ye({},Qa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_b=xn(gb),yb=Ye({},Qa,{data:0}),mw=xn(yb),vb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eb(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Tb[t])?!!e[t]:!1}function m_(){return Eb}var Ib=Ye({},sc,{key:function(t){if(t.key){var e=vb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:m_,charCode:function(t){return t.type==="keypress"?Vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sb=xn(Ib),Pb=Ye({},of,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gw=xn(Pb),Ab=Ye({},sc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:m_}),xb=xn(Ab),Cb=Ye({},Qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rb=xn(Cb),kb=Ye({},of,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),bb=xn(kb),Lb=[9,13,27,32],g_=ar&&"CompositionEvent"in window,au=null;ar&&"documentMode"in document&&(au=document.documentMode);var Nb=ar&&"TextEvent"in window&&!au,rS=ar&&(!g_||au&&8<au&&11>=au),_w=" ",yw=!1;function sS(t,e){switch(t){case"keyup":return Lb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var sa=!1;function Db(t,e){switch(t){case"compositionend":return oS(e);case"keypress":return e.which!==32?null:(yw=!0,_w);case"textInput":return t=e.data,t===_w&&yw?null:t;default:return null}}function Mb(t,e){if(sa)return t==="compositionend"||!g_&&sS(t,e)?(t=iS(),Oh=f_=Br=null,sa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rS&&e.locale!=="ko"?null:e.data;default:return null}}var Ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Ob[t.type]:e==="textarea"}function aS(t,e,n,i){FI(i),e=dd(e,"onChange"),0<e.length&&(n=new p_("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var lu=null,bu=null;function Vb(t){yS(t,0)}function af(t){var e=la(t);if(bI(e))return t}function Fb(t,e){if(t==="change")return e}var lS=!1;if(ar){var vp;if(ar){var wp="oninput"in document;if(!wp){var ww=document.createElement("div");ww.setAttribute("oninput","return;"),wp=typeof ww.oninput=="function"}vp=wp}else vp=!1;lS=vp&&(!document.documentMode||9<document.documentMode)}function Tw(){lu&&(lu.detachEvent("onpropertychange",uS),bu=lu=null)}function uS(t){if(t.propertyName==="value"&&af(bu)){var e=[];aS(e,bu,t,l_(t)),jI(Vb,e)}}function Ub(t,e,n){t==="focusin"?(Tw(),lu=e,bu=n,lu.attachEvent("onpropertychange",uS)):t==="focusout"&&Tw()}function Bb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return af(bu)}function zb(t,e){if(t==="click")return af(e)}function jb(t,e){if(t==="input"||t==="change")return af(e)}function Hb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ci=typeof Object.is=="function"?Object.is:Hb;function Lu(t,e){if(ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!fm.call(e,r)||!ci(t[r],e[r]))return!1}return!0}function Ew(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Iw(t,e){var n=Ew(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ew(n)}}function cS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hS(){for(var t=window,e=sd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sd(t.document)}return e}function __(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Wb(t){var e=hS(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&cS(n.ownerDocument.documentElement,n)){if(i!==null&&__(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=i.end===void 0?o:Math.min(i.end,r),!t.extend&&o>i&&(r=i,i=o,o=r),r=Iw(n,o);var a=Iw(n,i);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qb=ar&&"documentMode"in document&&11>=document.documentMode,oa=null,Lm=null,uu=null,Nm=!1;function Sw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nm||oa==null||oa!==sd(i)||(i=oa,"selectionStart"in i&&__(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),uu&&Lu(uu,i)||(uu=i,i=dd(Lm,"onSelect"),0<i.length&&(e=new p_("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=oa)))}function fh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var aa={animationend:fh("Animation","AnimationEnd"),animationiteration:fh("Animation","AnimationIteration"),animationstart:fh("Animation","AnimationStart"),transitionend:fh("Transition","TransitionEnd")},Tp={},dS={};ar&&(dS=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function lf(t){if(Tp[t])return Tp[t];if(!aa[t])return t;var e=aa[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dS)return Tp[t]=e[n];return t}var fS=lf("animationend"),pS=lf("animationiteration"),mS=lf("animationstart"),gS=lf("transitionend"),_S=new Map,Pw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,e){_S.set(t,e),fo(e,[t])}for(var Ep=0;Ep<Pw.length;Ep++){var Ip=Pw[Ep],$b=Ip.toLowerCase(),Gb=Ip[0].toUpperCase()+Ip.slice(1);fs($b,"on"+Gb)}fs(fS,"onAnimationEnd");fs(pS,"onAnimationIteration");fs(mS,"onAnimationStart");fs("dblclick","onDoubleClick");fs("focusin","onFocus");fs("focusout","onBlur");fs(gS,"onTransitionEnd");Na("onMouseEnter",["mouseout","mouseover"]);Na("onMouseLeave",["mouseout","mouseover"]);Na("onPointerEnter",["pointerout","pointerover"]);Na("onPointerLeave",["pointerout","pointerover"]);fo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fo("onBeforeInput",["compositionend","keypress","textInput","paste"]);fo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zl));function Aw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,$k(i,e,void 0,t),t.currentTarget=null}function yS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var u=i[a],h=u.instance,f=u.currentTarget;if(u=u.listener,h!==o&&r.isPropagationStopped())break e;Aw(r,u,f),o=h}else for(a=0;a<i.length;a++){if(u=i[a],h=u.instance,f=u.currentTarget,u=u.listener,h!==o&&r.isPropagationStopped())break e;Aw(r,u,f),o=h}}}if(ad)throw t=Cm,ad=!1,Cm=null,t}function We(t,e){var n=e[Fm];n===void 0&&(n=e[Fm]=new Set);var i=t+"__bubble";n.has(i)||(vS(e,t,2,!1),n.add(i))}function Sp(t,e,n){var i=0;e&&(i|=4),vS(n,t,i,e)}var ph="_reactListening"+Math.random().toString(36).slice(2);function Nu(t){if(!t[ph]){t[ph]=!0,AI.forEach(function(n){n!=="selectionchange"&&(Kb.has(n)||Sp(n,!1,t),Sp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ph]||(e[ph]=!0,Sp("selectionchange",!1,e))}}function vS(t,e,n,i){switch(nS(e)){case 1:var r=lb;break;case 4:r=ub;break;default:r=d_}n=r.bind(null,e,n,t),r=void 0,!xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Pp(t,e,n,i,r){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var u=i.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===r||h.nodeType===8&&h.parentNode===r))return;a=a.return}for(;u!==null;){if(a=Hs(u),a===null)return;if(h=a.tag,h===5||h===6){i=o=a;continue e}u=u.parentNode}}i=i.return}jI(function(){var f=o,m=l_(n),_=[];e:{var v=_S.get(t);if(v!==void 0){var I=p_,k=t;switch(t){case"keypress":if(Vh(n)===0)break e;case"keydown":case"keyup":I=Sb;break;case"focusin":k="focus",I=yp;break;case"focusout":k="blur",I=yp;break;case"beforeblur":case"afterblur":I=yp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=pw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=db;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=xb;break;case fS:case pS:case mS:I=mb;break;case gS:I=Rb;break;case"scroll":I=cb;break;case"wheel":I=bb;break;case"copy":case"cut":case"paste":I=_b;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=gw}var b=(e&4)!==0,F=!b&&t==="scroll",A=b?v!==null?v+"Capture":null:v;b=[];for(var P=f,x;P!==null;){x=P;var B=x.stateNode;if(x.tag===5&&B!==null&&(x=B,A!==null&&(B=xu(P,A),B!=null&&b.push(Du(P,B,x)))),F)break;P=P.return}0<b.length&&(v=new I(v,k,null,n,m),_.push({event:v,listeners:b}))}}if(!(e&7)){e:{if(v=t==="mouseover"||t==="pointerover",I=t==="mouseout"||t==="pointerout",v&&n!==Pm&&(k=n.relatedTarget||n.fromElement)&&(Hs(k)||k[lr]))break e;if((I||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,I?(k=n.relatedTarget||n.toElement,I=f,k=k?Hs(k):null,k!==null&&(F=po(k),k!==F||k.tag!==5&&k.tag!==6)&&(k=null)):(I=null,k=f),I!==k)){if(b=pw,B="onMouseLeave",A="onMouseEnter",P="mouse",(t==="pointerout"||t==="pointerover")&&(b=gw,B="onPointerLeave",A="onPointerEnter",P="pointer"),F=I==null?v:la(I),x=k==null?v:la(k),v=new b(B,P+"leave",I,n,m),v.target=F,v.relatedTarget=x,B=null,Hs(m)===f&&(b=new b(A,P+"enter",k,n,m),b.target=x,b.relatedTarget=F,B=b),F=B,I&&k)t:{for(b=I,A=k,P=0,x=b;x;x=Xo(x))P++;for(x=0,B=A;B;B=Xo(B))x++;for(;0<P-x;)b=Xo(b),P--;for(;0<x-P;)A=Xo(A),x--;for(;P--;){if(b===A||A!==null&&b===A.alternate)break t;b=Xo(b),A=Xo(A)}b=null}else b=null;I!==null&&xw(_,v,I,b,!1),k!==null&&F!==null&&xw(_,F,k,b,!0)}}e:{if(v=f?la(f):window,I=v.nodeName&&v.nodeName.toLowerCase(),I==="select"||I==="input"&&v.type==="file")var q=Fb;else if(vw(v))if(lS)q=jb;else{q=Bb;var K=Ub}else(I=v.nodeName)&&I.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(q=zb);if(q&&(q=q(t,f))){aS(_,q,n,m);break e}K&&K(t,v,f),t==="focusout"&&(K=v._wrapperState)&&K.controlled&&v.type==="number"&&wm(v,"number",v.value)}switch(K=f?la(f):window,t){case"focusin":(vw(K)||K.contentEditable==="true")&&(oa=K,Lm=f,uu=null);break;case"focusout":uu=Lm=oa=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,Sw(_,n,m);break;case"selectionchange":if(qb)break;case"keydown":case"keyup":Sw(_,n,m)}var C;if(g_)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else sa?sS(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(rS&&n.locale!=="ko"&&(sa||E!=="onCompositionStart"?E==="onCompositionEnd"&&sa&&(C=iS()):(Br=m,f_="value"in Br?Br.value:Br.textContent,sa=!0)),K=dd(f,E),0<K.length&&(E=new mw(E,t,null,n,m),_.push({event:E,listeners:K}),C?E.data=C:(C=oS(n),C!==null&&(E.data=C)))),(C=Nb?Db(t,n):Mb(t,n))&&(f=dd(f,"onBeforeInput"),0<f.length&&(m=new mw("onBeforeInput","beforeinput",null,n,m),_.push({event:m,listeners:f}),m.data=C))}yS(_,e)})}function Du(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dd(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=xu(t,n),o!=null&&i.unshift(Du(t,o,r)),o=xu(t,e),o!=null&&i.push(Du(t,o,r))),t=t.return}return i}function Xo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xw(t,e,n,i,r){for(var o=e._reactName,a=[];n!==null&&n!==i;){var u=n,h=u.alternate,f=u.stateNode;if(h!==null&&h===i)break;u.tag===5&&f!==null&&(u=f,r?(h=xu(n,o),h!=null&&a.unshift(Du(n,h,u))):r||(h=xu(n,o),h!=null&&a.push(Du(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var Zb=/\r\n?/g,Qb=/\u0000|\uFFFD/g;function Cw(t){return(typeof t=="string"?t:""+t).replace(Zb,`
`).replace(Qb,"")}function mh(t,e,n){if(e=Cw(e),Cw(t)!==e&&n)throw Error(X(425))}function fd(){}var Dm=null,Mm=null;function Om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vm=typeof setTimeout=="function"?setTimeout:void 0,Yb=typeof clearTimeout=="function"?clearTimeout:void 0,Rw=typeof Promise=="function"?Promise:void 0,Xb=typeof queueMicrotask=="function"?queueMicrotask:typeof Rw<"u"?function(t){return Rw.resolve(null).then(t).catch(Jb)}:Vm;function Jb(t){setTimeout(function(){throw t})}function Ap(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),ku(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);ku(e)}function $r(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function kw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ya=Math.random().toString(36).slice(2),Pi="__reactFiber$"+Ya,Mu="__reactProps$"+Ya,lr="__reactContainer$"+Ya,Fm="__reactEvents$"+Ya,eL="__reactListeners$"+Ya,tL="__reactHandles$"+Ya;function Hs(t){var e=t[Pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[lr]||n[Pi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=kw(t);t!==null;){if(n=t[Pi])return n;t=kw(t)}return e}t=n,n=t.parentNode}return null}function oc(t){return t=t[Pi]||t[lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function la(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function uf(t){return t[Mu]||null}var Um=[],ua=-1;function ps(t){return{current:t}}function qe(t){0>ua||(t.current=Um[ua],Um[ua]=null,ua--)}function He(t,e){ua++,Um[ua]=t.current,t.current=e}var ns={},$t=ps(ns),hn=ps(!1),eo=ns;function Da(t,e){var n=t.type.contextTypes;if(!n)return ns;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in n)r[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function dn(t){return t=t.childContextTypes,t!=null}function pd(){qe(hn),qe($t)}function bw(t,e,n){if($t.current!==ns)throw Error(X(168));He($t,e),He(hn,n)}function wS(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(X(108,Uk(t)||"Unknown",r));return Ye({},n,i)}function md(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ns,eo=$t.current,He($t,t),He(hn,hn.current),!0}function Lw(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=wS(t,e,eo),i.__reactInternalMemoizedMergedChildContext=t,qe(hn),qe($t),He($t,t)):qe(hn),He(hn,n)}var Yi=null,cf=!1,xp=!1;function TS(t){Yi===null?Yi=[t]:Yi.push(t)}function nL(t){cf=!0,TS(t)}function ms(){if(!xp&&Yi!==null){xp=!0;var t=0,e=Fe;try{var n=Yi;for(Fe=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Yi=null,cf=!1}catch(r){throw Yi!==null&&(Yi=Yi.slice(t+1)),$I(u_,ms),r}finally{Fe=e,xp=!1}}return null}var ca=[],ha=0,gd=null,_d=0,Un=[],Bn=0,to=null,Xi=1,Ji="";function Fs(t,e){ca[ha++]=_d,ca[ha++]=gd,gd=t,_d=e}function ES(t,e,n){Un[Bn++]=Xi,Un[Bn++]=Ji,Un[Bn++]=to,to=t;var i=Xi;t=Ji;var r=32-ai(i)-1;i&=~(1<<r),n+=1;var o=32-ai(e)+r;if(30<o){var a=r-r%5;o=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Xi=1<<32-ai(e)+r|n<<r|i,Ji=o+t}else Xi=1<<o|n<<r|i,Ji=t}function y_(t){t.return!==null&&(Fs(t,1),ES(t,1,0))}function v_(t){for(;t===gd;)gd=ca[--ha],ca[ha]=null,_d=ca[--ha],ca[ha]=null;for(;t===to;)to=Un[--Bn],Un[Bn]=null,Ji=Un[--Bn],Un[Bn]=null,Xi=Un[--Bn],Un[Bn]=null}var Tn=null,vn=null,Ge=!1,ri=null;function IS(t,e){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,vn=$r(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=to!==null?{id:Xi,overflow:Ji}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,vn=null,!0):!1;default:return!1}}function Bm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zm(t){if(Ge){var e=vn;if(e){var n=e;if(!Nw(t,e)){if(Bm(t))throw Error(X(418));e=$r(n.nextSibling);var i=Tn;e&&Nw(t,e)?IS(i,n):(t.flags=t.flags&-4097|2,Ge=!1,Tn=t)}}else{if(Bm(t))throw Error(X(418));t.flags=t.flags&-4097|2,Ge=!1,Tn=t}}}function Dw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function gh(t){if(t!==Tn)return!1;if(!Ge)return Dw(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Om(t.type,t.memoizedProps)),e&&(e=vn)){if(Bm(t))throw SS(),Error(X(418));for(;e;)IS(t,e),e=$r(e.nextSibling)}if(Dw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=$r(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=Tn?$r(t.stateNode.nextSibling):null;return!0}function SS(){for(var t=vn;t;)t=$r(t.nextSibling)}function Ma(){vn=Tn=null,Ge=!1}function w_(t){ri===null?ri=[t]:ri.push(t)}var iL=gr.ReactCurrentBatchConfig;function zl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var r=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=r.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function _h(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Mw(t){var e=t._init;return e(t._payload)}function PS(t){function e(A,P){if(t){var x=A.deletions;x===null?(A.deletions=[P],A.flags|=16):x.push(P)}}function n(A,P){if(!t)return null;for(;P!==null;)e(A,P),P=P.sibling;return null}function i(A,P){for(A=new Map;P!==null;)P.key!==null?A.set(P.key,P):A.set(P.index,P),P=P.sibling;return A}function r(A,P){return A=Qr(A,P),A.index=0,A.sibling=null,A}function o(A,P,x){return A.index=x,t?(x=A.alternate,x!==null?(x=x.index,x<P?(A.flags|=2,P):x):(A.flags|=2,P)):(A.flags|=1048576,P)}function a(A){return t&&A.alternate===null&&(A.flags|=2),A}function u(A,P,x,B){return P===null||P.tag!==6?(P=Dp(x,A.mode,B),P.return=A,P):(P=r(P,x),P.return=A,P)}function h(A,P,x,B){var q=x.type;return q===ra?m(A,P,x.props.children,B,x.key):P!==null&&(P.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===br&&Mw(q)===P.type)?(B=r(P,x.props),B.ref=zl(A,P,x),B.return=A,B):(B=Wh(x.type,x.key,x.props,null,A.mode,B),B.ref=zl(A,P,x),B.return=A,B)}function f(A,P,x,B){return P===null||P.tag!==4||P.stateNode.containerInfo!==x.containerInfo||P.stateNode.implementation!==x.implementation?(P=Mp(x,A.mode,B),P.return=A,P):(P=r(P,x.children||[]),P.return=A,P)}function m(A,P,x,B,q){return P===null||P.tag!==7?(P=Qs(x,A.mode,B,q),P.return=A,P):(P=r(P,x),P.return=A,P)}function _(A,P,x){if(typeof P=="string"&&P!==""||typeof P=="number")return P=Dp(""+P,A.mode,x),P.return=A,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case oh:return x=Wh(P.type,P.key,P.props,null,A.mode,x),x.ref=zl(A,null,P),x.return=A,x;case ia:return P=Mp(P,A.mode,x),P.return=A,P;case br:var B=P._init;return _(A,B(P._payload),x)}if(Gl(P)||Ol(P))return P=Qs(P,A.mode,x,null),P.return=A,P;_h(A,P)}return null}function v(A,P,x,B){var q=P!==null?P.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return q!==null?null:u(A,P,""+x,B);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case oh:return x.key===q?h(A,P,x,B):null;case ia:return x.key===q?f(A,P,x,B):null;case br:return q=x._init,v(A,P,q(x._payload),B)}if(Gl(x)||Ol(x))return q!==null?null:m(A,P,x,B,null);_h(A,x)}return null}function I(A,P,x,B,q){if(typeof B=="string"&&B!==""||typeof B=="number")return A=A.get(x)||null,u(P,A,""+B,q);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case oh:return A=A.get(B.key===null?x:B.key)||null,h(P,A,B,q);case ia:return A=A.get(B.key===null?x:B.key)||null,f(P,A,B,q);case br:var K=B._init;return I(A,P,x,K(B._payload),q)}if(Gl(B)||Ol(B))return A=A.get(x)||null,m(P,A,B,q,null);_h(P,B)}return null}function k(A,P,x,B){for(var q=null,K=null,C=P,E=P=0,R=null;C!==null&&E<x.length;E++){C.index>E?(R=C,C=null):R=C.sibling;var N=v(A,C,x[E],B);if(N===null){C===null&&(C=R);break}t&&C&&N.alternate===null&&e(A,C),P=o(N,P,E),K===null?q=N:K.sibling=N,K=N,C=R}if(E===x.length)return n(A,C),Ge&&Fs(A,E),q;if(C===null){for(;E<x.length;E++)C=_(A,x[E],B),C!==null&&(P=o(C,P,E),K===null?q=C:K.sibling=C,K=C);return Ge&&Fs(A,E),q}for(C=i(A,C);E<x.length;E++)R=I(C,A,E,x[E],B),R!==null&&(t&&R.alternate!==null&&C.delete(R.key===null?E:R.key),P=o(R,P,E),K===null?q=R:K.sibling=R,K=R);return t&&C.forEach(function(O){return e(A,O)}),Ge&&Fs(A,E),q}function b(A,P,x,B){var q=Ol(x);if(typeof q!="function")throw Error(X(150));if(x=q.call(x),x==null)throw Error(X(151));for(var K=q=null,C=P,E=P=0,R=null,N=x.next();C!==null&&!N.done;E++,N=x.next()){C.index>E?(R=C,C=null):R=C.sibling;var O=v(A,C,N.value,B);if(O===null){C===null&&(C=R);break}t&&C&&O.alternate===null&&e(A,C),P=o(O,P,E),K===null?q=O:K.sibling=O,K=O,C=R}if(N.done)return n(A,C),Ge&&Fs(A,E),q;if(C===null){for(;!N.done;E++,N=x.next())N=_(A,N.value,B),N!==null&&(P=o(N,P,E),K===null?q=N:K.sibling=N,K=N);return Ge&&Fs(A,E),q}for(C=i(A,C);!N.done;E++,N=x.next())N=I(C,A,E,N.value,B),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?E:N.key),P=o(N,P,E),K===null?q=N:K.sibling=N,K=N);return t&&C.forEach(function(U){return e(A,U)}),Ge&&Fs(A,E),q}function F(A,P,x,B){if(typeof x=="object"&&x!==null&&x.type===ra&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case oh:e:{for(var q=x.key,K=P;K!==null;){if(K.key===q){if(q=x.type,q===ra){if(K.tag===7){n(A,K.sibling),P=r(K,x.props.children),P.return=A,A=P;break e}}else if(K.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===br&&Mw(q)===K.type){n(A,K.sibling),P=r(K,x.props),P.ref=zl(A,K,x),P.return=A,A=P;break e}n(A,K);break}else e(A,K);K=K.sibling}x.type===ra?(P=Qs(x.props.children,A.mode,B,x.key),P.return=A,A=P):(B=Wh(x.type,x.key,x.props,null,A.mode,B),B.ref=zl(A,P,x),B.return=A,A=B)}return a(A);case ia:e:{for(K=x.key;P!==null;){if(P.key===K)if(P.tag===4&&P.stateNode.containerInfo===x.containerInfo&&P.stateNode.implementation===x.implementation){n(A,P.sibling),P=r(P,x.children||[]),P.return=A,A=P;break e}else{n(A,P);break}else e(A,P);P=P.sibling}P=Mp(x,A.mode,B),P.return=A,A=P}return a(A);case br:return K=x._init,F(A,P,K(x._payload),B)}if(Gl(x))return k(A,P,x,B);if(Ol(x))return b(A,P,x,B);_h(A,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,P!==null&&P.tag===6?(n(A,P.sibling),P=r(P,x),P.return=A,A=P):(n(A,P),P=Dp(x,A.mode,B),P.return=A,A=P),a(A)):n(A,P)}return F}var Oa=PS(!0),AS=PS(!1),yd=ps(null),vd=null,da=null,T_=null;function E_(){T_=da=vd=null}function I_(t){var e=yd.current;qe(yd),t._currentValue=e}function jm(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Pa(t,e){vd=t,T_=da=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(cn=!0),t.firstContext=null)}function qn(t){var e=t._currentValue;if(T_!==t)if(t={context:t,memoizedValue:e,next:null},da===null){if(vd===null)throw Error(X(308));da=t,vd.dependencies={lanes:0,firstContext:t}}else da=da.next=t;return e}var Ws=null;function S_(t){Ws===null?Ws=[t]:Ws.push(t)}function xS(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,S_(e)):(n.next=r.next,r.next=n),e.interleaved=n,ur(t,i)}function ur(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Lr=!1;function P_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Gr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ur(t,n)}return r=i.interleaved,r===null?(e.next=e,S_(i)):(e.next=r.next,r.next=e),i.interleaved=e,ur(t,n)}function Fh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,c_(t,n)}}function Ow(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?r=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?r=o=e:o=o.next=e}else r=o=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wd(t,e,n,i){var r=t.updateQueue;Lr=!1;var o=r.firstBaseUpdate,a=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var h=u,f=h.next;h.next=null,a===null?o=f:a.next=f,a=h;var m=t.alternate;m!==null&&(m=m.updateQueue,u=m.lastBaseUpdate,u!==a&&(u===null?m.firstBaseUpdate=f:u.next=f,m.lastBaseUpdate=h))}if(o!==null){var _=r.baseState;a=0,m=f=h=null,u=o;do{var v=u.lane,I=u.eventTime;if((i&v)===v){m!==null&&(m=m.next={eventTime:I,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var k=t,b=u;switch(v=e,I=n,b.tag){case 1:if(k=b.payload,typeof k=="function"){_=k.call(I,_,v);break e}_=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=b.payload,v=typeof k=="function"?k.call(I,_,v):k,v==null)break e;_=Ye({},_,v);break e;case 2:Lr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,v=r.effects,v===null?r.effects=[u]:v.push(u))}else I={eventTime:I,lane:v,tag:u.tag,payload:u.payload,callback:u.callback,next:null},m===null?(f=m=I,h=_):m=m.next=I,a|=v;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;v=u,u=v.next,v.next=null,r.lastBaseUpdate=v,r.shared.pending=null}}while(!0);if(m===null&&(h=_),r.baseState=h,r.firstBaseUpdate=f,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);io|=a,t.lanes=a,t.memoizedState=_}}function Vw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(X(191,r));r.call(i)}}}var ac={},Ci=ps(ac),Ou=ps(ac),Vu=ps(ac);function qs(t){if(t===ac)throw Error(X(174));return t}function A_(t,e){switch(He(Vu,e),He(Ou,t),He(Ci,ac),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Em(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Em(e,t)}qe(Ci),He(Ci,e)}function Va(){qe(Ci),qe(Ou),qe(Vu)}function RS(t){qs(Vu.current);var e=qs(Ci.current),n=Em(e,t.type);e!==n&&(He(Ou,t),He(Ci,n))}function x_(t){Ou.current===t&&(qe(Ci),qe(Ou))}var Ke=ps(0);function Td(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cp=[];function C_(){for(var t=0;t<Cp.length;t++)Cp[t]._workInProgressVersionPrimary=null;Cp.length=0}var Uh=gr.ReactCurrentDispatcher,Rp=gr.ReactCurrentBatchConfig,no=0,Qe=null,yt=null,xt=null,Ed=!1,cu=!1,Fu=0,rL=0;function Ft(){throw Error(X(321))}function R_(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ci(t[n],e[n]))return!1;return!0}function k_(t,e,n,i,r,o){if(no=o,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Uh.current=t===null||t.memoizedState===null?lL:uL,t=n(i,r),cu){o=0;do{if(cu=!1,Fu=0,25<=o)throw Error(X(301));o+=1,xt=yt=null,e.updateQueue=null,Uh.current=cL,t=n(i,r)}while(cu)}if(Uh.current=Id,e=yt!==null&&yt.next!==null,no=0,xt=yt=Qe=null,Ed=!1,e)throw Error(X(300));return t}function b_(){var t=Fu!==0;return Fu=0,t}function Ii(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xt===null?Qe.memoizedState=xt=t:xt=xt.next=t,xt}function $n(){if(yt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=yt.next;var e=xt===null?Qe.memoizedState:xt.next;if(e!==null)xt=e,yt=t;else{if(t===null)throw Error(X(310));yt=t,t={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},xt===null?Qe.memoizedState=xt=t:xt=xt.next=t}return xt}function Uu(t,e){return typeof e=="function"?e(t):e}function kp(t){var e=$n(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=yt,r=i.baseQueue,o=n.pending;if(o!==null){if(r!==null){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(r!==null){o=r.next,i=i.baseState;var u=a=null,h=null,f=o;do{var m=f.lane;if((no&m)===m)h!==null&&(h=h.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var _={lane:m,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};h===null?(u=h=_,a=i):h=h.next=_,Qe.lanes|=m,io|=m}f=f.next}while(f!==null&&f!==o);h===null?a=i:h.next=u,ci(i,e.memoizedState)||(cn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=h,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do o=r.lane,Qe.lanes|=o,io|=o,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function bp(t){var e=$n(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(r!==null){n.pending=null;var a=r=r.next;do o=t(o,a.action),a=a.next;while(a!==r);ci(o,e.memoizedState)||(cn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function kS(){}function bS(t,e){var n=Qe,i=$n(),r=e(),o=!ci(i.memoizedState,r);if(o&&(i.memoizedState=r,cn=!0),i=i.queue,L_(DS.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||xt!==null&&xt.memoizedState.tag&1){if(n.flags|=2048,Bu(9,NS.bind(null,n,i,r,e),void 0,null),Ct===null)throw Error(X(349));no&30||LS(n,e,r)}return r}function LS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function NS(t,e,n,i){e.value=n,e.getSnapshot=i,MS(e)&&OS(t)}function DS(t,e,n){return n(function(){MS(e)&&OS(t)})}function MS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ci(t,n)}catch{return!0}}function OS(t){var e=ur(t,1);e!==null&&li(e,t,1,-1)}function Fw(t){var e=Ii();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uu,lastRenderedState:t},e.queue=t,t=t.dispatch=aL.bind(null,Qe,t),[e.memoizedState,t]}function Bu(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function VS(){return $n().memoizedState}function Bh(t,e,n,i){var r=Ii();Qe.flags|=t,r.memoizedState=Bu(1|e,n,void 0,i===void 0?null:i)}function hf(t,e,n,i){var r=$n();i=i===void 0?null:i;var o=void 0;if(yt!==null){var a=yt.memoizedState;if(o=a.destroy,i!==null&&R_(i,a.deps)){r.memoizedState=Bu(e,n,o,i);return}}Qe.flags|=t,r.memoizedState=Bu(1|e,n,o,i)}function Uw(t,e){return Bh(8390656,8,t,e)}function L_(t,e){return hf(2048,8,t,e)}function FS(t,e){return hf(4,2,t,e)}function US(t,e){return hf(4,4,t,e)}function BS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function zS(t,e,n){return n=n!=null?n.concat([t]):null,hf(4,4,BS.bind(null,e,t),n)}function N_(){}function jS(t,e){var n=$n();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&R_(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function HS(t,e){var n=$n();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&R_(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function WS(t,e,n){return no&21?(ci(n,e)||(n=ZI(),Qe.lanes|=n,io|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,cn=!0),t.memoizedState=n)}function sL(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var i=Rp.transition;Rp.transition={};try{t(!1),e()}finally{Fe=n,Rp.transition=i}}function qS(){return $n().memoizedState}function oL(t,e,n){var i=Zr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},$S(t))GS(e,n);else if(n=xS(t,e,n,i),n!==null){var r=Jt();li(n,t,i,r),KS(n,e,i)}}function aL(t,e,n){var i=Zr(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if($S(t))GS(e,r);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(r.hasEagerState=!0,r.eagerState=u,ci(u,a)){var h=e.interleaved;h===null?(r.next=r,S_(e)):(r.next=h.next,h.next=r),e.interleaved=r;return}}catch{}finally{}n=xS(t,e,r,i),n!==null&&(r=Jt(),li(n,t,i,r),KS(n,e,i))}}function $S(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function GS(t,e){cu=Ed=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function KS(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,c_(t,n)}}var Id={readContext:qn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},lL={readContext:qn,useCallback:function(t,e){return Ii().memoizedState=[t,e===void 0?null:e],t},useContext:qn,useEffect:Uw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bh(4194308,4,BS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bh(4,2,t,e)},useMemo:function(t,e){var n=Ii();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ii();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=oL.bind(null,Qe,t),[i.memoizedState,t]},useRef:function(t){var e=Ii();return t={current:t},e.memoizedState=t},useState:Fw,useDebugValue:N_,useDeferredValue:function(t){return Ii().memoizedState=t},useTransition:function(){var t=Fw(!1),e=t[0];return t=sL.bind(null,t[1]),Ii().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Qe,r=Ii();if(Ge){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ct===null)throw Error(X(349));no&30||LS(i,e,n)}r.memoizedState=n;var o={value:n,getSnapshot:e};return r.queue=o,Uw(DS.bind(null,i,o,t),[t]),i.flags|=2048,Bu(9,NS.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Ii(),e=Ct.identifierPrefix;if(Ge){var n=Ji,i=Xi;n=(i&~(1<<32-ai(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=rL++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uL={readContext:qn,useCallback:jS,useContext:qn,useEffect:L_,useImperativeHandle:zS,useInsertionEffect:FS,useLayoutEffect:US,useMemo:HS,useReducer:kp,useRef:VS,useState:function(){return kp(Uu)},useDebugValue:N_,useDeferredValue:function(t){var e=$n();return WS(e,yt.memoizedState,t)},useTransition:function(){var t=kp(Uu)[0],e=$n().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:bS,useId:qS,unstable_isNewReconciler:!1},cL={readContext:qn,useCallback:jS,useContext:qn,useEffect:L_,useImperativeHandle:zS,useInsertionEffect:FS,useLayoutEffect:US,useMemo:HS,useReducer:bp,useRef:VS,useState:function(){return bp(Uu)},useDebugValue:N_,useDeferredValue:function(t){var e=$n();return yt===null?e.memoizedState=t:WS(e,yt.memoizedState,t)},useTransition:function(){var t=bp(Uu)[0],e=$n().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:bS,useId:qS,unstable_isNewReconciler:!1};function ni(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Hm(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var df={isMounted:function(t){return(t=t._reactInternals)?po(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Zr(t),o=nr(i,r);o.payload=e,n!=null&&(o.callback=n),e=Gr(t,o,r),e!==null&&(li(e,t,r,i),Fh(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Jt(),r=Zr(t),o=nr(i,r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Gr(t,o,r),e!==null&&(li(e,t,r,i),Fh(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Jt(),i=Zr(t),r=nr(n,i);r.tag=2,e!=null&&(r.callback=e),e=Gr(t,r,i),e!==null&&(li(e,t,i,n),Fh(e,t,i))}};function Bw(t,e,n,i,r,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!Lu(n,i)||!Lu(r,o):!0}function ZS(t,e,n){var i=!1,r=ns,o=e.contextType;return typeof o=="object"&&o!==null?o=qn(o):(r=dn(e)?eo:$t.current,i=e.contextTypes,o=(i=i!=null)?Da(t,r):ns),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=df,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function zw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&df.enqueueReplaceState(e,e.state,null)}function Wm(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},P_(t);var o=e.contextType;typeof o=="object"&&o!==null?r.context=qn(o):(o=dn(e)?eo:$t.current,r.context=Da(t,o)),r.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Hm(t,e,o,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&df.enqueueReplaceState(r,r.state,null),wd(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Fa(t,e){try{var n="",i=e;do n+=Fk(i),i=i.return;while(i);var r=n}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:r,digest:null}}function Lp(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function qm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hL=typeof WeakMap=="function"?WeakMap:Map;function QS(t,e,n){n=nr(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Pd||(Pd=!0,tg=i),qm(t,e)},n}function YS(t,e,n){n=nr(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){qm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){qm(t,e),typeof i!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function jw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new hL;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=PL.bind(null,t,e,n),e.then(t,t))}function Hw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ww(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nr(-1,1),e.tag=2,Gr(n,e,1))),n.lanes|=1),t)}var dL=gr.ReactCurrentOwner,cn=!1;function Xt(t,e,n,i){e.child=t===null?AS(e,null,n,i):Oa(e,t.child,n,i)}function qw(t,e,n,i,r){n=n.render;var o=e.ref;return Pa(e,r),i=k_(t,e,n,i,o,r),n=b_(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,cr(t,e,r)):(Ge&&n&&y_(e),e.flags|=1,Xt(t,e,i,r),e.child)}function $w(t,e,n,i,r){if(t===null){var o=n.type;return typeof o=="function"&&!z_(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,XS(t,e,o,i,r)):(t=Wh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&r)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Lu,n(a,i)&&t.ref===e.ref)return cr(t,e,r)}return e.flags|=1,t=Qr(o,i),t.ref=e.ref,t.return=e,e.child=t}function XS(t,e,n,i,r){if(t!==null){var o=t.memoizedProps;if(Lu(o,i)&&t.ref===e.ref)if(cn=!1,e.pendingProps=i=o,(t.lanes&r)!==0)t.flags&131072&&(cn=!0);else return e.lanes=t.lanes,cr(t,e,r)}return $m(t,e,n,i,r)}function JS(t,e,n){var i=e.pendingProps,r=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(pa,_n),_n|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(pa,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,He(pa,_n),_n|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,He(pa,_n),_n|=i;return Xt(t,e,r,n),e.child}function eP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $m(t,e,n,i,r){var o=dn(n)?eo:$t.current;return o=Da(e,o),Pa(e,r),n=k_(t,e,n,i,o,r),i=b_(),t!==null&&!cn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,cr(t,e,r)):(Ge&&i&&y_(e),e.flags|=1,Xt(t,e,n,r),e.child)}function Gw(t,e,n,i,r){if(dn(n)){var o=!0;md(e)}else o=!1;if(Pa(e,r),e.stateNode===null)zh(t,e),ZS(e,n,i),Wm(e,n,i,r),i=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,f=n.contextType;typeof f=="object"&&f!==null?f=qn(f):(f=dn(n)?eo:$t.current,f=Da(e,f));var m=n.getDerivedStateFromProps,_=typeof m=="function"||typeof a.getSnapshotBeforeUpdate=="function";_||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==i||h!==f)&&zw(e,a,i,f),Lr=!1;var v=e.memoizedState;a.state=v,wd(e,i,a,r),h=e.memoizedState,u!==i||v!==h||hn.current||Lr?(typeof m=="function"&&(Hm(e,n,m,i),h=e.memoizedState),(u=Lr||Bw(e,n,u,i,v,h,f))?(_||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=h),a.props=i,a.state=h,a.context=f,i=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,CS(t,e),u=e.memoizedProps,f=e.type===e.elementType?u:ni(e.type,u),a.props=f,_=e.pendingProps,v=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=qn(h):(h=dn(n)?eo:$t.current,h=Da(e,h));var I=n.getDerivedStateFromProps;(m=typeof I=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==_||v!==h)&&zw(e,a,i,h),Lr=!1,v=e.memoizedState,a.state=v,wd(e,i,a,r);var k=e.memoizedState;u!==_||v!==k||hn.current||Lr?(typeof I=="function"&&(Hm(e,n,I,i),k=e.memoizedState),(f=Lr||Bw(e,n,f,i,v,k,h)||!1)?(m||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,k,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,k,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=k),a.props=i,a.state=k,a.context=h,i=f):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&v===t.memoizedState||(e.flags|=1024),i=!1)}return Gm(t,e,n,i,o,r)}function Gm(t,e,n,i,r,o){eP(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&Lw(e,n,!1),cr(t,e,o);i=e.stateNode,dL.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=Oa(e,t.child,null,o),e.child=Oa(e,null,u,o)):Xt(t,e,u,o),e.memoizedState=i.state,r&&Lw(e,n,!0),e.child}function tP(t){var e=t.stateNode;e.pendingContext?bw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bw(t,e.context,!1),A_(t,e.containerInfo)}function Kw(t,e,n,i,r){return Ma(),w_(r),e.flags|=256,Xt(t,e,n,i),e.child}var Km={dehydrated:null,treeContext:null,retryLane:0};function Zm(t){return{baseLanes:t,cachePool:null,transitions:null}}function nP(t,e,n){var i=e.pendingProps,r=Ke.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),He(Ke,r&1),t===null)return zm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=mf(a,i,0,null),t=Qs(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Zm(n),e.memoizedState=Km,t):D_(e,a));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return fL(t,e,a,i,u,r,n);if(o){o=i.fallback,a=e.mode,r=t.child,u=r.sibling;var h={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=h,e.deletions=null):(i=Qr(r,h),i.subtreeFlags=r.subtreeFlags&14680064),u!==null?o=Qr(u,o):(o=Qs(o,a,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?Zm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=Km,i}return o=t.child,t=o.sibling,i=Qr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function D_(t,e){return e=mf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yh(t,e,n,i){return i!==null&&w_(i),Oa(e,t.child,null,n),t=D_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fL(t,e,n,i,r,o,a){if(n)return e.flags&256?(e.flags&=-257,i=Lp(Error(X(422))),yh(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,r=e.mode,i=mf({mode:"visible",children:i.children},r,0,null),o=Qs(o,r,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Oa(e,t.child,null,a),e.child.memoizedState=Zm(a),e.memoizedState=Km,o);if(!(e.mode&1))return yh(t,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var u=i.dgst;return i=u,o=Error(X(419)),i=Lp(o,i,void 0),yh(t,e,a,i)}if(u=(a&t.childLanes)!==0,cn||u){if(i=Ct,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,ur(t,r),li(i,t,r,-1))}return B_(),i=Lp(Error(X(421))),yh(t,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=AL.bind(null,t),r._reactRetry=e,null):(t=o.treeContext,vn=$r(r.nextSibling),Tn=e,Ge=!0,ri=null,t!==null&&(Un[Bn++]=Xi,Un[Bn++]=Ji,Un[Bn++]=to,Xi=t.id,Ji=t.overflow,to=e),e=D_(e,i.children),e.flags|=4096,e)}function Zw(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),jm(t.return,e,n)}function Np(t,e,n,i,r){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function iP(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Xt(t,e,i.children,n),i=Ke.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zw(t,n,e);else if(t.tag===19)Zw(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(He(Ke,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Td(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Np(e,!1,r,n,o);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Td(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Np(e,!0,n,null,o);break;case"together":Np(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),io|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=Qr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pL(t,e,n){switch(e.tag){case 3:tP(e),Ma();break;case 5:RS(e);break;case 1:dn(e.type)&&md(e);break;case 4:A_(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;He(yd,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(He(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?nP(t,e,n):(He(Ke,Ke.current&1),t=cr(t,e,n),t!==null?t.sibling:null);He(Ke,Ke.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return iP(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),He(Ke,Ke.current),i)break;return null;case 22:case 23:return e.lanes=0,JS(t,e,n)}return cr(t,e,n)}var rP,Qm,sP,oP;rP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Qm=function(){};sP=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,qs(Ci.current);var o=null;switch(n){case"input":r=ym(t,r),i=ym(t,i),o=[];break;case"select":r=Ye({},r,{value:void 0}),i=Ye({},i,{value:void 0}),o=[];break;case"textarea":r=Tm(t,r),i=Tm(t,i),o=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=fd)}Im(n,i);var a;n=null;for(f in r)if(!i.hasOwnProperty(f)&&r.hasOwnProperty(f)&&r[f]!=null)if(f==="style"){var u=r[f];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(Pu.hasOwnProperty(f)?o||(o=[]):(o=o||[]).push(f,null));for(f in i){var h=i[f];if(u=r!=null?r[f]:void 0,i.hasOwnProperty(f)&&h!==u&&(h!=null||u!=null))if(f==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(f,n)),n=h;else f==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(f,h)):f==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(f,""+h):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(Pu.hasOwnProperty(f)?(h!=null&&f==="onScroll"&&We("scroll",t),o||u===h||(o=[])):(o=o||[]).push(f,h))}n&&(o=o||[]).push("style",n);var f=o;(e.updateQueue=f)&&(e.flags|=4)}};oP=function(t,e,n,i){n!==i&&(e.flags|=4)};function jl(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function mL(t,e,n){var i=e.pendingProps;switch(v_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return dn(e.type)&&pd(),Ut(e),null;case 3:return i=e.stateNode,Va(),qe(hn),qe($t),C_(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(gh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ri!==null&&(rg(ri),ri=null))),Qm(t,e),Ut(e),null;case 5:x_(e);var r=qs(Vu.current);if(n=e.type,t!==null&&e.stateNode!=null)sP(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Ut(e),null}if(t=qs(Ci.current),gh(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Pi]=e,i[Mu]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",i),We("close",i);break;case"iframe":case"object":case"embed":We("load",i);break;case"video":case"audio":for(r=0;r<Zl.length;r++)We(Zl[r],i);break;case"source":We("error",i);break;case"img":case"image":case"link":We("error",i),We("load",i);break;case"details":We("toggle",i);break;case"input":rw(i,o),We("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},We("invalid",i);break;case"textarea":ow(i,o),We("invalid",i)}Im(n,o),r=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?i.textContent!==u&&(o.suppressHydrationWarning!==!0&&mh(i.textContent,u,t),r=["children",u]):typeof u=="number"&&i.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&mh(i.textContent,u,t),r=["children",""+u]):Pu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&We("scroll",i)}switch(n){case"input":ah(i),sw(i,o,!0);break;case"textarea":ah(i),aw(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=fd)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(n,{is:i.is}):(t=a.createElement(n),n==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,n),t[Pi]=e,t[Mu]=i,rP(t,e,!1,!1),e.stateNode=t;e:{switch(a=Sm(n,i),n){case"dialog":We("cancel",t),We("close",t),r=i;break;case"iframe":case"object":case"embed":We("load",t),r=i;break;case"video":case"audio":for(r=0;r<Zl.length;r++)We(Zl[r],t);r=i;break;case"source":We("error",t),r=i;break;case"img":case"image":case"link":We("error",t),We("load",t),r=i;break;case"details":We("toggle",t),r=i;break;case"input":rw(t,i),r=ym(t,i),We("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Ye({},i,{value:void 0}),We("invalid",t);break;case"textarea":ow(t,i),r=Tm(t,i),We("invalid",t);break;default:r=i}Im(n,r),u=r;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?VI(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&MI(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&Au(t,h):typeof h=="number"&&Au(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&We("scroll",t):h!=null&&r_(t,o,h,a))}switch(n){case"input":ah(t),sw(t,i,!1);break;case"textarea":ah(t),aw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ts(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?Ta(t,!!i.multiple,o,!1):i.defaultValue!=null&&Ta(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=fd)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)oP(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=qs(Vu.current),qs(Ci.current),gh(e)){if(i=e.stateNode,n=e.memoizedProps,i[Pi]=e,(o=i.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:mh(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mh(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Pi]=e,e.stateNode=i}return Ut(e),null;case 13:if(qe(Ke),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&vn!==null&&e.mode&1&&!(e.flags&128))SS(),Ma(),e.flags|=98560,o=!1;else if(o=gh(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(X(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(X(317));o[Pi]=e}else Ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),o=!1}else ri!==null&&(rg(ri),ri=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?vt===0&&(vt=3):B_())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return Va(),Qm(t,e),t===null&&Nu(e.stateNode.containerInfo),Ut(e),null;case 10:return I_(e.type._context),Ut(e),null;case 17:return dn(e.type)&&pd(),Ut(e),null;case 19:if(qe(Ke),o=e.memoizedState,o===null)return Ut(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)jl(o,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Td(t),a!==null){for(e.flags|=128,jl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Ke,Ke.current&1|2),e.child}t=t.sibling}o.tail!==null&&ut()>Ua&&(e.flags|=128,i=!0,jl(o,!1),e.lanes=4194304)}else{if(!i)if(t=Td(a),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ge)return Ut(e),null}else 2*ut()-o.renderingStartTime>Ua&&n!==1073741824&&(e.flags|=128,i=!0,jl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ut(),e.sibling=null,n=Ke.current,He(Ke,i?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return U_(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?_n&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function gL(t,e){switch(v_(e),e.tag){case 1:return dn(e.type)&&pd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Va(),qe(hn),qe($t),C_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return x_(e),null;case 13:if(qe(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return qe(Ke),null;case 4:return Va(),null;case 10:return I_(e.type._context),null;case 22:case 23:return U_(),null;case 24:return null;default:return null}}var vh=!1,Ht=!1,_L=typeof WeakSet=="function"?WeakSet:Set,se=null;function fa(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){nt(t,e,i)}else n.current=null}function Ym(t,e,n){try{n()}catch(i){nt(t,e,i)}}var Qw=!1;function yL(t,e){if(Dm=cd,t=hS(),__(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,f=0,m=0,_=t,v=null;t:for(;;){for(var I;_!==n||r!==0&&_.nodeType!==3||(u=a+r),_!==o||i!==0&&_.nodeType!==3||(h=a+i),_.nodeType===3&&(a+=_.nodeValue.length),(I=_.firstChild)!==null;)v=_,_=I;for(;;){if(_===t)break t;if(v===n&&++f===r&&(u=a),v===o&&++m===i&&(h=a),(I=_.nextSibling)!==null)break;_=v,v=_.parentNode}_=I}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Mm={focusedElem:t,selectionRange:n},cd=!1,se=e;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var k=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var b=k.memoizedProps,F=k.memoizedState,A=e.stateNode,P=A.getSnapshotBeforeUpdate(e.elementType===e.type?b:ni(e.type,b),F);A.__reactInternalSnapshotBeforeUpdate=P}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(B){nt(e,e.return,B)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return k=Qw,Qw=!1,k}function hu(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var o=r.destroy;r.destroy=void 0,o!==void 0&&Ym(e,n,o)}r=r.next}while(r!==i)}}function ff(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Xm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function aP(t){var e=t.alternate;e!==null&&(t.alternate=null,aP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pi],delete e[Mu],delete e[Fm],delete e[eL],delete e[tL])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lP(t){return t.tag===5||t.tag===3||t.tag===4}function Yw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jm(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fd));else if(i!==4&&(t=t.child,t!==null))for(Jm(t,e,n),t=t.sibling;t!==null;)Jm(t,e,n),t=t.sibling}function eg(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(eg(t,e,n),t=t.sibling;t!==null;)eg(t,e,n),t=t.sibling}var kt=null,ii=!1;function Cr(t,e,n){for(n=n.child;n!==null;)uP(t,e,n),n=n.sibling}function uP(t,e,n){if(xi&&typeof xi.onCommitFiberUnmount=="function")try{xi.onCommitFiberUnmount(sf,n)}catch{}switch(n.tag){case 5:Ht||fa(n,e);case 6:var i=kt,r=ii;kt=null,Cr(t,e,n),kt=i,ii=r,kt!==null&&(ii?(t=kt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):kt.removeChild(n.stateNode));break;case 18:kt!==null&&(ii?(t=kt,n=n.stateNode,t.nodeType===8?Ap(t.parentNode,n):t.nodeType===1&&Ap(t,n),ku(t)):Ap(kt,n.stateNode));break;case 4:i=kt,r=ii,kt=n.stateNode.containerInfo,ii=!0,Cr(t,e,n),kt=i,ii=r;break;case 0:case 11:case 14:case 15:if(!Ht&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var o=r,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Ym(n,e,a),r=r.next}while(r!==i)}Cr(t,e,n);break;case 1:if(!Ht&&(fa(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(u){nt(n,e,u)}Cr(t,e,n);break;case 21:Cr(t,e,n);break;case 22:n.mode&1?(Ht=(i=Ht)||n.memoizedState!==null,Cr(t,e,n),Ht=i):Cr(t,e,n);break;default:Cr(t,e,n)}}function Xw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new _L),e.forEach(function(i){var r=xL.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function ei(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:kt=u.stateNode,ii=!1;break e;case 3:kt=u.stateNode.containerInfo,ii=!0;break e;case 4:kt=u.stateNode.containerInfo,ii=!0;break e}u=u.return}if(kt===null)throw Error(X(160));uP(o,a,r),kt=null,ii=!1;var h=r.alternate;h!==null&&(h.return=null),r.return=null}catch(f){nt(r,e,f)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cP(e,t),e=e.sibling}function cP(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ei(e,t),Ei(t),i&4){try{hu(3,t,t.return),ff(3,t)}catch(b){nt(t,t.return,b)}try{hu(5,t,t.return)}catch(b){nt(t,t.return,b)}}break;case 1:ei(e,t),Ei(t),i&512&&n!==null&&fa(n,n.return);break;case 5:if(ei(e,t),Ei(t),i&512&&n!==null&&fa(n,n.return),t.flags&32){var r=t.stateNode;try{Au(r,"")}catch(b){nt(t,t.return,b)}}if(i&4&&(r=t.stateNode,r!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&LI(r,o),Sm(u,a);var f=Sm(u,o);for(a=0;a<h.length;a+=2){var m=h[a],_=h[a+1];m==="style"?VI(r,_):m==="dangerouslySetInnerHTML"?MI(r,_):m==="children"?Au(r,_):r_(r,m,_,f)}switch(u){case"input":vm(r,o);break;case"textarea":NI(r,o);break;case"select":var v=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var I=o.value;I!=null?Ta(r,!!o.multiple,I,!1):v!==!!o.multiple&&(o.defaultValue!=null?Ta(r,!!o.multiple,o.defaultValue,!0):Ta(r,!!o.multiple,o.multiple?[]:"",!1))}r[Mu]=o}catch(b){nt(t,t.return,b)}}break;case 6:if(ei(e,t),Ei(t),i&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,o=t.memoizedProps;try{r.nodeValue=o}catch(b){nt(t,t.return,b)}}break;case 3:if(ei(e,t),Ei(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ku(e.containerInfo)}catch(b){nt(t,t.return,b)}break;case 4:ei(e,t),Ei(t);break;case 13:ei(e,t),Ei(t),r=t.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||(V_=ut())),i&4&&Xw(t);break;case 22:if(m=n!==null&&n.memoizedState!==null,t.mode&1?(Ht=(f=Ht)||m,ei(e,t),Ht=f):ei(e,t),Ei(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!m&&t.mode&1)for(se=t,m=t.child;m!==null;){for(_=se=m;se!==null;){switch(v=se,I=v.child,v.tag){case 0:case 11:case 14:case 15:hu(4,v,v.return);break;case 1:fa(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){i=v,n=v.return;try{e=i,k.props=e.memoizedProps,k.state=e.memoizedState,k.componentWillUnmount()}catch(b){nt(i,n,b)}}break;case 5:fa(v,v.return);break;case 22:if(v.memoizedState!==null){e0(_);continue}}I!==null?(I.return=v,se=I):e0(_)}m=m.sibling}e:for(m=null,_=t;;){if(_.tag===5){if(m===null){m=_;try{r=_.stateNode,f?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=_.stateNode,h=_.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=OI("display",a))}catch(b){nt(t,t.return,b)}}}else if(_.tag===6){if(m===null)try{_.stateNode.nodeValue=f?"":_.memoizedProps}catch(b){nt(t,t.return,b)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===t)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===t)break e;for(;_.sibling===null;){if(_.return===null||_.return===t)break e;m===_&&(m=null),_=_.return}m===_&&(m=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:ei(e,t),Ei(t),i&4&&Xw(t);break;case 21:break;default:ei(e,t),Ei(t)}}function Ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lP(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Au(r,""),i.flags&=-33);var o=Yw(t);eg(t,o,r);break;case 3:case 4:var a=i.stateNode.containerInfo,u=Yw(t);Jm(t,u,a);break;default:throw Error(X(161))}}catch(h){nt(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vL(t,e,n){se=t,hP(t)}function hP(t,e,n){for(var i=(t.mode&1)!==0;se!==null;){var r=se,o=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||vh;if(!a){var u=r.alternate,h=u!==null&&u.memoizedState!==null||Ht;u=vh;var f=Ht;if(vh=a,(Ht=h)&&!f)for(se=r;se!==null;)a=se,h=a.child,a.tag===22&&a.memoizedState!==null?t0(r):h!==null?(h.return=a,se=h):t0(r);for(;o!==null;)se=o,hP(o),o=o.sibling;se=r,vh=u,Ht=f}Jw(t)}else r.subtreeFlags&8772&&o!==null?(o.return=r,se=o):Jw(t)}}function Jw(t){for(;se!==null;){var e=se;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ht||ff(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ht)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ni(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Vw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Vw(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var f=e.alternate;if(f!==null){var m=f.memoizedState;if(m!==null){var _=m.dehydrated;_!==null&&ku(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Ht||e.flags&512&&Xm(e)}catch(v){nt(e,e.return,v)}}if(e===t){se=null;break}if(n=e.sibling,n!==null){n.return=e.return,se=n;break}se=e.return}}function e0(t){for(;se!==null;){var e=se;if(e===t){se=null;break}var n=e.sibling;if(n!==null){n.return=e.return,se=n;break}se=e.return}}function t0(t){for(;se!==null;){var e=se;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ff(4,e)}catch(h){nt(e,n,h)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(h){nt(e,r,h)}}var o=e.return;try{Xm(e)}catch(h){nt(e,o,h)}break;case 5:var a=e.return;try{Xm(e)}catch(h){nt(e,a,h)}}}catch(h){nt(e,e.return,h)}if(e===t){se=null;break}var u=e.sibling;if(u!==null){u.return=e.return,se=u;break}se=e.return}}var wL=Math.ceil,Sd=gr.ReactCurrentDispatcher,M_=gr.ReactCurrentOwner,Wn=gr.ReactCurrentBatchConfig,ke=0,Ct=null,pt=null,Dt=0,_n=0,pa=ps(0),vt=0,zu=null,io=0,pf=0,O_=0,du=null,un=null,V_=0,Ua=1/0,Qi=null,Pd=!1,tg=null,Kr=null,wh=!1,zr=null,Ad=0,fu=0,ng=null,jh=-1,Hh=0;function Jt(){return ke&6?ut():jh!==-1?jh:jh=ut()}function Zr(t){return t.mode&1?ke&2&&Dt!==0?Dt&-Dt:iL.transition!==null?(Hh===0&&(Hh=ZI()),Hh):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:nS(t.type)),t):1}function li(t,e,n,i){if(50<fu)throw fu=0,ng=null,Error(X(185));rc(t,n,i),(!(ke&2)||t!==Ct)&&(t===Ct&&(!(ke&2)&&(pf|=n),vt===4&&Dr(t,Dt)),fn(t,i),n===1&&ke===0&&!(e.mode&1)&&(Ua=ut()+500,cf&&ms()))}function fn(t,e){var n=t.callbackNode;ib(t,e);var i=ud(t,t===Ct?Dt:0);if(i===0)n!==null&&cw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&cw(n),e===1)t.tag===0?nL(n0.bind(null,t)):TS(n0.bind(null,t)),Xb(function(){!(ke&6)&&ms()}),n=null;else{switch(QI(i)){case 1:n=u_;break;case 4:n=GI;break;case 16:n=ld;break;case 536870912:n=KI;break;default:n=ld}n=vP(n,dP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dP(t,e){if(jh=-1,Hh=0,ke&6)throw Error(X(327));var n=t.callbackNode;if(Aa()&&t.callbackNode!==n)return null;var i=ud(t,t===Ct?Dt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=xd(t,i);else{e=i;var r=ke;ke|=2;var o=pP();(Ct!==t||Dt!==e)&&(Qi=null,Ua=ut()+500,Zs(t,e));do try{IL();break}catch(u){fP(t,u)}while(!0);E_(),Sd.current=o,ke=r,pt!==null?e=0:(Ct=null,Dt=0,e=vt)}if(e!==0){if(e===2&&(r=Rm(t),r!==0&&(i=r,e=ig(t,r))),e===1)throw n=zu,Zs(t,0),Dr(t,i),fn(t,ut()),n;if(e===6)Dr(t,i);else{if(r=t.current.alternate,!(i&30)&&!TL(r)&&(e=xd(t,i),e===2&&(o=Rm(t),o!==0&&(i=o,e=ig(t,o))),e===1))throw n=zu,Zs(t,0),Dr(t,i),fn(t,ut()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:Us(t,un,Qi);break;case 3:if(Dr(t,i),(i&130023424)===i&&(e=V_+500-ut(),10<e)){if(ud(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Jt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Vm(Us.bind(null,t,un,Qi),e);break}Us(t,un,Qi);break;case 4:if(Dr(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var a=31-ai(i);o=1<<a,a=e[a],a>r&&(r=a),i&=~o}if(i=r,i=ut()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*wL(i/1960))-i,10<i){t.timeoutHandle=Vm(Us.bind(null,t,un,Qi),i);break}Us(t,un,Qi);break;case 5:Us(t,un,Qi);break;default:throw Error(X(329))}}}return fn(t,ut()),t.callbackNode===n?dP.bind(null,t):null}function ig(t,e){var n=du;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=xd(t,e),t!==2&&(e=un,un=n,e!==null&&rg(e)),t}function rg(t){un===null?un=t:un.push.apply(un,t)}function TL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ci(o(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dr(t,e){for(e&=~O_,e&=~pf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ai(e),i=1<<n;t[n]=-1,e&=~i}}function n0(t){if(ke&6)throw Error(X(327));Aa();var e=ud(t,0);if(!(e&1))return fn(t,ut()),null;var n=xd(t,e);if(t.tag!==0&&n===2){var i=Rm(t);i!==0&&(e=i,n=ig(t,i))}if(n===1)throw n=zu,Zs(t,0),Dr(t,e),fn(t,ut()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Us(t,un,Qi),fn(t,ut()),null}function F_(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ua=ut()+500,cf&&ms())}}function ro(t){zr!==null&&zr.tag===0&&!(ke&6)&&Aa();var e=ke;ke|=1;var n=Wn.transition,i=Fe;try{if(Wn.transition=null,Fe=1,t)return t()}finally{Fe=i,Wn.transition=n,ke=e,!(ke&6)&&ms()}}function U_(){_n=pa.current,qe(pa)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Yb(n)),pt!==null)for(n=pt.return;n!==null;){var i=n;switch(v_(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&pd();break;case 3:Va(),qe(hn),qe($t),C_();break;case 5:x_(i);break;case 4:Va();break;case 13:qe(Ke);break;case 19:qe(Ke);break;case 10:I_(i.type._context);break;case 22:case 23:U_()}n=n.return}if(Ct=t,pt=t=Qr(t.current,null),Dt=_n=e,vt=0,zu=null,O_=pf=io=0,un=du=null,Ws!==null){for(e=0;e<Ws.length;e++)if(n=Ws[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,o=n.pending;if(o!==null){var a=o.next;o.next=r,i.next=a}n.pending=i}Ws=null}return t}function fP(t,e){do{var n=pt;try{if(E_(),Uh.current=Id,Ed){for(var i=Qe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Ed=!1}if(no=0,xt=yt=Qe=null,cu=!1,Fu=0,M_.current=null,n===null||n.return===null){vt=1,zu=e,pt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Dt,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var f=h,m=u,_=m.tag;if(!(m.mode&1)&&(_===0||_===11||_===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var I=Hw(a);if(I!==null){I.flags&=-257,Ww(I,a,u,o,e),I.mode&1&&jw(o,f,e),e=I,h=f;var k=e.updateQueue;if(k===null){var b=new Set;b.add(h),e.updateQueue=b}else k.add(h);break e}else{if(!(e&1)){jw(o,f,e),B_();break e}h=Error(X(426))}}else if(Ge&&u.mode&1){var F=Hw(a);if(F!==null){!(F.flags&65536)&&(F.flags|=256),Ww(F,a,u,o,e),w_(Fa(h,u));break e}}o=h=Fa(h,u),vt!==4&&(vt=2),du===null?du=[o]:du.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var A=QS(o,h,e);Ow(o,A);break e;case 1:u=h;var P=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof P.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Kr===null||!Kr.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var B=YS(o,u,e);Ow(o,B);break e}}o=o.return}while(o!==null)}gP(n)}catch(q){e=q,pt===n&&n!==null&&(pt=n=n.return);continue}break}while(!0)}function pP(){var t=Sd.current;return Sd.current=Id,t===null?Id:t}function B_(){(vt===0||vt===3||vt===2)&&(vt=4),Ct===null||!(io&268435455)&&!(pf&268435455)||Dr(Ct,Dt)}function xd(t,e){var n=ke;ke|=2;var i=pP();(Ct!==t||Dt!==e)&&(Qi=null,Zs(t,e));do try{EL();break}catch(r){fP(t,r)}while(!0);if(E_(),ke=n,Sd.current=i,pt!==null)throw Error(X(261));return Ct=null,Dt=0,vt}function EL(){for(;pt!==null;)mP(pt)}function IL(){for(;pt!==null&&!Kk();)mP(pt)}function mP(t){var e=yP(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?gP(t):pt=e,M_.current=null}function gP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gL(n,e),n!==null){n.flags&=32767,pt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,pt=null;return}}else if(n=mL(n,e,_n),n!==null){pt=n;return}if(e=e.sibling,e!==null){pt=e;return}pt=e=t}while(e!==null);vt===0&&(vt=5)}function Us(t,e,n){var i=Fe,r=Wn.transition;try{Wn.transition=null,Fe=1,SL(t,e,n,i)}finally{Wn.transition=r,Fe=i}return null}function SL(t,e,n,i){do Aa();while(zr!==null);if(ke&6)throw Error(X(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(rb(t,o),t===Ct&&(pt=Ct=null,Dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wh||(wh=!0,vP(ld,function(){return Aa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Wn.transition,Wn.transition=null;var a=Fe;Fe=1;var u=ke;ke|=4,M_.current=null,yL(t,n),cP(n,t),Wb(Mm),cd=!!Dm,Mm=Dm=null,t.current=n,vL(n),Zk(),ke=u,Fe=a,Wn.transition=o}else t.current=n;if(wh&&(wh=!1,zr=t,Ad=r),o=t.pendingLanes,o===0&&(Kr=null),Xk(n.stateNode),fn(t,ut()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Pd)throw Pd=!1,t=tg,tg=null,t;return Ad&1&&t.tag!==0&&Aa(),o=t.pendingLanes,o&1?t===ng?fu++:(fu=0,ng=t):fu=0,ms(),null}function Aa(){if(zr!==null){var t=QI(Ad),e=Wn.transition,n=Fe;try{if(Wn.transition=null,Fe=16>t?16:t,zr===null)var i=!1;else{if(t=zr,zr=null,Ad=0,ke&6)throw Error(X(331));var r=ke;for(ke|=4,se=t.current;se!==null;){var o=se,a=o.child;if(se.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var f=u[h];for(se=f;se!==null;){var m=se;switch(m.tag){case 0:case 11:case 15:hu(8,m,o)}var _=m.child;if(_!==null)_.return=m,se=_;else for(;se!==null;){m=se;var v=m.sibling,I=m.return;if(aP(m),m===f){se=null;break}if(v!==null){v.return=I,se=v;break}se=I}}}var k=o.alternate;if(k!==null){var b=k.child;if(b!==null){k.child=null;do{var F=b.sibling;b.sibling=null,b=F}while(b!==null)}}se=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,se=a;else e:for(;se!==null;){if(o=se,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hu(9,o,o.return)}var A=o.sibling;if(A!==null){A.return=o.return,se=A;break e}se=o.return}}var P=t.current;for(se=P;se!==null;){a=se;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,se=x;else e:for(a=P;se!==null;){if(u=se,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:ff(9,u)}}catch(q){nt(u,u.return,q)}if(u===a){se=null;break e}var B=u.sibling;if(B!==null){B.return=u.return,se=B;break e}se=u.return}}if(ke=r,ms(),xi&&typeof xi.onPostCommitFiberRoot=="function")try{xi.onPostCommitFiberRoot(sf,t)}catch{}i=!0}return i}finally{Fe=n,Wn.transition=e}}return!1}function i0(t,e,n){e=Fa(n,e),e=QS(t,e,1),t=Gr(t,e,1),e=Jt(),t!==null&&(rc(t,1,e),fn(t,e))}function nt(t,e,n){if(t.tag===3)i0(t,t,n);else for(;e!==null;){if(e.tag===3){i0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Kr===null||!Kr.has(i))){t=Fa(n,t),t=YS(e,t,1),e=Gr(e,t,1),t=Jt(),e!==null&&(rc(e,1,t),fn(e,t));break}}e=e.return}}function PL(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Jt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Dt&n)===n&&(vt===4||vt===3&&(Dt&130023424)===Dt&&500>ut()-V_?Zs(t,0):O_|=n),fn(t,e)}function _P(t,e){e===0&&(t.mode&1?(e=ch,ch<<=1,!(ch&130023424)&&(ch=4194304)):e=1);var n=Jt();t=ur(t,e),t!==null&&(rc(t,e,n),fn(t,n))}function AL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_P(t,n)}function xL(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),_P(t,n)}var yP;yP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||hn.current)cn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return cn=!1,pL(t,e,n);cn=!!(t.flags&131072)}else cn=!1,Ge&&e.flags&1048576&&ES(e,_d,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;zh(t,e),t=e.pendingProps;var r=Da(e,$t.current);Pa(e,n),r=k_(null,e,i,t,r,n);var o=b_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dn(i)?(o=!0,md(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,P_(e),r.updater=df,e.stateNode=r,r._reactInternals=e,Wm(e,i,t,n),e=Gm(null,e,i,!0,o,n)):(e.tag=0,Ge&&o&&y_(e),Xt(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(zh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=RL(i),t=ni(i,t),r){case 0:e=$m(null,e,i,t,n);break e;case 1:e=Gw(null,e,i,t,n);break e;case 11:e=qw(null,e,i,t,n);break e;case 14:e=$w(null,e,i,ni(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),$m(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),Gw(t,e,i,r,n);case 3:e:{if(tP(e),t===null)throw Error(X(387));i=e.pendingProps,o=e.memoizedState,r=o.element,CS(t,e),wd(e,i,null,n);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=Fa(Error(X(423)),e),e=Kw(t,e,i,n,r);break e}else if(i!==r){r=Fa(Error(X(424)),e),e=Kw(t,e,i,n,r);break e}else for(vn=$r(e.stateNode.containerInfo.firstChild),Tn=e,Ge=!0,ri=null,n=AS(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ma(),i===r){e=cr(t,e,n);break e}Xt(t,e,i,n)}e=e.child}return e;case 5:return RS(e),t===null&&zm(e),i=e.type,r=e.pendingProps,o=t!==null?t.memoizedProps:null,a=r.children,Om(i,r)?a=null:o!==null&&Om(i,o)&&(e.flags|=32),eP(t,e),Xt(t,e,a,n),e.child;case 6:return t===null&&zm(e),null;case 13:return nP(t,e,n);case 4:return A_(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Oa(e,null,i,n):Xt(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),qw(t,e,i,r,n);case 7:return Xt(t,e,e.pendingProps,n),e.child;case 8:return Xt(t,e,e.pendingProps.children,n),e.child;case 12:return Xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,o=e.memoizedProps,a=r.value,He(yd,i._currentValue),i._currentValue=a,o!==null)if(ci(o.value,a)){if(o.children===r.children&&!hn.current){e=cr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===i){if(o.tag===1){h=nr(-1,n&-n),h.tag=2;var f=o.updateQueue;if(f!==null){f=f.shared;var m=f.pending;m===null?h.next=h:(h.next=m.next,m.next=h),f.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),jm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(X(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),jm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Xt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Pa(e,n),r=qn(r),i=i(r),e.flags|=1,Xt(t,e,i,n),e.child;case 14:return i=e.type,r=ni(i,e.pendingProps),r=ni(i.type,r),$w(t,e,i,r,n);case 15:return XS(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ni(i,r),zh(t,e),e.tag=1,dn(i)?(t=!0,md(e)):t=!1,Pa(e,n),ZS(e,i,r),Wm(e,i,r,n),Gm(null,e,i,!0,t,n);case 19:return iP(t,e,n);case 22:return JS(t,e,n)}throw Error(X(156,e.tag))};function vP(t,e){return $I(t,e)}function CL(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,e,n,i){return new CL(t,e,n,i)}function z_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function RL(t){if(typeof t=="function")return z_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===o_)return 11;if(t===a_)return 14}return 2}function Qr(t,e){var n=t.alternate;return n===null?(n=Hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wh(t,e,n,i,r,o){var a=2;if(i=t,typeof t=="function")z_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case ra:return Qs(n.children,r,o,e);case s_:a=8,r|=8;break;case pm:return t=Hn(12,n,e,r|2),t.elementType=pm,t.lanes=o,t;case mm:return t=Hn(13,n,e,r),t.elementType=mm,t.lanes=o,t;case gm:return t=Hn(19,n,e,r),t.elementType=gm,t.lanes=o,t;case RI:return mf(n,r,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xI:a=10;break e;case CI:a=9;break e;case o_:a=11;break e;case a_:a=14;break e;case br:a=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Hn(a,n,e,r),e.elementType=t,e.type=i,e.lanes=o,e}function Qs(t,e,n,i){return t=Hn(7,t,i,e),t.lanes=n,t}function mf(t,e,n,i){return t=Hn(22,t,i,e),t.elementType=RI,t.lanes=n,t.stateNode={isHidden:!1},t}function Dp(t,e,n){return t=Hn(6,t,null,e),t.lanes=n,t}function Mp(t,e,n){return e=Hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function kL(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mp(0),this.expirationTimes=mp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mp(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function j_(t,e,n,i,r,o,a,u,h){return t=new kL(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Hn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},P_(o),t}function bL(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ia,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function wP(t){if(!t)return ns;t=t._reactInternals;e:{if(po(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(dn(n))return wS(t,n,e)}return e}function TP(t,e,n,i,r,o,a,u,h){return t=j_(n,i,!0,t,r,o,a,u,h),t.context=wP(null),n=t.current,i=Jt(),r=Zr(n),o=nr(i,r),o.callback=e??null,Gr(n,o,r),t.current.lanes=r,rc(t,r,i),fn(t,i),t}function gf(t,e,n,i){var r=e.current,o=Jt(),a=Zr(r);return n=wP(n),e.context===null?e.context=n:e.pendingContext=n,e=nr(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Gr(r,e,a),t!==null&&(li(t,r,a,o),Fh(t,r,a)),a}function Cd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function r0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function H_(t,e){r0(t,e),(t=t.alternate)&&r0(t,e)}function LL(){return null}var EP=typeof reportError=="function"?reportError:function(t){console.error(t)};function W_(t){this._internalRoot=t}_f.prototype.render=W_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));gf(t,e,null,null)};_f.prototype.unmount=W_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){gf(null,t,null,null)}),e[lr]=null}};function _f(t){this._internalRoot=t}_f.prototype.unstable_scheduleHydration=function(t){if(t){var e=JI();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nr.length&&e!==0&&e<Nr[n].priority;n++);Nr.splice(n,0,t),n===0&&tS(t)}};function q_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function s0(){}function NL(t,e,n,i,r){if(r){if(typeof i=="function"){var o=i;i=function(){var f=Cd(a);o.call(f)}}var a=TP(e,i,t,0,null,!1,!1,"",s0);return t._reactRootContainer=a,t[lr]=a.current,Nu(t.nodeType===8?t.parentNode:t),ro(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var u=i;i=function(){var f=Cd(h);u.call(f)}}var h=j_(t,0,!1,null,null,!1,!1,"",s0);return t._reactRootContainer=h,t[lr]=h.current,Nu(t.nodeType===8?t.parentNode:t),ro(function(){gf(e,h,n,i)}),h}function vf(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o;if(typeof r=="function"){var u=r;r=function(){var h=Cd(a);u.call(h)}}gf(e,a,t,r)}else a=NL(n,e,t,r,i);return Cd(a)}YI=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Kl(e.pendingLanes);n!==0&&(c_(e,n|1),fn(e,ut()),!(ke&6)&&(Ua=ut()+500,ms()))}break;case 13:ro(function(){var i=ur(t,1);if(i!==null){var r=Jt();li(i,t,1,r)}}),H_(t,1)}};h_=function(t){if(t.tag===13){var e=ur(t,134217728);if(e!==null){var n=Jt();li(e,t,134217728,n)}H_(t,134217728)}};XI=function(t){if(t.tag===13){var e=Zr(t),n=ur(t,e);if(n!==null){var i=Jt();li(n,t,e,i)}H_(t,e)}};JI=function(){return Fe};eS=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};Am=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=uf(i);if(!r)throw Error(X(90));bI(i),vm(i,r)}}}break;case"textarea":NI(t,n);break;case"select":e=n.value,e!=null&&Ta(t,!!n.multiple,e,!1)}};BI=F_;zI=ro;var DL={usingClientEntryPoint:!1,Events:[oc,la,uf,FI,UI,F_]},Hl={findFiberByHostInstance:Hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ML={bundleType:Hl.bundleType,version:Hl.version,rendererPackageName:Hl.rendererPackageName,rendererConfig:Hl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=WI(t),t===null?null:t.stateNode},findFiberByHostInstance:Hl.findFiberByHostInstance||LL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Th.isDisabled&&Th.supportsFiber)try{sf=Th.inject(ML),xi=Th}catch{}}An.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DL;An.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!q_(e))throw Error(X(200));return bL(t,e,null,n)};An.createRoot=function(t,e){if(!q_(t))throw Error(X(299));var n=!1,i="",r=EP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=j_(t,1,!1,null,null,n,!1,i,r),t[lr]=e.current,Nu(t.nodeType===8?t.parentNode:t),new W_(e)};An.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=WI(e),t=t===null?null:t.stateNode,t};An.flushSync=function(t){return ro(t)};An.hydrate=function(t,e,n){if(!yf(e))throw Error(X(200));return vf(null,t,e,!0,n)};An.hydrateRoot=function(t,e,n){if(!q_(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,r=!1,o="",a=EP;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=TP(e,null,t,1,n??null,r,!1,o,a),t[lr]=e.current,Nu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new _f(e)};An.render=function(t,e,n){if(!yf(e))throw Error(X(200));return vf(null,t,e,!1,n)};An.unmountComponentAtNode=function(t){if(!yf(t))throw Error(X(40));return t._reactRootContainer?(ro(function(){vf(null,null,t,!1,function(){t._reactRootContainer=null,t[lr]=null})}),!0):!1};An.unstable_batchedUpdates=F_;An.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!yf(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return vf(t,e,n,!1,i)};An.version="18.3.1-next-f1338f8080-20240426";function IP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IP)}catch(t){console.error(t)}}IP(),II.exports=An;var SP=II.exports,o0=SP;dm.createRoot=o0.createRoot,dm.hydrateRoot=o0.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var OL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Rt=(t,e)=>{const n=Y.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:o=2,absoluteStrokeWidth:a,className:u="",children:h,...f},m)=>Y.createElement("svg",{ref:m,...OL,width:r,height:r,stroke:i,strokeWidth:a?Number(o)*24/Number(r):o,className:["lucide",`lucide-${VL(t)}`,u].join(" "),...f},[...e.map(([_,v])=>Y.createElement(_,v)),...Array.isArray(h)?h:[h]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=Rt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PP=Rt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=Rt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AP=Rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=Rt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=Rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=Rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xP=Rt("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=Rt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CP=Rt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=Rt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=Rt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=Rt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sg=Rt("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=Rt("PlusCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=Rt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=Rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $_=Rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);function ZL({activeTab:t,setActiveTab:e}){return V.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 pb-safe",children:V.jsxs("div",{className:"flex justify-around items-center h-16",children:[V.jsxs("button",{onClick:()=>e("home"),className:`flex flex-col items-center p-2 ${t==="home"?"text-primary-600":"text-gray-400"}`,children:[V.jsx(HL,{size:24}),V.jsx("span",{className:"text-xs mt-1",children:"Inicio"})]}),V.jsxs("button",{onClick:()=>e("report"),className:"flex flex-col items-center p-2 -mt-6",children:[V.jsx("div",{className:"bg-primary-600 rounded-full p-4 shadow-lg text-white transform transition-transform active:scale-95 border-4 border-white",children:V.jsx($L,{size:32})}),V.jsx("span",{className:"text-xs mt-1 text-gray-400",children:"Reportar"})]}),V.jsxs("button",{onClick:()=>e("profile"),className:`flex flex-col items-center p-2 ${t==="profile"?"text-primary-600":"text-gray-400"}`,children:[V.jsx($_,{size:24}),V.jsx("span",{className:"text-xs mt-1",children:"Perfil"})]})]})})}function QL({children:t,activeTab:e,setActiveTab:n}){return V.jsx("div",{className:"h-[100dvh] w-full bg-gray-100 flex justify-center overflow-hidden",children:V.jsxs("div",{className:"w-full max-w-md bg-white h-full shadow-2xl relative flex flex-col",children:[V.jsx("div",{className:"flex-1 overflow-y-auto pb-20 scrollbar-hide",children:t}),V.jsx("div",{className:"absolute bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-100",children:V.jsx(ZL,{activeTab:e,setActiveTab:n})})]})})}const YL=()=>{};var a0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kP=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},XL=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const o=t[n++];e[i++]=String.fromCharCode((r&31)<<6|o&63)}else if(r>239&&r<365){const o=t[n++],a=t[n++],u=t[n++],h=((r&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(o&63)<<6|a&63)}}return e.join("")},bP={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const o=t[r],a=r+1<t.length,u=a?t[r+1]:0,h=r+2<t.length,f=h?t[r+2]:0,m=o>>2,_=(o&3)<<4|u>>4;let v=(u&15)<<2|f>>6,I=f&63;h||(I=64,a||(v=64)),i.push(n[m],n[_],n[v],n[I])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(kP(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const o=n[t.charAt(r++)],u=r<t.length?n[t.charAt(r)]:0;++r;const f=r<t.length?n[t.charAt(r)]:64;++r;const _=r<t.length?n[t.charAt(r)]:64;if(++r,o==null||u==null||f==null||_==null)throw new JL;const v=o<<2|u>>4;if(i.push(v),f!==64){const I=u<<4&240|f>>2;if(i.push(I),_!==64){const k=f<<6&192|_;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JL extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eN=function(t){const e=kP(t);return bP.encodeByteArray(e,!0)},Rd=function(t){return eN(t).replace(/\./g,"")},LP=function(t){try{return bP.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=()=>tN().__FIREBASE_DEFAULTS__,iN=()=>{if(typeof process>"u"||typeof a0>"u")return;const t=a0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&LP(t[1]);return e&&JSON.parse(e)},wf=()=>{try{return YL()||nN()||iN()||rN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NP=t=>{var e,n;return(n=(e=wf())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},DP=t=>{const e=NP(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},MP=()=>{var t;return(t=wf())==null?void 0:t.config},OP=t=>{var e;return(e=wf())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gs(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Rd(JSON.stringify(n)),Rd(JSON.stringify(a)),""].join(".")}const pu={};function oN(){const t={prod:[],emulator:[]};for(const e of Object.keys(pu))pu[e]?t.emulator.push(e):t.prod.push(e);return t}function aN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let l0=!1;function K_(t,e){if(typeof window>"u"||typeof document>"u"||!gs(window.location.host)||pu[t]===e||pu[t]||l0)return;pu[t]=e;function n(v){return`__firebase__banner__${v}`}const i="__firebase__banner",o=oN().prod.length>0;function a(){const v=document.getElementById(i);v&&v.remove()}function u(v){v.style.display="flex",v.style.background="#7faaf0",v.style.position="fixed",v.style.bottom="5px",v.style.left="5px",v.style.padding=".5em",v.style.borderRadius="5px",v.style.alignItems="center"}function h(v,I){v.setAttribute("width","24"),v.setAttribute("id",I),v.setAttribute("height","24"),v.setAttribute("viewBox","0 0 24 24"),v.setAttribute("fill","none"),v.style.marginLeft="-6px"}function f(){const v=document.createElement("span");return v.style.cursor="pointer",v.style.marginLeft="16px",v.style.fontSize="24px",v.innerHTML=" &times;",v.onclick=()=>{l0=!0,a()},v}function m(v,I){v.setAttribute("id",I),v.innerText="Learn more",v.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",v.setAttribute("target","__blank"),v.style.paddingLeft="5px",v.style.textDecoration="underline"}function _(){const v=aN(i),I=n("text"),k=document.getElementById(I)||document.createElement("span"),b=n("learnmore"),F=document.getElementById(b)||document.createElement("a"),A=n("preprendIcon"),P=document.getElementById(A)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(v.created){const x=v.element;u(x),m(F,b);const B=f();h(P,A),x.append(P,k,F,B),document.body.appendChild(x)}o?(k.innerText="Preview backend disconnected.",P.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(P.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function uN(){var e;const t=(e=wf())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dN(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function fN(){return!uN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function UP(){try{return typeof indexedDB=="object"}catch{return!1}}function BP(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var o;e(((o=r.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}function pN(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN="FirebaseError";class Kn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=mN,Object.setPrototypeOf(this,Kn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mo.prototype.create)}}class mo{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,o=this.errors[e],a=o?gN(o,i):"Error",u=`${this.serviceName}: ${a} (${r}).`;return new Kn(r,u,i)}}function gN(t,e){return t.replace(_N,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const _N=/\{\$([^}]+)}/g;function yN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function is(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const o=t[r],a=e[r];if(u0(o)&&u0(a)){if(!is(o,a))return!1}else if(o!==a)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function u0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ql(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,o]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(o)}}),e}function Yl(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function vN(t,e){const n=new wN(t,e);return n.subscribe.bind(n)}class wN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");TN(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=Op),r.error===void 0&&(r.error=Op),r.complete===void 0&&(r.complete=Op);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Op(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN=1e3,IN=2,SN=4*60*60*1e3,PN=.5;function c0(t,e=EN,n=IN){const i=e*Math.pow(n,t),r=Math.round(PN*i*(Math.random()-.5)*2);return Math.min(SN,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t){return t&&t._delegate?t._delegate:t}class Gn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new sN;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CN(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:r});i.resolve(o)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);i===u&&a.resolve(r)}return r}onInit(e,n){const i=this.normalizeInstanceIdentifier(n),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const o=this.instances.get(i);return o&&e(o,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:xN(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xN(t){return t===Bs?void 0:t}function CN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new AN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const kN={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},bN=Se.INFO,LN={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},NN=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=LN[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Tf{constructor(e){this.name=e,this._logLevel=bN,this._logHandler=NN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}const DN=(t,e)=>e.some(n=>t instanceof n);let h0,d0;function MN(){return h0||(h0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ON(){return d0||(d0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const zP=new WeakMap,og=new WeakMap,jP=new WeakMap,Vp=new WeakMap,Z_=new WeakMap;function VN(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(Yr(t.result)),r()},a=()=>{i(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&zP.set(n,t)}).catch(()=>{}),Z_.set(e,t),e}function FN(t){if(og.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),r()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});og.set(t,e)}let ag={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return og.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jP.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UN(t){ag=t(ag)}function BN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Fp(this),e,...n);return jP.set(i,e.sort?e.sort():[e]),Yr(i)}:ON().includes(t)?function(...e){return t.apply(Fp(this),e),Yr(zP.get(this))}:function(...e){return Yr(t.apply(Fp(this),e))}}function zN(t){return typeof t=="function"?BN(t):(t instanceof IDBTransaction&&FN(t),DN(t,MN())?new Proxy(t,ag):t)}function Yr(t){if(t instanceof IDBRequest)return VN(t);if(Vp.has(t))return Vp.get(t);const e=zN(t);return e!==t&&(Vp.set(t,e),Z_.set(e,t)),e}const Fp=t=>Z_.get(t);function HP(t,e,{blocked:n,upgrade:i,blocking:r,terminated:o}={}){const a=indexedDB.open(t,e),u=Yr(a);return i&&a.addEventListener("upgradeneeded",h=>{i(Yr(a.result),h.oldVersion,h.newVersion,Yr(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const jN=["get","getKey","getAll","getAllKeys","count"],HN=["put","add","delete","clear"],Up=new Map;function f0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Up.get(e))return Up.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=HN.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||jN.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),r&&h.done]))[0]};return Up.set(e,o),o}UN(t=>({...t,get:(e,n,i)=>f0(e,n)||t.get(e,n,i),has:(e,n)=>!!f0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qN(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function qN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lg="@firebase/app",p0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new Tf("@firebase/app"),$N="@firebase/app-compat",GN="@firebase/analytics-compat",KN="@firebase/analytics",ZN="@firebase/app-check-compat",QN="@firebase/app-check",YN="@firebase/auth",XN="@firebase/auth-compat",JN="@firebase/database",e2="@firebase/data-connect",t2="@firebase/database-compat",n2="@firebase/functions",i2="@firebase/functions-compat",r2="@firebase/installations",s2="@firebase/installations-compat",o2="@firebase/messaging",a2="@firebase/messaging-compat",l2="@firebase/performance",u2="@firebase/performance-compat",c2="@firebase/remote-config",h2="@firebase/remote-config-compat",d2="@firebase/storage",f2="@firebase/storage-compat",p2="@firebase/firestore",m2="@firebase/ai",g2="@firebase/firestore-compat",_2="firebase",y2="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="[DEFAULT]",v2={[lg]:"fire-core",[$N]:"fire-core-compat",[KN]:"fire-analytics",[GN]:"fire-analytics-compat",[QN]:"fire-app-check",[ZN]:"fire-app-check-compat",[YN]:"fire-auth",[XN]:"fire-auth-compat",[JN]:"fire-rtdb",[e2]:"fire-data-connect",[t2]:"fire-rtdb-compat",[n2]:"fire-fn",[i2]:"fire-fn-compat",[r2]:"fire-iid",[s2]:"fire-iid-compat",[o2]:"fire-fcm",[a2]:"fire-fcm-compat",[l2]:"fire-perf",[u2]:"fire-perf-compat",[c2]:"fire-rc",[h2]:"fire-rc-compat",[d2]:"fire-gcs",[f2]:"fire-gcs-compat",[p2]:"fire-fst",[g2]:"fire-fst-compat",[m2]:"fire-vertex","fire-js":"fire-js",[_2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd=new Map,w2=new Map,cg=new Map;function m0(t,e){try{t.container.addComponent(e)}catch(n){hr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function hi(t){const e=t.name;if(cg.has(e))return hr.debug(`There were multiple attempts to register component ${e}.`),!1;cg.set(e,t);for(const n of kd.values())m0(n,t);for(const n of w2.values())m0(n,t);return!0}function _s(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new mo("app","Firebase",T2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e,n,i){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=y2;function WP(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i={name:ug,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Xr.create("bad-app-name",{appName:String(r)});if(n||(n=MP()),!n)throw Xr.create("no-options");const o=kd.get(r);if(o){if(is(n,o.options)&&is(i,o.config))return o;throw Xr.create("duplicate-app",{appName:r})}const a=new RN(r);for(const h of cg.values())a.addComponent(h);const u=new E2(n,i,a);return kd.set(r,u),u}function Ef(t=ug){const e=kd.get(t);if(!e&&t===ug&&MP())return WP();if(!e)throw Xr.create("no-app",{appName:t});return e}function pn(t,e,n){let i=v2[t]??t;n&&(i+=`-${n}`);const r=i.match(/\s|\//),o=e.match(/\s|\//);if(r||o){const a=[`Unable to register library "${i}" with version "${e}":`];r&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hr.warn(a.join(" "));return}hi(new Gn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="firebase-heartbeat-database",S2=1,ju="firebase-heartbeat-store";let Bp=null;function qP(){return Bp||(Bp=HP(I2,S2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ju)}catch(n){console.warn(n)}}}}).catch(t=>{throw Xr.create("idb-open",{originalErrorMessage:t.message})})),Bp}async function P2(t){try{const n=(await qP()).transaction(ju),i=await n.objectStore(ju).get($P(t));return await n.done,i}catch(e){if(e instanceof Kn)hr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hr.warn(n.message)}}}async function g0(t,e){try{const i=(await qP()).transaction(ju,"readwrite");await i.objectStore(ju).put(e,$P(t)),await i.done}catch(n){if(n instanceof Kn)hr.warn(n.message);else{const i=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});hr.warn(i.message)}}}function $P(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=1024,x2=30;class C2{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new k2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=_0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:r}),this._heartbeatsCache.heartbeats.length>x2){const a=b2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){hr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=_0(),{heartbeatsToSend:i,unsentEntries:r}=R2(this._heartbeatsCache.heartbeats),o=Rd(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return hr.warn(n),""}}}function _0(){return new Date().toISOString().substring(0,10)}function R2(t,e=A2){const n=[];let i=t.slice();for(const r of t){const o=n.find(a=>a.agent===r.agent);if(o){if(o.dates.push(r.date),y0(n)>e){o.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),y0(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class k2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return UP()?BP().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await P2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return g0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function y0(t){return Rd(JSON.stringify({version:2,heartbeats:t})).length}function b2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let i=1;i<t.length;i++)t[i].date<n&&(n=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L2(t){hi(new Gn("platform-logger",e=>new WN(e),"PRIVATE")),hi(new Gn("heartbeat",e=>new C2(e),"PRIVATE")),pn(lg,p0,t),pn(lg,p0,"esm2020"),pn("fire-js","")}L2("");function GP(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const N2=GP,KP=new mo("auth","Firebase",GP());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Tf("@firebase/auth");function D2(t,...e){bd.logLevel<=Se.WARN&&bd.warn(`Auth (${go}): ${t}`,...e)}function qh(t,...e){bd.logLevel<=Se.ERROR&&bd.error(`Auth (${go}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function di(t,...e){throw Q_(t,...e)}function Ri(t,...e){return Q_(t,...e)}function ZP(t,e,n){const i={...N2(),[e]:n};return new mo("auth","Firebase",i).create(e,{appName:t.name})}function ir(t){return ZP(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Q_(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return KP.create(t,...e)}function he(t,e,...n){if(!t)throw Q_(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw qh(e),new Error(e)}function dr(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function M2(){return v0()==="http:"||v0()==="https:"}function v0(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(M2()||FP()||"connection"in navigator)?navigator.onLine:!0}function V2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=lN()||hN()}get(){return O2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y_(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],B2=new uc(3e4,6e4);function ys(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vs(t,e,n,i,r={}){return YP(t,r,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const u=lc({key:t.config.apiKey,...a}).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const f={method:e,headers:h,...o};return cN()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&gs(t.emulatorConfig.host)&&(f.credentials="include"),QP.fetch()(await XP(t,t.config.apiHost,n,u),f)})}async function YP(t,e,n){t._canInitEmulator=!1;const i={...F2,...e};try{const r=new j2(t),o=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw Eh(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,f]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Eh(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw Eh(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw Eh(t,"user-disabled",a);const m=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ZP(t,m,f);di(t,m)}}catch(r){if(r instanceof Kn)throw r;di(t,"network-request-failed",{message:String(r)})}}async function cc(t,e,n,i,r={}){const o=await vs(t,e,n,i,r);return"mfaPendingCredential"in o&&di(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function XP(t,e,n,i){const r=`${e}${n}?${i}`,o=t,a=o.config.emulator?Y_(t.config,r):`${t.config.apiScheme}://${r}`;return U2.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}function z2(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Ri(this.auth,"network-request-failed")),B2.get())})}}function Eh(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Ri(t,e,i);return r.customData._tokenResponse=n,r}function w0(t){return t!==void 0&&t.enterprise!==void 0}class H2{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return z2(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function W2(t,e){return vs(t,"GET","/v2/recaptchaConfig",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q2(t,e){return vs(t,"POST","/v1/accounts:delete",e)}async function Ld(t,e){return vs(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function $2(t,e=!1){const n=it(t),i=await n.getIdToken(e),r=X_(i);he(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const o=typeof r.firebase=="object"?r.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:r,token:i,authTime:mu(zp(r.auth_time)),issuedAtTime:mu(zp(r.iat)),expirationTime:mu(zp(r.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function zp(t){return Number(t)*1e3}function X_(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return qh("JWT malformed, contained fewer than 3 sections"),null;try{const r=LP(n);return r?JSON.parse(r):(qh("Failed to decode base64 JWT payload"),null)}catch(r){return qh("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function T0(t){const e=X_(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hu(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Kn&&G2(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function G2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=mu(this.lastLoginAt),this.creationTime=mu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){var _;const e=t.auth,n=await t.getIdToken(),i=await Hu(t,Ld(e,{idToken:n}));he(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];t._notifyReloadListener(r);const o=(_=r.providerUserInfo)!=null&&_.length?JP(r.providerUserInfo):[],a=Q2(t.providerData,o),u=t.isAnonymous,h=!(t.email&&r.passwordHash)&&!(a!=null&&a.length),f=u?h:!1,m={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new dg(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(t,m)}async function Z2(t){const e=it(t);await Nd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Q2(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function JP(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y2(t,e){const n=await YP(t,{},async()=>{const i=lc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:o}=t.config,a=await XP(t,r,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:u,body:i};return t.emulatorConfig&&gs(t.emulatorConfig.host)&&(h.credentials="include"),QP.fetch()(a,h)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function X2(t,e){return vs(t,"POST","/v2/accounts:revokeToken",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):T0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){he(e.length!==0,"internal-error");const n=T0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:o}=await Y2(e,n);this.updateTokensAndExpiration(i,r,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:o}=n,a=new xa;return i&&(he(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),r&&(he(typeof r=="string","internal-error",{appName:e}),a.accessToken=r),o&&(he(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new xa,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rr(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class si{constructor({uid:e,auth:n,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new K2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new dg(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const n=await Hu(this,this.stsTokenManager.getToken(this.auth,e));return he(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return $2(this,e)}reload(){return Z2(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new si({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Nd(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(ir(this.auth));const e=await this.getIdToken();return await Hu(this,q2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const i=n.displayName??void 0,r=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,u=n.tenantId??void 0,h=n._redirectEventId??void 0,f=n.createdAt??void 0,m=n.lastLoginAt??void 0,{uid:_,emailVerified:v,isAnonymous:I,providerData:k,stsTokenManager:b}=n;he(_&&b,e,"internal-error");const F=xa.fromJSON(this.name,b);he(typeof _=="string",e,"internal-error"),Rr(i,e.name),Rr(r,e.name),he(typeof v=="boolean",e,"internal-error"),he(typeof I=="boolean",e,"internal-error"),Rr(o,e.name),Rr(a,e.name),Rr(u,e.name),Rr(h,e.name),Rr(f,e.name),Rr(m,e.name);const A=new si({uid:_,auth:e,email:r,emailVerified:v,displayName:i,isAnonymous:I,photoURL:a,phoneNumber:o,tenantId:u,stsTokenManager:F,createdAt:f,lastLoginAt:m});return k&&Array.isArray(k)&&(A.providerData=k.map(P=>({...P}))),h&&(A._redirectEventId=h),A}static async _fromIdTokenResponse(e,n,i=!1){const r=new xa;r.updateFromServerResponse(n);const o=new si({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Nd(o),o}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];he(r.localId!==void 0,"internal-error");const o=r.providerUserInfo!==void 0?JP(r.providerUserInfo):[],a=!(r.email&&r.passwordHash)&&!(o!=null&&o.length),u=new xa;u.updateFromIdToken(i);const h=new si({uid:r.localId,auth:e,stsTokenManager:u,isAnonymous:a}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:o,metadata:new dg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0=new Map;function tr(t){dr(t instanceof Function,"Expected a class definition");let e=E0.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,E0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}eA.type="NONE";const I0=eA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(t,e,n){return`firebase:${t}:${e}:${n}`}class Ca{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:o}=this.auth;this.fullUserKey=$h(this.userKey,r.apiKey,o),this.fullPersistenceKey=$h("persistence",r.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ld(this.auth,{idToken:e}).catch(()=>{});return n?si._fromGetAccountInfoResponse(this.auth,n,e):null}return si._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Ca(tr(I0),e,i);const r=(await Promise.all(n.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=r[0]||tr(I0);const a=$h(i,e.config.apiKey,e.name);let u=null;for(const f of n)try{const m=await f._get(a);if(m){let _;if(typeof m=="string"){const v=await Ld(e,{idToken:m}).catch(()=>{});if(!v)break;_=await si._fromGetAccountInfoResponse(e,v,m)}else _=si._fromJSON(e,m);f!==o&&(u=_),o=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new Ca(o,e,i):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async f=>{if(f!==o)try{await f._remove(a)}catch{}})),new Ca(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(rA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(tA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(oA(e))return"Blackberry";if(aA(e))return"Webos";if(nA(e))return"Safari";if((e.includes("chrome/")||iA(e))&&!e.includes("edge/"))return"Chrome";if(sA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function tA(t=Gt()){return/firefox\//i.test(t)}function nA(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function iA(t=Gt()){return/crios\//i.test(t)}function rA(t=Gt()){return/iemobile/i.test(t)}function sA(t=Gt()){return/android/i.test(t)}function oA(t=Gt()){return/blackberry/i.test(t)}function aA(t=Gt()){return/webos/i.test(t)}function J_(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function J2(t=Gt()){var e;return J_(t)&&!!((e=window.navigator)!=null&&e.standalone)}function eD(){return dN()&&document.documentMode===10}function lA(t=Gt()){return J_(t)||sA(t)||aA(t)||oA(t)||/windows phone/i.test(t)||rA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t,e=[]){let n;switch(t){case"Browser":n=S0(Gt());break;case"Worker":n=`${S0(Gt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${go}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD(t,e={}){return vs(t,"GET","/v2/passwordPolicy",ys(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD=6;class rD{constructor(e){var i;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??iD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new P0(this),this.idTokenSubscription=new P0(this),this.beforeStateQueue=new tD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KP,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{var i,r,o;if(!this._deleted&&(this.persistenceManager=await Ca.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ld(this,{idToken:e}),i=await si._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(yn(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Nd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=V2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(ir(this));const n=e?it(e):null;return n&&he(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(ir(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(ir(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nD(this),n=new rD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mo("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await X2(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tr(e)||this._popupRedirectResolver;he(n,this,"argument-error"),this.redirectPersistenceManager=await Ca.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,i,r);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var n;if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&D2(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _o(t){return it(t)}class P0{constructor(e){this.auth=e,this.observer=null,this.addObserver=vN(n=>this.observer=n)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oD(t){If=t}function cA(t){return If.loadJS(t)}function aD(){return If.recaptchaEnterpriseScript}function lD(){return If.gapiScript}function uD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class cD{constructor(){this.enterprise=new hD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class hD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const dD="recaptcha-enterprise",hA="NO_RECAPTCHA";class fD{constructor(e){this.type=dD,this.auth=_o(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,u)=>{W2(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new H2(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,a(f.siteKey)}}).catch(h=>{u(h)})})}function r(o,a,u){const h=window.grecaptcha;w0(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{a(f)}).catch(()=>{a(hA)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cD().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(u=>{if(!n&&w0(window.grecaptcha))r(u,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let h=aD();h.length!==0&&(h+=u),cA(h).then(()=>{r(u,o,a)}).catch(f=>{a(f)})}}).catch(u=>{a(u)})})}}async function A0(t,e,n,i=!1,r=!1){const o=new fD(t);let a;if(r)a=hA;else try{a=await o.verify(n)}catch{a=await o.verify(n,!0)}const u={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const h=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const h=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return i?Object.assign(u,{captchaResp:a}):Object.assign(u,{captchaResponse:a}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function fg(t,e,n,i,r){var o;if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await A0(t,e,n,n==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await A0(t,e,n,n==="getOobCode");return i(t,u)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){const n=_s(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),o=n.getOptions();if(is(o,e??{}))return r;di(r,"already-initialized")}return n.initialize({options:e})}function mD(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(tr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function gD(t,e,n){const i=_o(t);he(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,o=dA(e),{host:a,port:u}=_D(e),h=u===null?"":`:${u}`,f={url:`${o}//${a}${h}/`},m=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){he(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),he(is(f,i.config.emulator)&&is(m,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=m,i.settings.appVerificationDisabledForTesting=!0,gs(a)?(G_(`${o}//${a}${h}`),K_("Auth",!0)):yD()}function dA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _D(t){const e=dA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const o=r[1];return{host:o,port:x0(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:x0(a)}}}function x0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}async function vD(t,e){return vs(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wD(t,e){return cc(t,"POST","/v1/accounts:signInWithPassword",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TD(t,e){return cc(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}async function ED(t,e){return cc(t,"POST","/v1/accounts:signInWithEmailLink",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu extends ey{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Wu(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Wu(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fg(e,n,"signInWithPassword",wD);case"emailLink":return TD(e,{email:this._email,oobCode:this._password});default:di(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return fg(e,i,"signUpPassword",vD);case"emailLink":return ED(e,{idToken:n,email:this._email,oobCode:this._password});default:di(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ra(t,e){return cc(t,"POST","/v1/accounts:signInWithIdp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID="http://localhost";class so extends ey{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new so(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):di("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...o}=n;if(!i||!r)return null;const a=new so(i,r);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return Ra(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ra(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ra(e,n)}buildRequest(){const e={requestUri:ID,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=lc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function PD(t){const e=Ql(Yl(t)).link,n=e?Ql(Yl(e)).deep_link_id:null,i=Ql(Yl(t)).deep_link_id;return(i?Ql(Yl(i)).link:null)||i||n||e||t}class ty{constructor(e){const n=Ql(Yl(e)),i=n.apiKey??null,r=n.oobCode??null,o=SD(n.mode??null);he(i&&r&&o,"argument-error"),this.apiKey=i,this.operation=o,this.code=r,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=PD(e);try{return new ty(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(){this.providerId=Xa.PROVIDER_ID}static credential(e,n){return Wu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ty.parseLink(n);return he(i,"argument-error"),Wu._fromEmailAndCode(e,i.code,i.tenantId)}}Xa.PROVIDER_ID="password";Xa.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Xa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends fA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends hc{constructor(){super("facebook.com")}static credential(e){return so._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends hc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return so._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return Or.credential(n,i)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr extends hc{constructor(){super("github.com")}static credential(e){return so._fromParams({providerId:Vr.PROVIDER_ID,signInMethod:Vr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vr.credentialFromTaggedObject(e)}static credentialFromError(e){return Vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vr.credential(e.oauthAccessToken)}catch{return null}}}Vr.GITHUB_SIGN_IN_METHOD="github.com";Vr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends hc{constructor(){super("twitter.com")}static credential(e,n){return so._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Fr.credential(n,i)}catch{return null}}}Fr.TWITTER_SIGN_IN_METHOD="twitter.com";Fr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e){return cc(t,"POST","/v1/accounts:signUp",ys(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const o=await si._fromIdTokenResponse(e,i,r),a=C0(i);return new oo({user:o,providerId:a,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=C0(i);return new oo({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function C0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends Kn{constructor(e,n,i,r){super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Dd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Dd(e,n,i,r)}}function pA(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Dd._fromErrorAndOperation(t,o,e,i):o})}async function xD(t,e,n=!1){const i=await Hu(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(t,e,n=!1){const{auth:i}=t;if(yn(i.app))return Promise.reject(ir(i));const r="reauthenticate";try{const o=await Hu(t,pA(i,r,e,t),n);he(o.idToken,i,"internal-error");const a=X_(o.idToken);he(a,i,"internal-error");const{sub:u}=a;return he(t.uid===u,i,"user-mismatch"),oo._forOperation(t,r,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&di(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mA(t,e,n=!1){if(yn(t.app))return Promise.reject(ir(t));const i="signIn",r=await pA(t,i,e),o=await oo._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(o.user),o}async function RD(t,e){return mA(_o(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gA(t){const e=_o(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function kD(t,e,n){if(yn(t.app))return Promise.reject(ir(t));const i=_o(t),a=await fg(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",AD).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&gA(t),h}),u=await oo._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(u.user),u}function bD(t,e,n){return yn(t.app)?Promise.reject(ir(t)):RD(it(t),Xa.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&gA(t),i})}function LD(t,e,n,i){return it(t).onIdTokenChanged(e,n,i)}function ND(t,e,n){return it(t).beforeAuthStateChanged(e,n)}function DD(t,e,n,i){return it(t).onAuthStateChanged(e,n,i)}function MD(t){return it(t).signOut()}const Md="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Md,"1"),this.storage.removeItem(Md),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD=1e3,VD=10;class yA extends _A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=lA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const a=this.storage.getItem(i);!n&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);eD()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,VD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},OD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}yA.type="LOCAL";const FD=yA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA extends _A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}vA.type="SESSION";const wA=vA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new Sf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:o}=n.data,a=this.handlersMap[r];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const u=Array.from(a).map(async f=>f(n.origin,o)),h=await UD(u);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const f=ny("",20);r.port1.start();const m=setTimeout(()=>{h(new Error("unsupported_event"))},i);a={messageChannel:r,onMessage(_){const v=_;if(v.data.eventId===f)switch(v.data.status){case"ack":clearTimeout(m),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(v.data.response);break;default:clearTimeout(m),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),r.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:f,data:n},[r.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ki(){return window}function zD(t){ki().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(){return typeof ki().WorkerGlobalScope<"u"&&typeof ki().importScripts=="function"}async function jD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function WD(){return TA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="firebaseLocalStorageDb",qD=1,Od="firebaseLocalStorage",IA="fbase_key";class dc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pf(t,e){return t.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function $D(){const t=indexedDB.deleteDatabase(EA);return new dc(t).toPromise()}function pg(){const t=indexedDB.open(EA,qD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Od,{keyPath:IA})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Od)?e(i):(i.close(),await $D(),e(await pg()))})})}async function R0(t,e,n){const i=Pf(t,!0).put({[IA]:e,value:n});return new dc(i).toPromise()}async function GD(t,e){const n=Pf(t,!1).get(e),i=await new dc(n).toPromise();return i===void 0?null:i.value}function k0(t,e){const n=Pf(t,!0).delete(e);return new dc(n).toPromise()}const KD=800,ZD=3;class SA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await pg(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>ZD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sf._getInstance(WD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,i;if(this.activeServiceWorker=await jD(),!this.activeServiceWorker)return;this.sender=new BD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await pg();return await R0(e,Md,"1"),await k0(e,Md),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>R0(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>GD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>k0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const o=Pf(r,!1).getAll();return new dc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:o}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(o)&&(this.notifyListeners(r,o),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}SA.type="LOCAL";const QD=SA;new uc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(t,e){return e?tr(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends ey{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ra(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ra(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ra(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XD(t){return mA(t.auth,new iy(t),t.bypassAuthState)}function JD(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),CD(n,new iy(t),t.bypassAuthState)}async function eM(t){const{auth:e,user:n}=t;return he(n,e,"internal-error"),xD(n,new iy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,n,i,r,o=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XD;case"linkViaPopup":case"linkViaRedirect":return eM;case"reauthViaPopup":case"reauthViaRedirect":return JD;default:di(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tM=new uc(2e3,1e4);class ma extends PA{constructor(e,n,i,r,o){super(e,n,r,o),this.provider=i,this.authWindow=null,this.pollId=null,ma.currentPopupAction&&ma.currentPopupAction.cancel(),ma.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=ny();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ri(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ri(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ma.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if((i=(n=this.authWindow)==null?void 0:n.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ri(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tM.get())};e()}}ma.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM="pendingRedirect",Gh=new Map;class iM extends PA{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Gh.get(this.auth._key());if(!e){try{const i=await rM(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Gh.set(this.auth._key(),e)}return this.bypassAuthState||Gh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rM(t,e){const n=aM(e),i=oM(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function sM(t,e){Gh.set(t._key(),e)}function oM(t){return tr(t._redirectPersistence)}function aM(t){return $h(nM,t.config.apiKey,t.name)}async function lM(t,e,n=!1){if(yn(t.app))return Promise.reject(ir(t));const i=_o(t),r=YD(i,e),a=await new iM(i,r,n).execute();return a&&!n&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uM=10*60*1e3;class cM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hM(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!AA(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";n.onError(Ri(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uM&&this.cachedEventUids.clear(),this.cachedEventUids.has(b0(e))}saveEventToCache(e){this.cachedEventUids.add(b0(e)),this.lastProcessedEventTime=Date.now()}}function b0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function hM(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(t,e={}){return vs(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fM=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pM=/^https?/;async function mM(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dM(t);for(const n of e)try{if(gM(n))return}catch{}di(t,"unauthorized-domain")}function gM(t){const e=hg(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===i}if(!pM.test(n))return!1;if(fM.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=new uc(3e4,6e4);function L0(){const t=ki().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function yM(t){return new Promise((e,n)=>{var r,o,a;function i(){L0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{L0(),n(Ri(t,"network-request-failed"))},timeout:_M.get()})}if((o=(r=ki().gapi)==null?void 0:r.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=ki().gapi)!=null&&a.load)i();else{const u=uD("iframefcb");return ki()[u]=()=>{gapi.load?i():n(Ri(t,"network-request-failed"))},cA(`${lD()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Kh=null,e})}let Kh=null;function vM(t){return Kh=Kh||yM(t),Kh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM=new uc(5e3,15e3),TM="__/auth/iframe",EM="emulator/auth/iframe",IM={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},SM=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PM(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Y_(e,EM):`https://${t.config.authDomain}/${TM}`,i={apiKey:e.apiKey,appName:t.name,v:go},r=SM.get(t.config.apiHost);r&&(i.eid=r);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${lc(i).slice(1)}`}async function AM(t){const e=await vM(t),n=ki().gapi;return he(n,t,"internal-error"),e.open({where:document.body,url:PM(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IM,dontclear:!0},i=>new Promise(async(r,o)=>{await i.restyle({setHideOnLeave:!1});const a=Ri(t,"network-request-failed"),u=ki().setTimeout(()=>{o(a)},wM.get());function h(){ki().clearTimeout(u),r(i)}i.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CM=500,RM=600,kM="_blank",bM="http://localhost";class N0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function LM(t,e,n,i=CM,r=RM){const o=Math.max((window.screen.availHeight-r)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let u="";const h={...xM,width:i.toString(),height:r.toString(),top:o,left:a},f=Gt().toLowerCase();n&&(u=iA(f)?kM:n),tA(f)&&(e=e||bM,h.scrollbars="yes");const m=Object.entries(h).reduce((v,[I,k])=>`${v}${I}=${k},`,"");if(J2(f)&&u!=="_self")return NM(e||"",u),new N0(null);const _=window.open(e||"",u,m);he(_,t,"popup-blocked");try{_.focus()}catch{}return new N0(_)}function NM(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DM="__/auth/handler",MM="emulator/auth/handler",OM=encodeURIComponent("fac");async function D0(t,e,n,i,r,o){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:go,eventId:r};if(e instanceof fA){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",yN(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[m,_]of Object.entries({}))a[m]=_}if(e instanceof hc){const m=e.getScopes().filter(_=>_!=="");m.length>0&&(a.scopes=m.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const m of Object.keys(u))u[m]===void 0&&delete u[m];const h=await t._getAppCheckToken(),f=h?`#${OM}=${encodeURIComponent(h)}`:"";return`${VM(t)}?${lc(u).slice(1)}${f}`}function VM({config:t}){return t.emulator?Y_(t,MM):`https://${t.authDomain}/${DM}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="webStorageSupport";class FM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wA,this._completeRedirectFn=lM,this._overrideRedirectResult=sM}async _openPopup(e,n,i,r){var a;dr((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await D0(e,n,i,hg(),r);return LM(e,o,ny())}async _openRedirect(e,n,i,r){await this._originValidation(e);const o=await D0(e,n,i,hg(),r);return zD(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:o}=this.eventManagers[n];return r?Promise.resolve(r):(dr(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await AM(e),i=new cM(e);return n.register("authEvent",r=>(he(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(jp,{type:jp},r=>{var a;const o=(a=r==null?void 0:r[0])==null?void 0:a[jp];o!==void 0&&n(!!o),di(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=mM(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return lA()||nA()||J_()}}const UM=FM;var M0="@firebase/auth",O0="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jM(t){hi(new Gn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=i.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uA(t)},f=new sD(i,r,o,h);return mD(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),hi(new Gn("auth-internal",e=>{const n=_o(e.getProvider("auth").getImmediate());return(i=>new BM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),pn(M0,O0,zM(t)),pn(M0,O0,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HM=5*60,WM=OP("authIdTokenMaxAge")||HM;let V0=null;const qM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>WM)return;const r=n==null?void 0:n.token;V0!==r&&(V0=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function $M(t=Ef()){const e=_s(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pD(t,{popupRedirectResolver:UM,persistence:[QD,FD,wA]}),i=OP("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=qM(o.toString());ND(n,a,()=>a(n.currentUser)),LD(n,u=>a(u))}}const r=NP("auth");return r&&gD(n,`http://${r}`),n}function GM(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}oD({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const o=Ri("internal-error");o.customData=r,n(o)},i.type="text/javascript",i.charset="UTF-8",GM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jM("Browser");var F0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jr,xA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function R(){}R.prototype=E.prototype,C.F=E.prototype,C.prototype=new R,C.prototype.constructor=C,C.D=function(N,O,U){for(var D=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)D[Ne-2]=arguments[Ne];return E.prototype[O].apply(N,D)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,n),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,E,R){R||(R=0);const N=Array(16);if(typeof E=="string")for(var O=0;O<16;++O)N[O]=E.charCodeAt(R++)|E.charCodeAt(R++)<<8|E.charCodeAt(R++)<<16|E.charCodeAt(R++)<<24;else for(O=0;O<16;++O)N[O]=E[R++]|E[R++]<<8|E[R++]<<16|E[R++]<<24;E=C.g[0],R=C.g[1],O=C.g[2];let U=C.g[3],D;D=E+(U^R&(O^U))+N[0]+3614090360&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[1]+3905402710&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[2]+606105819&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[3]+3250441966&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(U^R&(O^U))+N[4]+4118548399&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[5]+1200080426&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[6]+2821735955&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[7]+4249261313&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(U^R&(O^U))+N[8]+1770035416&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[9]+2336552879&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[10]+4294925233&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[11]+2304563134&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(U^R&(O^U))+N[12]+1804603682&4294967295,E=R+(D<<7&4294967295|D>>>25),D=U+(O^E&(R^O))+N[13]+4254626195&4294967295,U=E+(D<<12&4294967295|D>>>20),D=O+(R^U&(E^R))+N[14]+2792965006&4294967295,O=U+(D<<17&4294967295|D>>>15),D=R+(E^O&(U^E))+N[15]+1236535329&4294967295,R=O+(D<<22&4294967295|D>>>10),D=E+(O^U&(R^O))+N[1]+4129170786&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[6]+3225465664&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[11]+643717713&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[0]+3921069994&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(O^U&(R^O))+N[5]+3593408605&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[10]+38016083&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[15]+3634488961&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[4]+3889429448&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(O^U&(R^O))+N[9]+568446438&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[14]+3275163606&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[3]+4107603335&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[8]+1163531501&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(O^U&(R^O))+N[13]+2850285829&4294967295,E=R+(D<<5&4294967295|D>>>27),D=U+(R^O&(E^R))+N[2]+4243563512&4294967295,U=E+(D<<9&4294967295|D>>>23),D=O+(E^R&(U^E))+N[7]+1735328473&4294967295,O=U+(D<<14&4294967295|D>>>18),D=R+(U^E&(O^U))+N[12]+2368359562&4294967295,R=O+(D<<20&4294967295|D>>>12),D=E+(R^O^U)+N[5]+4294588738&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[8]+2272392833&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[11]+1839030562&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[14]+4259657740&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(R^O^U)+N[1]+2763975236&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[4]+1272893353&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[7]+4139469664&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[10]+3200236656&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(R^O^U)+N[13]+681279174&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[0]+3936430074&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[3]+3572445317&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[6]+76029189&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(R^O^U)+N[9]+3654602809&4294967295,E=R+(D<<4&4294967295|D>>>28),D=U+(E^R^O)+N[12]+3873151461&4294967295,U=E+(D<<11&4294967295|D>>>21),D=O+(U^E^R)+N[15]+530742520&4294967295,O=U+(D<<16&4294967295|D>>>16),D=R+(O^U^E)+N[2]+3299628645&4294967295,R=O+(D<<23&4294967295|D>>>9),D=E+(O^(R|~U))+N[0]+4096336452&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[7]+1126891415&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[14]+2878612391&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[5]+4237533241&4294967295,R=O+(D<<21&4294967295|D>>>11),D=E+(O^(R|~U))+N[12]+1700485571&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[3]+2399980690&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[10]+4293915773&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[1]+2240044497&4294967295,R=O+(D<<21&4294967295|D>>>11),D=E+(O^(R|~U))+N[8]+1873313359&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[15]+4264355552&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[6]+2734768916&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[13]+1309151649&4294967295,R=O+(D<<21&4294967295|D>>>11),D=E+(O^(R|~U))+N[4]+4149444226&4294967295,E=R+(D<<6&4294967295|D>>>26),D=U+(R^(E|~O))+N[11]+3174756917&4294967295,U=E+(D<<10&4294967295|D>>>22),D=O+(E^(U|~R))+N[2]+718787259&4294967295,O=U+(D<<15&4294967295|D>>>17),D=R+(U^(O|~E))+N[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(O+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+O&4294967295,C.g[3]=C.g[3]+U&4294967295}i.prototype.v=function(C,E){E===void 0&&(E=C.length);const R=E-this.blockSize,N=this.C;let O=this.h,U=0;for(;U<E;){if(O==0)for(;U<=R;)r(this,C,U),U+=this.blockSize;if(typeof C=="string"){for(;U<E;)if(N[O++]=C.charCodeAt(U++),O==this.blockSize){r(this,N),O=0;break}}else for(;U<E;)if(N[O++]=C[U++],O==this.blockSize){r(this,N),O=0;break}}this.h=O,this.o+=E},i.prototype.A=function(){var C=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;E=this.o*8;for(var R=C.length-8;R<C.length;++R)C[R]=E&255,E/=256;for(this.v(C),C=Array(16),E=0,R=0;R<4;++R)for(let N=0;N<32;N+=8)C[E++]=this.g[R]>>>N&255;return C};function o(C,E){var R=u;return Object.prototype.hasOwnProperty.call(R,C)?R[C]:R[C]=E(C)}function a(C,E){this.h=E;const R=[];let N=!0;for(let O=C.length-1;O>=0;O--){const U=C[O]|0;N&&U==E||(R[O]=U,N=!1)}this.g=R}var u={};function h(C){return-128<=C&&C<128?o(C,function(E){return new a([E|0],E<0?-1:0)}):new a([C|0],C<0?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return _;if(C<0)return F(f(-C));const E=[];let R=1;for(let N=0;C>=R;N++)E[N]=C/R|0,R*=4294967296;return new a(E,0)}function m(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return F(m(C.substring(1),E));if(C.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=f(Math.pow(E,8));let N=_;for(let U=0;U<C.length;U+=8){var O=Math.min(8,C.length-U);const D=parseInt(C.substring(U,U+O),E);O<8?(O=f(Math.pow(E,O)),N=N.j(O).add(f(D))):(N=N.j(R),N=N.add(f(D)))}return N}var _=h(0),v=h(1),I=h(16777216);t=a.prototype,t.m=function(){if(b(this))return-F(this).m();let C=0,E=1;for(let R=0;R<this.g.length;R++){const N=this.i(R);C+=(N>=0?N:4294967296+N)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(k(this))return"0";if(b(this))return"-"+F(this).toString(C);const E=f(Math.pow(C,6));var R=this;let N="";for(;;){const O=B(R,E).g;R=A(R,O.j(E));let U=((R.g.length>0?R.g[0]:R.h)>>>0).toString(C);if(R=O,k(R))return U+N;for(;U.length<6;)U="0"+U;N=U+N}},t.i=function(C){return C<0?0:C<this.g.length?this.g[C]:this.h};function k(C){if(C.h!=0)return!1;for(let E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function b(C){return C.h==-1}t.l=function(C){return C=A(this,C),b(C)?-1:k(C)?0:1};function F(C){const E=C.g.length,R=[];for(let N=0;N<E;N++)R[N]=~C.g[N];return new a(R,~C.h).add(v)}t.abs=function(){return b(this)?F(this):this},t.add=function(C){const E=Math.max(this.g.length,C.g.length),R=[];let N=0;for(let O=0;O<=E;O++){let U=N+(this.i(O)&65535)+(C.i(O)&65535),D=(U>>>16)+(this.i(O)>>>16)+(C.i(O)>>>16);N=D>>>16,U&=65535,D&=65535,R[O]=D<<16|U}return new a(R,R[R.length-1]&-2147483648?-1:0)};function A(C,E){return C.add(F(E))}t.j=function(C){if(k(this)||k(C))return _;if(b(this))return b(C)?F(this).j(F(C)):F(F(this).j(C));if(b(C))return F(this.j(F(C)));if(this.l(I)<0&&C.l(I)<0)return f(this.m()*C.m());const E=this.g.length+C.g.length,R=[];for(var N=0;N<2*E;N++)R[N]=0;for(N=0;N<this.g.length;N++)for(let O=0;O<C.g.length;O++){const U=this.i(N)>>>16,D=this.i(N)&65535,Ne=C.i(O)>>>16,Cn=C.i(O)&65535;R[2*N+2*O]+=D*Cn,P(R,2*N+2*O),R[2*N+2*O+1]+=U*Cn,P(R,2*N+2*O+1),R[2*N+2*O+1]+=D*Ne,P(R,2*N+2*O+1),R[2*N+2*O+2]+=U*Ne,P(R,2*N+2*O+2)}for(C=0;C<E;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=E;C<2*E;C++)R[C]=0;return new a(R,0)};function P(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function x(C,E){this.g=C,this.h=E}function B(C,E){if(k(E))throw Error("division by zero");if(k(C))return new x(_,_);if(b(C))return E=B(F(C),E),new x(F(E.g),F(E.h));if(b(E))return E=B(C,F(E)),new x(F(E.g),E.h);if(C.g.length>30){if(b(C)||b(E))throw Error("slowDivide_ only works with positive integers.");for(var R=v,N=E;N.l(C)<=0;)R=q(R),N=q(N);var O=K(R,1),U=K(N,1);for(N=K(N,2),R=K(R,2);!k(N);){var D=U.add(N);D.l(C)<=0&&(O=O.add(R),U=D),N=K(N,1),R=K(R,1)}return E=A(C,O.j(E)),new x(O,E)}for(O=_;C.l(E)>=0;){for(R=Math.max(1,Math.floor(C.m()/E.m())),N=Math.ceil(Math.log(R)/Math.LN2),N=N<=48?1:Math.pow(2,N-48),U=f(R),D=U.j(E);b(D)||D.l(C)>0;)R-=N,U=f(R),D=U.j(E);k(U)&&(U=v),O=O.add(U),C=A(C,D)}return new x(O,C)}t.B=function(C){return B(this,C).h},t.and=function(C){const E=Math.max(this.g.length,C.g.length),R=[];for(let N=0;N<E;N++)R[N]=this.i(N)&C.i(N);return new a(R,this.h&C.h)},t.or=function(C){const E=Math.max(this.g.length,C.g.length),R=[];for(let N=0;N<E;N++)R[N]=this.i(N)|C.i(N);return new a(R,this.h|C.h)},t.xor=function(C){const E=Math.max(this.g.length,C.g.length),R=[];for(let N=0;N<E;N++)R[N]=this.i(N)^C.i(N);return new a(R,this.h^C.h)};function q(C){const E=C.g.length+1,R=[];for(let N=0;N<E;N++)R[N]=C.i(N)<<1|C.i(N-1)>>>31;return new a(R,C.h)}function K(C,E){const R=E>>5;E%=32;const N=C.g.length-R,O=[];for(let U=0;U<N;U++)O[U]=E>0?C.i(U+R)>>>E|C.i(U+R+1)<<32-E:C.i(U+R);return new a(O,C.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,xA=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=m,Jr=a}).apply(typeof F0<"u"?F0:typeof self<"u"?self:typeof window<"u"?window:{});var Ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var CA,Xl,RA,Zh,mg,kA,bA,LA;(function(){var t,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ih=="object"&&Ih];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function r(c,g){if(g)e:{var w=i;c=c.split(".");for(var S=0;S<c.length-1;S++){var z=c[S];if(!(z in w))break e;w=w[z]}c=c[c.length-1],S=w[c],g=g(S),g!=S&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}r("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(c){return c||function(g){var w=[],S;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&w.push([S,g[S]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function h(c,g,w){return c.call.apply(c.bind,arguments)}function f(c,g,w){return f=h,f.apply(null,arguments)}function m(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var S=w.slice();return S.push.apply(S,arguments),c.apply(this,S)}}function _(c,g){function w(){}w.prototype=g.prototype,c.Z=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Ob=function(S,z,H){for(var ee=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)ee[ge-2]=arguments[ge];return g.prototype[z].apply(S,ee)}}var v=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function I(c){const g=c.length;if(g>0){const w=Array(g);for(let S=0;S<g;S++)w[S]=c[S];return w}return[]}function k(c,g){for(let S=1;S<arguments.length;S++){const z=arguments[S];var w=typeof z;if(w=w!="object"?w:z?Array.isArray(z)?"array":w:"null",w=="array"||w=="object"&&typeof z.length=="number"){w=c.length||0;const H=z.length||0;c.length=w+H;for(let ee=0;ee<H;ee++)c[w+ee]=z[ee]}else c.push(z)}}class b{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function F(c){a.setTimeout(()=>{throw c},0)}function A(){var c=C;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class P{constructor(){this.h=this.g=null}add(g,w){const S=x.get();S.set(g,w),this.h?this.h.next=S:this.g=S,this.h=S}}var x=new b(()=>new B,c=>c.reset());class B{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let q,K=!1,C=new P,E=()=>{const c=Promise.resolve(void 0);q=()=>{c.then(R)}};function R(){for(var c;c=A();){try{c.h.call(c.g)}catch(w){F(w)}var g=x;g.j(c),g.h<100&&(g.h++,c.next=g.g,g.g=c)}K=!1}function N(){this.u=this.u,this.C=this.C}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var U=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};a.addEventListener("test",w,g),a.removeEventListener("test",w,g)}catch{}return c}();function D(c){return/^[\s\xa0]*$/.test(c)}function Ne(c,g){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,g)}_(Ne,O),Ne.prototype.init=function(c,g){const w=this.type=c.type,S=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget,g||(w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement)),this.relatedTarget=g,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Cn="closure_listenable_"+(Math.random()*1e6|0),ct=0;function Ue(c,g,w,S,z){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!S,this.ha=z,this.key=++ct,this.da=this.fa=!1}function $(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function le(c,g,w){for(const S in c)g.call(w,c[S],S,c)}function J(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function fe(c){const g={};for(const w in c)g[w]=c[w];return g}const Ee="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Je(c,g){let w,S;for(let z=1;z<arguments.length;z++){S=arguments[z];for(w in S)c[w]=S[w];for(let H=0;H<Ee.length;H++)w=Ee[H],Object.prototype.hasOwnProperty.call(S,w)&&(c[w]=S[w])}}function Re(c){this.src=c,this.g={},this.h=0}Re.prototype.add=function(c,g,w,S,z){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const ee=pe(c,g,S,z);return ee>-1?(g=c[ee],w||(g.fa=!1)):(g=new Ue(g,this.src,H,!!S,z),g.fa=w,c.push(g)),g};function Ie(c,g){const w=g.type;if(w in c.g){var S=c.g[w],z=Array.prototype.indexOf.call(S,g,void 0),H;(H=z>=0)&&Array.prototype.splice.call(S,z,1),H&&($(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function pe(c,g,w,S){for(let z=0;z<c.length;++z){const H=c[z];if(!H.da&&H.listener==g&&H.capture==!!w&&H.ha==S)return z}return-1}var Tt="closure_lm_"+(Math.random()*1e6|0),Rn={};function al(c,g,w,S,z){if(Array.isArray(g)){for(let H=0;H<g.length;H++)al(c,g[H],w,S,z);return null}return w=Is(w),c&&c[Cn]?c.J(g,w,u(S)?!!S.capture:!1,z):ll(c,g,w,!1,S,z)}function ll(c,g,w,S,z,H){if(!g)throw Error("Invalid event type");const ee=u(z)?!!z.capture:!!z;let ge=So(c);if(ge||(c[Tt]=ge=new Re(c)),w=ge.add(g,w,S,ee,H),w.proxy)return w;if(S=ul(),w.proxy=S,S.src=c,S.listener=w,c.addEventListener)U||(z=ee),z===void 0&&(z=!1),c.addEventListener(g.toString(),S,z);else if(c.attachEvent)c.attachEvent(Pc(g.toString()),S);else if(c.addListener&&c.removeListener)c.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return w}function ul(){function c(w){return g.call(c.src,c.listener,w)}const g=Ac;return c}function _r(c,g,w,S,z){if(Array.isArray(g))for(var H=0;H<g.length;H++)_r(c,g[H],w,S,z);else S=u(S)?!!S.capture:!!S,w=Is(w),c&&c[Cn]?(c=c.i,H=String(g).toString(),H in c.g&&(g=c.g[H],w=pe(g,w,S,z),w>-1&&($(g[w]),Array.prototype.splice.call(g,w,1),g.length==0&&(delete c.g[H],c.h--)))):c&&(c=So(c))&&(g=c.g[g.toString()],c=-1,g&&(c=pe(g,w,S,z)),(w=c>-1?g[c]:null)&&Ts(w))}function Ts(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[Cn])Ie(g.i,c);else{var w=c.type,S=c.proxy;g.removeEventListener?g.removeEventListener(w,S,c.capture):g.detachEvent?g.detachEvent(Pc(w),S):g.addListener&&g.removeListener&&g.removeListener(S),(w=So(g))?(Ie(w,c),w.h==0&&(w.src=null,g[Tt]=null)):$(c)}}}function Pc(c){return c in Rn?Rn[c]:Rn[c]="on"+c}function Ac(c,g){if(c.da)c=!0;else{g=new Ne(g,this);const w=c.listener,S=c.ha||c.src;c.fa&&Ts(c),c=w.call(S,g)}return c}function So(c){return c=c[Tt],c instanceof Re?c:null}var Es="__closure_events_fn_"+(Math.random()*1e9>>>0);function Is(c){return typeof c=="function"?c:(c[Es]||(c[Es]=function(g){return c.handleEvent(g)}),c[Es])}function Et(){N.call(this),this.i=new Re(this),this.M=this,this.G=null}_(Et,N),Et.prototype[Cn]=!0,Et.prototype.removeEventListener=function(c,g,w,S){_r(this,c,g,w,S)};function It(c,g){var w,S=c.G;if(S)for(w=[];S;S=S.G)w.push(S);if(c=c.M,S=g.type||g,typeof g=="string")g=new O(g,c);else if(g instanceof O)g.target=g.target||c;else{var z=g;g=new O(S,c),Je(g,z)}z=!0;let H,ee;if(w)for(ee=w.length-1;ee>=0;ee--)H=g.g=w[ee],z=yr(H,S,!0,g)&&z;if(H=g.g=c,z=yr(H,S,!0,g)&&z,z=yr(H,S,!1,g)&&z,w)for(ee=0;ee<w.length;ee++)H=g.g=w[ee],z=yr(H,S,!1,g)&&z}Et.prototype.N=function(){if(Et.Z.N.call(this),this.i){var c=this.i;for(const g in c.g){const w=c.g[g];for(let S=0;S<w.length;S++)$(w[S]);delete c.g[g],c.h--}}this.G=null},Et.prototype.J=function(c,g,w,S){return this.i.add(String(c),g,!1,w,S)},Et.prototype.K=function(c,g,w,S){return this.i.add(String(c),g,!0,w,S)};function yr(c,g,w,S){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();let z=!0;for(let H=0;H<g.length;++H){const ee=g[H];if(ee&&!ee.da&&ee.capture==w){const ge=ee.listener,Le=ee.ha||ee.src;ee.fa&&Ie(c.i,ee),z=ge.call(Le,S)!==!1&&z}}return z&&!S.defaultPrevented}function xc(c,g){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:a.setTimeout(c,g||0)}function cl(c){c.g=xc(()=>{c.g=null,c.i&&(c.i=!1,cl(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class Yf extends N{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:cl(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(c){N.call(this),this.h=c,this.g={}}_(Ss,N);var Po=[];function hl(c){le(c.g,function(g,w){this.g.hasOwnProperty(w)&&Ts(g)},c),c.g={}}Ss.prototype.N=function(){Ss.Z.N.call(this),hl(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ao=a.JSON.stringify,Xf=a.JSON.parse,Cc=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function dl(){}function Rc(){}var vr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ps(){O.call(this,"d")}_(Ps,O);function xo(){O.call(this,"c")}_(xo,O);var Fi={},wr=null;function Co(){return wr=wr||new Et}Fi.Ia="serverreachability";function kc(c){O.call(this,Fi.Ia,c)}_(kc,O);function Tr(c){const g=Co();It(g,new kc(g))}Fi.STAT_EVENT="statevent";function fl(c,g){O.call(this,Fi.STAT_EVENT,c),this.stat=g}_(fl,O);function St(c){const g=Co();It(g,new fl(g,c))}Fi.Ja="timingevent";function bc(c,g){O.call(this,Fi.Ja,c),this.size=g}_(bc,O);function As(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},g)}function xs(){this.g=!0}xs.prototype.ua=function(){this.g=!1};function Jf(c,g,w,S,z,H){c.info(function(){if(c.g)if(H){var ee="",ge=H.split("&");for(let Me=0;Me<ge.length;Me++){var Le=ge[Me].split("=");if(Le.length>1){const ot=Le[0];Le=Le[1];const Dn=ot.split("_");ee=Dn.length>=2&&Dn[1]=="type"?ee+(ot+"="+Le+"&"):ee+(ot+"=redacted&")}}}else ee=null;else ee=H;return"XMLHTTP REQ ("+S+") [attempt "+z+"]: "+g+`
`+w+`
`+ee})}function ep(c,g,w,S,z,H,ee){c.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+z+"]: "+g+`
`+w+`
`+H+" "+ee})}function Er(c,g,w,S){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+tp(c,w)+(S?" "+S:"")})}function pl(c,g){c.info(function(){return"TIMEOUT: "+g})}xs.prototype.info=function(){};function tp(c,g){if(!c.g)return g;if(!g)return null;try{const H=JSON.parse(g);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var w=H[c];if(!(w.length<2)){var S=w[1];if(Array.isArray(S)&&!(S.length<1)){var z=S[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ee=1;ee<S.length;ee++)S[ee]=""}}}}return Ao(H)}catch{return g}}var Ro={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Lc={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Nc;function rn(){}_(rn,dl),rn.prototype.g=function(){return new XMLHttpRequest},Nc=new rn;function oe(c){return encodeURIComponent(String(c))}function Dc(c){var g=1;c=c.split(":");const w=[];for(;g>0&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function Zn(c,g,w,S){this.j=c,this.i=g,this.l=w,this.S=S||1,this.V=new Ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ml}function ml(){this.i=null,this.g="",this.h=!1}var gl={},Cs={};function ko(c,g,w){c.M=1,c.A=ze(Kt(g)),c.u=w,c.R=!0,Ui(c,null)}function Ui(c,g){c.F=Date.now(),bo(c),c.B=Kt(c.A);var w=c.B,S=c.S;Array.isArray(S)||(S=[String(S)]),Oo(w.i,"t",S),c.C=0,w=c.j.L,c.h=new ml,c.g=kl(c.j,w?g:null,!c.u),c.P>0&&(c.O=new Yf(f(c.Y,c,c.g),c.P)),g=c.V,w=c.g,S=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(Po[0]=z.toString()),z=Po);for(let H=0;H<z.length;H++){const ee=al(w,z[H],S||g.handleEvent,!1,g.h||g);if(!ee)break;g.g[ee.key]=ee}g=c.J?fe(c.J):{},c.u?(c.v||(c.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,g)):(c.v="GET",c.g.ea(c.B,c.v,null,g)),Tr(),Jf(c.i,c.v,c.B,c.l,c.S,c.u)}Zn.prototype.ba=function(c){c=c.target;const g=this.O;g&&_i(c)==3?g.j():this.Y(c)},Zn.prototype.Y=function(c){try{if(c==this.g)e:{const ge=_i(this.g),Le=this.g.ya(),Me=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||Il(this.g)))){this.K||ge!=4||Le==7||(Le==8||Me<=0?Tr(3):Tr(2)),Lo(this);var g=this.g.ca();this.X=g;var w=Mc(this);if(this.o=g==200,ep(this.i,this.v,this.B,this.l,this.S,ge,g),this.o){if(this.U&&!this.L){t:{if(this.g){var S,z=this.g;if((S=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!D(S)){var H=S;break t}}H=null}if(c=H)Er(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,_l(this,c);else{this.o=!1,this.m=3,St(12),kn(this),Rs(this);break e}}if(this.R){c=!0;let ot;for(;!this.K&&this.C<w.length;)if(ot=np(this,w),ot==Cs){ge==4&&(this.m=4,St(14),c=!1),Er(this.i,this.l,null,"[Incomplete Response]");break}else if(ot==gl){this.m=4,St(15),Er(this.i,this.l,w,"[Invalid Chunk]"),c=!1;break}else Er(this.i,this.l,ot,null),_l(this,ot);if(Oc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||w.length!=0||this.h.h||(this.m=1,St(16),c=!1),this.o=this.o&&c,!c)Er(this.i,this.l,w,"[Invalid Chunked Response]"),kn(this),Rs(this);else if(w.length>0&&!this.W){this.W=!0;var ee=this.j;ee.g==this&&ee.aa&&!ee.P&&(ee.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Cl(ee),ee.P=!0,St(11))}}else Er(this.i,this.l,w,null),_l(this,w);ge==4&&kn(this),this.o&&!this.K&&(ge==4?gn(this.j,this):(this.o=!1,bo(this)))}else Sl(this.g),g==400&&w.indexOf("Unknown SID")>0?(this.m=3,St(12)):(this.m=0,St(13)),kn(this),Rs(this)}}}catch{}finally{}};function Mc(c){if(!Oc(c))return c.g.la();const g=Il(c.g);if(g==="")return"";let w="";const S=g.length,z=_i(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return kn(c),Rs(c),"";c.h.i=new a.TextDecoder}for(let H=0;H<S;H++)c.h.h=!0,w+=c.h.i.decode(g[H],{stream:!(z&&H==S-1)});return g.length=0,c.h.g+=w,c.C=0,c.h.g}function Oc(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function np(c,g){var w=c.C,S=g.indexOf(`
`,w);return S==-1?Cs:(w=Number(g.substring(w,S)),isNaN(w)?gl:(S+=1,S+w>g.length?Cs:(g=g.slice(S,S+w),c.C=S+w,g)))}Zn.prototype.cancel=function(){this.K=!0,kn(this)};function bo(c){c.T=Date.now()+c.H,Vc(c,c.H)}function Vc(c,g){if(c.D!=null)throw Error("WatchDog timer not null");c.D=As(f(c.aa,c),g)}function Lo(c){c.D&&(a.clearTimeout(c.D),c.D=null)}Zn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(pl(this.i,this.B),this.M!=2&&(Tr(),St(17)),kn(this),this.m=2,Rs(this)):Vc(this,this.T-c)};function Rs(c){c.j.I==0||c.K||gn(c.j,c)}function kn(c){Lo(c);var g=c.O;g&&typeof g.dispose=="function"&&g.dispose(),c.O=null,hl(c.V),c.g&&(g=c.g,c.g=null,g.abort(),g.dispose())}function _l(c,g){try{var w=c.j;if(w.I!=0&&(w.g==c||ks(w.h,c))){if(!c.L&&ks(w.h,c)&&w.I==3){try{var S=w.Ba.g.parse(g)}catch{S=null}if(Array.isArray(S)&&S.length==3){var z=S;if(z[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<c.F)zo(w),Uo(w);else break e;xl(w),St(18)}}else w.xa=z[1],0<w.xa-w.K&&z[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=As(f(w.Va,w),6e3));Bc(w.h)<=1&&w.ta&&(w.ta=void 0)}else vi(w,11)}else if((c.L||w.g==c)&&zo(w),!D(g))for(z=w.Ba.g.parse(g),g=0;g<z.length;g++){let Me=z[g];const ot=Me[0];if(!(ot<=w.K))if(w.K=ot,Me=Me[1],w.I==2)if(Me[0]=="c"){w.M=Me[1],w.ba=Me[2];const Dn=Me[3];Dn!=null&&(w.ka=Dn,w.j.info("VER="+w.ka));const Xn=Me[4];Xn!=null&&(w.za=Xn,w.j.info("SVER="+w.za));const Mn=Me[5];Mn!=null&&typeof Mn=="number"&&Mn>0&&(S=1.5*Mn,w.O=S,w.j.info("backChannelRequestTimeoutMs_="+S)),S=w;const wi=c.g;if(wi){const Wo=wi.g?wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wo){var H=S.h;H.g||Wo.indexOf("spdy")==-1&&Wo.indexOf("quic")==-1&&Wo.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Bi(H,H.h),H.h=null))}if(S.G){const qo=wi.g?wi.g.getResponseHeader("X-HTTP-Session-Id"):null;qo&&(S.wa=qo,re(S.J,S.G,qo))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-c.F,w.j.info("Handshake RTT: "+w.T+"ms")),S=w;var ee=c;if(S.na=Rl(S,S.L?S.ba:null,S.W),ee.L){yl(S.h,ee);var ge=ee,Le=S.O;Le&&(ge.H=Le),ge.D&&(Lo(ge),bo(ge)),S.g=ee}else Al(S);w.i.length>0&&yi(w)}else Me[0]!="stop"&&Me[0]!="close"||vi(w,7);else w.I==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?vi(w,7):ve(w):Me[0]!="noop"&&w.l&&w.l.qa(Me),w.A=0)}}Tr(4)}catch{}}var ip=class{constructor(c,g){this.g=c,this.map=g}};function Fc(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Uc(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Bc(c){return c.h?1:c.g?c.g.size:0}function ks(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function Bi(c,g){c.g?c.g.add(g):c.h=g}function yl(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}Fc.prototype.cancel=function(){if(this.i=vl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function vl(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.G);return g}return I(c.i)}var Ir=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xe(c,g){if(c){c=c.split("&");for(let w=0;w<c.length;w++){const S=c[w].indexOf("=");let z,H=null;S>=0?(z=c[w].substring(0,S),H=c[w].substring(S+1)):z=c[w],g(z,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function be(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;c instanceof be?(this.l=c.l,bn(this,c.j),this.o=c.o,this.g=c.g,Ln(this,c.u),this.h=c.h,bs(this,Ls(c.i)),this.m=c.m):c&&(g=String(c).match(Ir))?(this.l=!1,bn(this,g[1]||"",!0),this.o=zi(g[2]||""),this.g=zi(g[3]||"",!0),Ln(this,g[4]),this.h=zi(g[5]||"",!0),bs(this,g[6]||"",!0),this.m=zi(g[7]||"")):(this.l=!1,this.i=new Qn(null,this.l))}be.prototype.toString=function(){const c=[];var g=this.j;g&&c.push(pi(g,zc,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(pi(g,zc,!0),"@"),c.push(oe(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&c.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(pi(w,w.charAt(0)=="/"?ji:No,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",pi(w,Hi)),c.join("")},be.prototype.resolve=function(c){const g=Kt(this);let w=!!c.j;w?bn(g,c.j):w=!!c.o,w?g.o=c.o:w=!!c.g,w?g.g=c.g:w=c.u!=null;var S=c.h;if(w)Ln(g,c.u);else if(w=!!c.h){if(S.charAt(0)!="/")if(this.g&&!this.h)S="/"+S;else{var z=g.h.lastIndexOf("/");z!=-1&&(S=g.h.slice(0,z+1)+S)}if(z=S,z==".."||z==".")S="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){S=z.lastIndexOf("/",0)==0,z=z.split("/");const H=[];for(let ee=0;ee<z.length;){const ge=z[ee++];ge=="."?S&&ee==z.length&&H.push(""):ge==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),S&&ee==z.length&&H.push("")):(H.push(ge),S=!0)}S=H.join("/")}else S=z}return w?g.h=S:w=c.i.toString()!=="",w?bs(g,Ls(c.i)):w=!!c.m,w&&(g.m=c.m),g};function Kt(c){return new be(c)}function bn(c,g,w){c.j=w?zi(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Ln(c,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);c.u=g}else c.u=null}function bs(c,g,w){g instanceof Qn?(c.i=g,wl(c.i,c.l)):(w||(g=pi(g,et)),c.i=new Qn(g,c.l))}function re(c,g,w){c.i.set(g,w)}function ze(c){return re(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function zi(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function pi(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,sn),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function sn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var zc=/[#\/\?@]/g,No=/[#\?:]/g,ji=/[#\?]/g,et=/[#\?@]/g,Hi=/#/g;function Qn(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function mn(c){c.g||(c.g=new Map,c.h=0,c.i&&xe(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=Qn.prototype,t.add=function(c,g){mn(this),this.i=null,c=mi(this,c);let w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function Do(c,g){mn(c),g=mi(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function Sr(c,g){return mn(c),g=mi(c,g),c.g.has(g)}t.forEach=function(c,g){mn(this),this.g.forEach(function(w,S){w.forEach(function(z){c.call(g,z,S,this)},this)},this)};function Mo(c,g){mn(c);let w=[];if(typeof g=="string")Sr(c,g)&&(w=w.concat(c.g.get(mi(c,g))));else for(c=Array.from(c.g.values()),g=0;g<c.length;g++)w=w.concat(c[g]);return w}t.set=function(c,g){return mn(this),this.i=null,c=mi(this,c),Sr(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=Mo(this,c),c.length>0?String(c[0]):g):g};function Oo(c,g,w){Do(c,g),w.length>0&&(c.i=null,c.g.set(mi(c,g),I(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(let S=0;S<g.length;S++){var w=g[S];const z=oe(w);w=Mo(this,w);for(let H=0;H<w.length;H++){let ee=z;w[H]!==""&&(ee+="="+oe(w[H])),c.push(ee)}}return this.i=c.join("&")};function Ls(c){const g=new Qn;return g.i=c.i,c.g&&(g.g=new Map(c.g),g.h=c.h),g}function mi(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function wl(c,g){g&&!c.j&&(mn(c),c.i=null,c.g.forEach(function(w,S){const z=S.toLowerCase();S!=z&&(Do(this,S),Oo(this,z,w))},c)),c.j=g}function Vo(c,g){const w=new xs;if(a.Image){const S=new Image;S.onload=m(Nn,w,"TestLoadImage: loaded",!0,g,S),S.onerror=m(Nn,w,"TestLoadImage: error",!1,g,S),S.onabort=m(Nn,w,"TestLoadImage: abort",!1,g,S),S.ontimeout=m(Nn,w,"TestLoadImage: timeout",!1,g,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=c}else g(!1)}function jc(c,g){const w=new xs,S=new AbortController,z=setTimeout(()=>{S.abort(),Nn(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:S.signal}).then(H=>{clearTimeout(z),H.ok?Nn(w,"TestPingServer: ok",!0,g):Nn(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(z),Nn(w,"TestPingServer: error",!1,g)})}function Nn(c,g,w,S,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),S(w)}catch{}}function rp(){this.g=new Cc}function me(c){this.i=c.Sb||null,this.h=c.ab||!1}_(me,dl),me.prototype.g=function(){return new Zt(this.i,this.h)};function Zt(c,g){Et.call(this),this.H=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Zt,Et),t=Zt.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=g,this.readyState=1,Wi(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(g.body=c),(this.H||a).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Pr(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Wi(this)),this.g&&(this.readyState=3,Wi(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ve(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ve(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Pr(this):Wi(this),this.readyState==3&&Ve(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Pr(this))},t.Na=function(c){this.g&&(this.response=c,Pr(this))},t.ga=function(){this.g&&Pr(this)};function Pr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Wi(c)}t.setRequestHeader=function(c,g){this.A.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function Wi(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Zt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Fo(c){let g="";return le(c,function(w,S){g+=S,g+=":",g+=w,g+=`\r
`}),g}function Ns(c,g,w){e:{for(S in w){var S=!1;break e}S=!0}S||(w=Fo(w),typeof c=="string"?w!=null&&oe(w):re(c,g,w))}function De(c){Et.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(De,Et);var Tl=/^https?$/i,Ds=["POST","PUT"];t=De.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,g,w,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Nc.g(),this.g.onreadystatechange=v(f(this.Ca,this));try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(H){ht(this,H);return}if(c=w||"",w=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var z in S)w.set(z,S[z]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const H of S.keys())w.set(H,S.get(H));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(w.keys()).find(H=>H.toLowerCase()=="content-type"),z=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(Ds,g,void 0)>=0)||S||z||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ee]of w)this.g.setRequestHeader(H,ee);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){ht(this,H)}};function ht(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.o=5,gi(c),Ms(c)}function gi(c){c.A||(c.A=!0,It(c,"complete"),It(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,It(this,"complete"),It(this,"abort"),Ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),De.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?El(this):this.Xa())},t.Xa=function(){El(this)};function El(c){if(c.h&&typeof o<"u"){if(c.v&&_i(c)==4)setTimeout(c.Ca.bind(c),0);else if(It(c,"readystatechange"),_i(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var S;if(S=H===0){let ee=String(c.D).match(Ir)[1]||null;!ee&&a.self&&a.self.location&&(ee=a.self.location.protocol.slice(0,-1)),S=!Tl.test(ee?ee.toLowerCase():"")}w=S}if(w)It(c,"complete"),It(c,"success");else{c.o=6;try{var z=_i(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",gi(c)}}finally{Ms(c)}}}}function Ms(c,g){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const w=c.g;c.g=null,g||It(c,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function _i(c){return c.g?c.g.readyState:0}t.ca=function(){try{return _i(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),Xf(g)}};function Il(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Sl(c){const g={};c=(c.g&&_i(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<c.length;S++){if(D(c[S]))continue;var w=Dc(c[S]);const z=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const H=g[z]||[];g[z]=H,H.push(w)}J(g,function(S){return S.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Os(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Pl(c){this.za=0,this.i=[],this.j=new xs,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Os("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Os("baseRetryDelayMs",5e3,c),this.Za=Os("retryDelaySeedMs",1e4,c),this.Ta=Os("forwardChannelMaxRetries",2,c),this.va=Os("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Fc(c&&c.concurrentRequestLimit),this.Ba=new rp,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Pl.prototype,t.ka=8,t.I=1,t.connect=function(c,g,w,S){St(0),this.W=c,this.H=g||{},w&&S!==void 0&&(this.H.OSID=w,this.H.OAID=S),this.F=this.X,this.J=Rl(this,null,this.W),yi(this)};function ve(c){if(on(c),c.I==3){var g=c.V++,w=Kt(c.J);if(re(w,"SID",c.M),re(w,"RID",g),re(w,"TYPE","terminate"),qi(c,w),g=new Zn(c,c.j,g),g.M=2,g.A=ze(Kt(w)),w=!1,a.navigator&&a.navigator.sendBeacon)try{w=a.navigator.sendBeacon(g.A.toString(),"")}catch{}!w&&a.Image&&(new Image().src=g.A,w=!0),w||(g.g=kl(g.j,null),g.g.ea(g.A)),g.F=Date.now(),bo(g)}Yn(c)}function Uo(c){c.g&&(Cl(c),c.g.cancel(),c.g=null)}function on(c){Uo(c),c.v&&(a.clearTimeout(c.v),c.v=null),zo(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function yi(c){if(!Uc(c.h)&&!c.m){c.m=!0;var g=c.Ea;q||E(),K||(q(),K=!0),C.add(g,c),c.D=0}}function Hc(c,g){return Bc(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=g.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=As(f(c.Ea,c,g),$c(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new Zn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=fe(H),Je(H,this.U)):H=this.U),this.u!==null||this.R||(z.J=H,H=null),this.S)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var S=this.i[w];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(g+=S,g>4096){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=qc(this,z,g),w=Kt(this.J),re(w,"RID",c),re(w,"CVER",22),this.G&&re(w,"X-HTTP-Session-Id",this.G),qi(this,w),H&&(this.R?g="headers="+oe(Fo(H))+"&"+g:this.u&&Ns(w,this.u,H)),Bi(this.h,z),this.Ra&&re(w,"TYPE","init"),this.S?(re(w,"$req",g),re(w,"SID","null"),z.U=!0,ko(z,w,null)):ko(z,w,g),this.I=2}}else this.I==3&&(c?Wc(this,c):this.i.length==0||Uc(this.h)||Wc(this))};function Wc(c,g){var w;g?w=g.l:w=c.V++;const S=Kt(c.J);re(S,"SID",c.M),re(S,"RID",w),re(S,"AID",c.K),qi(c,S),c.u&&c.o&&Ns(S,c.u,c.o),w=new Zn(c,c.j,w,c.D+1),c.u===null&&(w.J=c.o),g&&(c.i=g.G.concat(c.i)),g=qc(c,w,1e3),w.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Bi(c.h,w),ko(w,S,g)}function qi(c,g){c.H&&le(c.H,function(w,S){re(g,S,w)}),c.l&&le({},function(w,S){re(g,S,w)})}function qc(c,g,w){w=Math.min(c.i.length,w);const S=c.l?f(c.l.Ka,c.l,c):null;e:{var z=c.i;let ge=-1;for(;;){const Le=["count="+w];ge==-1?w>0?(ge=z[0].g,Le.push("ofs="+ge)):ge=0:Le.push("ofs="+ge);let Me=!0;for(let ot=0;ot<w;ot++){var H=z[ot].g;const Dn=z[ot].map;if(H-=ge,H<0)ge=Math.max(0,z[ot].g-100),Me=!1;else try{H="req"+H+"_"||"";try{var ee=Dn instanceof Map?Dn:Object.entries(Dn);for(const[Xn,Mn]of ee){let wi=Mn;u(Mn)&&(wi=Ao(Mn)),Le.push(H+Xn+"="+encodeURIComponent(wi))}}catch(Xn){throw Le.push(H+"type="+encodeURIComponent("_badmap")),Xn}}catch{S&&S(Dn)}}if(Me){ee=Le.join("&");break e}}ee=void 0}return c=c.i.splice(0,w),g.G=c,ee}function Al(c){if(!c.g&&!c.v){c.Y=1;var g=c.Da;q||E(),K||(q(),K=!0),C.add(g,c),c.A=0}}function xl(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=As(f(c.Da,c),$c(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,Bo(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=As(f(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,St(10),Uo(this),Bo(this))};function Cl(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function Bo(c){c.g=new Zn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var g=Kt(c.na);re(g,"RID","rpc"),re(g,"SID",c.M),re(g,"AID",c.K),re(g,"CI",c.F?"0":"1"),!c.F&&c.ia&&re(g,"TO",c.ia),re(g,"TYPE","xmlhttp"),qi(c,g),c.u&&c.o&&Ns(g,c.u,c.o),c.O&&(c.g.H=c.O);var w=c.g;c=c.ba,w.M=1,w.A=ze(Kt(g)),w.u=null,w.R=!0,Ui(w,c)}t.Va=function(){this.C!=null&&(this.C=null,Uo(this),xl(this),St(19))};function zo(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function gn(c,g){var w=null;if(c.g==g){zo(c),Cl(c),c.g=null;var S=2}else if(ks(c.h,g))w=g.G,yl(c.h,g),S=1;else return;if(c.I!=0){if(g.o)if(S==1){w=g.u?g.u.length:0,g=Date.now()-g.F;var z=c.D;S=Co(),It(S,new bc(S,w)),yi(c)}else Al(c);else if(z=g.m,z==3||z==0&&g.X>0||!(S==1&&Hc(c,g)||S==2&&xl(c)))switch(w&&w.length>0&&(g=c.h,g.i=g.i.concat(w)),z){case 1:vi(c,5);break;case 4:vi(c,10);break;case 3:vi(c,6);break;default:vi(c,2)}}}function $c(c,g){let w=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(w*=2),w*g}function vi(c,g){if(c.j.info("Error code "+g),g==2){var w=f(c.bb,c),S=c.Ua;const z=!S;S=new be(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bn(S,"https"),ze(S),z?Vo(S.toString(),w):jc(S.toString(),w)}else St(2);c.I=0,c.l&&c.l.pa(g),Yn(c),on(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Yn(c){if(c.I=0,c.ja=[],c.l){const g=vl(c.h);(g.length!=0||c.i.length!=0)&&(k(c.ja,g),k(c.ja,c.i),c.h.i.length=0,I(c.i),c.i.length=0),c.l.oa()}}function Rl(c,g,w){var S=w instanceof be?Kt(w):new be(w);if(S.g!="")g&&(S.g=g+"."+S.g),Ln(S,S.u);else{var z=a.location;S=z.protocol,g=g?g+"."+z.hostname:z.hostname,z=+z.port;const H=new be(null);S&&bn(H,S),g&&(H.g=g),z&&Ln(H,z),w&&(H.h=w),S=H}return w=c.G,g=c.wa,w&&g&&re(S,w,g),re(S,"VER",c.ka),qi(c,S),S}function kl(c,g,w){if(g&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Aa&&!c.ma?new De(new me({ab:w})):new De(c.ma),g.Fa(c.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jo(){}t=jo.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ho(){}Ho.prototype.g=function(c,g){return new Vt(c,g)};function Vt(c,g){Et.call(this),this.g=new Pl(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(c?c["X-WebChannel-Client-Profile"]=g.sa:c={"X-WebChannel-Client-Profile":g.sa}),this.g.U=c,(c=g&&g.Qb)&&!D(c)&&(this.g.u=c),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!D(g)&&(this.g.G=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new Ar(this)}_(Vt,Et),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){ve(this.g)},Vt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.v&&(w={},w.__data__=Ao(c),c=w);g.i.push(new ip(g.Ya++,c)),g.I==3&&yi(g)},Vt.prototype.N=function(){this.g.l=null,delete this.j,ve(this.g),delete this.g,Vt.Z.N.call(this)};function bl(c){Ps.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}_(bl,Ps);function Gc(){xo.call(this),this.status=1}_(Gc,xo);function Ar(c){this.g=c}_(Ar,jo),Ar.prototype.ra=function(){It(this.g,"a")},Ar.prototype.qa=function(c){It(this.g,new bl(c))},Ar.prototype.pa=function(c){It(this.g,new Gc)},Ar.prototype.oa=function(){It(this.g,"b")},Ho.prototype.createWebChannel=Ho.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,LA=function(){return new Ho},bA=function(){return Co()},kA=Fi,mg={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ro.NO_ERROR=0,Ro.TIMEOUT=8,Ro.HTTP_ERROR=6,Zh=Ro,Lc.COMPLETE="complete",RA=Lc,Rc.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",Et.prototype.listen=Et.prototype.J,Xl=Rc,De.prototype.listenOnce=De.prototype.K,De.prototype.getLastError=De.prototype.Ha,De.prototype.getLastErrorCode=De.prototype.ya,De.prototype.getStatus=De.prototype.ca,De.prototype.getResponseJson=De.prototype.La,De.prototype.getResponseText=De.prototype.la,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Fa,CA=De}).apply(typeof Ih<"u"?Ih:typeof self<"u"?self:typeof window<"u"?window:{});const U0="@firebase/firestore",B0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ja="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new Tf("@firebase/firestore");function Jo(){return ao.logLevel}function ie(t,...e){if(ao.logLevel<=Se.DEBUG){const n=e.map(ry);ao.debug(`Firestore (${Ja}): ${t}`,...n)}}function fr(t,...e){if(ao.logLevel<=Se.ERROR){const n=e.map(ry);ao.error(`Firestore (${Ja}): ${t}`,...n)}}function Ba(t,...e){if(ao.logLevel<=Se.WARN){const n=e.map(ry);ao.warn(`Firestore (${Ja}): ${t}`,...n)}}function ry(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t,e,n){let i="Unexpected state";typeof e=="string"?i=e:n=e,NA(t,i,n)}function NA(t,e,n){let i=`FIRESTORE (${Ja}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw fr(i),new Error(i)}function Oe(t,e,n,i){let r="Unexpected state";typeof n=="string"?r=n:i=n,t||NA(e,r,i)}function ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class te extends Kn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class KM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(jt.UNAUTHENTICATED))}shutdown(){}}class ZM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class QM{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,n(h)):Promise.resolve();let o=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new rr,e.enqueueRetryable(()=>r(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await r(this.currentUser)})},u=h=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new rr)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string",31837,{l:i}),new DA(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class YM{constructor(e,n,i){this.P=e,this.T=n,this.I=i,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class XM{constructor(e,n,i){this.P=e,this.T=n,this.I=i}getToken(){return Promise.resolve(new YM(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(jt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JM{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Oe(this.o===void 0,3512);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const r=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>r(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?r(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new z0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new z0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=eO(40);for(let o=0;o<r.length;++o)i.length<20&&r[o]<n&&(i+=e.charAt(r[o]%62))}return i}}function Pe(t,e){return t<e?-1:t>e?1:0}function gg(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const r=t.charAt(i),o=e.charAt(i);if(r!==o)return Hp(r)===Hp(o)?Pe(r,o):Hp(r)?1:-1}return Pe(t.length,e.length)}const tO=55296,nO=57343;function Hp(t){const e=t.charCodeAt(0);return e>=tO&&e<=nO}function za(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0="__name__";class Si{constructor(e,n,i){n===void 0?n=0:n>e.length&&de(637,{offset:n,range:e.length}),i===void 0?i=e.length-n:i>e.length-n&&de(1746,{length:i,range:e.length-n}),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Si.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Si?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const o=Si.compareSegments(e.get(r),n.get(r));if(o!==0)return o}return Pe(e.length,n.length)}static compareSegments(e,n){const i=Si.isNumericId(e),r=Si.isNumericId(n);return i&&!r?-1:!i&&r?1:i&&r?Si.extractNumericId(e).compare(Si.extractNumericId(n)):gg(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jr.fromString(e.substring(4,e.length-2))}}class je extends Si{construct(e,n,i){return new je(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new te(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new je(n)}static emptyPath(){return new je([])}}const iO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nt extends Si{construct(e,n,i){return new Nt(e,n,i)}static isValidIdentifier(e){return iO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===j0}static keyField(){return new Nt([j0])}static fromServerFormat(e){const n=[];let i="",r=0;const o=()=>{if(i.length===0)throw new te(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let a=!1;for(;r<e.length;){const u=e[r];if(u==="\\"){if(r+1===e.length)throw new te(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new te(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else u==="`"?(a=!a,r++):u!=="."||a?(i+=u,r++):(o(),r++)}if(o(),a)throw new te(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nt(n)}static emptyPath(){return new Nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e){this.path=e}static fromPath(e){return new ae(je.fromString(e))}static fromName(e){return new ae(je.fromString(e).popFirst(5))}static empty(){return new ae(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ae(new je(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MA(t,e,n){if(!n)throw new te(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rO(t,e,n,i){if(e===!0&&i===!0)throw new te(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function H0(t){if(!ae.isDocumentKey(t))throw new te(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function W0(t){if(ae.isDocumentKey(t))throw new te(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function OA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Af(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de(12329,{type:typeof t})}function rs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new te(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Af(t);throw new te(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(t,e){const n={typeString:t};return e&&(n.value=e),n}function fc(t,e){if(!OA(t))throw new te(G.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in e)if(e[i]){const r=e[i].typeString,o="value"in e[i]?{value:e[i].value}:void 0;if(!(i in t)){n=`JSON missing required field: '${i}'`;break}const a=t[i];if(r&&typeof a!==r){n=`JSON field '${i}' must be a ${r}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${i}' field to equal '${o.value}'`;break}}if(n)throw new te(G.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=-62135596800,$0=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(e){return Be.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor((e-1e3*n)*$0);return new Be(n,i)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new te(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new te(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<q0)throw new te(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new te(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$0}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(fc(e,Be._jsonSchema))return new Be(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-q0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:gt("string",Be._jsonSchemaVersion),seconds:gt("number"),nanoseconds:gt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{static fromTimestamp(e){return new _e(e)}static min(){return new _e(new Be(0,0))}static max(){return new _e(new Be(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu=-1;function sO(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=_e.fromTimestamp(i===1e9?new Be(n+1,0):new Be(n,i));return new ss(r,ae.empty(),e)}function oO(t){return new ss(t.readTime,t.key,qu)}class ss{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new ss(_e.min(),ae.empty(),qu)}static max(){return new ss(_e.max(),ae.empty(),qu)}}function aO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ae.comparator(t.documentKey,e.documentKey),n!==0?n:Pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class uO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function el(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==lO)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((i,r)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,r)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,i)=>{n(e)})}static reject(e){return new Z((n,i)=>{i(e)})}static waitFor(e){return new Z((n,i)=>{let r=0,o=0,a=!1;e.forEach(u=>{++r,u.next(()=>{++o,a&&o===r&&n()},h=>i(h))}),a=!0,o===r&&n()})}static or(e){let n=Z.resolve(!1);for(const i of e)n=n.next(r=>r?Z.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,o)=>{i.push(n.call(this,r,o))}),this.waitFor(i)}static mapArray(e,n){return new Z((i,r)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next(m=>{a[f]=m,++u,u===o&&i(a)},m=>r(m))}})}static doWhile(e,n){return new Z((i,r)=>{const o=()=>{e()===!0?n().next(()=>{o()},r):i()};o()})}}function cO(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function tl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}xf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=-1;function Cf(t){return t==null}function Vd(t){return t===0&&1/t==-1/0}function hO(t){return typeof t=="number"&&Number.isInteger(t)&&!Vd(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="";function dO(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=G0(e)),e=fO(t.get(n),e);return G0(e)}function fO(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const o=t.charAt(r);switch(o){case"\0":n+="";break;case VA:n+="";break;default:n+=o}}return n}function G0(t){return t+VA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function FA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Lt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Lt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Lt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sh(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sh(this.root,e,this.comparator,!0)}}class Sh{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&r&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Lt{constructor(e,n,i,r,o){this.key=e,this.value=n,this.color=i??Lt.RED,this.left=r??Lt.EMPTY,this.right=o??Lt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,o){return new Lt(e??this.key,n??this.value,i??this.color,r??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const o=i(e,r.key);return r=o<0?r.copy(null,null,null,r.left.insert(e,n,i),null):o===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Lt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return Lt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Lt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Lt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw de(43730,{key:this.key,value:this.value});if(this.right.isRed())throw de(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw de(27949);return e+(this.isRed()?0:1)}}Lt.EMPTY=null,Lt.RED=!0,Lt.BLACK=!1;Lt.EMPTY=new class{constructor(){this.size=0}get key(){throw de(57766)}get value(){throw de(16141)}get color(){throw de(16727)}get left(){throw de(29726)}get right(){throw de(36894)}copy(e,n,i,r,o){return this}insert(e,n,i){return new Lt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Z0(this.data.getIterator())}getIteratorFrom(e){return new Z0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof wt)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(this.comparator(r,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new wt(this.comparator);return n.data=e,n}}class Z0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.fields=e,e.sort(Nt.comparator)}static empty(){return new oi([])}unionWith(e){let n=new wt(Nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new oi(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return za(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new UA("Invalid base64 string: "+o):o}}(e);return new Ot(n)}static fromUint8Array(e){const n=function(r){let o="";for(let a=0;a<r.length;++a)o+=String.fromCharCode(r[a]);return o}(e);return new Ot(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ot.EMPTY_BYTE_STRING=new Ot("");const pO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function os(t){if(Oe(!!t,39018),typeof t=="string"){let e=0;const n=pO.exec(t);if(Oe(!!n,46558,{timestamp:t}),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:lt(t.seconds),nanos:lt(t.nanos)}}function lt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function as(t){return typeof t=="string"?Ot.fromBase64String(t):Ot.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="server_timestamp",zA="__type__",jA="__previous_value__",HA="__local_write_time__";function ay(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[zA])==null?void 0:i.stringValue)===BA}function Rf(t){const e=t.mapValue.fields[jA];return ay(e)?Rf(e):e}function $u(t){const e=os(t.mapValue.fields[HA].timestampValue);return new Be(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mO{constructor(e,n,i,r,o,a,u,h,f,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=m}}const Fd="(default)";class Gu{constructor(e,n){this.projectId=e,this.database=n||Fd}static empty(){return new Gu("","")}get isDefaultDatabase(){return this.database===Fd}isEqual(e){return e instanceof Gu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="__type__",gO="__max__",Ph={mapValue:{}},qA="__vector__",Ud="value";function ls(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ay(t)?4:yO(t)?9007199254740991:_O(t)?10:11:de(28295,{value:t})}function Vi(t,e){if(t===e)return!0;const n=ls(t);if(n!==ls(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $u(t).isEqual($u(e));case 3:return function(r,o){if(typeof r.timestampValue=="string"&&typeof o.timestampValue=="string"&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const a=os(r.timestampValue),u=os(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,o){return as(r.bytesValue).isEqual(as(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,o){return lt(r.geoPointValue.latitude)===lt(o.geoPointValue.latitude)&&lt(r.geoPointValue.longitude)===lt(o.geoPointValue.longitude)}(t,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return lt(r.integerValue)===lt(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const a=lt(r.doubleValue),u=lt(o.doubleValue);return a===u?Vd(a)===Vd(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return za(t.arrayValue.values||[],e.arrayValue.values||[],Vi);case 10:case 11:return function(r,o){const a=r.mapValue.fields||{},u=o.mapValue.fields||{};if(K0(a)!==K0(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Vi(a[h],u[h])))return!1;return!0}(t,e);default:return de(52216,{left:t})}}function Ku(t,e){return(t.values||[]).find(n=>Vi(n,e))!==void 0}function ja(t,e){if(t===e)return 0;const n=ls(t),i=ls(e);if(n!==i)return Pe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=lt(o.integerValue||o.doubleValue),h=lt(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Q0(t.timestampValue,e.timestampValue);case 4:return Q0($u(t),$u(e));case 5:return gg(t.stringValue,e.stringValue);case 6:return function(o,a){const u=as(o),h=as(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const m=Pe(u[f],h[f]);if(m!==0)return m}return Pe(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=Pe(lt(o.latitude),lt(a.latitude));return u!==0?u:Pe(lt(o.longitude),lt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Y0(t.arrayValue,e.arrayValue);case 10:return function(o,a){var v,I,k,b;const u=o.fields||{},h=a.fields||{},f=(v=u[Ud])==null?void 0:v.arrayValue,m=(I=h[Ud])==null?void 0:I.arrayValue,_=Pe(((k=f==null?void 0:f.values)==null?void 0:k.length)||0,((b=m==null?void 0:m.values)==null?void 0:b.length)||0);return _!==0?_:Y0(f,m)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ph.mapValue&&a===Ph.mapValue)return 0;if(o===Ph.mapValue)return 1;if(a===Ph.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},m=Object.keys(f);h.sort(),m.sort();for(let _=0;_<h.length&&_<m.length;++_){const v=gg(h[_],m[_]);if(v!==0)return v;const I=ja(u[h[_]],f[m[_]]);if(I!==0)return I}return Pe(h.length,m.length)}(t.mapValue,e.mapValue);default:throw de(23264,{he:n})}}function Q0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Pe(t,e);const n=os(t),i=os(e),r=Pe(n.seconds,i.seconds);return r!==0?r:Pe(n.nanos,i.nanos)}function Y0(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const o=ja(n[r],i[r]);if(o)return o}return Pe(n.length,i.length)}function Ha(t){return _g(t)}function _g(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=os(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return as(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ae.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const o of n.values||[])r?r=!1:i+=",",i+=_g(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",o=!0;for(const a of i)o?o=!1:r+=",",r+=`${a}:${_g(n.fields[a])}`;return r+"}"}(t.mapValue):de(61005,{value:t})}function Qh(t){switch(ls(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Rf(t);return e?16+Qh(e):16;case 5:return 2*t.stringValue.length;case 6:return as(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,o)=>r+Qh(o),0)}(t.arrayValue);case 10:case 11:return function(i){let r=0;return yo(i.fields,(o,a)=>{r+=o.length+Qh(a)}),r}(t.mapValue);default:throw de(13486,{value:t})}}function X0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function yg(t){return!!t&&"integerValue"in t}function ly(t){return!!t&&"arrayValue"in t}function J0(t){return!!t&&"nullValue"in t}function eT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Yh(t){return!!t&&"mapValue"in t}function _O(t){var n,i;return((i=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[WA])==null?void 0:i.stringValue)===qA}function gu(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return yo(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=gu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gu(t.arrayValue.values[n]);return e}return{...t}}function yO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Yh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gu(n)}setAll(e){let n=Nt.emptyPath(),i={},r=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,i,r),i={},r=[],n=u.popLast()}a?i[u.lastSegment()]=gu(a):r.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,r)}delete(e){const n=this.field(e.popLast());Yh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Vi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Yh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){yo(n,(r,o)=>e[r]=o);for(const r of i)delete e[r]}clone(){return new zn(gu(this.value))}}function $A(t){const e=[];return yo(t.fields,(n,i)=>{const r=new Nt([n]);if(Yh(i)){const o=$A(i.mapValue).fields;if(o.length===0)e.push(r);else for(const a of o)e.push(r.child(a))}else e.push(r)}),new oi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,n,i,r,o,a,u){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Wt(e,0,_e.min(),_e.min(),_e.min(),zn.empty(),0)}static newFoundDocument(e,n,i,r){return new Wt(e,1,n,_e.min(),i,r,0)}static newNoDocument(e,n){return new Wt(e,2,n,_e.min(),_e.min(),zn.empty(),0)}static newUnknownDocument(e,n){return new Wt(e,3,n,_e.min(),_e.min(),zn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(_e.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=_e.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bd{constructor(e,n){this.position=e,this.inclusive=n}}function tT(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const o=e[r],a=t.position[r];if(o.field.isKeyField()?i=ae.comparator(ae.fromName(a.referenceValue),n.key):i=ja(a,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function nT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Vi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function vO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{}class mt extends GA{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new TO(e,n,i):n==="array-contains"?new SO(e,i):n==="in"?new PO(e,i):n==="not-in"?new AO(e,i):n==="array-contains-any"?new xO(e,i):new mt(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new EO(e,i):new IO(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ja(n,this.value)):n!==null&&ls(this.value)===ls(n)&&this.matchesComparison(ja(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends GA{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new fi(e,n)}matches(e){return KA(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function KA(t){return t.op==="and"}function ZA(t){return wO(t)&&KA(t)}function wO(t){for(const e of t.filters)if(e instanceof fi)return!1;return!0}function vg(t){if(t instanceof mt)return t.field.canonicalString()+t.op.toString()+Ha(t.value);if(ZA(t))return t.filters.map(e=>vg(e)).join(",");{const e=t.filters.map(n=>vg(n)).join(",");return`${t.op}(${e})`}}function QA(t,e){return t instanceof mt?function(i,r){return r instanceof mt&&i.op===r.op&&i.field.isEqual(r.field)&&Vi(i.value,r.value)}(t,e):t instanceof fi?function(i,r){return r instanceof fi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((o,a,u)=>o&&QA(a,r.filters[u]),!0):!1}(t,e):void de(19439)}function YA(t){return t instanceof mt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ha(n.value)}`}(t):t instanceof fi?function(n){return n.op.toString()+" {"+n.getFilters().map(YA).join(" ,")+"}"}(t):"Filter"}class TO extends mt{constructor(e,n,i){super(e,n,i),this.key=ae.fromName(i.referenceValue)}matches(e){const n=ae.comparator(e.key,this.key);return this.matchesComparison(n)}}class EO extends mt{constructor(e,n){super(e,"in",n),this.keys=XA("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class IO extends mt{constructor(e,n){super(e,"not-in",n),this.keys=XA("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function XA(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(i=>ae.fromName(i.referenceValue))}class SO extends mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ly(n)&&Ku(n.arrayValue,this.value)}}class PO extends mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ku(this.value.arrayValue,n)}}class AO extends mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ku(this.value.arrayValue,n)}}class xO extends mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ly(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Ku(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,n=null,i=[],r=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function iT(t,e=null,n=[],i=[],r=null,o=null,a=null){return new CO(t,e,n,i,r,o,a)}function uy(t){const e=ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>vg(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Ha(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Ha(i)).join(",")),e.Te=n}return e.Te}function cy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!QA(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!nT(t.startAt,e.startAt)&&nT(t.endAt,e.endAt)}function wg(t){return ae.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n=null,i=[],r=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function RO(t,e,n,i,r,o,a,u){return new nl(t,e,n,i,r,o,a,u)}function hy(t){return new nl(t)}function rT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function JA(t){return t.collectionGroup!==null}function _u(t){const e=ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new wt(Nt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new Zu(o,i))}),n.has(Nt.keyField().canonicalString())||e.Ie.push(new Zu(Nt.keyField(),i))}return e.Ie}function bi(t){const e=ye(t);return e.Ee||(e.Ee=kO(e,_u(t))),e.Ee}function kO(t,e){if(t.limitType==="F")return iT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const o=r.dir==="desc"?"asc":"desc";return new Zu(r.field,o)});const n=t.endAt?new Bd(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Bd(t.startAt.position,t.startAt.inclusive):null;return iT(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Tg(t,e){const n=t.filters.concat([e]);return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Eg(t,e,n){return new nl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kf(t,e){return cy(bi(t),bi(e))&&t.limitType===e.limitType}function ex(t){return`${uy(bi(t))}|lt:${t.limitType}`}function ea(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>YA(r)).join(", ")}]`),Cf(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Ha(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Ha(r)).join(",")),`Target(${i})`}(bi(t))}; limitType=${t.limitType})`}function bf(t,e){return e.isFoundDocument()&&function(i,r){const o=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):ae.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,r){for(const o of _u(i))if(!o.field.isKeyField()&&r.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const o of i.filters)if(!o.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(a,u,h){const f=tT(a,u,h);return a.inclusive?f<=0:f<0}(i.startAt,_u(i),r)||i.endAt&&!function(a,u,h){const f=tT(a,u,h);return a.inclusive?f>=0:f>0}(i.endAt,_u(i),r))}(t,e)}function bO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tx(t){return(e,n)=>{let i=!1;for(const r of _u(t)){const o=LO(r,e,n);if(o!==0)return o;i=i||r.field.isKeyField()}return 0}}function LO(t,e,n){const i=t.field.isKeyField()?ae.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?ja(h,f):de(42886)}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return de(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,o]of i)if(this.equalsFn(r,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return void(r[o]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){yo(this.inner,(n,i)=>{for(const[r,o]of i)e(r,o)})}isEmpty(){return FA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO=new Xe(ae.comparator);function pr(){return NO}const nx=new Xe(ae.comparator);function Jl(...t){let e=nx;for(const n of t)e=e.insert(n.key,n);return e}function ix(t){let e=nx;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function $s(){return yu()}function rx(){return yu()}function yu(){return new vo(t=>t.toString(),(t,e)=>t.isEqual(e))}const DO=new Xe(ae.comparator),MO=new wt(ae.comparator);function Ae(...t){let e=MO;for(const n of t)e=e.add(n);return e}const OO=new wt(Pe);function VO(){return OO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vd(e)?"-0":e}}function sx(t){return{integerValue:""+t}}function FO(t,e){return hO(e)?sx(e):dy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this._=void 0}}function UO(t,e,n){return t instanceof zd?function(r,o){const a={fields:{[zA]:{stringValue:BA},[HA]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&ay(o)&&(o=Rf(o)),o&&(a.fields[jA]=o),{mapValue:a}}(n,e):t instanceof Qu?ax(t,e):t instanceof Yu?lx(t,e):function(r,o){const a=ox(r,o),u=sT(a)+sT(r.Ae);return yg(a)&&yg(r.Ae)?sx(u):dy(r.serializer,u)}(t,e)}function BO(t,e,n){return t instanceof Qu?ax(t,e):t instanceof Yu?lx(t,e):n}function ox(t,e){return t instanceof jd?function(i){return yg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class zd extends Lf{}class Qu extends Lf{constructor(e){super(),this.elements=e}}function ax(t,e){const n=ux(e);for(const i of t.elements)n.some(r=>Vi(r,i))||n.push(i);return{arrayValue:{values:n}}}class Yu extends Lf{constructor(e){super(),this.elements=e}}function lx(t,e){let n=ux(e);for(const i of t.elements)n=n.filter(r=>!Vi(r,i));return{arrayValue:{values:n}}}class jd extends Lf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function sT(t){return lt(t.integerValue||t.doubleValue)}function ux(t){return ly(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function zO(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof Qu&&r instanceof Qu||i instanceof Yu&&r instanceof Yu?za(i.elements,r.elements,Vi):i instanceof jd&&r instanceof jd?Vi(i.Ae,r.Ae):i instanceof zd&&r instanceof zd}(t.transform,e.transform)}class jO{constructor(e,n){this.version=e,this.transformResults=n}}class Li{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Nf{}function cx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new dx(t.key,Li.none()):new pc(t.key,t.data,Li.none());{const n=t.data,i=zn.empty();let r=new wt(Nt.comparator);for(let o of e.fields)if(!r.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?i.delete(o):i.set(o,a),r=r.add(o)}return new wo(t.key,i,new oi(r.toArray()),Li.none())}}function HO(t,e,n){t instanceof pc?function(r,o,a){const u=r.value.clone(),h=aT(r.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof wo?function(r,o,a){if(!Xh(r.precondition,o))return void o.convertToUnknownDocument(a.version);const u=aT(r.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(hx(r)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(r,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function vu(t,e,n,i){return t instanceof pc?function(o,a,u,h){if(!Xh(o.precondition,a))return u;const f=o.value.clone(),m=lT(o.fieldTransforms,h,a);return f.setAll(m),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(t,e,n,i):t instanceof wo?function(o,a,u,h){if(!Xh(o.precondition,a))return u;const f=lT(o.fieldTransforms,h,a),m=a.data;return m.setAll(hx(o)),m.setAll(f),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(_=>_.field))}(t,e,n,i):function(o,a,u){return Xh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function WO(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),o=ox(i.transform,r||null);o!=null&&(n===null&&(n=zn.empty()),n.set(i.field,o))}return n||null}function oT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&za(i,r,(o,a)=>zO(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pc extends Nf{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class wo extends Nf{constructor(e,n,i,r,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function aT(t,e,n){const i=new Map;Oe(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let r=0;r<n.length;r++){const o=t[r],a=o.transform,u=e.data.field(o.field);i.set(o.field,BO(a,u,n[r]))}return i}function lT(t,e,n){const i=new Map;for(const r of t){const o=r.transform,a=n.data.field(r.field);i.set(r.field,UO(o,a,e))}return i}class dx extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qO extends Nf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const o=this.mutations[r];o.key.isEqual(e.key)&&HO(o,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=vu(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=vu(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=rx();return this.mutations.forEach(r=>{const o=e.get(r.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(r.key)?null:u;const h=cx(a,u);h!==null&&i.set(r.key,h),a.isValidDocument()||a.convertToNoDocument(_e.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&za(this.mutations,e.mutations,(n,i)=>oT(n,i))&&za(this.baseMutations,e.baseMutations,(n,i)=>oT(n,i))}}class fy{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Oe(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=function(){return DO}();const o=e.mutations;for(let a=0;a<o.length;a++)r=r.insert(o[a].key,i[a].version);return new fy(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft,Ce;function ZO(t){switch(t){case G.OK:return de(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return de(15467,{code:t})}}function fx(t){if(t===void 0)return fr("GRPC error has no .code"),G.UNKNOWN;switch(t){case ft.OK:return G.OK;case ft.CANCELLED:return G.CANCELLED;case ft.UNKNOWN:return G.UNKNOWN;case ft.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case ft.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case ft.INTERNAL:return G.INTERNAL;case ft.UNAVAILABLE:return G.UNAVAILABLE;case ft.UNAUTHENTICATED:return G.UNAUTHENTICATED;case ft.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case ft.NOT_FOUND:return G.NOT_FOUND;case ft.ALREADY_EXISTS:return G.ALREADY_EXISTS;case ft.PERMISSION_DENIED:return G.PERMISSION_DENIED;case ft.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case ft.ABORTED:return G.ABORTED;case ft.OUT_OF_RANGE:return G.OUT_OF_RANGE;case ft.UNIMPLEMENTED:return G.UNIMPLEMENTED;case ft.DATA_LOSS:return G.DATA_LOSS;default:return de(39323,{code:t})}}(Ce=ft||(ft={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=new Jr([4294967295,4294967295],0);function uT(t){const e=QO().encode(t),n=new xA;return n.update(e),new Uint8Array(n.digest())}function cT(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Jr([n,i],0),new Jr([r,o],0)]}class py{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new eu(`Invalid padding: ${n}`);if(i<0)throw new eu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new eu(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new eu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Jr.fromNumber(this.ge)}ye(e,n,i){let r=e.add(n.multiply(Jr.fromNumber(i)));return r.compare(YO)===1&&(r=new Jr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=uT(e),[i,r]=cT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);if(!this.we(a))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new py(o,r,n);return i.forEach(u=>a.insert(u)),a}insert(e){if(this.ge===0)return;const n=uT(e),[i,r]=cT(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(i,r,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,n,i,r,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,mc.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Df(_e.min(),r,new Xe(Pe),pr(),Ae())}}class mc{constructor(e,n,i,r,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new mc(i,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e,n,i,r){this.be=e,this.removedTargetIds=n,this.key=i,this.De=r}}class px{constructor(e,n){this.targetId=e,this.Ce=n}}class mx{constructor(e,n,i=Ot.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class hT{constructor(){this.ve=0,this.Fe=dT(),this.Me=Ot.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ae(),n=Ae(),i=Ae();return this.Fe.forEach((r,o)=>{switch(o){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:de(38017,{changeType:o})}}),new mc(this.Me,this.xe,e,n,i)}qe(){this.Oe=!1,this.Fe=dT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Oe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class XO{constructor(e){this.Ge=e,this.ze=new Map,this.je=pr(),this.Je=Ah(),this.He=Ah(),this.Ye=new Xe(Pe)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const i=this.nt(n);switch(e.state){case 0:this.rt(n)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(e.resumeToken));break;default:de(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((i,r)=>{this.rt(r)&&n(r)})}st(e){const n=e.targetId,i=e.Ce.count,r=this.ot(n);if(r){const o=r.target;if(wg(o))if(i===0){const a=new ae(o.path);this.et(n,a,Wt.newNoDocument(a,_e.min()))}else Oe(i===1,20013,{expectedCount:i});else{const a=this._t(n);if(a!==i){const u=this.ut(e),h=u?this.ct(u,e,a):1;if(h!==0){this.it(n);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:o=0}=n;let a,u;try{a=as(i).toUint8Array()}catch(h){if(h instanceof UA)return Ba("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new py(a,r,o)}catch(h){return Ba(h instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.ge===0?null:u}ct(e,n,i){return n.Ce.count===i-this.Pt(e,n.targetId)?0:2}Pt(e,n){const i=this.Ge.getRemoteKeysForTarget(n);let r=0;return i.forEach(o=>{const a=this.Ge.ht(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.et(n,o,null),r++)}),r}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const u=this.ot(a);if(u){if(o.current&&wg(u.target)){const h=new ae(u.target.path);this.It(h).has(a)||this.Et(a,h)||this.et(a,h,Wt.newNoDocument(h,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let i=Ae();this.He.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(i=i.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const r=new Df(e,n,this.Ye,this.je,i);return this.je=pr(),this.Je=Ah(),this.He=Ah(),this.Ye=new Xe(Pe),r}Xe(e,n){if(!this.rt(e))return;const i=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,n)?r.Qe(n,1):r.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),i&&(this.je=this.je.insert(n,i))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new hT,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new wt(Pe),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new wt(Pe),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hT),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Ah(){return new Xe(ae.comparator)}function dT(){return new Xe(ae.comparator)}const JO={asc:"ASCENDING",desc:"DESCENDING"},eV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tV={and:"AND",or:"OR"};class nV{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ig(t,e){return t.useProto3Json||Cf(e)?e:{value:e}}function Hd(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iV(t,e){return Hd(t,e.toTimestamp())}function Ni(t){return Oe(!!t,49232),_e.fromTimestamp(function(n){const i=os(n);return new Be(i.seconds,i.nanos)}(t))}function my(t,e){return Sg(t,e).canonicalString()}function Sg(t,e){const n=function(r){return new je(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function _x(t){const e=je.fromString(t);return Oe(Ex(e),10190,{key:e.toString()}),e}function Pg(t,e){return my(t.databaseId,e.path)}function Wp(t,e){const n=_x(e);if(n.get(1)!==t.databaseId.projectId)throw new te(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new te(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ae(vx(n))}function yx(t,e){return my(t.databaseId,e)}function rV(t){const e=_x(t);return e.length===4?je.emptyPath():vx(e)}function Ag(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function vx(t){return Oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function fT(t,e,n){return{name:Pg(t,e),fields:n.value.mapValue.fields}}function sV(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:de(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],o=function(f,m){return f.useProto3Json?(Oe(m===void 0||typeof m=="string",58123),Ot.fromBase64String(m||"")):(Oe(m===void 0||m instanceof Buffer||m instanceof Uint8Array,16193),Ot.fromUint8Array(m||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(f){const m=f.code===void 0?G.UNKNOWN:fx(f.code);return new te(m,f.message||"")}(a);n=new mx(i,r,o,u||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Wp(t,i.document.name),o=Ni(i.document.updateTime),a=i.document.createTime?Ni(i.document.createTime):_e.min(),u=new zn({mapValue:{fields:i.document.fields}}),h=Wt.newFoundDocument(r,o,a,u),f=i.targetIds||[],m=i.removedTargetIds||[];n=new Jh(f,m,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Wp(t,i.document),o=i.readTime?Ni(i.readTime):_e.min(),a=Wt.newNoDocument(r,o),u=i.removedTargetIds||[];n=new Jh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Wp(t,i.document),o=i.removedTargetIds||[];n=new Jh([],o,r,null)}else{if(!("filter"in e))return de(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:o}=i,a=new KO(r,o),u=i.targetId;n=new px(u,a)}}return n}function oV(t,e){let n;if(e instanceof pc)n={update:fT(t,e.key,e.value)};else if(e instanceof dx)n={delete:Pg(t,e.key)};else if(e instanceof wo)n={update:fT(t,e.key,e.data),updateMask:mV(e.fieldMask)};else{if(!(e instanceof qO))return de(16599,{Vt:e.type});n={verify:Pg(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const u=a.transform;if(u instanceof zd)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Qu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Yu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof jd)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw de(20930,{transform:a.transform})}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,o){return o.updateTime!==void 0?{updateTime:iV(r,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de(27497)}(t,e.precondition)),n}function aV(t,e){return t&&t.length>0?(Oe(e!==void 0,14353),t.map(n=>function(r,o){let a=r.updateTime?Ni(r.updateTime):Ni(o);return a.isEqual(_e.min())&&(a=Ni(o)),new jO(a,r.transformResults||[])}(n,e))):[]}function lV(t,e){return{documents:[yx(t,e.path)]}}function uV(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=yx(t,r);const o=function(f){if(f.length!==0)return Tx(fi.create(f,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(f){if(f.length!==0)return f.map(m=>function(v){return{field:ta(v.field),direction:dV(v.dir)}}(m))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Ig(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{ft:n,parent:r}}function cV(t){let e=rV(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Oe(i===1,65062);const m=n.from[0];m.allDescendants?r=m.collectionId:e=e.child(m.collectionId)}let o=[];n.where&&(o=function(_){const v=wx(_);return v instanceof fi&&ZA(v)?v.getFilters():[v]}(n.where));let a=[];n.orderBy&&(a=function(_){return _.map(v=>function(k){return new Zu(na(k.field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(v))}(n.orderBy));let u=null;n.limit&&(u=function(_){let v;return v=typeof _=="object"?_.value:_,Cf(v)?null:v}(n.limit));let h=null;n.startAt&&(h=function(_){const v=!!_.before,I=_.values||[];return new Bd(I,v)}(n.startAt));let f=null;return n.endAt&&(f=function(_){const v=!_.before,I=_.values||[];return new Bd(I,v)}(n.endAt)),RO(e,r,a,o,u,"F",h,f)}function hV(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de(28987,{purpose:r})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=na(n.unaryFilter.field);return mt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=na(n.unaryFilter.field);return mt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=na(n.unaryFilter.field);return mt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=na(n.unaryFilter.field);return mt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return de(61313);default:return de(60726)}}(t):t.fieldFilter!==void 0?function(n){return mt.create(na(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return de(58110);default:return de(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return fi.create(n.compositeFilter.filters.map(i=>wx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return de(1026)}}(n.compositeFilter.op))}(t):de(30097,{filter:t})}function dV(t){return JO[t]}function fV(t){return eV[t]}function pV(t){return tV[t]}function ta(t){return{fieldPath:t.canonicalString()}}function na(t){return Nt.fromServerFormat(t.fieldPath)}function Tx(t){return t instanceof mt?function(n){if(n.op==="=="){if(eT(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NAN"}};if(J0(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(eT(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NAN"}};if(J0(n.value))return{unaryFilter:{field:ta(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ta(n.field),op:fV(n.op),value:n.value}}}(t):t instanceof fi?function(n){const i=n.getFilters().map(r=>Tx(r));return i.length===1?i[0]:{compositeFilter:{op:pV(n.op),filters:i}}}(t):de(54877,{filter:t})}function mV(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ex(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr{constructor(e,n,i,r,o=_e.min(),a=_e.min(),u=Ot.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new jr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new jr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e){this.yt=e}}function _V(t){const e=cV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Eg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(){this.Cn=new vV}addToCollectionParentIndex(e,n){return this.Cn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(ss.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(ss.min())}updateCollectionGroup(e,n,i){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class vV{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new wt(je.comparator),o=!r.has(i);return this.index[n]=r.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new wt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ix=41943040;class ln{static withCacheSize(e){return new ln(e,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(Ix,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Wa(0)}static cr(){return new Wa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="LruGarbageCollector",wV=1048576;function gT([t,e],[n,i]){const r=Pe(t,n);return r===0?Pe(e,i):r}class TV{constructor(e){this.Ir=e,this.buffer=new wt(gT),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();gT(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EV{constructor(e,n,i){this.garbageCollector=e,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ie(mT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){tl(n)?ie(mT,"Ignoring IndexedDB error during garbage collection: ",n):await el(n)}await this.Vr(3e5)})}}class IV{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(i=>Math.floor(n/100*i))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(xf.ce);const i=new TV(n);return this.mr.forEachTarget(e,r=>i.Ar(r.sequenceNumber)).next(()=>this.mr.pr(e,r=>i.Ar(r))).next(()=>i.maxValue)}removeTargets(e,n,i){return this.mr.removeTargets(e,n,i)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(pT)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let i,r,o,a,u,h,f;const m=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(_=>(_>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),r=this.params.maximumSequenceNumbersToCollect):r=_,a=Date.now(),this.nthSequenceNumber(e,r))).next(_=>(i=_,u=Date.now(),this.removeTargets(e,i,n))).next(_=>(o=_,h=Date.now(),this.removeOrphanedDocuments(e,i))).next(_=>(f=Date.now(),Jo()<=Se.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-m}ms
	Determined least recently used ${r} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${_} documents in `+(f-h)+`ms
Total Duration: ${f-m}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:_})))}}function SV(t,e){return new IV(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(){this.changes=new vo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Z.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&vu(i.mutation,r,oi.empty(),Be.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Ae()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Ae()){const r=$s();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(o=>{let a=Jl();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const i=$s();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Ae()))}populateOverlays(e,n,i){const r=[];return i.forEach(o=>{n.has(o)||r.push(o)}),this.documentOverlayCache.getOverlays(e,r).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,i,r){let o=pr();const a=yu(),u=function(){return yu()}();return n.forEach((h,f)=>{const m=i.get(f.key);r.has(f.key)&&(m===void 0||m.mutation instanceof wo)?o=o.insert(f.key,f):m!==void 0?(a.set(f.key,m.mutation.getFieldMask()),vu(m.mutation,f,m.mutation.getFieldMask(),Be.now())):a.set(f.key,oi.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,m)=>a.set(f,m)),n.forEach((f,m)=>u.set(f,new AV(m,a.get(f)??null))),u))}recalculateAndSaveOverlays(e,n){const i=yu();let r=new Xe((a,u)=>a-u),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const f=n.get(h);if(f===null)return;let m=i.get(h)||oi.empty();m=u.applyToLocalView(f,m),i.set(h,m);const _=(r.get(u.batchId)||Ae()).add(h);r=r.insert(u.batchId,_)})}).next(()=>{const a=[],u=r.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,m=h.value,_=rx();m.forEach(v=>{if(!o.has(v)){const I=cx(n.get(v),i.get(v));I!==null&&_.set(v,I),o=o.add(v)}}),a.push(this.documentOverlayCache.saveOverlays(e,f,_))}return Z.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(a){return ae.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):JA(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(o=>{const a=r-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-o.size):Z.resolve($s());let u=qu,h=o;return a.next(f=>Z.forEach(f,(m,_)=>(u<_.largestBatchId&&(u=_.largestBatchId),o.get(m)?Z.resolve():this.remoteDocumentCache.getEntry(e,m).next(v=>{h=h.insert(m,v)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ae())).next(m=>({batchId:u,changes:ix(m)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ae(n)).next(i=>{let r=Jl();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const o=n.collectionGroup;let a=Jl();return this.indexManager.getCollectionParents(e,o).next(u=>Z.forEach(u,h=>{const f=function(_,v){return new nl(v,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next(m=>{m.forEach((_,v)=>{a=a.insert(_,v)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,i,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,r))).next(a=>{o.forEach((h,f)=>{const m=f.getKey();a.get(m)===null&&(a=a.insert(m,Wt.newInvalidDocument(m)))});let u=Jl();return a.forEach((h,f)=>{const m=o.get(h);m!==void 0&&vu(m.mutation,f,oi.empty(),Be.now()),bf(n,f)&&(u=u.insert(h,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Ni(r.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(r){return{name:r.name,query:_V(r.bundledQuery),readTime:Ni(r.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(){this.overlays=new Xe(ae.comparator),this.qr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const i=$s();return Z.forEach(n,r=>this.getOverlay(e,r).next(o=>{o!==null&&i.set(r,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,o)=>{this.St(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(i)),Z.resolve()}getOverlaysForCollection(e,n,i){const r=$s(),o=n.length+1,a=new ae(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Z.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let o=new Xe((f,m)=>f-m);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>i){let m=o.get(f.largestBatchId);m===null&&(m=$s(),o=o.insert(f.largestBatchId,m)),m.set(f.getKey(),f)}}const u=$s(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,m)=>u.set(f,m)),!(u.size()>=r)););return Z.resolve(u)}St(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const a=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new GO(n,i));let o=this.qr.get(n);o===void 0&&(o=Ae(),this.qr.set(n,o)),this.qr.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.sessionToken=Ot.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(){this.Qr=new wt(At.$r),this.Ur=new wt(At.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const i=new At(e,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Gr(new At(e,n))}zr(e,n){e.forEach(i=>this.removeReference(i,n))}jr(e){const n=new ae(new je([])),i=new At(n,e),r=new At(n,e+1),o=[];return this.Ur.forEachInRange([i,r],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ae(new je([])),i=new At(n,e),r=new At(n,e+1);let o=Ae();return this.Ur.forEachInRange([i,r],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new At(e,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class At{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ae.comparator(e.key,n.key)||Pe(e.Yr,n.Yr)}static Kr(e,n){return Pe(e.Yr,n.Yr)||ae.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new wt(At.$r)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new $O(o,n,i,r);this.mutationQueue.push(a);for(const u of r)this.Zr=this.Zr.add(new At(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return Z.resolve(a)}lookupMutationBatch(e,n){return Z.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.ei(i),o=r<0?0:r;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?oy:this.tr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new At(n,0),r=new At(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([i,r],a=>{const u=this.Xr(a.Yr);o.push(u)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new wt(Pe);return n.forEach(r=>{const o=new At(r,0),a=new At(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],u=>{i=i.add(u.Yr)})}),Z.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let o=i;ae.isDocumentKey(o)||(o=o.child(""));const a=new At(new ae(o),0);let u=new wt(Pe);return this.Zr.forEachWhile(h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(u=u.add(h.Yr)),!0)},a),Z.resolve(this.ti(u))}ti(e){const n=[];return e.forEach(i=>{const r=this.Xr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Oe(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return Z.forEach(n.mutations,r=>{const o=new At(r.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=i})}ir(e){}containsKey(e,n){const i=new At(n,0),r=this.Zr.firstAfterOrEqual(i);return Z.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e){this.ri=e,this.docs=function(){return new Xe(ae.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),o=r?r.size:0,a=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Z.resolve(i?i.document.mutableCopy():Wt.newInvalidDocument(n))}getEntries(e,n){let i=pr();return n.forEach(r=>{const o=this.docs.get(r);i=i.insert(r,o?o.document.mutableCopy():Wt.newInvalidDocument(r))}),Z.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let o=pr();const a=n.path,u=new ae(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:m}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||aO(oO(m),i)<=0||(r.has(m.key)||bf(n,m))&&(o=o.insert(m.key,m.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,i,r){de(9500)}ii(e,n){return Z.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new NV(this)}getSize(e){return Z.resolve(this.size)}}class NV extends PV{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)}),Z.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e){this.persistence=e,this.si=new vo(n=>uy(n),cy),this.lastRemoteSnapshotVersion=_e.min(),this.highestTargetId=0,this.oi=0,this._i=new gy,this.targetCount=0,this.ai=Wa.ur()}forEachTarget(e,n){return this.si.forEach((i,r)=>n(r)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),Z.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Wa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.Pr(n),Z.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,i){let r=0;const o=[];return this.si.forEach((a,u)=>{u.sequenceNumber<=n&&i.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),r++)}),Z.waitFor(o).next(()=>r)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const i=this.si.get(n)||null;return Z.resolve(i)}addMatchingKeys(e,n,i){return this._i.Wr(n,i),Z.resolve()}removeMatchingKeys(e,n,i){this._i.zr(n,i);const r=this.persistence.referenceDelegate,o=[];return r&&n.forEach(a=>{o.push(r.markPotentiallyOrphaned(e,a))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const i=this._i.Hr(n);return Z.resolve(i)}containsKey(e,n){return Z.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sx{constructor(e,n){this.ui={},this.overlays={},this.ci=new xf(0),this.li=!1,this.li=!0,this.hi=new kV,this.referenceDelegate=e(this),this.Pi=new DV(this),this.indexManager=new yV,this.remoteDocumentCache=function(r){return new LV(r)}(i=>this.referenceDelegate.Ti(i)),this.serializer=new gV(n),this.Ii=new CV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new RV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.ui[e.toKey()];return i||(i=new bV(n,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const r=new MV(this.ci.next());return this.referenceDelegate.Ei(),i(r).next(o=>this.referenceDelegate.di(r).next(()=>o)).toPromise().then(o=>(r.raiseOnCommittedEvent(),o))}Ai(e,n){return Z.or(Object.values(this.ui).map(i=>()=>i.containsKey(e,n)))}}class MV extends uO{constructor(e){super(),this.currentSequenceNumber=e}}class _y{constructor(e){this.persistence=e,this.Ri=new gy,this.Vi=null}static mi(e){return new _y(e)}get fi(){if(this.Vi)return this.Vi;throw de(60996)}addReference(e,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),Z.resolve()}removeReference(e,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(r=>this.fi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(o=>this.fi.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.fi,i=>{const r=ae.fromPath(i);return this.gi(e,r).next(o=>{o||n.removeEntry(r,_e.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return Z.or([()=>Z.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Wd{constructor(e,n){this.persistence=e,this.pi=new vo(i=>dO(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=SV(this,n)}static mi(e,n){return new Wd(e,n)}Ei(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>n.next(r=>i+r))}wr(e){let n=0;return this.pr(e,i=>{n++}).next(()=>n)}pr(e,n){return Z.forEach(this.pi,(i,r)=>this.br(e,i,r).next(o=>o?Z.resolve():n(r)))}removeTargets(e,n,i){return this.persistence.getTargetCache().removeTargets(e,n,i)}removeOrphanedDocuments(e,n){let i=0;const r=this.persistence.getRemoteDocumentCache(),o=r.newChangeBuffer();return r.ii(e,a=>this.br(e,a,n).next(u=>{u||(i++,o.removeEntry(a,_e.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const i=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,i){return this.pi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),Z.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qh(e.data.value)),n}br(e,n,i){return Z.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const r=this.pi.get(n);return Z.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.Es=i,this.ds=r}static As(e,n){let i=Ae(),r=Ae();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:r=r.add(o.doc.key)}return new yy(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VV{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return fN()?8:cO(Gt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,i,r){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,r,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new OV;return this.Ss(e,n,a).next(u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)})}).next(()=>o.result)}bs(e,n,i,r){return i.documentReadCount<this.fs?(Jo()<=Se.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ea(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Z.resolve()):(Jo()<=Se.DEBUG&&ie("QueryEngine","Query:",ea(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(Jo()<=Se.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ea(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bi(n))):Z.resolve())}ys(e,n){if(rT(n))return Z.resolve(null);let i=bi(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Eg(n,null,"F"),i=bi(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=Ae(...o);return this.ps.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,i).next(h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Eg(n,null,"F")):this.vs(e,f,n,h)}))})))}ws(e,n,i,r){return rT(n)||r.isEqual(_e.min())?Z.resolve(null):this.ps.getDocuments(e,i).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,i,r)?Z.resolve(null):(Jo()<=Se.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ea(n)),this.vs(e,a,n,sO(r,qu)).next(u=>u))})}Ds(e,n){let i=new wt(tx(e));return n.forEach((r,o)=>{bf(e,o)&&(i=i.add(o))}),i}Cs(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(r)>0)}Ss(e,n,i){return Jo()<=Se.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ea(n)),this.ps.getDocumentsMatchingQuery(e,n,ss.min(),i)}vs(e,n,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vy="LocalStore",FV=3e8;class UV{constructor(e,n,i,r){this.persistence=e,this.Fs=n,this.serializer=r,this.Ms=new Xe(Pe),this.xs=new vo(o=>uy(o),cy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function BV(t,e,n,i){return new UV(t,e,n,i)}async function Px(t,e){const n=ye(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(o=>(r=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],u=[];let h=Ae();for(const f of r){a.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}for(const f of o){u.push(f.batchId);for(const m of f.mutations)h=h.add(m.key)}return n.localDocuments.getDocuments(i,h).next(f=>({Ls:f,removedBatchIds:a,addedBatchIds:u}))})})}function zV(t,e){const n=ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(u,h,f,m){const _=f.batch,v=_.keys();let I=Z.resolve();return v.forEach(k=>{I=I.next(()=>m.getEntry(h,k)).next(b=>{const F=f.docVersions.get(k);Oe(F!==null,48541),b.version.compareTo(F)<0&&(_.applyToRemoteDocument(b,f),b.isValidDocument()&&(b.setReadTime(f.commitVersion),m.addEntry(b)))})}),I.next(()=>u.mutationQueue.removeMutationBatch(h,_))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(u){let h=Ae();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function Ax(t){const e=ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function jV(t,e){const n=ye(t),i=e.snapshotVersion;let r=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});r=n.Ms;const u=[];e.targetChanges.forEach((m,_)=>{const v=r.get(_);if(!v)return;u.push(n.Pi.removeMatchingKeys(o,m.removedDocuments,_).next(()=>n.Pi.addMatchingKeys(o,m.addedDocuments,_)));let I=v.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(_)!==null?I=I.withResumeToken(Ot.EMPTY_BYTE_STRING,_e.min()).withLastLimboFreeSnapshotVersion(_e.min()):m.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(m.resumeToken,i)),r=r.insert(_,I),function(b,F,A){return b.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=FV?!0:A.addedDocuments.size+A.modifiedDocuments.size+A.removedDocuments.size>0}(v,I,m)&&u.push(n.Pi.updateTargetData(o,I))});let h=pr(),f=Ae();if(e.documentUpdates.forEach(m=>{e.resolvedLimboDocuments.has(m)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,m))}),u.push(HV(o,a,e.documentUpdates).next(m=>{h=m.ks,f=m.qs})),!i.isEqual(_e.min())){const m=n.Pi.getLastRemoteSnapshotVersion(o).next(_=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,i));u.push(m)}return Z.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,f)).next(()=>h)}).then(o=>(n.Ms=r,o))}function HV(t,e,n){let i=Ae(),r=Ae();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=pr();return n.forEach((u,h)=>{const f=o.get(u);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(u)),h.isNoDocument()&&h.version.isEqual(_e.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):ie(vy,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",h.version)}),{ks:a,qs:r}})}function WV(t,e){const n=ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=oy),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function qV(t,e){const n=ye(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Pi.getTargetData(i,e).next(o=>o?(r=o,Z.resolve(r)):n.Pi.allocateTargetId(i).next(a=>(r=new jr(e,a,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(e,i.targetId)),i})}async function xg(t,e,n){const i=ye(t),r=i.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,r))}catch(a){if(!tl(a))throw a;ie(vy,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function _T(t,e,n){const i=ye(t);let r=_e.min(),o=Ae();return i.persistence.runTransaction("Execute query","readwrite",a=>function(h,f,m){const _=ye(h),v=_.xs.get(m);return v!==void 0?Z.resolve(_.Ms.get(v)):_.Pi.getTargetData(f,m)}(i,a,bi(e)).next(u=>{if(u)return r=u.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>i.Fs.getDocumentsMatchingQuery(a,e,n?r:_e.min(),n?o:Ae())).next(u=>($V(i,bO(e),u),{documents:u,Qs:o})))}function $V(t,e,n){let i=t.Os.get(e)||_e.min();n.forEach((r,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Os.set(e,i)}class yT{constructor(){this.activeTargetIds=VO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GV{constructor(){this.Mo=new yT,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,i){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yT,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="ConnectivityMonitor";class wT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ie(vT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ie(vT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xh=null;function Cg(){return xh===null?xh=function(){return 268435456+Math.round(2147483648*Math.random())}():xh++,"0x"+xh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp="RestConnection",ZV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QV{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===Fd?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,n,i,r,o){const a=Cg(),u=this.zo(e,n.toUriEncodedString());ie(qp,`Sending RPC '${e}' ${a}:`,u,i);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,r,o);const{host:f}=new URL(u),m=gs(f);return this.Jo(e,u,h,i,m).then(_=>(ie(qp,`Received RPC '${e}' ${a}: `,_),_),_=>{throw Ba(qp,`RPC '${e}' ${a} failed with error: `,_,"url: ",u,"request:",i),_})}Ho(e,n,i,r,o,a){return this.Go(e,n,i,r,o)}jo(e,n,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ja}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,o)=>e[o]=r),i&&i.headers.forEach((r,o)=>e[o]=r)}zo(e,n){const i=ZV[e];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bt="WebChannelConnection";class XV extends QV{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,i,r,o){const a=Cg();return new Promise((u,h)=>{const f=new CA;f.setWithCredentials(!0),f.listenOnce(RA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case Zh.NO_ERROR:const _=f.getResponseJson();ie(Bt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(_)),u(_);break;case Zh.TIMEOUT:ie(Bt,`RPC '${e}' ${a} timed out`),h(new te(G.DEADLINE_EXCEEDED,"Request time out"));break;case Zh.HTTP_ERROR:const v=f.getStatus();if(ie(Bt,`RPC '${e}' ${a} failed with status:`,v,"response text:",f.getResponseText()),v>0){let I=f.getResponseJson();Array.isArray(I)&&(I=I[0]);const k=I==null?void 0:I.error;if(k&&k.status&&k.message){const b=function(A){const P=A.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(P)>=0?P:G.UNKNOWN}(k.status);h(new te(b,k.message))}else h(new te(G.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new te(G.UNAVAILABLE,"Connection failed."));break;default:de(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{ie(Bt,`RPC '${e}' ${a} completed.`)}});const m=JSON.stringify(r);ie(Bt,`RPC '${e}' ${a} sending request:`,r),f.send(n,"POST",m,i,15)})}T_(e,n,i){const r=Cg(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=LA(),u=bA(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,i),h.encodeInitMessageHeaders=!0;const m=o.join("");ie(Bt,`Creating RPC '${e}' stream ${r}: ${m}`,h);const _=a.createWebChannel(m,h);this.I_(_);let v=!1,I=!1;const k=new YV({Yo:F=>{I?ie(Bt,`Not sending because RPC '${e}' stream ${r} is closed:`,F):(v||(ie(Bt,`Opening RPC '${e}' stream ${r} transport.`),_.open(),v=!0),ie(Bt,`RPC '${e}' stream ${r} sending:`,F),_.send(F))},Zo:()=>_.close()}),b=(F,A,P)=>{F.listen(A,x=>{try{P(x)}catch(B){setTimeout(()=>{throw B},0)}})};return b(_,Xl.EventType.OPEN,()=>{I||(ie(Bt,`RPC '${e}' stream ${r} transport opened.`),k.o_())}),b(_,Xl.EventType.CLOSE,()=>{I||(I=!0,ie(Bt,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(_))}),b(_,Xl.EventType.ERROR,F=>{I||(I=!0,Ba(Bt,`RPC '${e}' stream ${r} transport errored. Name:`,F.name,"Message:",F.message),k.a_(new te(G.UNAVAILABLE,"The operation could not be completed")))}),b(_,Xl.EventType.MESSAGE,F=>{var A;if(!I){const P=F.data[0];Oe(!!P,16349);const x=P,B=(x==null?void 0:x.error)||((A=x[0])==null?void 0:A.error);if(B){ie(Bt,`RPC '${e}' stream ${r} received error:`,B);const q=B.status;let K=function(R){const N=ft[R];if(N!==void 0)return fx(N)}(q),C=B.message;K===void 0&&(K=G.INTERNAL,C="Unknown error status: "+q+" with message "+B.message),I=!0,k.a_(new te(K,C)),_.close()}else ie(Bt,`RPC '${e}' stream ${r} received:`,P),k.u_(P)}}),b(u,kA.STAT_EVENT,F=>{F.stat===mg.PROXY?ie(Bt,`RPC '${e}' stream ${r} detected buffering proxy`):F.stat===mg.NOPROXY&&ie(Bt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.__()},0),k}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function $p(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){return new nV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,i=1e3,r=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=i,this.A_=r,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,n-i);r>0&&ie("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TT="PersistentStream";class Cx{constructor(e,n,i,r,o,a,u,h){this.Mi=e,this.S_=i,this.b_=r,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new xx(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(fr(n.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.D_===n&&this.G_(i,r)},i=>{e(()=>{const r=new te(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)})})}G_(e,n){const i=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{i(()=>this.listener.Xo())}),this.stream.t_(()=>{i(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(r=>{i(()=>this.z_(r))}),this.stream.onMessage(r=>{i(()=>++this.F_==1?this.J_(r):this.onNext(r))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ie(TT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(ie(TT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class JV extends Cx{constructor(e,n,i,r,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=sV(this.serializer,e),i=function(o){if(!("targetChange"in o))return _e.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?_e.min():a.readTime?Ni(a.readTime):_e.min()}(e);return this.listener.H_(n,i)}Y_(e){const n={};n.database=Ag(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=wg(h)?{documents:lV(o,h)}:{query:uV(o,h).ft},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=gx(o,a.resumeToken);const f=Ig(o,a.expectedCount);f!==null&&(u.expectedCount=f)}else if(a.snapshotVersion.compareTo(_e.min())>0){u.readTime=Hd(o,a.snapshotVersion.toTimestamp());const f=Ig(o,a.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const i=hV(this.serializer,e);i&&(n.labels=i),this.q_(n)}Z_(e){const n={};n.database=Ag(this.serializer),n.removeTarget=e,this.q_(n)}}class e4 extends Cx{constructor(e,n,i,r,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=aV(e.writeResults,e.commitTime),i=Ni(e.commitTime);return this.listener.na(i,n)}ra(){const e={};e.database=Ag(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>oV(this.serializer,i))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{}class n4 extends t4{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new te(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Sg(n,i),r,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new te(G.UNKNOWN,o.toString())})}Ho(e,n,i,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Ho(e,Sg(n,i),r,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new te(G.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class i4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fr(n),this.aa=!1):ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lo="RemoteStore";class r4{constructor(e,n,i,r,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{i.enqueueAndForget(async()=>{To(this)&&(ie(lo,"Restarting streams for network reachability change."),await async function(h){const f=ye(h);f.Ea.add(4),await gc(f),f.Ra.set("Unknown"),f.Ea.delete(4),await Of(f)}(this))})}),this.Ra=new i4(i,r)}}async function Of(t){if(To(t))for(const e of t.da)await e(!0)}async function gc(t){for(const e of t.da)await e(!1)}function Rx(t,e){const n=ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Iy(n)?Ey(n):il(n).O_()&&Ty(n,e))}function wy(t,e){const n=ye(t),i=il(n);n.Ia.delete(e),i.O_()&&kx(n,e),n.Ia.size===0&&(i.O_()?i.L_():To(n)&&n.Ra.set("Unknown"))}function Ty(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(_e.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}il(t).Y_(e)}function kx(t,e){t.Va.Ue(e),il(t).Z_(e)}function Ey(t){t.Va=new XO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),il(t).start(),t.Ra.ua()}function Iy(t){return To(t)&&!il(t).x_()&&t.Ia.size>0}function To(t){return ye(t).Ea.size===0}function bx(t){t.Va=void 0}async function s4(t){t.Ra.set("Online")}async function o4(t){t.Ia.forEach((e,n)=>{Ty(t,e)})}async function a4(t,e){bx(t),Iy(t)?(t.Ra.ha(e),Ey(t)):t.Ra.set("Unknown")}async function l4(t,e,n){if(t.Ra.set("Online"),e instanceof mx&&e.state===2&&e.cause)try{await async function(r,o){const a=o.cause;for(const u of o.targetIds)r.Ia.has(u)&&(await r.remoteSyncer.rejectListen(u,a),r.Ia.delete(u),r.Va.removeTarget(u))}(t,e)}catch(i){ie(lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await qd(t,i)}else if(e instanceof Jh?t.Va.Ze(e):e instanceof px?t.Va.st(e):t.Va.tt(e),!n.isEqual(_e.min()))try{const i=await Ax(t.localStore);n.compareTo(i)>=0&&await function(o,a){const u=o.Va.Tt(a);return u.targetChanges.forEach((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const m=o.Ia.get(f);m&&o.Ia.set(f,m.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,f)=>{const m=o.Ia.get(h);if(!m)return;o.Ia.set(h,m.withResumeToken(Ot.EMPTY_BYTE_STRING,m.snapshotVersion)),kx(o,h);const _=new jr(m.target,h,f,m.sequenceNumber);Ty(o,_)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(i){ie(lo,"Failed to raise snapshot:",i),await qd(t,i)}}async function qd(t,e,n){if(!tl(e))throw e;t.Ea.add(1),await gc(t),t.Ra.set("Offline"),n||(n=()=>Ax(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie(lo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Of(t)})}function Lx(t,e){return e().catch(n=>qd(t,n,e))}async function Vf(t){const e=ye(t),n=us(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:oy;for(;u4(e);)try{const r=await WV(e.localStore,i);if(r===null){e.Ta.length===0&&n.L_();break}i=r.batchId,c4(e,r)}catch(r){await qd(e,r)}Nx(e)&&Dx(e)}function u4(t){return To(t)&&t.Ta.length<10}function c4(t,e){t.Ta.push(e);const n=us(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Nx(t){return To(t)&&!us(t).x_()&&t.Ta.length>0}function Dx(t){us(t).start()}async function h4(t){us(t).ra()}async function d4(t){const e=us(t);for(const n of t.Ta)e.ea(n.mutations)}async function f4(t,e,n){const i=t.Ta.shift(),r=fy.from(i,e,n);await Lx(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Vf(t)}async function p4(t,e){e&&us(t).X_&&await async function(i,r){if(function(a){return ZO(a)&&a!==G.ABORTED}(r.code)){const o=i.Ta.shift();us(i).B_(),await Lx(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,r)),await Vf(i)}}(t,e),Nx(t)&&Dx(t)}async function ET(t,e){const n=ye(t);n.asyncQueue.verifyOperationInProgress(),ie(lo,"RemoteStore received new credentials");const i=To(n);n.Ea.add(3),await gc(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Of(n)}async function m4(t,e){const n=ye(t);e?(n.Ea.delete(2),await Of(n)):e||(n.Ea.add(2),await gc(n),n.Ra.set("Unknown"))}function il(t){return t.ma||(t.ma=function(n,i,r){const o=ye(n);return o.sa(),new JV(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:s4.bind(null,t),t_:o4.bind(null,t),r_:a4.bind(null,t),H_:l4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Iy(t)?Ey(t):t.Ra.set("Unknown")):(await t.ma.stop(),bx(t))})),t.ma}function us(t){return t.fa||(t.fa=function(n,i,r){const o=ye(n);return o.sa(),new e4(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,r)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:h4.bind(null,t),r_:p4.bind(null,t),ta:d4.bind(null,t),na:f4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Vf(t)):(await t.fa.stop(),t.Ta.length>0&&(ie(lo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(e,n,i,r,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=o,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,o){const a=Date.now()+i,u=new Sy(e,n,a,r,o);return u.start(i),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new te(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Py(t,e){if(fr("AsyncQueue",`${e}: ${t}`),tl(t))return new te(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ka{static emptySet(e){return new ka(e.comparator)}constructor(e){this.comparator=e?(n,i)=>e(n,i)||ae.comparator(n.key,i.key):(n,i)=>ae.comparator(n.key,i.key),this.keyedMap=Jl(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ka)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,o=i.getNext().key;if(!r.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new ka;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IT{constructor(){this.ga=new Xe(ae.comparator)}track(e){const n=e.doc.key,i=this.ga.get(n);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(n,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(n):e.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):de(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,i)=>{e.push(i)}),e}}class qa{constructor(e,n,i,r,o,a,u,h,f){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,n,i,r,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new qa(e,n,ka.emptySet(n),a,i,r,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class _4{constructor(){this.queries=ST(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const r=ye(n),o=r.queries;r.queries=ST(),o.forEach((a,u)=>{for(const h of u.Sa)h.onError(i)})})(this,new te(G.ABORTED,"Firestore shutting down"))}}function ST(){return new vo(t=>ex(t),kf)}async function Mx(t,e){const n=ye(t);let i=3;const r=e.query;let o=n.queries.get(r);o?!o.ba()&&e.Da()&&(i=2):(o=new g4,i=e.Da()?0:1);try{switch(i){case 0:o.wa=await n.onListen(r,!0);break;case 1:o.wa=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(a){const u=Py(a,`Initialization of query '${ea(e.query)}' failed`);return void e.onError(u)}n.queries.set(r,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Ay(n)}async function Ox(t,e){const n=ye(t),i=e.query;let r=3;const o=n.queries.get(i);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?r=e.Da()?0:1:!o.ba()&&e.Da()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function y4(t,e){const n=ye(t);let i=!1;for(const r of e){const o=r.query,a=n.queries.get(o);if(a){for(const u of a.Sa)u.Fa(r)&&(i=!0);a.wa=r}}i&&Ay(n)}function v4(t,e,n){const i=ye(t),r=i.queries.get(e);if(r)for(const o of r.Sa)o.onError(n);i.queries.delete(e)}function Ay(t){t.Ca.forEach(e=>{e.next()})}var Rg,PT;(PT=Rg||(Rg={})).Ma="default",PT.Cache="cache";class Vx{constructor(e,n,i){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new qa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=qa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e){this.key=e}}class Ux{constructor(e){this.key=e}}class w4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ae(),this.mutatedKeys=Ae(),this.eu=tx(e),this.tu=new ka(this.eu)}get nu(){return this.Ya}ru(e,n){const i=n?n.iu:new IT,r=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=r,u=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((m,_)=>{const v=r.get(m),I=bf(this.query,_)?_:null,k=!!v&&this.mutatedKeys.has(v.key),b=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let F=!1;v&&I?v.data.isEqual(I.data)?k!==b&&(i.track({type:3,doc:I}),F=!0):this.su(v,I)||(i.track({type:2,doc:I}),F=!0,(h&&this.eu(I,h)>0||f&&this.eu(I,f)<0)&&(u=!0)):!v&&I?(i.track({type:0,doc:I}),F=!0):v&&!I&&(i.track({type:1,doc:v}),F=!0,(h||f)&&(u=!0)),F&&(I?(a=a.add(I),o=b?o.add(m):o.delete(m)):(a=a.delete(m),o=o.delete(m)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const m=this.query.limitType==="F"?a.last():a.first();a=a.delete(m.key),o=o.delete(m.key),i.track({type:1,doc:m})}return{tu:a,iu:i,Cs:u,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((m,_)=>function(I,k){const b=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de(20277,{Rt:F})}};return b(I)-b(k)}(m.type,_.type)||this.eu(m.doc,_.doc)),this.ou(i),r=r??!1;const u=n&&!r?this._u():[],h=this.Xa.size===0&&this.current&&!r?1:0,f=h!==this.Za;return this.Za=h,a.length!==0||f?{snapshot:new qa(this.query,e.tu,o,a,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new IT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ae(),this.tu.forEach(i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))});const n=[];return e.forEach(i=>{this.Xa.has(i)||n.push(new Ux(i))}),this.Xa.forEach(i=>{e.has(i)||n.push(new Fx(i))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ae();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return qa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const xy="SyncEngine";class T4{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class E4{constructor(e){this.key=e,this.hu=!1}}class I4{constructor(e,n,i,r,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new vo(u=>ex(u),kf),this.Iu=new Map,this.Eu=new Set,this.du=new Xe(ae.comparator),this.Au=new Map,this.Ru=new gy,this.Vu={},this.mu=new Map,this.fu=Wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function S4(t,e,n=!0){const i=qx(t);let r;const o=i.Tu.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),r=o.view.lu()):r=await Bx(i,e,n,!0),r}async function P4(t,e){const n=qx(t);await Bx(n,e,!0,!1)}async function Bx(t,e,n,i){const r=await qV(t.localStore,bi(e)),o=r.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return i&&(u=await A4(t,e,o,a==="current",r.resumeToken)),t.isPrimaryClient&&n&&Rx(t.remoteStore,r),u}async function A4(t,e,n,i,r){t.pu=(_,v,I)=>async function(b,F,A,P){let x=F.view.ru(A);x.Cs&&(x=await _T(b.localStore,F.query,!1).then(({documents:C})=>F.view.ru(C,x)));const B=P&&P.targetChanges.get(F.targetId),q=P&&P.targetMismatches.get(F.targetId)!=null,K=F.view.applyChanges(x,b.isPrimaryClient,B,q);return xT(b,F.targetId,K.au),K.snapshot}(t,_,v,I);const o=await _T(t.localStore,e,!0),a=new w4(e,o.Qs),u=a.ru(o.documents),h=mc.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),f=a.applyChanges(u,t.isPrimaryClient,h);xT(t,n,f.au);const m=new T4(e,n,a);return t.Tu.set(e,m),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),f.snapshot}async function x4(t,e,n){const i=ye(t),r=i.Tu.get(e),o=i.Iu.get(r.targetId);if(o.length>1)return i.Iu.set(r.targetId,o.filter(a=>!kf(a,e))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await xg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&wy(i.remoteStore,r.targetId),kg(i,r.targetId)}).catch(el)):(kg(i,r.targetId),await xg(i.localStore,r.targetId,!0))}async function C4(t,e){const n=ye(t),i=n.Tu.get(e),r=n.Iu.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),wy(n.remoteStore,i.targetId))}async function R4(t,e,n){const i=O4(t);try{const r=await function(a,u){const h=ye(a),f=Be.now(),m=u.reduce((I,k)=>I.add(k.key),Ae());let _,v;return h.persistence.runTransaction("Locally write mutations","readwrite",I=>{let k=pr(),b=Ae();return h.Ns.getEntries(I,m).next(F=>{k=F,k.forEach((A,P)=>{P.isValidDocument()||(b=b.add(A))})}).next(()=>h.localDocuments.getOverlayedDocuments(I,k)).next(F=>{_=F;const A=[];for(const P of u){const x=WO(P,_.get(P.key).overlayedDocument);x!=null&&A.push(new wo(P.key,x,$A(x.value.mapValue),Li.exists(!0)))}return h.mutationQueue.addMutationBatch(I,f,A,u)}).next(F=>{v=F;const A=F.applyToLocalDocumentSet(_,b);return h.documentOverlayCache.saveOverlays(I,F.batchId,A)})}).then(()=>({batchId:v.batchId,changes:ix(_)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new Xe(Pe)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f}(i,r.batchId,n),await _c(i,r.changes),await Vf(i.remoteStore)}catch(r){const o=Py(r,"Failed to persist write");n.reject(o)}}async function zx(t,e){const n=ye(t);try{const i=await jV(n.localStore,e);e.targetChanges.forEach((r,o)=>{const a=n.Au.get(o);a&&(Oe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?a.hu=!0:r.modifiedDocuments.size>0?Oe(a.hu,14607):r.removedDocuments.size>0&&(Oe(a.hu,42227),a.hu=!1))}),await _c(n,i,e)}catch(i){await el(i)}}function AT(t,e,n){const i=ye(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Tu.forEach((o,a)=>{const u=a.view.va(e);u.snapshot&&r.push(u.snapshot)}),function(a,u){const h=ye(a);h.onlineState=u;let f=!1;h.queries.forEach((m,_)=>{for(const v of _.Sa)v.va(u)&&(f=!0)}),f&&Ay(h)}(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function k4(t,e,n){const i=ye(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Au.get(e),o=r&&r.key;if(o){let a=new Xe(ae.comparator);a=a.insert(o,Wt.newNoDocument(o,_e.min()));const u=Ae().add(o),h=new Df(_e.min(),new Map,new Xe(Pe),a,u);await zx(i,h),i.du=i.du.remove(o),i.Au.delete(e),Cy(i)}else await xg(i.localStore,e,!1).then(()=>kg(i,e,n)).catch(el)}async function b4(t,e){const n=ye(t),i=e.batch.batchId;try{const r=await zV(n.localStore,e);Hx(n,i,null),jx(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await _c(n,r)}catch(r){await el(r)}}async function L4(t,e,n){const i=ye(t);try{const r=await function(a,u){const h=ye(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let m;return h.mutationQueue.lookupMutationBatch(f,u).next(_=>(Oe(_!==null,37113),m=_.keys(),h.mutationQueue.removeMutationBatch(f,_))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,m,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,m)).next(()=>h.localDocuments.getDocuments(f,m))})}(i.localStore,e);Hx(i,e,n),jx(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await _c(i,r)}catch(r){await el(r)}}function jx(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Hx(t,e,n){const i=ye(t);let r=i.Vu[i.currentUser.toKey()];if(r){const o=r.get(e);o&&(n?o.reject(n):o.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function kg(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Iu.get(e))t.Tu.delete(i),n&&t.Pu.yu(i,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(i=>{t.Ru.containsKey(i)||Wx(t,i)})}function Wx(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(wy(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Cy(t))}function xT(t,e,n){for(const i of n)i instanceof Fx?(t.Ru.addReference(i.key,e),N4(t,i)):i instanceof Ux?(ie(xy,"Document no longer in limbo: "+i.key),t.Ru.removeReference(i.key,e),t.Ru.containsKey(i.key)||Wx(t,i.key)):de(19791,{wu:i})}function N4(t,e){const n=e.key,i=n.path.canonicalString();t.du.get(n)||t.Eu.has(i)||(ie(xy,"New document in limbo: "+n),t.Eu.add(i),Cy(t))}function Cy(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ae(je.fromString(e)),i=t.fu.next();t.Au.set(i,new E4(n)),t.du=t.du.insert(n,i),Rx(t.remoteStore,new jr(bi(hy(n.path)),i,"TargetPurposeLimboResolution",xf.ce))}}async function _c(t,e,n){const i=ye(t),r=[],o=[],a=[];i.Tu.isEmpty()||(i.Tu.forEach((u,h)=>{a.push(i.pu(h,e,n).then(f=>{var m;if((f||n)&&i.isPrimaryClient){const _=f?!f.fromCache:(m=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:m.current;i.sharedClientState.updateQueryState(h.targetId,_?"current":"not-current")}if(f){r.push(f);const _=yy.As(h.targetId,f);o.push(_)}}))}),await Promise.all(a),i.Pu.H_(r),await async function(h,f){const m=ye(h);try{await m.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>Z.forEach(f,v=>Z.forEach(v.Es,I=>m.persistence.referenceDelegate.addReference(_,v.targetId,I)).next(()=>Z.forEach(v.ds,I=>m.persistence.referenceDelegate.removeReference(_,v.targetId,I)))))}catch(_){if(!tl(_))throw _;ie(vy,"Failed to update sequence numbers: "+_)}for(const _ of f){const v=_.targetId;if(!_.fromCache){const I=m.Ms.get(v),k=I.snapshotVersion,b=I.withLastLimboFreeSnapshotVersion(k);m.Ms=m.Ms.insert(v,b)}}}(i.localStore,o))}async function D4(t,e){const n=ye(t);if(!n.currentUser.isEqual(e)){ie(xy,"User change. New user:",e.toKey());const i=await Px(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(u=>{u.forEach(h=>{h.reject(new te(G.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await _c(n,i.Ls)}}function M4(t,e){const n=ye(t),i=n.Au.get(e);if(i&&i.hu)return Ae().add(i.key);{let r=Ae();const o=n.Iu.get(e);if(!o)return r;for(const a of o){const u=n.Tu.get(a);r=r.unionWith(u.view.nu)}return r}}function qx(t){const e=ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=zx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=M4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=k4.bind(null,e),e.Pu.H_=y4.bind(null,e.eventManager),e.Pu.yu=v4.bind(null,e.eventManager),e}function O4(t){const e=ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=b4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=L4.bind(null,e),e}class $d{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BV(this.persistence,new VV,e.initialUser,this.serializer)}Cu(e){return new Sx(_y.mi,this.serializer)}Du(e){return new GV}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$d.provider={build:()=>new $d};class V4 extends $d{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Oe(this.persistence.referenceDelegate instanceof Wd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new EV(i,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Sx(i=>Wd.mi(i,n),this.serializer)}}class bg{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>AT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=D4.bind(null,this.syncEngine),await m4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _4}()}createDatastore(e){const n=Mf(e.databaseInfo.databaseId),i=function(o){return new XV(o)}(e.databaseInfo);return function(o,a,u,h){return new n4(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,o,a,u){return new r4(i,r,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>AT(this.syncEngine,n,0),function(){return wT.v()?new wT:new KV}())}createSyncEngine(e,n){return function(r,o,a,u,h,f,m){const _=new I4(r,o,a,u,h,f);return m&&(_.gu=!0),_}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const o=ye(r);ie(lo,"RemoteStore shutting down."),o.Ea.add(5),await gc(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bg.provider={build:()=>new bg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs="FirestoreClient";class F4{constructor(e,n,i,r,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=jt.UNAUTHENTICATED,this.clientId=sy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ie(cs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ie(cs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Py(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Gp(t,e){t.asyncQueue.verifyOperationInProgress(),ie(cs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await Px(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function CT(t,e){t.asyncQueue.verifyOperationInProgress();const n=await U4(t);ie(cs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>ET(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>ET(e.remoteStore,r)),t._onlineComponents=e}async function U4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie(cs,"Using user provided OfflineComponentProvider");try{await Gp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===G.FAILED_PRECONDITION||r.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Ba("Error using user provided cache. Falling back to memory cache: "+n),await Gp(t,new $d)}}else ie(cs,"Using default OfflineComponentProvider"),await Gp(t,new V4(void 0));return t._offlineComponents}async function Gx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie(cs,"Using user provided OnlineComponentProvider"),await CT(t,t._uninitializedComponentsProvider._online)):(ie(cs,"Using default OnlineComponentProvider"),await CT(t,new bg))),t._onlineComponents}function B4(t){return Gx(t).then(e=>e.syncEngine)}async function Kx(t){const e=await Gx(t),n=e.eventManager;return n.onListen=S4.bind(null,e.syncEngine),n.onUnlisten=x4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=P4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=C4.bind(null,e.syncEngine),n}function z4(t,e,n={}){const i=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new $x({next:v=>{m.Nu(),a.enqueueAndForget(()=>Ox(o,_));const I=v.docs.has(u);!I&&v.fromCache?f.reject(new te(G.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&v.fromCache&&h&&h.source==="server"?f.reject(new te(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(v)},error:v=>f.reject(v)}),_=new Vx(hy(u.path),m,{includeMetadataChanges:!0,qa:!0});return Mx(o,_)}(await Kx(t),t.asyncQueue,e,n,i)),i.promise}function j4(t,e,n={}){const i=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,f){const m=new $x({next:v=>{m.Nu(),a.enqueueAndForget(()=>Ox(o,_)),v.fromCache&&h.source==="server"?f.reject(new te(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(v)},error:v=>f.reject(v)}),_=new Vx(u,m,{includeMetadataChanges:!0,qa:!0});return Mx(o,_)}(await Kx(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx="firestore.googleapis.com",kT=!0;class bT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new te(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qx,this.ssl=kT}else this.host=e.host,this.ssl=e.ssl??kT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ix;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wV)throw new te(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zx(e.experimentalLongPollingOptions??{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new te(G.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ff{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new te(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new te(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new KM;switch(i.type){case"firstParty":return new XM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new te(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=RT.get(n);i&&(ie("ComponentProvider","Removing Datastore"),RT.delete(n),i.terminate())}(this),Promise.resolve()}}function H4(t,e,n,i={}){var f;t=rs(t,Ff);const r=gs(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;r&&(G_(`https://${u}`),K_("Firestore",!0)),o.host!==Qx&&o.host!==u&&Ba("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:r,emulatorOptions:i};if(!is(h,a)&&(t._setSettings(h),i.mockUserToken)){let m,_;if(typeof i.mockUserToken=="string")m=i.mockUserToken,_=jt.MOCK_USER;else{m=VP(i.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const v=i.mockUserToken.sub||i.mockUserToken.user_id;if(!v)throw new te(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new jt(v)}t._authCredentials=new ZM(new DA(m,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Eo(this.firestore,e,this._query)}}class _t{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new es(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new _t(this.firestore,e,this._key)}toJSON(){return{type:_t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,i){if(fc(n,_t._jsonSchema))return new _t(e,i||null,new ae(je.fromString(n.referencePath)))}}_t._jsonSchemaVersion="firestore/documentReference/1.0",_t._jsonSchema={type:gt("string",_t._jsonSchemaVersion),referencePath:gt("string")};class es extends Eo{constructor(e,n,i){super(e,n,hy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new ae(e))}withConverter(e){return new es(this.firestore,e,this._path)}}function Yx(t,e,...n){if(t=it(t),MA("collection","path",e),t instanceof Ff){const i=je.fromString(e,...n);return W0(i),new es(t,null,i)}{if(!(t instanceof _t||t instanceof es))throw new te(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return W0(i),new es(t.firestore,null,i)}}function Uf(t,e,...n){if(t=it(t),arguments.length===1&&(e=sy.newId()),MA("doc","path",e),t instanceof Ff){const i=je.fromString(e,...n);return H0(i),new _t(t,null,new ae(i))}{if(!(t instanceof _t||t instanceof es))throw new te(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(je.fromString(e,...n));return H0(i),new _t(t.firestore,t instanceof es?t.converter:null,new ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="AsyncQueue";class NT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new xx(this,"async_queue_retry"),this._c=()=>{const i=$p();i&&ie(LT,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const n=$p();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=$p();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!tl(e))throw e;ie(LT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(i=>{throw this.nc=i,this.rc=!1,fr("INTERNAL UNHANDLED ERROR: ",DT(i)),i}).then(i=>(this.rc=!1,i))));return this.ac=n,n}enqueueAfterDelay(e,n,i){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const r=Sy.createAndSchedule(this,e,n,i,o=>this.hc(o));return this.tc.push(r),r}uc(){this.nc&&de(47125,{Pc:DT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function DT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class yc extends Ff{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new NT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new NT(e),this._firestoreClient=void 0,await e}}}function W4(t,e){const n=typeof t=="object"?t:Ef(),i=typeof t=="string"?t:Fd,r=_s(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const o=DP("firestore");o&&H4(r,...o)}return r}function Ry(t){if(t._terminated)throw new te(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q4(t),t._firestoreClient}function q4(t){var i,r,o;const e=t._freezeSettings(),n=function(u,h,f,m){return new mO(u,h,f,m.host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,Zx(m.experimentalLongPollingOptions),m.useFetchStreams,m.isUsingEmulator)}(t._databaseId,((i=t._app)==null?void 0:i.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new F4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(Ot.fromBase64String(e))}catch(n){throw new te(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new jn(Ot.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(fc(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:gt("string",jn._jsonSchemaVersion),bytes:gt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new te(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new te(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new te(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ui._jsonSchemaVersion}}static fromJSON(e){if(fc(e,ui._jsonSchema))return new ui(e.latitude,e.longitude)}}ui._jsonSchemaVersion="firestore/geoPoint/1.0",ui._jsonSchema={type:gt("string",ui._jsonSchemaVersion),latitude:gt("number"),longitude:gt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==r[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(fc(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Di(e.vectorValues);throw new te(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:gt("string",Di._jsonSchemaVersion),vectorValues:gt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $4=/^__.*__$/;class G4{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new wo(e,this.data,this.fieldMask,n,this.fieldTransforms):new pc(e,this.data,n,this.fieldTransforms)}}function Jx(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de(40011,{Ac:t})}}class by{constructor(e,n,i,r,o,a){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new by({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.gc(e),i}yc(e){var r;const n=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Gd(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jx(this.Ac)&&$4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class K4{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Mf(e)}Cc(e,n,i,r=!1){return new by({Ac:e,methodName:n,Dc:i,path:Nt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ly(t){const e=t._freezeSettings(),n=Mf(t._databaseId);return new K4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function e1(t,e,n,i,r,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,r);i1("Data must be an object, but it was:",a,i);const u=t1(i,a);let h,f;if(o.merge)h=new oi(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const m=[];for(const _ of o.mergeFields){const v=Q4(e,_,n);if(!a.contains(v))throw new te(G.INVALID_ARGUMENT,`Field '${v}' is specified in your field mask but missing from your input data.`);X4(m,v)||m.push(v)}h=new oi(m),f=a.fieldTransforms.filter(_=>h.covers(_.field))}else h=null,f=a.fieldTransforms;return new G4(new zn(u),h,f)}function Z4(t,e,n,i=!1){return Ny(n,t.Cc(i?4:3,e))}function Ny(t,e){if(n1(t=it(t)))return i1("Unsupported field value:",e,t),t1(t,e);if(t instanceof Xx)return function(i,r){if(!Jx(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(i,r){const o=[];let a=0;for(const u of i){let h=Ny(u,r.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,r){if((i=it(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FO(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Be.fromDate(i);return{timestampValue:Hd(r.serializer,o)}}if(i instanceof Be){const o=new Be(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hd(r.serializer,o)}}if(i instanceof ui)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jn)return{bytesValue:gx(r.serializer,i._byteString)};if(i instanceof _t){const o=r.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw r.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:my(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Di)return function(a,u){return{mapValue:{fields:{[WA]:{stringValue:qA},[Ud]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return dy(u.serializer,f)})}}}}}}(i,r);throw r.Sc(`Unsupported field value: ${Af(i)}`)}(t,e)}function t1(t,e){const n={};return FA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):yo(t,(i,r)=>{const o=Ny(r,e.mc(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function n1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Be||t instanceof ui||t instanceof jn||t instanceof _t||t instanceof Xx||t instanceof Di)}function i1(t,e,n){if(!n1(n)||!OA(n)){const i=Af(n);throw i==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+i)}}function Q4(t,e,n){if((e=it(e))instanceof ky)return e._internalPath;if(typeof e=="string")return r1(t,e);throw Gd("Field path arguments must be of type string or ",t,!1,void 0,n)}const Y4=new RegExp("[~\\*/\\[\\]]");function r1(t,e,n){if(e.search(Y4)>=0)throw Gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ky(...e.split("."))._internalPath}catch{throw Gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Gd(t,e,n,i,r){const o=i&&!i.isEmpty(),a=r!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${i}`),a&&(h+=` in document ${r}`),h+=")"),new te(G.INVALID_ARGUMENT,u+t+h)}function X4(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e,n,i,r,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new J4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Bf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class J4 extends s1{data(){return super.data()}}function Bf(t,e){return typeof e=="string"?r1(t,e):e instanceof ky?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new te(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dy{}class o1 extends Dy{}function tF(t,e,...n){let i=[];e instanceof Dy&&i.push(e),i=i.concat(n),function(o){const a=o.filter(h=>h instanceof My).length,u=o.filter(h=>h instanceof zf).length;if(a>1||a>0&&u>0)throw new te(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)t=r._apply(t);return t}class zf extends o1{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new zf(e,n,i)}_apply(e){const n=this._parse(e);return a1(e._query,n),new Eo(e.firestore,e.converter,Tg(e._query,n))}_parse(e){const n=Ly(e.firestore);return function(o,a,u,h,f,m,_){let v;if(f.isKeyField()){if(m==="array-contains"||m==="array-contains-any")throw new te(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${m}' queries on documentId().`);if(m==="in"||m==="not-in"){OT(_,m);const k=[];for(const b of _)k.push(MT(h,o,b));v={arrayValue:{values:k}}}else v=MT(h,o,_)}else m!=="in"&&m!=="not-in"&&m!=="array-contains-any"||OT(_,m),v=Z4(u,a,_,m==="in"||m==="not-in");return mt.create(f,m,v)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function nF(t,e,n){const i=e,r=Bf("where",t);return zf._create(r,i,n)}class My extends Dy{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new My(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:fi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,o){let a=r;const u=o.getFlattenedFilters();for(const h of u)a1(a,h),a=Tg(a,h)}(e._query,n),new Eo(e.firestore,e.converter,Tg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Oy extends o1{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Oy(e,n)}_apply(e){const n=function(r,o,a){if(r.startAt!==null)throw new te(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new te(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zu(o,a)}(e._query,this._field,this._direction);return new Eo(e.firestore,e.converter,function(r,o){const a=r.explicitOrderBy.concat([o]);return new nl(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function iF(t,e="asc"){const n=e,i=Bf("orderBy",t);return Oy._create(i,n)}function MT(t,e,n){if(typeof(n=it(n))=="string"){if(n==="")throw new te(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JA(e)&&n.indexOf("/")!==-1)throw new te(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(je.fromString(n));if(!ae.isDocumentKey(i))throw new te(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return X0(t,new ae(i))}if(n instanceof _t)return X0(t,n._key);throw new te(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Af(n)}.`)}function OT(t,e){if(!Array.isArray(t)||t.length===0)throw new te(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function a1(t,e){const n=function(r,o){for(const a of r)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new te(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new te(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class rF{convertValue(e,n="none"){switch(ls(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(as(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return yo(e,(r,o)=>{i[r]=this.convertValue(o,n)}),i}convertVectorValue(e){var i,r,o;const n=(o=(r=(i=e.fields)==null?void 0:i[Ud].arrayValue)==null?void 0:r.values)==null?void 0:o.map(a=>lt(a.doubleValue));return new Di(n)}convertGeoPoint(e){return new ui(lt(e.latitude),lt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Rf(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp($u(e));default:return null}}convertTimestamp(e){const n=os(e);return new Be(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=je.fromString(e);Oe(Ex(i),9688,{name:e});const r=new Gu(i.get(1),i.get(3)),o=new ae(i.popFirst(5));return r.isEqual(n)||fr(`Document ${o} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e,n){let i;return i=t?t.toFirestore(e):e,i}class tu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ys extends s1{constructor(e,n,i,r,o,a){super(e,n,i,r,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ed(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Bf("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new te(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ys._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ys._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ys._jsonSchema={type:gt("string",Ys._jsonSchemaVersion),bundleSource:gt("string","DocumentSnapshot"),bundleName:gt("string"),bundle:gt("string")};class ed extends Ys{data(e={}){return super.data(e)}}class ba{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new tu(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new ed(this._firestore,this._userDataWriter,i.key,i,new tu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new te(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>{const h=new ed(r._firestore,r._userDataWriter,u.doc.key,u.doc,new tu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new ed(r._firestore,r._userDataWriter,u.doc.key,u.doc,new tu(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,m=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),m=a.indexOf(u.doc.key)),{type:sF(u.type),doc:h,oldIndex:f,newIndex:m}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new te(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ba._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=sy.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],r=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),i.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),r.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sF(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(t){t=rs(t,_t);const e=rs(t.firestore,yc);return z4(Ry(e),t._key).then(n=>uF(e,t,n))}ba._jsonSchemaVersion="firestore/querySnapshot/1.0",ba._jsonSchema={type:gt("string",ba._jsonSchemaVersion),bundleSource:gt("string","QuerySnapshot"),bundleName:gt("string"),bundle:gt("string")};class c1 extends rF{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function oF(t){t=rs(t,Eo);const e=rs(t.firestore,yc),n=Ry(e),i=new c1(e);return eF(t._query),j4(n,t._query).then(r=>new ba(e,i,t,r))}function aF(t,e,n){t=rs(t,_t);const i=rs(t.firestore,yc),r=l1(t.converter,e);return h1(i,[e1(Ly(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,Li.none())])}function lF(t,e){const n=rs(t.firestore,yc),i=Uf(t),r=l1(t.converter,e);return h1(n,[e1(Ly(t.firestore),"addDoc",i._key,r,t.converter!==null,{}).toMutation(i._key,Li.exists(!1))]).then(()=>i)}function h1(t,e){return function(i,r){const o=new rr;return i.asyncQueue.enqueueAndForget(async()=>R4(await B4(i),r,o)),o.promise}(Ry(t),e)}function uF(t,e,n){const i=n.docs.get(e._key),r=new c1(t);return new Ys(t,r,e._key,i,new tu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(r){Ja=r})(go),hi(new Gn("firestore",(i,{instanceIdentifier:r,options:o})=>{const a=i.getProvider("app").getImmediate(),u=new yc(new QM(i.getProvider("auth-internal")),new JM(a,i.getProvider("app-check-internal")),function(f,m){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new te(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gu(f.options.projectId,m)}(a,r),a);return o={useFetchStreams:n,...o},u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),pn(U0,B0,e),pn(U0,B0,"esm2020")})();var cF="firebase",hF="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn(cF,hF,"app");const d1="@firebase/installations",Vy="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1=1e4,p1=`w:${Vy}`,m1="FIS_v2",dF="https://firebaseinstallations.googleapis.com/v1",fF=60*60*1e3,pF="installations",mF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},uo=new mo(pF,mF,gF);function g1(t){return t instanceof Kn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1({projectId:t}){return`${dF}/projects/${t}/installations`}function y1(t){return{token:t.token,requestStatus:2,expiresIn:yF(t.expiresIn),creationTime:Date.now()}}async function v1(t,e){const i=(await e.json()).error;return uo.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function w1({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _F(t,{refreshToken:e}){const n=w1(t);return n.append("Authorization",vF(e)),n}async function T1(t){const e=await t();return e.status>=500&&e.status<600?t():e}function yF(t){return Number(t.replace("s","000"))}function vF(t){return`${m1} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wF({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=_1(t),r=w1(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={fid:n,authVersion:m1,appId:t.appId,sdkVersion:p1},u={method:"POST",headers:r,body:JSON.stringify(a)},h=await T1(()=>fetch(i,u));if(h.ok){const f=await h.json();return{fid:f.fid||n,registrationStatus:2,refreshToken:f.refreshToken,authToken:y1(f.authToken)}}else throw await v1("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TF(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EF=/^[cdef][\w-]{21}$/,Lg="";function IF(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=SF(t);return EF.test(n)?n:Lg}catch{return Lg}}function SF(t){return TF(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1=new Map;function S1(t,e){const n=jf(t);P1(n,e),PF(n,e)}function P1(t,e){const n=I1.get(t);if(n)for(const i of n)i(e)}function PF(t,e){const n=AF();n&&n.postMessage({key:t,fid:e}),xF()}let Gs=null;function AF(){return!Gs&&"BroadcastChannel"in self&&(Gs=new BroadcastChannel("[Firebase] FID Change"),Gs.onmessage=t=>{P1(t.data.key,t.data.fid)}),Gs}function xF(){I1.size===0&&Gs&&(Gs.close(),Gs=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CF="firebase-installations-database",RF=1,co="firebase-installations-store";let Kp=null;function Fy(){return Kp||(Kp=HP(CF,RF,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(co)}}})),Kp}async function Kd(t,e){const n=jf(t),r=(await Fy()).transaction(co,"readwrite"),o=r.objectStore(co),a=await o.get(n);return await o.put(e,n),await r.done,(!a||a.fid!==e.fid)&&S1(t,e.fid),e}async function A1(t){const e=jf(t),i=(await Fy()).transaction(co,"readwrite");await i.objectStore(co).delete(e),await i.done}async function Hf(t,e){const n=jf(t),r=(await Fy()).transaction(co,"readwrite"),o=r.objectStore(co),a=await o.get(n),u=e(a);return u===void 0?await o.delete(n):await o.put(u,n),await r.done,u&&(!a||a.fid!==u.fid)&&S1(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uy(t){let e;const n=await Hf(t.appConfig,i=>{const r=kF(i),o=bF(t,r);return e=o.registrationPromise,o.installationEntry});return n.fid===Lg?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function kF(t){const e=t||{fid:IF(),registrationStatus:0};return x1(e)}function bF(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(uo.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=LF(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:NF(t)}:{installationEntry:e}}async function LF(t,e){try{const n=await wF(t,e);return Kd(t.appConfig,n)}catch(n){throw g1(n)&&n.customData.serverCode===409?await A1(t.appConfig):await Kd(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function NF(t){let e=await VT(t.appConfig);for(;e.registrationStatus===1;)await E1(100),e=await VT(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Uy(t);return i||n}return e}function VT(t){return Hf(t,e=>{if(!e)throw uo.create("installation-not-found");return x1(e)})}function x1(t){return DF(t)?{fid:t.fid,registrationStatus:0}:t}function DF(t){return t.registrationStatus===1&&t.registrationTime+f1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF({appConfig:t,heartbeatServiceProvider:e},n){const i=OF(t,n),r=_F(t,n),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const a={installation:{sdkVersion:p1,appId:t.appId}},u={method:"POST",headers:r,body:JSON.stringify(a)},h=await T1(()=>fetch(i,u));if(h.ok){const f=await h.json();return y1(f)}else throw await v1("Generate Auth Token",h)}function OF(t,{fid:e}){return`${_1(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function By(t,e=!1){let n;const i=await Hf(t.appConfig,o=>{if(!C1(o))throw uo.create("not-registered");const a=o.authToken;if(!e&&UF(a))return o;if(a.requestStatus===1)return n=VF(t,e),o;{if(!navigator.onLine)throw uo.create("app-offline");const u=zF(o);return n=FF(t,u),u}});return n?await n:i.authToken}async function VF(t,e){let n=await FT(t.appConfig);for(;n.authToken.requestStatus===1;)await E1(100),n=await FT(t.appConfig);const i=n.authToken;return i.requestStatus===0?By(t,e):i}function FT(t){return Hf(t,e=>{if(!C1(e))throw uo.create("not-registered");const n=e.authToken;return jF(n)?{...e,authToken:{requestStatus:0}}:e})}async function FF(t,e){try{const n=await MF(t,e),i={...e,authToken:n};return await Kd(t.appConfig,i),n}catch(n){if(g1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await A1(t.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Kd(t.appConfig,i)}throw n}}function C1(t){return t!==void 0&&t.registrationStatus===2}function UF(t){return t.requestStatus===2&&!BF(t)}function BF(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+fF}function zF(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function jF(t){return t.requestStatus===1&&t.requestTime+f1<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HF(t){const e=t,{installationEntry:n,registrationPromise:i}=await Uy(e);return i?i.catch(console.error):By(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WF(t,e=!1){const n=t;return await qF(n),(await By(n,e)).token}async function qF(t){const{registrationPromise:e}=await Uy(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(t){if(!t||!t.options)throw Zp("App Configuration");if(!t.name)throw Zp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Zp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Zp(t){return uo.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1="installations",GF="installations-internal",KF=t=>{const e=t.getProvider("app").getImmediate(),n=$F(e),i=_s(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},ZF=t=>{const e=t.getProvider("app").getImmediate(),n=_s(e,R1).getImmediate();return{getId:()=>HF(n),getToken:r=>WF(n,r)}};function QF(){hi(new Gn(R1,KF,"PUBLIC")),hi(new Gn(GF,ZF,"PRIVATE"))}QF();pn(d1,Vy);pn(d1,Vy,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="analytics",YF="firebase_id",XF="origin",JF=60*1e3,eU="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new Tf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tU={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},En=new mo("analytics","Analytics",tU);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nU(t){if(!t.startsWith(zy)){const e=En.create("invalid-gtag-resource",{gtagURL:t});return en.warn(e.message),""}return t}function k1(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function iU(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function rU(t,e){const n=iU("firebase-js-sdk-policy",{createScriptURL:nU}),i=document.createElement("script"),r=`${zy}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function sU(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function oU(t,e,n,i,r,o){const a=i[r];try{if(a)await e[a];else{const h=(await k1(n)).find(f=>f.measurementId===r);h&&await e[h.appId]}}catch(u){en.error(u)}t("config",r,o)}async function aU(t,e,n,i,r){try{let o=[];if(r&&r.send_to){let a=r.send_to;Array.isArray(a)||(a=[a]);const u=await k1(n);for(const h of a){const f=u.find(_=>_.measurementId===h),m=f&&e[f.appId];if(m)o.push(m);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",i,r||{})}catch(o){en.error(o)}}function lU(t,e,n,i){async function r(o,...a){try{if(o==="event"){const[u,h]=a;await aU(t,e,n,u,h)}else if(o==="config"){const[u,h]=a;await oU(t,e,n,i,u,h)}else if(o==="consent"){const[u,h]=a;t("consent",u,h)}else if(o==="get"){const[u,h,f]=a;t("get",u,h,f)}else if(o==="set"){const[u]=a;t("set",u)}else t(o,...a)}catch(u){en.error(u)}}return r}function uU(t,e,n,i,r){let o=function(...a){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(o=window[r]),window[r]=lU(o,t,e,n),{gtagCore:o,wrappedGtag:window[r]}}function cU(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(zy)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=30,dU=1e3;class fU{constructor(e={},n=dU){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const b1=new fU;function pU(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function mU(t){var a;const{appId:e,apiKey:n}=t,i={method:"GET",headers:pU(n)},r=eU.replace("{app-id}",e),o=await fetch(r,i);if(o.status!==200&&o.status!==304){let u="";try{const h=await o.json();(a=h.error)!=null&&a.message&&(u=h.error.message)}catch{}throw En.create("config-fetch-failed",{httpStatus:o.status,responseMessage:u})}return o.json()}async function gU(t,e=b1,n){const{appId:i,apiKey:r,measurementId:o}=t.options;if(!i)throw En.create("no-app-id");if(!r){if(o)return{measurementId:o,appId:i};throw En.create("no-api-key")}const a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new vU;return setTimeout(async()=>{u.abort()},JF),L1({appId:i,apiKey:r,measurementId:o},a,u,e)}async function L1(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=b1){var u;const{appId:o,measurementId:a}=t;try{await _U(i,e)}catch(h){if(a)return en.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:o,measurementId:a};throw h}try{const h=await mU(t);return r.deleteThrottleMetadata(o),h}catch(h){const f=h;if(!yU(f)){if(r.deleteThrottleMetadata(o),a)return en.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:o,measurementId:a};throw h}const m=Number((u=f==null?void 0:f.customData)==null?void 0:u.httpStatus)===503?c0(n,r.intervalMillis,hU):c0(n,r.intervalMillis),_={throttleEndTimeMillis:Date.now()+m,backoffCount:n+1};return r.setThrottleMetadata(o,_),en.debug(`Calling attemptFetch again in ${m} millis`),L1(t,_,i,r)}}function _U(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),o=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(o),i(En.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function yU(t){if(!(t instanceof Kn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class vU{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function wU(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const o=await e,a={...i,send_to:o};t("event",n,a)}}async function TU(t,e,n,i){if(i&&i.global){const r={};for(const o of Object.keys(n))r[`user_properties.${o}`]=n[o];return t("set",r),Promise.resolve()}else{const r=await e;t("config",r,{update:!0,user_properties:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EU(){if(UP())try{await BP()}catch(t){return en.warn(En.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return en.warn(En.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IU(t,e,n,i,r,o,a){const u=gU(t);u.then(v=>{n[v.measurementId]=v.appId,t.options.measurementId&&v.measurementId!==t.options.measurementId&&en.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${v.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(v=>en.error(v)),e.push(u);const h=EU().then(v=>{if(v)return i.getId()}),[f,m]=await Promise.all([u,h]);cU(o)||rU(o,f.measurementId),r("js",new Date);const _=(a==null?void 0:a.config)??{};return _[XF]="firebase",_.update=!0,m!=null&&(_[YF]=m),r("config",f.measurementId,_),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SU{constructor(e){this.app=e}_delete(){return delete La[this.app.options.appId],Promise.resolve()}}let La={},UT=[];const BT={};let Qp="dataLayer",PU="gtag",zT,jy,jT=!1;function AU(){const t=[];if(FP()&&t.push("This is a browser extension environment."),pN()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=En.create("invalid-analytics-context",{errorInfo:e});en.warn(n.message)}}function xU(t,e,n){AU();const i=t.options.appId;if(!i)throw En.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)en.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw En.create("no-api-key");if(La[i]!=null)throw En.create("already-exists",{id:i});if(!jT){sU(Qp);const{wrappedGtag:o,gtagCore:a}=uU(La,UT,BT,Qp,PU);jy=o,zT=a,jT=!0}return La[i]=IU(t,UT,BT,e,zT,Qp,n),new SU(t)}function CU(t=Ef()){t=it(t);const e=_s(t,Zd);return e.isInitialized()?e.getImmediate():RU(t)}function RU(t,e={}){const n=_s(t,Zd);if(n.isInitialized()){const r=n.getImmediate();if(is(e,n.getOptions()))return r;throw En.create("already-initialized")}return n.initialize({options:e})}function kU(t,e,n){t=it(t),TU(jy,La[t.app.options.appId],e,n).catch(i=>en.error(i))}function bU(t,e,n,i){t=it(t),wU(jy,La[t.app.options.appId],e,n,i).catch(r=>en.error(r))}const HT="@firebase/analytics",WT="0.10.19";function LU(){hi(new Gn(Zd,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return xU(i,r,n)},"PUBLIC")),hi(new Gn("analytics-internal",t,"PRIVATE")),pn(HT,WT),pn(HT,WT,"esm2020");function t(e){try{const n=e.getProvider(Zd).getImmediate();return{logEvent:(i,r,o)=>bU(n,i,r,o),setUserProperties:(i,r)=>kU(n,i,r)}}catch(n){throw En.create("interop-component-reg-failed",{reason:n})}}}LU();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="firebasestorage.googleapis.com",D1="storageBucket",NU=2*60*1e3,DU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st extends Kn{constructor(e,n,i=0){super(Yp(e),`Firebase Storage: ${n} (${Yp(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,st.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Yp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var rt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(rt||(rt={}));function Yp(t){return"storage/"+t}function Hy(){const t="An unknown error occurred, please check the error payload for server response.";return new st(rt.UNKNOWN,t)}function MU(t){return new st(rt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function OU(t){return new st(rt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function VU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new st(rt.UNAUTHENTICATED,t)}function FU(){return new st(rt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function UU(t){return new st(rt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function BU(){return new st(rt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function zU(){return new st(rt.CANCELED,"User canceled the upload/download.")}function jU(t){return new st(rt.INVALID_URL,"Invalid URL '"+t+"'.")}function HU(t){return new st(rt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function WU(){return new st(rt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+D1+"' property when initializing the app?")}function qU(){return new st(rt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $U(){return new st(rt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function GU(t){return new st(rt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ng(t){return new st(rt.INVALID_ARGUMENT,t)}function M1(){return new st(rt.APP_DELETED,"The Firebase app was deleted.")}function KU(t){return new st(rt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wu(t,e){return new st(rt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Wl(t){throw new st(rt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let i;try{i=wn.makeFromUrl(e,n)}catch{return new wn(e,"")}if(i.path==="")return i;throw HU(e)}static makeFromUrl(e,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function o(B){B.path.charAt(B.path.length-1)==="/"&&(B.path_=B.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+r+a,"i"),h={bucket:1,path:3};function f(B){B.path_=decodeURIComponent(B.path)}const m="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",I=new RegExp(`^https?://${_}/${m}/b/${r}/o${v}`,"i"),k={bucket:1,path:3},b=n===N1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,F="([^?#]*)",A=new RegExp(`^https?://${b}/${r}/${F}`,"i"),x=[{regex:u,indices:h,postModify:o},{regex:I,indices:k,postModify:f},{regex:A,indices:{bucket:1,path:2},postModify:f}];for(let B=0;B<x.length;B++){const q=x[B],K=q.regex.exec(e);if(K){const C=K[q.indices.bucket];let E=K[q.indices.path];E||(E=""),i=new wn(C,E),q.postModify(i);break}}if(i==null)throw jU(e);return i}}class ZU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t,e,n){let i=1,r=null,o=null,a=!1,u=0;function h(){return u===2}let f=!1;function m(...F){f||(f=!0,e.apply(null,F))}function _(F){r=setTimeout(()=>{r=null,t(I,h())},F)}function v(){o&&clearTimeout(o)}function I(F,...A){if(f){v();return}if(F){v(),m.call(null,F,...A);return}if(h()||a){v(),m.call(null,F,...A);return}i<64&&(i*=2);let x;u===1?(u=2,x=0):x=(i+Math.random())*1e3,_(x)}let k=!1;function b(F){k||(k=!0,v(),!f&&(r!==null?(F||(u=2),clearTimeout(r),_(0)):F||(u=1)))}return _(0),o=setTimeout(()=>{a=!0,b(!0)},n),b}function YU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XU(t){return t!==void 0}function JU(t){return typeof t=="object"&&!Array.isArray(t)}function Wy(t){return typeof t=="string"||t instanceof String}function qT(t){return qy()&&t instanceof Blob}function qy(){return typeof Blob<"u"}function $T(t,e,n,i){if(i<e)throw Ng(`Invalid value for '${t}'. Expected ${e} or greater.`);if(i>n)throw Ng(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(t,e,n){let i=e;return n==null&&(i=`https://${e}`),`${n}://${i}/v0${t}`}function O1(t){const e=encodeURIComponent;let n="?";for(const i in t)if(t.hasOwnProperty(i)){const r=e(i)+"="+e(t[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var Xs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xs||(Xs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(t,e){const n=t>=500&&t<600,r=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||r||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t3{constructor(e,n,i,r,o,a,u,h,f,m,_,v=!0,I=!1){this.url_=e,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=f,this.progressCallback_=m,this.connectionFactory_=_,this.retry=v,this.isUsingEmulator=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,b)=>{this.resolve_=k,this.reject_=b,this.start_()})}start_(){const e=(i,r)=>{if(r){i(!1,new Ch(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const h=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,f)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===Xs.NO_ERROR,h=o.getStatus();if(!u||e3(h,this.additionalRetryCodes_)&&this.retry){const m=o.getErrorCode()===Xs.ABORT;i(!1,new Ch(!1,null,m));return}const f=this.successCodes_.indexOf(h)!==-1;i(!0,new Ch(f,o))})},n=(i,r)=>{const o=this.resolve_,a=this.reject_,u=r.connection;if(r.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());XU(h)?o(h):o()}catch(h){a(h)}else if(u!==null){const h=Hy();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(r.canceled){const h=this.appDelete_?M1():zU();a(h)}else{const h=BU();a(h)}};this.canceled_?n(!1,new Ch(!1,null,!0)):this.backoffId_=QU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ch{constructor(e,n,i){this.wasSuccessCode=e,this.connection=n,this.canceled=!!i}}function n3(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function i3(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function r3(t,e){e&&(t["X-Firebase-GMPID"]=e)}function s3(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function o3(t,e,n,i,r,o,a=!0,u=!1){const h=O1(t.urlParams),f=t.url+h,m=Object.assign({},t.headers);return r3(m,e),n3(m,n),i3(m,o),s3(m,i),new t3(f,t.method,m,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r,a,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function l3(...t){const e=a3();if(e!==void 0){const n=new e;for(let i=0;i<t.length;i++)n.append(t[i]);return n.getBlob()}else{if(qy())return new Blob(t);throw new st(rt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u3(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t){if(typeof atob>"u")throw GU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ai={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xp{constructor(e,n){this.data=e,this.contentType=n||null}}function h3(t,e){switch(t){case Ai.RAW:return new Xp(V1(e));case Ai.BASE64:case Ai.BASE64URL:return new Xp(F1(t,e));case Ai.DATA_URL:return new Xp(f3(e),p3(e))}throw Hy()}function V1(t){const e=[];for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);if(i<=127)e.push(i);else if(i<=2047)e.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=i,a=t.charCodeAt(++n);i=65536|(o&1023)<<10|a&1023,e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(e)}function d3(t){let e;try{e=decodeURIComponent(t)}catch{throw wu(Ai.DATA_URL,"Malformed data URL.")}return V1(e)}function F1(t,e){switch(t){case Ai.BASE64:{const r=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(r||o)throw wu(t,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Ai.BASE64URL:{const r=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(r||o)throw wu(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=c3(e)}catch(r){throw r.message.includes("polyfill")?r:wu(t,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class U1{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw wu(Ai.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=m3(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}function f3(t){const e=new U1(t);return e.base64?F1(Ai.BASE64,e.rest):d3(e.rest)}function p3(t){return new U1(t).contentType}function m3(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n){let i=0,r="";qT(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(qT(this.data_)){const i=this.data_,r=u3(i,e,n);return r===null?null:new Ur(r)}else{const i=new Uint8Array(this.data_.buffer,e,n-e);return new Ur(i,!0)}}static getBlob(...e){if(qy()){const n=e.map(i=>i instanceof Ur?i.data_:i);return new Ur(l3.apply(null,n))}else{const n=e.map(a=>Wy(a)?h3(Ai.RAW,a).data:a.data_);let i=0;n.forEach(a=>{i+=a.byteLength});const r=new Uint8Array(i);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)r[o++]=a[u]}),new Ur(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B1(t){let e;try{e=JSON.parse(t)}catch{return null}return JU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function _3(t,e){const n=e.split("/").filter(i=>i.length>0).join("/");return t.length===0?n:t+"/"+n}function z1(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(t,e){return e}class Yt{constructor(e,n,i,r){this.server=e,this.local=n||e,this.writable=!!i,this.xform=r||y3}}let Rh=null;function v3(t){return!Wy(t)||t.length<2?t:z1(t)}function j1(){if(Rh)return Rh;const t=[];t.push(new Yt("bucket")),t.push(new Yt("generation")),t.push(new Yt("metageneration")),t.push(new Yt("name","fullPath",!0));function e(o,a){return v3(a)}const n=new Yt("name");n.xform=e,t.push(n);function i(o,a){return a!==void 0?Number(a):a}const r=new Yt("size");return r.xform=i,t.push(r),t.push(new Yt("timeCreated")),t.push(new Yt("updated")),t.push(new Yt("md5Hash",null,!0)),t.push(new Yt("cacheControl",null,!0)),t.push(new Yt("contentDisposition",null,!0)),t.push(new Yt("contentEncoding",null,!0)),t.push(new Yt("contentLanguage",null,!0)),t.push(new Yt("contentType",null,!0)),t.push(new Yt("metadata","customMetadata",!0)),Rh=t,Rh}function w3(t,e){function n(){const i=t.bucket,r=t.fullPath,o=new wn(i,r);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function T3(t,e,n){const i={};i.type="file";const r=n.length;for(let o=0;o<r;o++){const a=n[o];i[a.local]=a.xform(i,e[a.server])}return w3(i,t),i}function H1(t,e,n){const i=B1(e);return i===null?null:T3(t,i,n)}function E3(t,e,n,i){const r=B1(e);if(r===null||!Wy(r.downloadTokens))return null;const o=r.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(f=>{const m=t.bucket,_=t.fullPath,v="/b/"+a(m)+"/o/"+a(_),I=$y(v,n,i),k=O1({alt:"media",token:f});return I+k})[0]}function I3(t,e){const n={},i=e.length;for(let r=0;r<i;r++){const o=e[r];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class W1{constructor(e,n,i,r){this.url=e,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(t){if(!t)throw Hy()}function S3(t,e){function n(i,r){const o=H1(t,r,e);return q1(o!==null),o}return n}function P3(t,e){function n(i,r){const o=H1(t,r,e);return q1(o!==null),E3(o,r,t.host,t._protocol)}return n}function $1(t){function e(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=FU():r=VU():n.getStatus()===402?r=OU(t.bucket):n.getStatus()===403?r=UU(t.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return e}function A3(t){const e=$1(t);function n(i,r){let o=e(i,r);return i.getStatus()===404&&(o=MU(t.path)),o.serverResponse=r.serverResponse,o}return n}function x3(t,e,n){const i=e.fullServerUrl(),r=$y(i,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new W1(r,o,P3(t,n),a);return u.errorHandler=A3(e),u}function C3(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function R3(t,e,n){const i=Object.assign({},n);return i.fullPath=t.path,i.size=e.size(),i.contentType||(i.contentType=C3(null,e)),i}function k3(t,e,n,i,r){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let x="";for(let B=0;B<2;B++)x=x+Math.random().toString().slice(2);return x}const h=u();a["Content-Type"]="multipart/related; boundary="+h;const f=R3(e,i,r),m=I3(f,n),_="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+m+`\r
--`+h+`\r
Content-Type: `+f.contentType+`\r
\r
`,v=`\r
--`+h+"--",I=Ur.getBlob(_,i,v);if(I===null)throw qU();const k={name:f.fullPath},b=$y(o,t.host,t._protocol),F="POST",A=t.maxUploadRetryTime,P=new W1(b,F,S3(t,n),A);return P.urlParams=k,P.headers=a,P.body=I.uploadData(),P.errorHandler=$1(e),P}class b3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,i,r,o){if(this.sent_)throw Wl("cannot .send() more than once");if(gs(e)&&i&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const a in o)o.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,o[a].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Wl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Wl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Wl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Wl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class L3 extends b3{initXhr(){this.xhr_.responseType="text"}}function G1(){return new L3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this._service=e,n instanceof wn?this._location=n:this._location=wn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ho(e,n)}get root(){const e=new wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return z1(this._location.path)}get storage(){return this._service}get parent(){const e=g3(this._location.path);if(e===null)return null;const n=new wn(this._location.bucket,e);return new ho(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KU(e)}}function N3(t,e,n){t._throwIfRoot("uploadBytes");const i=k3(t.storage,t._location,j1(),new Ur(e,!0),n);return t.storage.makeRequestWithTokens(i,G1).then(r=>({metadata:r,ref:t}))}function D3(t){t._throwIfRoot("getDownloadURL");const e=x3(t.storage,t._location,j1());return t.storage.makeRequestWithTokens(e,G1).then(n=>{if(n===null)throw $U();return n})}function M3(t,e){const n=_3(t._location.path,e),i=new wn(t._location.bucket,n);return new ho(t.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3(t){return/^[A-Za-z]+:\/\//.test(t)}function V3(t,e){return new ho(t,e)}function K1(t,e){if(t instanceof Gy){const n=t;if(n._bucket==null)throw WU();const i=new ho(n,n._bucket);return e!=null?K1(i,e):i}else return e!==void 0?M3(t,e):t}function F3(t,e){if(e&&O3(e)){if(t instanceof Gy)return V3(t,e);throw Ng("To use ref(service, url), the first argument must be a Storage instance.")}else return K1(t,e)}function GT(t,e){const n=e==null?void 0:e[D1];return n==null?null:wn.makeFromBucketSpec(n,t)}function U3(t,e,n,i={}){t.host=`${e}:${n}`;const r=gs(e);r&&(G_(`https://${t.host}/b`),K_("Storage",!0)),t._isUsingEmulator=!0,t._protocol=r?"https":"http";const{mockUserToken:o}=i;o&&(t._overrideAuthToken=typeof o=="string"?o:VP(o,t.app.options.projectId))}class Gy{constructor(e,n,i,r,o,a=!1){this.app=e,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=o,this._isUsingEmulator=a,this._bucket=null,this._host=N1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NU,this._maxUploadRetryTime=DU,this._requests=new Set,r!=null?this._bucket=wn.makeFromBucketSpec(r,this._host):this._bucket=GT(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=wn.makeFromBucketSpec(this._url,e):this._bucket=GT(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$T("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(yn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ho(this,e)}_makeRequest(e,n,i,r,o=!0){if(this._deleted)return new ZU(M1());{const a=o3(e,this._appId,i,r,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,i,r).getPromise()}}const KT="@firebase/storage",ZT="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="storage";function B3(t,e,n){return t=it(t),N3(t,e,n)}function z3(t){return t=it(t),D3(t)}function j3(t,e){return t=it(t),F3(t,e)}function H3(t=Ef(),e){t=it(t);const i=_s(t,Z1).getImmediate({identifier:e}),r=DP("storage");return r&&W3(i,...r),i}function W3(t,e,n,i={}){U3(t,e,n,i)}function q3(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),r=t.getProvider("app-check-internal");return new Gy(n,i,r,e,go)}function $3(){hi(new Gn(Z1,q3,"PUBLIC").setMultipleInstances(!0)),pn(KT,ZT,""),pn(KT,ZT,"esm2020")}$3();const G3={apiKey:"AIzaSyAocFg8GTA2aTtFmaB4aeh0b7dMkpt5KE4",authDomain:"agsciudadana-cd133.firebaseapp.com",projectId:"agsciudadana-cd133",storageBucket:"agsciudadana-cd133.firebasestorage.app",messagingSenderId:"336787209572",appId:"1:336787209572:web:50e3aad650c90a74164e71",measurementId:"G-K5175XFSTD"},Wf=WP(G3);CU(Wf);const vc=W4(Wf),K3=H3(Wf),qf=$M(Wf),Z3=async(t,e,n)=>{try{const r=(await kD(qf,e,n)).user;return await aF(Uf(vc,"users",r.uid),{uid:r.uid,name:t,email:e,createdAt:new Date().toISOString(),photoURL:null}),{success:!0,user:{uid:r.uid,name:t,email:e}}}catch(i){console.error("Error en signup:",i);let r="Error al crear la cuenta";return i.code==="auth/email-already-in-use"?r="El correo ya est registrado":i.code==="auth/weak-password"?r="La contrasea debe tener al menos 6 caracteres":i.code==="auth/invalid-email"&&(r="El correo electrnico no es vlido"),{success:!1,error:r}}},Q3=async(t,e)=>{try{const i=(await bD(qf,t,e)).user,o=(await u1(Uf(vc,"users",i.uid))).data();return{success:!0,user:{uid:i.uid,name:(o==null?void 0:o.name)||"Usuario",email:i.email,photoURL:(o==null?void 0:o.photoURL)||null}}}catch(n){console.error("Error en login:",n);let i="Error al iniciar sesin";return n.code==="auth/user-not-found"||n.code==="auth/wrong-password"?i="Credenciales invlidas":n.code==="auth/invalid-email"?i="El correo electrnico no es vlido":n.code==="auth/invalid-credential"&&(i="Credenciales invlidas"),{success:!1,error:i}}},Y3=async()=>{try{return await MD(qf),{success:!0}}catch(t){return console.error("Error en logout:",t),{success:!1,error:"Error al cerrar sesin"}}},X3=t=>DD(qf,async e=>{if(e){const i=(await u1(Uf(vc,"users",e.uid))).data();t({uid:e.uid,name:(i==null?void 0:i.name)||"Usuario",email:e.email,photoURL:(i==null?void 0:i.photoURL)||null})}else t(null)}),Q1=Y.createContext();function J3({children:t}){const[e,n]=Y.useState(null),[i,r]=Y.useState(!0);Y.useEffect(()=>{const h=X3(f=>{n(f),r(!1)});return()=>h()},[]);const o=async(h,f)=>{try{const m=await Q3(h,f);return m.success&&n(m.user),m}catch(m){return console.error("Error en login:",m),{success:!1,error:"Error al iniciar sesin"}}},a=async(h,f,m)=>{try{const _=await Z3(h,f,m);return _.success&&n(_.user),_}catch(_){return console.error("Error en signup:",_),{success:!1,error:"Error al crear la cuenta"}}},u=async()=>{try{await Y3(),n(null)}catch(h){console.error("Error en logout:",h)}};return V.jsx(Q1.Provider,{value:{user:e,login:o,signup:a,logout:u,loading:i},children:t})}const rl=()=>Y.useContext(Q1);function Y1(t,e){const n=Y.useRef(e);Y.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}const eB=1;function tB(t){return Object.freeze({__version:eB,map:t})}function nB(t,e){return Object.freeze({...t,...e})}const X1=Y.createContext(null),J1=X1.Provider;function Ky(){const t=Y.useContext(X1);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function iB(t){function e(n,i){const{instance:r,context:o}=t(n).current;return Y.useImperativeHandle(i,()=>r),n.children==null?null:rd.createElement(J1,{value:o},n.children)}return Y.forwardRef(e)}function rB(t){function e(n,i){const[r,o]=Y.useState(!1),{instance:a}=t(n,o).current;Y.useImperativeHandle(i,()=>a),Y.useEffect(function(){r&&a.update()},[a,r,n.children]);const u=a._contentNode;return u?SP.createPortal(n.children,u):null}return Y.forwardRef(e)}function sB(t){function e(n,i){const{instance:r}=t(n).current;return Y.useImperativeHandle(i,()=>r),null}return Y.forwardRef(e)}function eC(t,e){const n=Y.useRef();Y.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Zy(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function oB(t,e){return function(i,r){const o=Ky(),a=t(Zy(i,o),o);return Y1(o.map,i.attribution),eC(a.current,i.eventHandlers),e(a.current,o,i,r),a}}var Dg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(ck,function(n){var i="1.9.4";function r(s){var l,d,p,y;for(d=1,p=arguments.length;d<p;d++){y=arguments[d];for(l in y)s[l]=y[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var p=d.call(arguments,2);return function(){return s.apply(l,p.length?p.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function f(s,l,d){var p,y,T,M;return M=function(){p=!1,y&&(T.apply(d,y),y=!1)},T=function(){p?y=arguments:(s.apply(d,arguments),setTimeout(M,l),p=!0)},T}function m(s,l,d){var p=l[1],y=l[0],T=p-y;return s===p&&d?s:((s-y)%T+T)%T+y}function _(){return!1}function v(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function I(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function k(s){return I(s).split(/\s+/)}function b(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function F(s,l,d){var p=[];for(var y in s)p.push(encodeURIComponent(d?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!l||l.indexOf("?")===-1?"?":"&")+p.join("&")}var A=/\{ *([\w_ -]+) *\}/g;function P(s,l){return s.replace(A,function(d,p){var y=l[p];if(y===void 0)throw new Error("No value provided for variable "+d);return typeof y=="function"&&(y=y(l)),y})}var x=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function B(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var q="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function K(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var C=0;function E(s){var l=+new Date,d=Math.max(0,16-(l-C));return C=l+d,window.setTimeout(s,d)}var R=window.requestAnimationFrame||K("RequestAnimationFrame")||E,N=window.cancelAnimationFrame||K("CancelAnimationFrame")||K("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function O(s,l,d){if(d&&R===E)s.call(l);else return R.call(window,a(s,l))}function U(s){s&&N.call(window,s)}var D={__proto__:null,extend:r,create:o,bind:a,get lastId(){return u},stamp:h,throttle:f,wrapNum:m,falseFn:_,formatNum:v,trim:I,splitWords:k,setOptions:b,getParamString:F,template:P,isArray:x,indexOf:B,emptyImageUrl:q,requestFn:R,cancelFn:N,requestAnimFrame:O,cancelAnimFrame:U};function Ne(){}Ne.extend=function(s){var l=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,p=o(d);p.constructor=l,l.prototype=p;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return s.statics&&r(l,s.statics),s.includes&&(Cn(s.includes),r.apply(null,[p].concat(s.includes))),r(p,s),delete p.statics,delete p.includes,p.options&&(p.options=d.options?o(d.options):{},r(p.options,s.options)),p._initHooks=[],p.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,M=p._initHooks.length;T<M;T++)p._initHooks[T].call(this)}},l},Ne.include=function(s){var l=this.prototype.options;return r(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Ne.mergeOptions=function(s){return r(this.prototype.options,s),this},Ne.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function Cn(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=x(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l);else{s=k(s);for(var y=0,T=s.length;y<T;y++)this._on(s[y],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var p in s)this._off(p,s[p],l);else{s=k(s);for(var y=arguments.length===1,T=0,M=s.length;T<M;T++)y?this._off(s[T]):this._off(s[T],l,d)}return this},_on:function(s,l,d,p){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var y={fn:l,ctx:d};p&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,l,d){var p,y,T;if(this._events&&(p=this._events[s],!!p)){if(arguments.length===1){if(this._firingCount)for(y=0,T=p.length;y<T;y++)p[y].fn=_;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var M=this._listens(s,l,d);if(M!==!1){var j=p[M];this._firingCount&&(j.fn=_,this._events[s]=p=p.slice()),p.splice(M,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var p=r({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var T=0,M=y.length;T<M;T++){var j=y[T],W=j.fn;j.once&&this.off(s,W,j.ctx),W.call(j.ctx||this,p)}this._firingCount--}}return d&&this._propagateEvent(p),this},listens:function(s,l,d,p){typeof s!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(p=!!l,y=void 0,d=void 0);var T=this._events&&this._events[s];if(T&&T.length&&this._listens(s,y,d)!==!1)return!0;if(p){for(var M in this._eventParents)if(this._eventParents[M].listens(s,l,d,p))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var p=this._events[s]||[];if(!l)return!!p.length;d===this&&(d=void 0);for(var y=0,T=p.length;y<T;y++)if(p[y].fn===l&&p[y].ctx===d)return y;return!1},once:function(s,l,d){if(typeof s=="object")for(var p in s)this._on(p,s[p],l,!0);else{s=k(s);for(var y=0,T=s.length;y<T;y++)this._on(s[y],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,r({layer:s.target,propagatedFrom:s.target},s),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var Ue=Ne.extend(ct);function $(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var le=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};$.prototype={clone:function(){return new $(this.x,this.y)},add:function(s){return this.clone()._add(J(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(J(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new $(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new $(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(s){s=J(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=J(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=J(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+v(this.x)+", "+v(this.y)+")"}};function J(s,l,d){return s instanceof $?s:x(s)?new $(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new $(s.x,s.y):new $(s,l,d)}function fe(s,l){if(s)for(var d=l?[s,l]:s,p=0,y=d.length;p<y;p++)this.extend(d[p])}fe.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof $||typeof s[0]=="number"||"x"in s)l=d=J(s);else if(s=Ee(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof $?s=J(s):s=Ee(s),s instanceof fe?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=Ee(s);var l=this.min,d=this.max,p=s.min,y=s.max,T=y.x>=l.x&&p.x<=d.x,M=y.y>=l.y&&p.y<=d.y;return T&&M},overlaps:function(s){s=Ee(s);var l=this.min,d=this.max,p=s.min,y=s.max,T=y.x>l.x&&p.x<d.x,M=y.y>l.y&&p.y<d.y;return T&&M},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,p=Math.abs(l.x-d.x)*s,y=Math.abs(l.y-d.y)*s;return Ee(J(l.x-p,l.y-y),J(d.x+p,d.y+y))},equals:function(s){return s?(s=Ee(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function Ee(s,l){return!s||s instanceof fe?s:new fe(s,l)}function Je(s,l){if(s)for(var d=l?[s,l]:s,p=0,y=d.length;p<y;p++)this.extend(d[p])}Je.prototype={extend:function(s){var l=this._southWest,d=this._northEast,p,y;if(s instanceof Ie)p=s,y=s;else if(s instanceof Je){if(p=s._southWest,y=s._northEast,!p||!y)return this}else return s?this.extend(pe(s)||Re(s)):this;return!l&&!d?(this._southWest=new Ie(p.lat,p.lng),this._northEast=new Ie(y.lat,y.lng)):(l.lat=Math.min(p.lat,l.lat),l.lng=Math.min(p.lng,l.lng),d.lat=Math.max(y.lat,d.lat),d.lng=Math.max(y.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,p=Math.abs(l.lat-d.lat)*s,y=Math.abs(l.lng-d.lng)*s;return new Je(new Ie(l.lat-p,l.lng-y),new Ie(d.lat+p,d.lng+y))},getCenter:function(){return new Ie((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Ie(this.getNorth(),this.getWest())},getSouthEast:function(){return new Ie(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Ie||"lat"in s?s=pe(s):s=Re(s);var l=this._southWest,d=this._northEast,p,y;return s instanceof Je?(p=s.getSouthWest(),y=s.getNorthEast()):p=y=s,p.lat>=l.lat&&y.lat<=d.lat&&p.lng>=l.lng&&y.lng<=d.lng},intersects:function(s){s=Re(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),T=y.lat>=l.lat&&p.lat<=d.lat,M=y.lng>=l.lng&&p.lng<=d.lng;return T&&M},overlaps:function(s){s=Re(s);var l=this._southWest,d=this._northEast,p=s.getSouthWest(),y=s.getNorthEast(),T=y.lat>l.lat&&p.lat<d.lat,M=y.lng>l.lng&&p.lng<d.lng;return T&&M},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=Re(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Re(s,l){return s instanceof Je?s:new Je(s,l)}function Ie(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Ie.prototype={equals:function(s,l){if(!s)return!1;s=pe(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+v(this.lat,s)+", "+v(this.lng,s)+")"},distanceTo:function(s){return Rn.distance(this,pe(s))},wrap:function(){return Rn.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return Re([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Ie(this.lat,this.lng,this.alt)}};function pe(s,l,d){return s instanceof Ie?s:x(s)&&typeof s[0]!="object"?s.length===3?new Ie(s[0],s[1],s[2]):s.length===2?new Ie(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Ie(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Ie(s,l,d)}var Tt={latLngToPoint:function(s,l){var d=this.projection.project(s),p=this.scale(l);return this.transformation._transform(d,p)},pointToLatLng:function(s,l){var d=this.scale(l),p=this.transformation.untransform(s,d);return this.projection.unproject(p)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),p=this.transformation.transform(l.min,d),y=this.transformation.transform(l.max,d);return new fe(p,y)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?m(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?m(s.lat,this.wrapLat,!0):s.lat,p=s.alt;return new Ie(d,l,p)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),p=l.lat-d.lat,y=l.lng-d.lng;if(p===0&&y===0)return s;var T=s.getSouthWest(),M=s.getNorthEast(),j=new Ie(T.lat-p,T.lng-y),W=new Ie(M.lat-p,M.lng-y);return new Je(j,W)}},Rn=r({},Tt,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,p=s.lat*d,y=l.lat*d,T=Math.sin((l.lat-s.lat)*d/2),M=Math.sin((l.lng-s.lng)*d/2),j=T*T+Math.cos(p)*Math.cos(y)*M*M,W=2*Math.atan2(Math.sqrt(j),Math.sqrt(1-j));return this.R*W}}),al=6378137,ll={R:al,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,p=Math.max(Math.min(d,s.lat),-d),y=Math.sin(p*l);return new $(this.R*s.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var l=180/Math.PI;return new Ie((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=al*Math.PI;return new fe([-s,-s],[s,s])}()};function ul(s,l,d,p){if(x(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=p}ul.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new $((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function _r(s,l,d,p){return new ul(s,l,d,p)}var Ts=r({},Rn,{code:"EPSG:3857",projection:ll,transformation:function(){var s=.5/(Math.PI*ll.R);return _r(s,.5,-s,.5)}()}),Pc=r({},Ts,{code:"EPSG:900913"});function Ac(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function So(s,l){var d="",p,y,T,M,j,W;for(p=0,T=s.length;p<T;p++){for(j=s[p],y=0,M=j.length;y<M;y++)W=j[y],d+=(y?"L":"M")+W.x+" "+W.y;d+=l?oe.svg?"z":"x":""}return d||"M0 0"}var Es=document.documentElement.style,Is="ActiveXObject"in window,Et=Is&&!document.addEventListener,It="msLaunchUri"in navigator&&!("documentMode"in document),yr=rn("webkit"),xc=rn("android"),cl=rn("android 2")||rn("android 3"),Yf=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Ss=xc&&rn("Google")&&Yf<537&&!("AudioNode"in window),Po=!!window.opera,hl=!It&&rn("chrome"),Ao=rn("gecko")&&!yr&&!Po&&!Is,Xf=!hl&&rn("safari"),Cc=rn("phantom"),dl="OTransition"in Es,Rc=navigator.platform.indexOf("Win")===0,vr=Is&&"transition"in Es,Ps="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!cl,xo="MozPerspective"in Es,Fi=!window.L_DISABLE_3D&&(vr||Ps||xo)&&!dl&&!Cc,wr=typeof orientation<"u"||rn("mobile"),Co=wr&&yr,kc=wr&&Ps,Tr=!window.PointerEvent&&window.MSPointerEvent,fl=!!(window.PointerEvent||Tr),St="ontouchstart"in window||!!window.TouchEvent,bc=!window.L_NO_TOUCH&&(St||fl),As=wr&&Po,xs=wr&&Ao,Jf=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ep=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",_,l),window.removeEventListener("testPassiveEventSupport",_,l)}catch{}return s}(),Er=function(){return!!document.createElement("canvas").getContext}(),pl=!!(document.createElementNS&&Ac("svg").createSVGRect),tp=!!pl&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Ro=!pl&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),Lc=navigator.platform.indexOf("Mac")===0,Nc=navigator.platform.indexOf("Linux")===0;function rn(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var oe={ie:Is,ielt9:Et,edge:It,webkit:yr,android:xc,android23:cl,androidStock:Ss,opera:Po,chrome:hl,gecko:Ao,safari:Xf,phantom:Cc,opera12:dl,win:Rc,ie3d:vr,webkit3d:Ps,gecko3d:xo,any3d:Fi,mobile:wr,mobileWebkit:Co,mobileWebkit3d:kc,msPointer:Tr,pointer:fl,touch:bc,touchNative:St,mobileOpera:As,mobileGecko:xs,retina:Jf,passiveEvents:ep,canvas:Er,svg:pl,vml:Ro,inlineSvg:tp,mac:Lc,linux:Nc},Dc=oe.msPointer?"MSPointerDown":"pointerdown",Zn=oe.msPointer?"MSPointerMove":"pointermove",ml=oe.msPointer?"MSPointerUp":"pointerup",gl=oe.msPointer?"MSPointerCancel":"pointercancel",Cs={touchstart:Dc,touchmove:Zn,touchend:ml,touchcancel:gl},ko={touchstart:_l,touchmove:kn,touchend:kn,touchcancel:kn},Ui={},Mc=!1;function Oc(s,l,d){return l==="touchstart"&&Rs(),ko[l]?(d=ko[l].bind(this,d),s.addEventListener(Cs[l],d,!1),d):(console.warn("wrong event specified:",l),_)}function np(s,l,d){if(!Cs[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(Cs[l],d,!1)}function bo(s){Ui[s.pointerId]=s}function Vc(s){Ui[s.pointerId]&&(Ui[s.pointerId]=s)}function Lo(s){delete Ui[s.pointerId]}function Rs(){Mc||(document.addEventListener(Dc,bo,!0),document.addEventListener(Zn,Vc,!0),document.addEventListener(ml,Lo,!0),document.addEventListener(gl,Lo,!0),Mc=!0)}function kn(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in Ui)l.touches.push(Ui[d]);l.changedTouches=[l],s(l)}}function _l(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&ht(l),kn(s,l)}function ip(s){var l={},d,p;for(p in s)d=s[p],l[p]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var Fc=200;function Uc(s,l){s.addEventListener("dblclick",l);var d=0,p;function y(T){if(T.detail!==1){p=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var M=El(T);if(!(M.some(function(W){return W instanceof HTMLLabelElement&&W.attributes.for})&&!M.some(function(W){return W instanceof HTMLInputElement||W instanceof HTMLSelectElement}))){var j=Date.now();j-d<=Fc?(p++,p===2&&l(ip(T))):p=1,d=j}}}return s.addEventListener("click",y),{dblclick:l,simDblclick:y}}function Bc(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var ks=No(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Bi=No(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),yl=Bi==="webkitTransition"||Bi==="OTransition"?Bi+"End":"transitionend";function vl(s){return typeof s=="string"?document.getElementById(s):s}function Ir(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var p=document.defaultView.getComputedStyle(s,null);d=p?p[l]:null}return d==="auto"?null:d}function xe(s,l,d){var p=document.createElement(s);return p.className=l||"",d&&d.appendChild(p),p}function be(s){var l=s.parentNode;l&&l.removeChild(s)}function Kt(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function bn(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function Ln(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function bs(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=pi(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function re(s,l){if(s.classList!==void 0)for(var d=k(l),p=0,y=d.length;p<y;p++)s.classList.add(d[p]);else if(!bs(s,l)){var T=pi(s);zi(s,(T?T+" ":"")+l)}}function ze(s,l){s.classList!==void 0?s.classList.remove(l):zi(s,I((" "+pi(s)+" ").replace(" "+l+" "," ")))}function zi(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function pi(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function sn(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&zc(s,l)}function zc(s,l){var d=!1,p="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(p)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+p+"(opacity="+l+")"}function No(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function ji(s,l,d){var p=l||new $(0,0);s.style[ks]=(oe.ie3d?"translate("+p.x+"px,"+p.y+"px)":"translate3d("+p.x+"px,"+p.y+"px,0)")+(d?" scale("+d+")":"")}function et(s,l){s._leaflet_pos=l,oe.any3d?ji(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Hi(s){return s._leaflet_pos||new $(0,0)}var Qn,mn,Do;if("onselectstart"in document)Qn=function(){me(window,"selectstart",ht)},mn=function(){Ve(window,"selectstart",ht)};else{var Sr=No(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Qn=function(){if(Sr){var s=document.documentElement.style;Do=s[Sr],s[Sr]="none"}},mn=function(){Sr&&(document.documentElement.style[Sr]=Do,Do=void 0)}}function Mo(){me(window,"dragstart",ht)}function Oo(){Ve(window,"dragstart",ht)}var Ls,mi;function wl(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(Vo(),Ls=s,mi=s.style.outlineStyle,s.style.outlineStyle="none",me(window,"keydown",Vo))}function Vo(){Ls&&(Ls.style.outlineStyle=mi,Ls=void 0,mi=void 0,Ve(window,"keydown",Vo))}function jc(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function Nn(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var rp={__proto__:null,TRANSFORM:ks,TRANSITION:Bi,TRANSITION_END:yl,get:vl,getStyle:Ir,create:xe,remove:be,empty:Kt,toFront:bn,toBack:Ln,hasClass:bs,addClass:re,removeClass:ze,setClass:zi,getClass:pi,setOpacity:sn,testProp:No,setTransform:ji,setPosition:et,getPosition:Hi,get disableTextSelection(){return Qn},get enableTextSelection(){return mn},disableImageDrag:Mo,enableImageDrag:Oo,preventOutline:wl,restoreOutline:Vo,getSizedParentNode:jc,getScale:Nn};function me(s,l,d,p){if(l&&typeof l=="object")for(var y in l)Fo(s,y,l[y],d);else{l=k(l);for(var T=0,M=l.length;T<M;T++)Fo(s,l[T],d,p)}return this}var Zt="_leaflet_events";function Ve(s,l,d,p){if(arguments.length===1)Pr(s),delete s[Zt];else if(l&&typeof l=="object")for(var y in l)Ns(s,y,l[y],d);else if(l=k(l),arguments.length===2)Pr(s,function(j){return B(l,j)!==-1});else for(var T=0,M=l.length;T<M;T++)Ns(s,l[T],d,p);return this}function Pr(s,l){for(var d in s[Zt]){var p=d.split(/\d/)[0];(!l||l(p))&&Ns(s,p,null,null,d)}}var Wi={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Fo(s,l,d,p){var y=l+h(d)+(p?"_"+h(p):"");if(s[Zt]&&s[Zt][y])return this;var T=function(j){return d.call(p||s,j||window.event)},M=T;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?T=Oc(s,l,T):oe.touch&&l==="dblclick"?T=Uc(s,T):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Wi[l]||l,T,oe.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(T=function(j){j=j||window.event,Sl(s,j)&&M(j)},s.addEventListener(Wi[l],T,!1)):s.addEventListener(l,M,!1):s.attachEvent("on"+l,T),s[Zt]=s[Zt]||{},s[Zt][y]=T}function Ns(s,l,d,p,y){y=y||l+h(d)+(p?"_"+h(p):"");var T=s[Zt]&&s[Zt][y];if(!T)return this;!oe.touchNative&&oe.pointer&&l.indexOf("touch")===0?np(s,l,T):oe.touch&&l==="dblclick"?Bc(s,T):"removeEventListener"in s?s.removeEventListener(Wi[l]||l,T,!1):s.detachEvent("on"+l,T),s[Zt][y]=null}function De(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function Tl(s){return Fo(s,"wheel",De),this}function Ds(s){return me(s,"mousedown touchstart dblclick contextmenu",De),s._leaflet_disable_click=!0,this}function ht(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function gi(s){return ht(s),De(s),this}function El(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Ms(s,l){if(!l)return new $(s.clientX,s.clientY);var d=Nn(l),p=d.boundingClientRect;return new $((s.clientX-p.left)/d.x-l.clientLeft,(s.clientY-p.top)/d.y-l.clientTop)}var _i=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Il(s){return oe.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/_i:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function Sl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Os={__proto__:null,on:me,off:Ve,stopPropagation:De,disableScrollPropagation:Tl,disableClickPropagation:Ds,preventDefault:ht,stop:gi,getPropagationPath:El,getMousePosition:Ms,getWheelDelta:Il,isExternalTarget:Sl,addListener:me,removeListener:Ve},Pl=Ue.extend({run:function(s,l,d,p){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(p||.5,.2),this._startPos=Hi(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),et(this._el,d),this.fire("step")},_complete:function(){U(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),ve=Ue.extend({options:{crs:Ts,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=b(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(pe(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Bi&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),me(this._proxy,yl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(pe(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=r({animate:d.animate},d.zoom),d.pan=r({animate:d.animate,duration:d.duration},d.pan));var p=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(p)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var p=this.getZoomScale(l),y=this.getSize().divideBy(2),T=s instanceof $?s:this.latLngToContainerPoint(s),M=T.subtract(y).multiplyBy(1-1/p),j=this.containerPointToLatLng(y.add(M));return this.setView(j,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():Re(s);var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(s,!1,d.add(p));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var T=p.subtract(d).divideBy(2),M=this.project(s.getSouthWest(),y),j=this.project(s.getNorthEast(),y),W=this.unproject(M.add(j).divideBy(2).add(T),y);return{center:W,zoom:y}},fitBounds:function(s,l){if(s=Re(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=J(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){re(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!oe.any3d)return this.setView(s,l,d);this._stop();var p=this.project(this.getCenter()),y=this.project(s),T=this.getSize(),M=this._zoom;s=pe(s),l=l===void 0?M:l;var j=Math.max(T.x,T.y),W=j*this.getZoomScale(M,l),Q=y.distanceTo(p)||1,ne=1.42,ce=ne*ne;function we(dt){var rh=dt?-1:1,ok=dt?W:j,ak=W*W-j*j+rh*ce*ce*Q*Q,lk=2*ok*ce*Q,up=ak/lk,Yv=Math.sqrt(up*up+1)-up,uk=Yv<1e-9?-18:Math.log(Yv);return uk}function Qt(dt){return(Math.exp(dt)-Math.exp(-dt))/2}function Pt(dt){return(Math.exp(dt)+Math.exp(-dt))/2}function On(dt){return Qt(dt)/Pt(dt)}var an=we(0);function Yo(dt){return j*(Pt(an)/Pt(an+ne*dt))}function nk(dt){return j*(Pt(an)*On(an+ne*dt)-Qt(an))/ce}function ik(dt){return 1-Math.pow(1-dt,1.5)}var rk=Date.now(),Zv=(we(1)-an)/ne,sk=d.duration?1e3*d.duration:1e3*Zv*.8;function Qv(){var dt=(Date.now()-rk)/sk,rh=ik(dt)*Zv;dt<=1?(this._flyToFrame=O(Qv,this),this._move(this.unproject(p.add(y.subtract(p).multiplyBy(nk(rh)/Q)),M),this.getScaleZoom(j/Yo(rh),M),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),Qv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=Re(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),p=this._limitCenter(d,this._zoom,Re(s));return d.equals(p)||this.panTo(p,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=J(l.paddingTopLeft||l.padding||[0,0]),p=J(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),T=this.project(s),M=this.getPixelBounds(),j=Ee([M.min.add(d),M.max.subtract(p)]),W=j.getSize();if(!j.contains(T)){this._enforcingBounds=!0;var Q=T.subtract(j.getCenter()),ne=j.extend(T).getSize().subtract(W);y.x+=Q.x<0?-ne.x:ne.x,y.y+=Q.y<0?-ne.y:ne.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=r({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),p=l.divideBy(2).round(),y=d.divideBy(2).round(),T=p.subtract(y);return!T.x&&!T.y?this:(s.animate&&s.pan?this.panBy(T):(s.pan&&this._rawPanBy(T),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=r({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,p=new Ie(l,d),y=p.toBounds(s.coords.accuracy*2),T=this._locateOptions;if(T.setView){var M=this.getBoundsZoom(y);this.setView(p,T.maxZoom?Math.min(M,T.maxZoom):M)}var j={latlng:p,bounds:y,timestamp:s.timestamp};for(var W in s.coords)typeof s.coords[W]=="number"&&(j[W]=s.coords[W]);this.fire("locationfound",j)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),be(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(U(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)be(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),p=xe("div",d,l||this._mapPane);return s&&(this._panes[s]=p),p},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new Je(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=Re(s),d=J(d||[0,0]);var p=this.getZoom()||0,y=this.getMinZoom(),T=this.getMaxZoom(),M=s.getNorthWest(),j=s.getSouthEast(),W=this.getSize().subtract(d),Q=Ee(this.project(j,p),this.project(M,p)).getSize(),ne=oe.any3d?this.options.zoomSnap:1,ce=W.x/Q.x,we=W.y/Q.y,Qt=l?Math.max(ce,we):Math.min(ce,we);return p=this.getScaleZoom(Qt,p),ne&&(p=Math.round(p/(ne/100))*(ne/100),p=l?Math.ceil(p/ne)*ne:Math.floor(p/ne)*ne),Math.max(y,Math.min(T,p))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new $(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new fe(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var p=d.zoom(s*d.scale(l));return isNaN(p)?1/0:p},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(pe(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(J(s),l)},layerPointToLatLng:function(s){var l=J(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(pe(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(pe(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(Re(s))},distance:function(s,l){return this.options.crs.distance(pe(s),pe(l))},containerPointToLayerPoint:function(s){return J(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return J(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(J(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(pe(s)))},mouseEventToContainerPoint:function(s){return Ms(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=vl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");me(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,re(s,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=Ir(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),et(this._mapPane,new $(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(re(s.markerPane,"leaflet-zoom-hide"),re(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){et(this._mapPane,new $(0,0));var p=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,d)._move(s,l)._moveEnd(y),this.fire("viewreset"),p&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,p){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),p?d&&d.pinch&&this.fire("zoom",d):((y||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return U(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){et(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?Ve:me;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){U(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],p,y=l==="mouseout"||l==="mouseover",T=s.target||s.srcElement,M=!1;T;){if(p=this._targets[h(T)],p&&(l==="click"||l==="preclick")&&this._draggableMoved(p)){M=!0;break}if(p&&p.listens(l,!0)&&(y&&!Sl(T,s)||(d.push(p),y))||T===this._container)break;T=T.parentNode}return!d.length&&!M&&!y&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&wl(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var p=r({},s);p.type="preclick",this._fireDOMEvent(p,p.type,d)}var y=this._findEventTargets(s,l);if(d){for(var T=[],M=0;M<d.length;M++)d[M].listens(l,!0)&&T.push(d[M]);y=T.concat(y)}if(y.length){l==="contextmenu"&&ht(s);var j=y[0],W={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var Q=j.getLatLng&&(!j._radius||j._radius<=10);W.containerPoint=Q?this.latLngToContainerPoint(j.getLatLng()):this.mouseEventToContainerPoint(s),W.layerPoint=this.containerPointToLayerPoint(W.containerPoint),W.latlng=Q?j.getLatLng():this.layerPointToLatLng(W.layerPoint)}for(M=0;M<y.length;M++)if(y[M].fire(l,W,!0),W.originalEvent._stopped||y[M].options.bubblingMouseEvents===!1&&B(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Hi(this._mapPane)||new $(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(p)},_latLngBoundsToNewLayerBounds:function(s,l,d){var p=this._getNewPixelOrigin(d,l);return Ee([this.project(s.getSouthWest(),l)._subtract(p),this.project(s.getNorthWest(),l)._subtract(p),this.project(s.getSouthEast(),l)._subtract(p),this.project(s.getNorthEast(),l)._subtract(p)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var p=this.project(s,l),y=this.getSize().divideBy(2),T=new fe(p.subtract(y),p.add(y)),M=this._getBoundsOffset(T,d,l);return Math.abs(M.x)<=1&&Math.abs(M.y)<=1?s:this.unproject(p.add(M),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),p=new fe(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(p,l))},_getBoundsOffset:function(s,l,d){var p=Ee(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),y=p.min.subtract(s.min),T=p.max.subtract(s.max),M=this._rebound(y.x,-T.x),j=this._rebound(y.y,-T.y);return new $(M,j)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),p=oe.any3d?this.options.zoomSnap:1;return p&&(s=Math.round(s/p)*p),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ze(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=xe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=ks,p=this._proxy.style[d];ji(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),p===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){be(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();ji(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var p=this.getZoomScale(l),y=this._getCenterOffset(s)._divideBy(1-1/p);return d.animate!==!0&&!this.getSize().contains(y)?!1:(O(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,p){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,re(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:p}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ze(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Uo(s,l){return new ve(s,l)}var on=Ne.extend({options:{position:"topright"},initialize:function(s){b(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),p=s._controlCorners[d];return re(l,"leaflet-control"),d.indexOf("bottom")!==-1?p.insertBefore(l,p.firstChild):p.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(be(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),yi=function(s){return new on(s)};ve.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=xe("div",l+"control-container",this._container);function p(y,T){var M=l+y+" "+l+T;s[y+T]=xe("div",M,d)}p("top","left"),p("top","right"),p("bottom","left"),p("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)be(this._controlCorners[s]);be(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Hc=on.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,p){return d<p?-1:p<d?1:0}},initialize:function(s,l,d){b(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var p in s)this._addLayer(s[p],p);for(p in l)this._addLayer(l[p],p,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return on.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){re(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(re(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):ze(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ze(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=xe("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),Ds(l),Tl(l);var p=this._section=xe("section",s+"-list");d&&(this._map.on("click",this.collapse,this),me(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=xe("a",s+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),me(y,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){ht(T),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=xe("div",s+"-base",p),this._separator=xe("div",s+"-separator",p),this._overlaysList=xe("div",s+"-overlays",p),l.appendChild(p)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(p,y){return this.options.sortFunction(p.layer,y.layer,p.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Kt(this._baseLayersList),Kt(this._overlaysList),this._layerControlInputs=[];var s,l,d,p,y=0;for(d=0;d<this._layers.length;d++)p=this._layers[d],this._addItem(p),l=l||p.overlay,s=s||!p.overlay,y+=p.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",p=document.createElement("div");return p.innerHTML=d,p.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),p;s.overlay?(p=document.createElement("input"),p.type="checkbox",p.className="leaflet-control-layers-selector",p.defaultChecked=d):p=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(p),p.layerId=h(s.layer),me(p,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var T=document.createElement("span");l.appendChild(T),T.appendChild(p),T.appendChild(y);var M=s.overlay?this._overlaysList:this._baseLayersList;return M.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,p=[],y=[];this._handlingClick=!0;for(var T=s.length-1;T>=0;T--)l=s[T],d=this._getLayer(l.layerId).layer,l.checked?p.push(d):l.checked||y.push(d);for(T=0;T<y.length;T++)this._map.hasLayer(y[T])&&this._map.removeLayer(y[T]);for(T=0;T<p.length;T++)this._map.hasLayer(p[T])||this._map.addLayer(p[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,p=this._map.getZoom(),y=s.length-1;y>=0;y--)l=s[y],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&p<d.options.minZoom||d.options.maxZoom!==void 0&&p>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,me(s,"click",ht),this.expand();var l=this;setTimeout(function(){Ve(s,"click",ht),l._preventClick=!1})}}),Wc=function(s,l,d){return new Hc(s,l,d)},qi=on.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=xe("div",l+" leaflet-bar"),p=this.options;return this._zoomInButton=this._createButton(p.zoomInText,p.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(p.zoomOutText,p.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,p,y){var T=xe("a",d,p);return T.innerHTML=s,T.href="#",T.title=l,T.setAttribute("role","button"),T.setAttribute("aria-label",l),Ds(T),me(T,"click",gi),me(T,"click",y,this),me(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";ze(this._zoomInButton,l),ze(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(re(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(re(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});ve.mergeOptions({zoomControl:!0}),ve.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new qi,this.addControl(this.zoomControl))});var qc=function(s){return new qi(s)},Al=on.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=xe("div",l),p=this.options;return this._addScales(p,l+"-line",d),s.on(p.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=xe("div",l,d)),s.imperial&&(this._iScale=xe("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,p,y;l>5280?(d=l/5280,p=this._getRoundNum(d),this._updateScale(this._iScale,p+" mi",p/d)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),xl=function(s){return new Al(s)},Cl='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Bo=on.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?Cl+" ":"")+"Leaflet</a>"},initialize:function(s){b(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=xe("div","leaflet-control-attribution"),Ds(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});ve.mergeOptions({attributionControl:!0}),ve.addInitHook(function(){this.options.attributionControl&&new Bo().addTo(this)});var zo=function(s){return new Bo(s)};on.Layers=Hc,on.Zoom=qi,on.Scale=Al,on.Attribution=Bo,yi.layers=Wc,yi.zoom=qc,yi.scale=xl,yi.attribution=zo;var gn=Ne.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});gn.addTo=function(s,l){return s.addHandler(l,this),this};var $c={Events:ct},vi=oe.touch?"touchstart mousedown":"mousedown",Yn=Ue.extend({options:{clickTolerance:3},initialize:function(s,l,d,p){b(this,p),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(me(this._dragStartTarget,vi,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Yn._dragging===this&&this.finishDrag(!0),Ve(this._dragStartTarget,vi,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!bs(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Yn._dragging===this&&this.finishDrag();return}if(!(Yn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Yn._dragging=this,this._preventOutline&&wl(this._element),Mo(),Qn(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=jc(this._element);this._startPoint=new $(l.clientX,l.clientY),this._startPos=Hi(this._element),this._parentScale=Nn(d);var p=s.type==="mousedown";me(document,p?"mousemove":"touchmove",this._onMove,this),me(document,p?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new $(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,ht(s),this._moved||(this.fire("dragstart"),this._moved=!0,re(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),re(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),et(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){ze(document.body,"leaflet-dragging"),this._lastTarget&&(ze(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ve(document,"mousemove touchmove",this._onMove,this),Ve(document,"mouseup touchend touchcancel",this._onUp,this),Oo(),mn();var l=this._moved&&this._moving;this._moving=!1,Yn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Rl(s,l,d){var p,y=[1,4,2,8],T,M,j,W,Q,ne,ce,we;for(T=0,ne=s.length;T<ne;T++)s[T]._code=H(s[T],l);for(j=0;j<4;j++){for(ce=y[j],p=[],T=0,ne=s.length,M=ne-1;T<ne;M=T++)W=s[T],Q=s[M],W._code&ce?Q._code&ce||(we=z(Q,W,ce,l,d),we._code=H(we,l),p.push(we)):(Q._code&ce&&(we=z(Q,W,ce,l,d),we._code=H(we,l),p.push(we)),p.push(W));s=p}return s}function kl(s,l){var d,p,y,T,M,j,W,Q,ne;if(!s||s.length===0)throw new Error("latlngs not passed");Le(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ce=pe([0,0]),we=Re(s),Qt=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());Qt<1700&&(ce=jo(s));var Pt=s.length,On=[];for(d=0;d<Pt;d++){var an=pe(s[d]);On.push(l.project(pe([an.lat-ce.lat,an.lng-ce.lng])))}for(j=W=Q=0,d=0,p=Pt-1;d<Pt;p=d++)y=On[d],T=On[p],M=y.y*T.x-T.y*y.x,W+=(y.x+T.x)*M,Q+=(y.y+T.y)*M,j+=M*3;j===0?ne=On[0]:ne=[W/j,Q/j];var Yo=l.unproject(J(ne));return pe([Yo.lat+ce.lat,Yo.lng+ce.lng])}function jo(s){for(var l=0,d=0,p=0,y=0;y<s.length;y++){var T=pe(s[y]);l+=T.lat,d+=T.lng,p++}return pe([l/p,d/p])}var Ho={__proto__:null,clipPolygon:Rl,polygonCenter:kl,centroid:jo};function Vt(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=g(s,d),s=Ar(s,d),s}function bl(s,l,d){return Math.sqrt(ge(s,l,d,!0))}function Gc(s,l,d){return ge(s,l,d)}function Ar(s,l){var d=s.length,p=typeof Uint8Array<"u"?Uint8Array:Array,y=new p(d);y[0]=y[d-1]=1,c(s,y,l,0,d-1);var T,M=[];for(T=0;T<d;T++)y[T]&&M.push(s[T]);return M}function c(s,l,d,p,y){var T=0,M,j,W;for(j=p+1;j<=y-1;j++)W=ge(s[j],s[p],s[y],!0),W>T&&(M=j,T=W);T>d&&(l[M]=1,c(s,l,d,p,M),c(s,l,d,M,y))}function g(s,l){for(var d=[s[0]],p=1,y=0,T=s.length;p<T;p++)ee(s[p],s[y])>l&&(d.push(s[p]),y=p);return y<T-1&&d.push(s[T-1]),d}var w;function S(s,l,d,p,y){var T=p?w:H(s,d),M=H(l,d),j,W,Q;for(w=M;;){if(!(T|M))return[s,l];if(T&M)return!1;j=T||M,W=z(s,l,j,d,y),Q=H(W,d),j===T?(s=W,T=Q):(l=W,M=Q)}}function z(s,l,d,p,y){var T=l.x-s.x,M=l.y-s.y,j=p.min,W=p.max,Q,ne;return d&8?(Q=s.x+T*(W.y-s.y)/M,ne=W.y):d&4?(Q=s.x+T*(j.y-s.y)/M,ne=j.y):d&2?(Q=W.x,ne=s.y+M*(W.x-s.x)/T):d&1&&(Q=j.x,ne=s.y+M*(j.x-s.x)/T),new $(Q,ne,y)}function H(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function ee(s,l){var d=l.x-s.x,p=l.y-s.y;return d*d+p*p}function ge(s,l,d,p){var y=l.x,T=l.y,M=d.x-y,j=d.y-T,W=M*M+j*j,Q;return W>0&&(Q=((s.x-y)*M+(s.y-T)*j)/W,Q>1?(y=d.x,T=d.y):Q>0&&(y+=M*Q,T+=j*Q)),M=s.x-y,j=s.y-T,p?M*M+j*j:new $(y,T)}function Le(s){return!x(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function Me(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Le(s)}function ot(s,l){var d,p,y,T,M,j,W,Q;if(!s||s.length===0)throw new Error("latlngs not passed");Le(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=pe([0,0]),ce=Re(s),we=ce.getNorthWest().distanceTo(ce.getSouthWest())*ce.getNorthEast().distanceTo(ce.getNorthWest());we<1700&&(ne=jo(s));var Qt=s.length,Pt=[];for(d=0;d<Qt;d++){var On=pe(s[d]);Pt.push(l.project(pe([On.lat-ne.lat,On.lng-ne.lng])))}for(d=0,p=0;d<Qt-1;d++)p+=Pt[d].distanceTo(Pt[d+1])/2;if(p===0)Q=Pt[0];else for(d=0,T=0;d<Qt-1;d++)if(M=Pt[d],j=Pt[d+1],y=M.distanceTo(j),T+=y,T>p){W=(T-p)/y,Q=[j.x-W*(j.x-M.x),j.y-W*(j.y-M.y)];break}var an=l.unproject(J(Q));return pe([an.lat+ne.lat,an.lng+ne.lng])}var Dn={__proto__:null,simplify:Vt,pointToSegmentDistance:bl,closestPointOnSegment:Gc,clipSegment:S,_getEdgeIntersection:z,_getBitCode:H,_sqClosestPointOnSegment:ge,isFlat:Le,_flat:Me,polylineCenter:ot},Xn={project:function(s){return new $(s.lng,s.lat)},unproject:function(s){return new Ie(s.y,s.x)},bounds:new fe([-180,-90],[180,90])},Mn={R:6378137,R_MINOR:6356752314245179e-9,bounds:new fe([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,p=s.lat*l,y=this.R_MINOR/d,T=Math.sqrt(1-y*y),M=T*Math.sin(p),j=Math.tan(Math.PI/4-p/2)/Math.pow((1-M)/(1+M),T/2);return p=-d*Math.log(Math.max(j,1e-10)),new $(s.lng*l*d,p)},unproject:function(s){for(var l=180/Math.PI,d=this.R,p=this.R_MINOR/d,y=Math.sqrt(1-p*p),T=Math.exp(-s.y/d),M=Math.PI/2-2*Math.atan(T),j=0,W=.1,Q;j<15&&Math.abs(W)>1e-7;j++)Q=y*Math.sin(M),Q=Math.pow((1-Q)/(1+Q),y/2),W=Math.PI/2-2*Math.atan(T*Q)-M,M+=W;return new Ie(M*l,s.x*l/d)}},wi={__proto__:null,LonLat:Xn,Mercator:Mn,SphericalMercator:ll},Wo=r({},Rn,{code:"EPSG:3395",projection:Mn,transformation:function(){var s=.5/(Math.PI*Mn.R);return _r(s,.5,-s,.5)}()}),qo=r({},Rn,{code:"EPSG:4326",projection:Xn,transformation:_r(1/180,1,-1/180,.5)}),DR=r({},Tt,{projection:Xn,transformation:_r(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,p=l.lat-s.lat;return Math.sqrt(d*d+p*p)},infinite:!0});Tt.Earth=Rn,Tt.EPSG3395=Wo,Tt.EPSG3857=Ts,Tt.EPSG900913=Pc,Tt.EPSG4326=qo,Tt.Simple=DR;var Jn=Ue.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});ve.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?x(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var p in this._zoomBoundLayers){var y=this._zoomBoundLayers[p].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $o=Jn.extend({initialize:function(s,l){b(this,l),this._layers={};var d,p;if(s)for(d=0,p=s.length;d<p;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,p;for(d in this._layers)p=this._layers[d],p[s]&&p[s].apply(p,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),MR=function(s,l){return new $o(s,l)},$i=$o.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),$o.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),$o.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new Je;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),OR=function(s,l){return new $i(s,l)},Go=Ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){b(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var p=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(p,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(p.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),p},_setIconStyles:function(s,l){var d=this.options,p=d[l+"Size"];typeof p=="number"&&(p=[p,p]);var y=J(p),T=J(l==="shadow"&&d.shadowAnchor||d.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),T&&(s.style.marginLeft=-T.x+"px",s.style.marginTop=-T.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return oe.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function VR(s){return new Go(s)}var Ll=Go.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof Ll.imagePath!="string"&&(Ll.imagePath=this._detectIconPath()),(this.options.imagePath||Ll.imagePath)+Go.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,p,y){var T=p.exec(d);return T&&T[y]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=xe("div","leaflet-default-icon-path",document.body),l=Ir(s,"background-image")||Ir(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),kv=gn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Yn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),re(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ze(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,p=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,T=Hi(l._icon),M=d.getPixelBounds(),j=d.getPixelOrigin(),W=Ee(M.min._subtract(j).add(y),M.max._subtract(j).subtract(y));if(!W.contains(T)){var Q=J((Math.max(W.max.x,T.x)-W.max.x)/(M.max.x-W.max.x)-(Math.min(W.min.x,T.x)-W.min.x)/(M.min.x-W.min.x),(Math.max(W.max.y,T.y)-W.max.y)/(M.max.y-W.max.y)-(Math.min(W.min.y,T.y)-W.min.y)/(M.min.y-W.min.y)).multiplyBy(p);d.panBy(Q,{animate:!1}),this._draggable._newPos._add(Q),this._draggable._startPos._add(Q),et(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=O(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(U(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,p=Hi(l._icon),y=l._map.layerPointToLatLng(p);d&&et(d,p),l._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){U(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),Kc=Jn.extend({options:{icon:new Ll,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){b(this,l),this._latlng=pe(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),p=!1;d!==this._icon&&(this._icon&&this._removeIcon(),p=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),re(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&me(d,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),T=!1;y!==this._shadow&&(this._removeShadow(),T=!0),y&&(re(y,l),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),p&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&T&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ve(this._icon,"focus",this._panOnFocus,this),be(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&be(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&et(this._icon,s),this._shadow&&et(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(re(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),kv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new kv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&sn(this._icon,s),this._shadow&&sn(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?J(l.iconSize):J(0,0),p=l.iconAnchor?J(l.iconAnchor):J(0,0);s.panInside(this._latlng,{paddingTopLeft:p,paddingBottomRight:d.subtract(p)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function FR(s,l){return new Kc(s,l)}var xr=Jn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return b(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Zc=xr.extend({options:{fill:!0,radius:10},initialize:function(s,l){b(this,l),this._latlng=pe(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=pe(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return xr.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),p=[s+d,l+d];this._pxBounds=new fe(this._point.subtract(p),this._point.add(p))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function UR(s,l){return new Zc(s,l)}var sp=Zc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=r({},d,{radius:l})),b(this,l),this._latlng=pe(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new Je(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:xr.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,p=d.options.crs;if(p.distance===Rn.distance){var y=Math.PI/180,T=this._mRadius/Rn.R/y,M=d.project([l+T,s]),j=d.project([l-T,s]),W=M.add(j).divideBy(2),Q=d.unproject(W).lat,ne=Math.acos((Math.cos(T*y)-Math.sin(l*y)*Math.sin(Q*y))/(Math.cos(l*y)*Math.cos(Q*y)))/y;(isNaN(ne)||ne===0)&&(ne=T/Math.cos(Math.PI/180*l)),this._point=W.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:W.x-d.project([Q,s-ne]).x,this._radiusY=W.y-M.y}else{var ce=p.unproject(p.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(ce).x}this._updateBounds()}});function BR(s,l,d){return new sp(s,l,d)}var Gi=xr.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){b(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,p=ge,y,T,M=0,j=this._parts.length;M<j;M++)for(var W=this._parts[M],Q=1,ne=W.length;Q<ne;Q++){y=W[Q-1],T=W[Q];var ce=p(s,y,T,!0);ce<l&&(l=ce,d=p(s,y,T))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ot(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=pe(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new Je,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return Le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=Le(s),p=0,y=s.length;p<y;p++)d?(l[p]=pe(s[p]),this._bounds.extend(l[p])):l[p]=this._convertLatLngs(s[p]);return l},_project:function(){var s=new fe;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new $(s,s);this._rawPxBounds&&(this._pxBounds=new fe([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var p=s[0]instanceof Ie,y=s.length,T,M;if(p){for(M=[],T=0;T<y;T++)M[T]=this._map.latLngToLayerPoint(s[T]),d.extend(M[T]);l.push(M)}else for(T=0;T<y;T++)this._projectLatlngs(s[T],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,p,y,T,M,j,W;for(d=0,y=0,T=this._rings.length;d<T;d++)for(W=this._rings[d],p=0,M=W.length;p<M-1;p++)j=S(W[p],W[p+1],s,p,!0),j&&(l[y]=l[y]||[],l[y].push(j[0]),(j[1]!==W[p+1]||p===M-2)&&(l[y].push(j[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,p=s.length;d<p;d++)s[d]=Vt(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,p,y,T,M,j,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,T=this._parts.length;d<T;d++)for(j=this._parts[d],p=0,M=j.length,y=M-1;p<M;y=p++)if(!(!l&&p===0)&&bl(s,j[y],j[p])<=W)return!0;return!1}});function zR(s,l){return new Gi(s,l)}Gi._flat=Me;var Ko=Gi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return kl(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=Gi.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Ie&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){Gi.prototype._setLatLngs.call(this,s),Le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new $(l,l);if(s=new fe(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var p=0,y=this._rings.length,T;p<y;p++)T=Rl(this._rings[p],s,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,p,y,T,M,j,W,Q;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(T=0,W=this._parts.length;T<W;T++)for(d=this._parts[T],M=0,Q=d.length,j=Q-1;M<Q;j=M++)p=d[M],y=d[j],p.y>s.y!=y.y>s.y&&s.x<(y.x-p.x)*(s.y-p.y)/(y.y-p.y)+p.x&&(l=!l);return l||Gi.prototype._containsPoint.call(this,s,!0)}});function jR(s,l){return new Ko(s,l)}var Ki=$i.extend({initialize:function(s,l){b(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=x(s)?s:s.features,d,p,y;if(l){for(d=0,p=l.length;d<p;d++)y=l[d],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var T=this.options;if(T.filter&&!T.filter(s))return this;var M=Qc(s,T);return M?(M.feature=Jc(s),M.defaultOptions=M.options,this.resetStyle(M),T.onEachFeature&&T.onEachFeature(s,M),this.addLayer(M)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=r({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Qc(s,l){var d=s.type==="Feature"?s.geometry:s,p=d?d.coordinates:null,y=[],T=l&&l.pointToLayer,M=l&&l.coordsToLatLng||op,j,W,Q,ne;if(!p&&!d)return null;switch(d.type){case"Point":return j=M(p),bv(T,s,j,l);case"MultiPoint":for(Q=0,ne=p.length;Q<ne;Q++)j=M(p[Q]),y.push(bv(T,s,j,l));return new $i(y);case"LineString":case"MultiLineString":return W=Yc(p,d.type==="LineString"?0:1,M),new Gi(W,l);case"Polygon":case"MultiPolygon":return W=Yc(p,d.type==="Polygon"?1:2,M),new Ko(W,l);case"GeometryCollection":for(Q=0,ne=d.geometries.length;Q<ne;Q++){var ce=Qc({geometry:d.geometries[Q],type:"Feature",properties:s.properties},l);ce&&y.push(ce)}return new $i(y);case"FeatureCollection":for(Q=0,ne=d.features.length;Q<ne;Q++){var we=Qc(d.features[Q],l);we&&y.push(we)}return new $i(y);default:throw new Error("Invalid GeoJSON object.")}}function bv(s,l,d,p){return s?s(l,d):new Kc(d,p&&p.markersInheritOptions&&p)}function op(s){return new Ie(s[1],s[0],s[2])}function Yc(s,l,d){for(var p=[],y=0,T=s.length,M;y<T;y++)M=l?Yc(s[y],l-1,d):(d||op)(s[y]),p.push(M);return p}function ap(s,l){return s=pe(s),s.alt!==void 0?[v(s.lng,l),v(s.lat,l),v(s.alt,l)]:[v(s.lng,l),v(s.lat,l)]}function Xc(s,l,d,p){for(var y=[],T=0,M=s.length;T<M;T++)y.push(l?Xc(s[T],Le(s[T])?0:l-1,d,p):ap(s[T],p));return!l&&d&&y.length>0&&y.push(y[0].slice()),y}function Zo(s,l){return s.feature?r({},s.feature,{geometry:l}):Jc(l)}function Jc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var lp={toGeoJSON:function(s){return Zo(this,{type:"Point",coordinates:ap(this.getLatLng(),s)})}};Kc.include(lp),sp.include(lp),Zc.include(lp),Gi.include({toGeoJSON:function(s){var l=!Le(this._latlngs),d=Xc(this._latlngs,l?1:0,!1,s);return Zo(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),Ko.include({toGeoJSON:function(s){var l=!Le(this._latlngs),d=l&&!Le(this._latlngs[0]),p=Xc(this._latlngs,d?2:l?1:0,!0,s);return l||(p=[p]),Zo(this,{type:(d?"Multi":"")+"Polygon",coordinates:p})}}),$o.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),Zo(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",p=[];return this.eachLayer(function(y){if(y.toGeoJSON){var T=y.toGeoJSON(s);if(d)p.push(T.geometry);else{var M=Jc(T);M.type==="FeatureCollection"?p.push.apply(p,M.features):p.push(M)}}}),d?Zo(this,{geometries:p,type:"GeometryCollection"}):{type:"FeatureCollection",features:p}}});function Lv(s,l){return new Ki(s,l)}var HR=Lv,eh=Jn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=Re(l),b(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(re(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){be(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&bn(this._image),this},bringToBack:function(){return this._map&&Ln(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=Re(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:xe("img");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ji(this._image,d,l)},_reset:function(){var s=this._image,l=new fe(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();et(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){sn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),WR=function(s,l,d){return new eh(s,l,d)},Nv=eh.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:xe("video");if(re(l,"leaflet-image-layer"),this._zoomAnimated&&re(l,"leaflet-zoom-animated"),this.options.className&&re(l,this.options.className),l.onselectstart=_,l.onmousemove=_,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),p=[],y=0;y<d.length;y++)p.push(d[y].src);this._url=d.length>0?p:[l.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var M=xe("source");M.src=this._url[T],l.appendChild(M)}}});function qR(s,l,d){return new Nv(s,l,d)}var Dv=eh.extend({_initImage:function(){var s=this._image=this._url;re(s,"leaflet-image-layer"),this._zoomAnimated&&re(s,"leaflet-zoom-animated"),this.options.className&&re(s,this.options.className),s.onselectstart=_,s.onmousemove=_}});function $R(s,l,d){return new Dv(s,l,d)}var Ti=Jn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Ie||x(s))?(this._latlng=pe(s),b(this,l)):(b(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&sn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&sn(this._container,1),this.bringToFront(),this.options.interactive&&(re(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(sn(this._container,0),this._removeTimeout=setTimeout(a(be,void 0,this._container),200)):be(this._container),this.options.interactive&&(ze(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=pe(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&bn(this._container),this},bringToBack:function(){return this._map&&Ln(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof $i){l=null;var d=this._source._layers;for(var p in d)if(d[p]._map){l=d[p];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=J(this.options.offset),d=this._getAnchor();this._zoomAnimated?et(this._container,s.add(d)):l=l.add(s).add(d);var p=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=p+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});ve.include({_initOverlay:function(s,l,d,p){var y=l;return y instanceof s||(y=new s(p).setContent(l)),d&&y.setLatLng(d),y}}),Jn.include({_initOverlay:function(s,l,d,p){var y=d;return y instanceof s?(b(y,p),y._source=this):(y=l&&!p?l:new s(p,this),y.setContent(d)),y}});var th=Ti.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,Ti.prototype.openOn.call(this,s)},onAdd:function(s){Ti.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof xr||this._source.on("preclick",De))},onRemove:function(s){Ti.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof xr||this._source.off("preclick",De))},getEvents:function(){var s=Ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=xe("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=xe("div",s+"-content-wrapper",l);if(this._contentNode=xe("div",s+"-content",d),Ds(l),Tl(this._contentNode),me(l,"contextmenu",De),this._tipContainer=xe("div",s+"-tip-container",l),this._tip=xe("div",s+"-tip",this._tipContainer),this.options.closeButton){var p=this._closeButton=xe("a",s+"-close-button",l);p.setAttribute("role","button"),p.setAttribute("aria-label","Close popup"),p.href="#close",p.innerHTML='<span aria-hidden="true">&#215;</span>',me(p,"click",function(y){ht(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var p=s.offsetHeight,y=this.options.maxHeight,T="leaflet-popup-scrolled";y&&p>y?(l.height=y+"px",re(s,T)):ze(s,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();et(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(Ir(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,p=this._containerWidth,y=new $(this._containerLeft,-d-this._containerBottom);y._add(Hi(this._container));var T=s.layerPointToContainerPoint(y),M=J(this.options.autoPanPadding),j=J(this.options.autoPanPaddingTopLeft||M),W=J(this.options.autoPanPaddingBottomRight||M),Q=s.getSize(),ne=0,ce=0;T.x+p+W.x>Q.x&&(ne=T.x+p-Q.x+W.x),T.x-ne-j.x<0&&(ne=T.x-j.x),T.y+d+W.y>Q.y&&(ce=T.y+d-Q.y+W.y),T.y-ce-j.y<0&&(ce=T.y-j.y),(ne||ce)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,ce]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),GR=function(s,l){return new th(s,l)};ve.mergeOptions({closePopupOnClick:!0}),ve.include({openPopup:function(s,l,d){return this._initOverlay(th,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Jn.include({bindPopup:function(s,l){return this._popup=this._initOverlay(th,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof $i||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){gi(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof xr)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var nh=Ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){Ti.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){Ti.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=Ti.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=xe("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,p=this._map,y=this._container,T=p.latLngToContainerPoint(p.getCenter()),M=p.layerPointToContainerPoint(s),j=this.options.direction,W=y.offsetWidth,Q=y.offsetHeight,ne=J(this.options.offset),ce=this._getAnchor();j==="top"?(l=W/2,d=Q):j==="bottom"?(l=W/2,d=0):j==="center"?(l=W/2,d=Q/2):j==="right"?(l=0,d=Q/2):j==="left"?(l=W,d=Q/2):M.x<T.x?(j="right",l=0,d=Q/2):(j="left",l=W+(ne.x+ce.x)*2,d=Q/2),s=s.subtract(J(l,d,!0)).add(ne).add(ce),ze(y,"leaflet-tooltip-right"),ze(y,"leaflet-tooltip-left"),ze(y,"leaflet-tooltip-top"),ze(y,"leaflet-tooltip-bottom"),re(y,"leaflet-tooltip-"+j),et(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&sn(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),KR=function(s,l){return new nh(s,l)};ve.include({openTooltip:function(s,l,d){return this._initOverlay(nh,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Jn.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(nh,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof $i||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(me(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),me(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,p;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),p=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(p)),this._tooltip.setLatLng(l)}});var Mv=Go.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(Kt(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var p=J(d.bgPos);l.style.backgroundPosition=-p.x+"px "+-p.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function ZR(s){return new Mv(s)}Go.Default=Ll;var Nl=Jn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){b(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),be(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(bn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof $?s:new $(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),p=0,y=l.length,T;p<y;p++)T=l[p].style.zIndex,l[p]!==this._container&&T&&(d=s(d,+T));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){sn(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var p in this._tiles){var y=this._tiles[p];if(!(!y.current||!y.loaded)){var T=Math.min(1,(s-y.loaded)/200);sn(y.el,T),T<1?l=!0:(y.active?d=!0:this._onOpaqueTile(y),y.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(U(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=xe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):(be(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var p=this._levels[s],y=this._map;return p||(p=this._levels[s]={},p.el=xe("div","leaflet-tile-container leaflet-zoom-animated",this._container),p.el.style.zIndex=l,p.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),p.zoom=s,this._setZoomTransform(p,y.getCenter(),y.getZoom()),_(p.el.offsetWidth),this._onCreateLevel(p)),this._level=p,p}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var p=l.coords;this._retainParent(p.x,p.y,p.z,p.z-5)||this._retainChildren(p.x,p.y,p.z,p.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)be(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,p){var y=Math.floor(s/2),T=Math.floor(l/2),M=d-1,j=new $(+y,+T);j.z=+M;var W=this._tileCoordsToKey(j),Q=this._tiles[W];return Q&&Q.active?(Q.retain=!0,!0):(Q&&Q.loaded&&(Q.retain=!0),M>p?this._retainParent(y,T,M,p):!1)},_retainChildren:function(s,l,d,p){for(var y=2*s;y<2*s+2;y++)for(var T=2*l;T<2*l+2;T++){var M=new $(y,T);M.z=d+1;var j=this._tileCoordsToKey(M),W=this._tiles[j];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);d+1<p&&this._retainChildren(y,T,d+1,p)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,p){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var T=this.options.updateWhenZooming&&y!==this._tileZoom;(!p||T)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var p=this._map.getZoomScale(d,s.zoom),y=s.origin.multiplyBy(p).subtract(this._map._getNewPixelOrigin(l,d)).round();oe.any3d?ji(s.el,y,p):et(s.el,y)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),p=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],p).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],p).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],p).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],p).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),p=l.getZoomScale(d,this._tileZoom),y=l.project(s,this._tileZoom).floor(),T=l.getSize().divideBy(p*2);return new fe(y.subtract(T),y.add(T))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var p=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(p),T=y.getCenter(),M=[],j=this.options.keepBuffer,W=new fe(y.getBottomLeft().subtract([j,-j]),y.getTopRight().add([j,-j]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Q in this._tiles){var ne=this._tiles[Q].coords;(ne.z!==this._tileZoom||!W.contains(new $(ne.x,ne.y)))&&(this._tiles[Q].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var ce=y.min.y;ce<=y.max.y;ce++)for(var we=y.min.x;we<=y.max.x;we++){var Qt=new $(we,ce);if(Qt.z=this._tileZoom,!!this._isValidTile(Qt)){var Pt=this._tiles[this._tileCoordsToKey(Qt)];Pt?Pt.current=!0:M.push(Qt)}}if(M.sort(function(an,Yo){return an.distanceTo(T)-Yo.distanceTo(T)}),M.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var On=document.createDocumentFragment();for(we=0;we<M.length;we++)this._addTile(M[we],On);this._level.el.appendChild(On)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var p=this._tileCoordsToBounds(s);return Re(this.options.bounds).overlaps(p)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),p=s.scaleBy(d),y=p.add(d),T=l.unproject(p,s.z),M=l.unproject(y,s.z);return[T,M]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new Je(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new $(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&(be(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){re(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=_,s.onmousemove=_,oe.ielt9&&this.options.opacity<1&&sn(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),p=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&O(a(this._tileReady,this,s,null,y)),et(y,d),this._tiles[p]={el:y,coords:s,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var p=this._tileCoordsToKey(s);d=this._tiles[p],d&&(d.loaded=+new Date,this._map._fadeAnimated?(sn(d.el,0),U(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(re(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new $(this._wrapX?m(s.x,this._wrapX):s.x,this._wrapY?m(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new fe(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function QR(s){return new Nl(s)}var Qo=Nl.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=b(this,l),l.detectRetina&&oe.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return me(d,"load",a(this._tileOnLoad,this,l,d)),me(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:oe.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return P(this._url,r(l,this.options))},_tileOnLoad:function(s,l){oe.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var p=this.options.errorTileUrl;p&&l.getAttribute("src")!==p&&(l.src=p),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,p=this.options.zoomOffset;return d&&(s=l-s),s+p},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=_,l.onerror=_,!l.complete)){l.src=q;var d=this._tiles[s].coords;be(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",q),Nl.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===q))return Nl.prototype._tileReady.call(this,s,l,d)}});function Ov(s,l){return new Qo(s,l)}var Vv=Qo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=r({},this.defaultWmsParams);for(var p in l)p in this.options||(d[p]=l[p]);l=b(this,l);var y=l.detectRetina&&oe.retina?2:1,T=this.getTileSize();d.width=T.x*y,d.height=T.y*y,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Qo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,p=Ee(d.project(l[0]),d.project(l[1])),y=p.min,T=p.max,M=(this._wmsVersion>=1.3&&this._crs===qo?[y.y,y.x,T.y,T.x]:[y.x,y.y,T.x,T.y]).join(","),j=Qo.prototype.getTileUrl.call(this,s);return j+F(this.wmsParams,j,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+M},setParams:function(s,l){return r(this.wmsParams,s),l||this.redraw(),this}});function YR(s,l){return new Vv(s,l)}Qo.WMS=Vv,Ov.wms=YR;var Zi=Jn.extend({options:{padding:.1},initialize:function(s){b(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),re(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),p=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),T=p.multiplyBy(-d).add(y).subtract(this._map._getNewPixelOrigin(s,l));oe.any3d?ji(this._container,T,d):et(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new fe(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fv=Zi.extend({options:{tolerance:0},getEvents:function(){var s=Zi.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");me(s,"mousemove",this._onMouseMove,this),me(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),me(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){U(this._redrawRequest),delete this._ctx,be(this._container),Ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zi.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),p=oe.retina?2:1;et(l,s.min),l.width=p*d.x,l.height=p*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,p=l.prev;d?d.prev=p:this._drawLast=p,p?p.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],p,y;for(y=0;y<l.length;y++){if(p=Number(l[y]),isNaN(p))return;d.push(p)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new fe,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var p=this._drawFirst;p;p=p.next)s=p.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,p,y,T,M=s._parts,j=M.length,W=this._ctx;if(j){for(W.beginPath(),d=0;d<j;d++){for(p=0,y=M[d].length;p<y;p++)T=M[d][p],W[p?"lineTo":"moveTo"](T.x,T.y);l&&W.closePath()}this._fillStroke(W,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,p=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||p)/p;y!==1&&(d.save(),d.scale(1,y)),d.beginPath(),d.arc(l.x,l.y/y,p,0,Math.PI*2,!1),y!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,p,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(p=d);this._fireEvent(p?[p]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(ze(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,p,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(p=d);p!==this._hoveredLayer&&(this._handleMouseOut(s),p&&(re(this._container,"leaflet-interactive"),this._fireEvent([p],s,"mouseover"),this._hoveredLayer=p)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(d)d.prev=p;else return;p?p.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,p=l.prev;if(p)p.next=d;else return;d?d.prev=p:p&&(this._drawLast=p),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function Uv(s){return oe.canvas?new Fv(s):null}var Dl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),XR={_initContainer:function(){this._container=xe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Zi.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Dl("shape");re(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Dl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;be(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,p=s.options,y=s._container;y.stroked=!!p.stroke,y.filled=!!p.fill,p.stroke?(l||(l=s._stroke=Dl("stroke")),y.appendChild(l),l.weight=p.weight+"px",l.color=p.color,l.opacity=p.opacity,p.dashArray?l.dashStyle=x(p.dashArray)?p.dashArray.join(" "):p.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=p.lineCap.replace("butt","flat"),l.joinstyle=p.lineJoin):l&&(y.removeChild(l),s._stroke=null),p.fill?(d||(d=s._fill=Dl("fill")),y.appendChild(d),d.color=p.fillColor||p.color,d.opacity=p.fillOpacity):d&&(y.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),p=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+p+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){bn(s._container)},_bringToBack:function(s){Ln(s._container)}},ih=oe.vml?Dl:Ac,Ml=Zi.extend({_initContainer:function(){this._container=ih("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ih("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){be(this._container),Ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Zi.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),et(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=ih("path");s.options.className&&re(l,s.options.className),s.options.interactive&&re(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){be(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,So(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),p=Math.max(Math.round(s._radiusY),1)||d,y="a"+d+","+p+" 0 1,0 ",T=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+y+d*2+",0 "+y+-d*2+",0 ";this._setPath(s,T)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){bn(s._path)},_bringToBack:function(s){Ln(s._path)}});oe.vml&&Ml.include(XR);function Bv(s){return oe.svg||oe.vml?new Ml(s):null}ve.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&Uv(s)||Bv(s)}});var zv=Ko.extend({initialize:function(s,l){Ko.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=Re(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function JR(s,l){return new zv(s,l)}Ml.create=ih,Ml.pointsToPath=So,Ki.geometryToLayer=Qc,Ki.coordsToLatLng=op,Ki.coordsToLatLngs=Yc,Ki.latLngToCoords=ap,Ki.latLngsToCoords=Xc,Ki.getFeature=Zo,Ki.asFeature=Jc,ve.mergeOptions({boxZoom:!0});var jv=gn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){me(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){be(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Qn(),Mo(),this._startPoint=this._map.mouseEventToContainerPoint(s),me(document,{contextmenu:gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=xe("div","leaflet-zoom-box",this._container),re(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new fe(this._point,this._startPoint),d=l.getSize();et(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&(be(this._box),ze(this._container,"leaflet-crosshair")),mn(),Oo(),Ve(document,{contextmenu:gi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new Je(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});ve.addInitHook("addHandler","boxZoom",jv),ve.mergeOptions({doubleClickZoom:!0});var Hv=gn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),p=l.options.zoomDelta,y=s.originalEvent.shiftKey?d-p:d+p;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(s.containerPoint,y)}});ve.addInitHook("addHandler","doubleClickZoom",Hv),ve.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Wv=gn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Yn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}re(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ze(this._map._container,"leaflet-grab"),ze(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=Re(this._map.options.maxBounds);this._offsetLimit=Ee(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,p=this._draggable._newPos.x,y=(p-l+d)%s+l-d,T=(p+l+d)%s-l-d,M=Math.abs(y+d)<Math.abs(T+d)?y:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=M},_onDragEnd:function(s){var l=this._map,d=l.options,p=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),p)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,M=d.easeLinearity,j=y.multiplyBy(M/T),W=j.distanceTo([0,0]),Q=Math.min(d.inertiaMaxSpeed,W),ne=j.multiplyBy(Q/W),ce=Q/(d.inertiaDeceleration*M),we=ne.multiplyBy(-ce/2).round();!we.x&&!we.y?l.fire("moveend"):(we=l._limitOffset(we,l.options.maxBounds),O(function(){l.panBy(we,{duration:ce,easeLinearity:M,noMoveStart:!0,animate:!0})}))}}});ve.addInitHook("addHandler","dragging",Wv),ve.mergeOptions({keyboard:!0,keyboardPanDelta:80});var qv=gn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),me(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,p=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(p,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,p,y;for(p=0,y=d.left.length;p<y;p++)l[d.left[p]]=[-1*s,0];for(p=0,y=d.right.length;p<y;p++)l[d.right[p]]=[s,0];for(p=0,y=d.down.length;p<y;p++)l[d.down[p]]=[0,s];for(p=0,y=d.up.length;p<y;p++)l[d.up[p]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,p,y;for(p=0,y=d.zoomIn.length;p<y;p++)l[d.zoomIn[p]]=s;for(p=0,y=d.zoomOut.length;p<y;p++)l[d.zoomOut[p]]=-s},_addHooks:function(){me(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,p;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(p=this._panKeys[l],s.shiftKey&&(p=J(p).multiplyBy(3)),d.options.maxBounds&&(p=d._limitOffset(J(p),d.options.maxBounds)),d.options.worldCopyJump){var y=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(p)));d.panTo(y)}else d.panBy(p)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;gi(s)}}});ve.addInitHook("addHandler","keyboard",qv),ve.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var $v=gn.extend({addHooks:function(){me(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=Il(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var p=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),p),gi(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var p=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(p))))/Math.LN2,T=d?Math.ceil(y/d)*d:y,M=s._limitZoom(l+(this._delta>0?T:-T))-l;this._delta=0,this._startTime=null,M&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+M):s.setZoomAround(this._lastMousePos,l+M))}});ve.addInitHook("addHandler","scrollWheelZoom",$v);var ek=600;ve.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var Gv=gn.extend({addHooks:function(){me(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new $(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(me(document,"touchend",ht),me(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),ek),me(document,"touchend touchcancel contextmenu",this._cancel,this),me(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){Ve(document,"touchend",ht),Ve(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),Ve(document,"touchend touchcancel contextmenu",this._cancel,this),Ve(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new $(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});ve.addInitHook("addHandler","tapHold",Gv),ve.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var Kv=gn.extend({addHooks:function(){re(this._map._container,"leaflet-touch-zoom"),me(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ze(this._map._container,"leaflet-touch-zoom"),Ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(p)._divideBy(2))),this._startDist=d.distanceTo(p),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),me(document,"touchmove",this._onTouchMove,this),me(document,"touchend touchcancel",this._onTouchEnd,this),ht(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),p=l.mouseEventToContainerPoint(s.touches[1]),y=d.distanceTo(p)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var T=d._add(p)._divideBy(2)._subtract(this._centerPoint);if(y===1&&T.x===0&&T.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),U(this._animRequest);var M=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(M,this,!0),ht(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,U(this._animRequest),Ve(document,"touchmove",this._onTouchMove,this),Ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});ve.addInitHook("addHandler","touchZoom",Kv),ve.BoxZoom=jv,ve.DoubleClickZoom=Hv,ve.Drag=Wv,ve.Keyboard=qv,ve.ScrollWheelZoom=$v,ve.TapHold=Gv,ve.TouchZoom=Kv,n.Bounds=fe,n.Browser=oe,n.CRS=Tt,n.Canvas=Fv,n.Circle=sp,n.CircleMarker=Zc,n.Class=Ne,n.Control=on,n.DivIcon=Mv,n.DivOverlay=Ti,n.DomEvent=Os,n.DomUtil=rp,n.Draggable=Yn,n.Evented=Ue,n.FeatureGroup=$i,n.GeoJSON=Ki,n.GridLayer=Nl,n.Handler=gn,n.Icon=Go,n.ImageOverlay=eh,n.LatLng=Ie,n.LatLngBounds=Je,n.Layer=Jn,n.LayerGroup=$o,n.LineUtil=Dn,n.Map=ve,n.Marker=Kc,n.Mixin=$c,n.Path=xr,n.Point=$,n.PolyUtil=Ho,n.Polygon=Ko,n.Polyline=Gi,n.Popup=th,n.PosAnimation=Pl,n.Projection=wi,n.Rectangle=zv,n.Renderer=Zi,n.SVG=Ml,n.SVGOverlay=Dv,n.TileLayer=Qo,n.Tooltip=nh,n.Transformation=ul,n.Util=D,n.VideoOverlay=Nv,n.bind=a,n.bounds=Ee,n.canvas=Uv,n.circle=BR,n.circleMarker=UR,n.control=yi,n.divIcon=ZR,n.extend=r,n.featureGroup=OR,n.geoJSON=Lv,n.geoJson=HR,n.gridLayer=QR,n.icon=VR,n.imageOverlay=WR,n.latLng=pe,n.latLngBounds=Re,n.layerGroup=MR,n.map=Uo,n.marker=FR,n.point=J,n.polygon=jR,n.polyline=zR,n.popup=GR,n.rectangle=JR,n.setOptions=b,n.stamp=h,n.svg=Bv,n.svgOverlay=$R,n.tileLayer=Ov,n.tooltip=KR,n.transformation=_r,n.version=i,n.videoOverlay=qR;var tk=window.L;n.noConflict=function(){return window.L=tk,this},window.L=n})})(Dg,Dg.exports);var wc=Dg.exports;const tC=hI(wc);function Qy(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Yy(t,e){return e==null?function(i,r){const o=Y.useRef();return o.current||(o.current=t(i,r)),o}:function(i,r){const o=Y.useRef();o.current||(o.current=t(i,r));const a=Y.useRef(i),{instance:u}=o.current;return Y.useEffect(function(){a.current!==i&&(e(u,i,a.current),a.current=i)},[u,i,r]),o}}function aB(t,e){Y.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function nC(t){return function(n){const i=Ky(),r=t(Zy(n,i),i);return Y1(i.map,n.attribution),eC(r.current,n.eventHandlers),aB(r.current,i),r}}function lB(t,e){const n=Yy(t,e),i=nC(n);return iB(i)}function uB(t,e){const n=Yy(t),i=oB(n,e);return rB(i)}function cB(t,e){const n=Yy(t,e),i=nC(n);return sB(i)}function hB(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function dB(){return Ky().map}function Mg(){return Mg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Mg.apply(this,arguments)}function fB({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:o,placeholder:a,style:u,whenReady:h,zoom:f,...m},_){const[v]=Y.useState({className:r,id:o,style:u}),[I,k]=Y.useState(null);Y.useImperativeHandle(_,()=>(I==null?void 0:I.map)??null,[I]);const b=Y.useCallback(A=>{if(A!==null&&I===null){const P=new wc.Map(A,m);n!=null&&f!=null?P.setView(n,f):t!=null&&P.fitBounds(t,e),h!=null&&P.whenReady(h),k(tB(P))}},[]);Y.useEffect(()=>()=>{I==null||I.map.remove()},[I]);const F=I?rd.createElement(J1,{value:I},i):a??null;return rd.createElement("div",Mg({},v,{ref:b}),F)}const pB=Y.forwardRef(fB),mB=lB(function({position:e,...n},i){const r=new wc.Marker(e,n);return Qy(r,nB(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),gB=uB(function(e,n){const i=new wc.Popup(e,n.overlayContainer);return Qy(i,n)},function(e,n,{position:i},r){Y.useEffect(function(){const{instance:a}=e;function u(f){f.popup===a&&(a.update(),r(!0))}function h(f){f.popup===a&&r(!1)}return n.map.on({popupopen:u,popupclose:h}),n.overlayContainer==null?(i!=null&&a.setLatLng(i),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var m;n.map.off({popupopen:u,popupclose:h}),(m=n.overlayContainer)==null||m.unbindPopup(),n.map.removeLayer(a)}},[e,n,r,i])}),_B=cB(function({url:e,...n},i){const r=new wc.TileLayer(e,Zy(n,i));return Qy(r,i)},function(e,n,i){hB(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)}),yB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=",vB="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";let wB=tC.icon({iconUrl:yB,shadowUrl:vB,iconSize:[25,41],iconAnchor:[12,41]});tC.Marker.prototype.options.icon=wB;function TB(){const[t,e]=Y.useState(null),n=dB(),i=()=>{n.locate({setView:!0,maxZoom:16,enableHighAccuracy:!0}).on("locationfound",function(r){e(r.latlng),n.flyTo(r.latlng,n.getZoom())}).on("locationerror",function(r){alert("No pudimos obtener tu ubicacin. Asegrate de tener el GPS activado y dar permisos. Nota: En celulares, esto requiere HTTPS o usar localhost."),console.error(r)})};return Y.useEffect(()=>{i()},[n]),V.jsxs(V.Fragment,{children:[V.jsx("button",{onClick:i,className:"absolute top-4 right-4 z-[1000] bg-white p-2 rounded-lg shadow-md text-primary-600 active:scale-95",title:"Mi Ubicacin",children:V.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[V.jsx("crosshairs",{cx:"12",cy:"12",r:"10"}),V.jsx("line",{x1:"22",y1:"12",x2:"18",y2:"12"}),V.jsx("line",{x1:"6",y1:"12",x2:"2",y2:"12"}),V.jsx("line",{x1:"12",y1:"6",x2:"12",y2:"2"}),V.jsx("line",{x1:"12",y1:"22",x2:"12",y2:"18"})]})}),t&&V.jsx(mB,{position:t,children:V.jsx(gB,{children:"Ests aqu!"})})]})}function iC({center:t=[21.8853,-102.2916],zoom:e=13}){return V.jsx("div",{className:"h-[300px] w-full rounded-xl overflow-hidden shadow-inner border border-gray-200 relative z-0",children:V.jsxs(pB,{center:t,zoom:e,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[V.jsx(_B,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),V.jsx(TB,{})]})})}function EB(){var e,n;const{user:t}=rl();return V.jsxs("div",{className:"p-4 space-y-6 pb-24",children:[V.jsxs("header",{className:"flex justify-between items-center",children:[V.jsxs("div",{children:[V.jsxs("h1",{className:"text-2xl font-bold text-gray-900",children:["Hola, ",(e=t==null?void 0:t.name)==null?void 0:e.split(" ")[0]]}),V.jsx("p",{className:"text-gray-500 text-sm",children:"Qu quieres reportar hoy?"})]}),V.jsx("div",{className:"w-10 h-10 bg-primary-50 rounded-full flex items-center justify-center text-primary-600 font-bold border border-primary-100",children:((n=t==null?void 0:t.name)==null?void 0:n.charAt(0).toUpperCase())||"U"})]}),V.jsxs("section",{children:[V.jsxs("div",{className:"flex justify-between items-center mb-3",children:[V.jsx("h2",{className:"font-semibold text-gray-800",children:"Mapa de Reportes"}),V.jsx("button",{className:"text-primary-600 text-sm font-medium",children:"Ver todo"})]}),V.jsx(iC,{})]}),V.jsxs("section",{children:[V.jsx("h2",{className:"font-semibold text-gray-800 mb-3",children:"Reportes Recientes"}),V.jsxs("div",{className:"space-y-3",children:[V.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-xl shadow-sm flex gap-3",children:[V.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex-shrink-0 flex items-center justify-center text-red-600",children:V.jsx(PP,{size:24})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-medium text-gray-900",children:"Bache en Av. Universidad"}),V.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hace 2 horas  Pendiente"})]})]}),V.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-xl shadow-sm flex gap-3",children:[V.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex-shrink-0 flex items-center justify-center text-yellow-600",children:V.jsx(CP,{size:24})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-medium text-gray-900",children:"Luminaria fundida"}),V.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Hace 5 horas  En proceso"})]})]}),V.jsxs("div",{className:"bg-white border border-gray-100 p-3 rounded-xl shadow-sm flex gap-3",children:[V.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex-shrink-0 flex items-center justify-center text-blue-600",children:V.jsx(xP,{size:24})}),V.jsxs("div",{children:[V.jsx("h3",{className:"font-medium text-gray-900",children:"Fuga de agua"}),V.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ayer  Resuelto"})]})]})]})]})]})}function IB({onSwitchToSignUp:t}){const[e,n]=Y.useState(""),[i,r]=Y.useState(""),[o,a]=Y.useState(""),{login:u}=rl(),h=async f=>{f.preventDefault(),a("");const m=await u(e,i);m.success||a(m.error)};return V.jsxs("div",{className:"min-h-screen bg-white p-6 flex flex-col justify-center",children:[V.jsxs("div",{className:"mb-10 text-center",children:[V.jsx("img",{src:"/logo.jpg",alt:"Logo",className:"w-24 h-24 mx-auto mb-4 object-contain"}),V.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Bienvenido de nuevo"}),V.jsx("p",{className:"text-gray-500",children:"Ingresa a tu cuenta para continuar"})]}),V.jsxs("form",{onSubmit:h,className:"space-y-4",children:[o&&V.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center",children:o}),V.jsxs("div",{className:"relative",children:[V.jsx($_,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"email",placeholder:"Correo electrnico",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:e,onChange:f=>n(f.target.value),required:!0})]}),V.jsxs("div",{className:"relative",children:[V.jsx(RP,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"password",placeholder:"Contrasea",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:i,onChange:f=>r(f.target.value),required:!0})]}),V.jsxs("button",{type:"submit",className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg shadow-primary-600/30 active:scale-95 transition-transform flex items-center justify-center gap-2",children:["Iniciar Sesin",V.jsx(AP,{size:20})]})]}),V.jsx("div",{className:"mt-8 text-center",children:V.jsxs("p",{className:"text-gray-500",children:["No tienes cuenta?"," ",V.jsx("button",{onClick:t,className:"text-primary-600 font-semibold hover:underline",children:"Regstrate"})]})})]})}function SB({onSwitchToLogin:t}){const[e,n]=Y.useState(""),[i,r]=Y.useState(""),[o,a]=Y.useState(""),[u,h]=Y.useState(""),{signup:f}=rl(),m=async _=>{_.preventDefault(),h("");const v=await f(e,i,o);v.success||h(v.error)};return V.jsxs("div",{className:"min-h-screen bg-white p-6 flex flex-col justify-center",children:[V.jsxs("div",{className:"mb-10 text-center",children:[V.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Crear Cuenta"}),V.jsx("p",{className:"text-gray-500",children:"nete a AGSCiudadana"})]}),V.jsxs("form",{onSubmit:m,className:"space-y-4",children:[u&&V.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-lg text-sm text-center",children:u}),V.jsxs("div",{className:"relative",children:[V.jsx($_,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"text",placeholder:"Nombre completo",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:e,onChange:_=>n(_.target.value),required:!0})]}),V.jsxs("div",{className:"relative",children:[V.jsx(qL,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"email",placeholder:"Correo electrnico",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:i,onChange:_=>r(_.target.value),required:!0})]}),V.jsxs("div",{className:"relative",children:[V.jsx(RP,{className:"absolute left-3 top-3.5 text-gray-400",size:20}),V.jsx("input",{type:"password",placeholder:"Contrasea",className:"w-full pl-10 pr-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",value:o,onChange:_=>a(_.target.value),required:!0})]}),V.jsxs("button",{type:"submit",className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg shadow-primary-600/30 active:scale-95 transition-transform flex items-center justify-center gap-2",children:["Registrarse",V.jsx(AP,{size:20})]})]}),V.jsx("div",{className:"mt-8 text-center",children:V.jsxs("p",{className:"text-gray-500",children:["Ya tienes cuenta?"," ",V.jsx("button",{onClick:t,className:"text-primary-600 font-semibold hover:underline",children:"Inicia Sesin"})]})})]})}const PB=async t=>{try{const{userId:e,userName:n,category:i,location:r,description:o,imageUrl:a}=t;if(!e||!i||!r||!o)throw new Error("Faltan datos requeridos");const u=new ui(r.lat,r.lng),h={userId:e,userName:n||"Usuario",category:{id:i.id,name:i.name},location:u,locationDetails:{lat:r.lat,lng:r.lng},description:o,imageUrls:a?[a]:[],status:"Pendiente",createdAt:Be.now(),updatedAt:Be.now()};return{success:!0,reportId:(await lF(Yx(vc,"reports"),h)).id,message:"Reporte creado exitosamente"}}catch(e){return console.error("Error al crear reporte:",e),{success:!1,error:e.message||"Error al crear el reporte"}}},rC=async t=>{try{const e=tF(Yx(vc,"reports"),nF("userId","==",t),iF("createdAt","desc")),n=await oF(e),i=[];return n.forEach(r=>{var a,u,h;const o=r.data();i.push({id:r.id,...o,date:(a=o.createdAt)==null?void 0:a.toDate().toLocaleDateString("es-MX",{day:"numeric",month:"short",year:"numeric"}),createdAt:(u=o.createdAt)==null?void 0:u.toDate(),updatedAt:(h=o.updatedAt)==null?void 0:h.toDate()})}),{success:!0,reports:i}}catch(e){return console.error("Error al obtener reportes:",e),{success:!1,error:e.message,reports:[]}}},AB=async t=>{try{const e=await rC(t);if(!e.success)throw new Error(e.error);const n=e.reports,i=n.length,r=n.filter(u=>u.status==="Resuelto").length,o=n.filter(u=>u.status==="En Proceso").length,a=n.filter(u=>u.status==="Pendiente").length;return{success:!0,stats:{total:i,resueltos:r,enProceso:o,pendientes:a,activos:o+a}}}catch(e){return console.error("Error al obtener estadsticas:",e),{success:!1,stats:{total:0,resueltos:0,enProceso:0,pendientes:0,activos:0}}}},xB=async(t,e)=>{try{if(!t)throw new Error("No se proporcion ningn archivo");if(!t.type.startsWith("image/"))throw new Error("El archivo debe ser una imagen");const n=5*1024*1024;if(t.size>n)throw new Error("La imagen no debe superar los 5MB");const i=Date.now(),r=`reports/${e}/${i}_${t.name}`,o=j3(K3,r),a=await B3(o,t);return{success:!0,url:await z3(a.ref)}}catch(n){return console.error("Error al subir imagen:",n),{success:!1,error:n.message}}},CB=[{id:"bache",name:"Bache",icon:PP,color:"bg-red-100 text-red-600"},{id:"alumbrado",name:"Alumbrado",icon:CP,color:"bg-yellow-100 text-yellow-600"},{id:"fuga",name:"Fuga de Agua",icon:xP,color:"bg-blue-100 text-blue-600"},{id:"basura",name:"Basura",icon:KL,color:"bg-green-100 text-green-600"},{id:"seguridad",name:"Inseguridad",icon:GL,color:"bg-purple-100 text-purple-600"}];function RB({onCancel:t,onSuccess:e}){const{user:n}=rl(),[i,r]=Y.useState(1),[o,a]=Y.useState({category:null,location:null,description:"",image:null}),[u,h]=Y.useState(null),[f,m]=Y.useState(null),[_,v]=Y.useState(!1),[I,k]=Y.useState(""),b=x=>{a({...o,category:x}),r(2)},F=()=>{a({...o,location:{lat:21.8853,lng:-102.2916}}),r(3)},A=x=>{const B=x.target.files[0];if(B){h(B);const q=new FileReader;q.onloadend=()=>{m(q.result)},q.readAsDataURL(B)}},P=async x=>{x.preventDefault(),v(!0),k("");try{let B=null;if(u){const C=await xB(u,n.uid);if(!C.success)throw new Error(C.error);B=C.url}const q={userId:n.uid,userName:n.name,category:o.category,location:o.location,description:o.description,imageUrl:B},K=await PB(q);if(!K.success)throw new Error(K.error);setTimeout(()=>{v(!1),e()},500)}catch(B){console.error("Error al enviar reporte:",B),k(B.message||"Error al enviar el reporte"),v(!1)}};return V.jsxs("div",{className:"h-full flex flex-col bg-white",children:[V.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center gap-3",children:[i>1&&V.jsx("button",{onClick:()=>r(i-1),className:"p-1 -ml-2 text-gray-500",children:V.jsx(UL,{size:24})}),V.jsxs("h1",{className:"text-lg font-bold text-gray-900",children:[i===1&&"Selecciona una categora",i===2&&"Confirma la ubicacin",i===3&&"Detalles del reporte"]})]}),V.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[i===1&&V.jsx("div",{className:"grid grid-cols-2 gap-4",children:CB.map(x=>V.jsxs("button",{onClick:()=>b(x),className:"flex flex-col items-center justify-center p-6 rounded-2xl border border-gray-100 shadow-sm hover:shadow-md transition-all bg-white active:scale-95",children:[V.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-3 ${x.color}`,children:V.jsx(x.icon,{size:32})}),V.jsx("span",{className:"font-medium text-gray-800",children:x.name})]},x.id))}),i===2&&V.jsxs("div",{className:"h-full flex flex-col",children:[V.jsxs("div",{className:"flex-1 rounded-xl overflow-hidden border border-gray-200 relative mb-4",children:[V.jsx(iC,{}),V.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-[1000]",children:V.jsx(sg,{size:48,className:"text-primary-600 -mt-12 drop-shadow-lg",fill:"currentColor"})})]}),V.jsx("div",{className:"bg-blue-50 p-4 rounded-xl text-sm text-blue-800 mb-4",children:V.jsxs("p",{className:"flex gap-2",children:[V.jsx(sg,{size:16,className:"shrink-0 mt-0.5"}),"Mueve el mapa para ubicar el problema exactamente."]})}),V.jsx("button",{onClick:F,className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg active:scale-95 transition-transform",children:"Confirmar Ubicacin"})]}),i===3&&V.jsxs("form",{onSubmit:P,className:"space-y-6",children:[V.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-xl border border-gray-100",children:[V.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${o.category.color}`,children:V.jsx(o.category.icon,{size:24})}),V.jsxs("div",{children:[V.jsx("p",{className:"text-xs text-gray-500",children:"Categora"}),V.jsx("p",{className:"font-semibold text-gray-900",children:o.category.name})]})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripcin"}),V.jsx("textarea",{className:"w-full p-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500 h-32 resize-none",placeholder:"Describe el problema...",value:o.description,onChange:x=>a({...o,description:x.target.value}),required:!0})]}),V.jsxs("div",{children:[V.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Evidencia (Opcional)"}),f?V.jsxs("div",{className:"relative",children:[V.jsx("img",{src:f,alt:"Preview",className:"w-full h-48 object-cover rounded-xl"}),V.jsx("button",{type:"button",onClick:()=>{h(null),m(null)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 shadow-lg hover:bg-red-600",children:""})]}):V.jsxs("label",{className:"w-full h-32 border-2 border-dashed border-gray-300 rounded-xl flex flex-col items-center justify-center text-gray-400 hover:bg-gray-50 transition-colors cursor-pointer",children:[V.jsx(zL,{size:32,className:"mb-2"}),V.jsx("span",{className:"text-sm",children:"Tomar foto o subir imagen"}),V.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden"})]})]}),I&&V.jsx("div",{className:"bg-red-50 text-red-600 p-3 rounded-xl text-sm text-center",children:I}),V.jsx("button",{type:"submit",disabled:_,className:"w-full bg-primary-600 text-white py-3 rounded-xl font-semibold shadow-lg active:scale-95 transition-transform flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:_?V.jsxs(V.Fragment,{children:[V.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Enviando..."]}):V.jsxs(V.Fragment,{children:["Enviar Reporte",V.jsx(jL,{size:20})]})})]})]})]})}function kB(){var f;const{user:t,logout:e}=rl(),[n,i]=Y.useState([]),[r,o]=Y.useState({total:0,resueltos:0,activos:0}),[a,u]=Y.useState(!0);Y.useEffect(()=>{(async()=>{if(!t)return;u(!0);const _=await rC(t.uid);_.success&&i(_.reports);const v=await AB(t.uid);v.success&&o(v.stats),u(!1)})()},[t]);const h=m=>{switch(m){case"Pendiente":return"text-yellow-600 bg-yellow-100";case"En Proceso":return"text-blue-600 bg-blue-100";case"Resuelto":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return V.jsxs("div",{className:"h-full bg-gray-50 flex flex-col",children:[V.jsxs("div",{className:"bg-white p-6 border-b border-gray-100 flex flex-col items-center",children:[V.jsx("div",{className:"w-24 h-24 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 text-4xl font-bold mb-4 border-4 border-white shadow-lg",children:(f=t==null?void 0:t.name)==null?void 0:f.charAt(0).toUpperCase()}),V.jsx("h1",{className:"text-xl font-bold text-gray-900",children:t==null?void 0:t.name}),V.jsx("p",{className:"text-gray-500 text-sm",children:t==null?void 0:t.email}),V.jsxs("button",{onClick:e,className:"mt-4 flex items-center gap-2 text-red-600 px-4 py-2 rounded-full hover:bg-red-50 transition-colors text-sm font-medium",children:[V.jsx(WL,{size:16}),"Cerrar Sesin"]})]}),V.jsxs("div",{className:"grid grid-cols-3 gap-1 p-4",children:[V.jsxs("div",{className:"bg-white p-3 rounded-xl text-center shadow-sm",children:[V.jsx("span",{className:"block text-2xl font-bold text-gray-900",children:r.total}),V.jsx("span",{className:"text-xs text-gray-500",children:"Reportes"})]}),V.jsxs("div",{className:"bg-white p-3 rounded-xl text-center shadow-sm",children:[V.jsx("span",{className:"block text-2xl font-bold text-gray-900",children:r.resueltos}),V.jsx("span",{className:"text-xs text-gray-500",children:"Resueltos"})]}),V.jsxs("div",{className:"bg-white p-3 rounded-xl text-center shadow-sm",children:[V.jsx("span",{className:"block text-2xl font-bold text-gray-900",children:r.activos}),V.jsx("span",{className:"text-xs text-gray-500",children:"Activos"})]})]}),V.jsxs("div",{className:"flex-1 overflow-y-auto p-4 pt-0",children:[V.jsx("h2",{className:"font-semibold text-gray-800 mb-3 ml-1",children:"Mis Reportes"}),a?V.jsx("div",{className:"flex justify-center items-center py-12",children:V.jsx("div",{className:"w-8 h-8 border-4 border-primary-600 border-t-transparent rounded-full animate-spin"})}):n.length===0?V.jsxs("div",{className:"bg-white p-8 rounded-xl text-center text-gray-500",children:[V.jsx(FL,{size:48,className:"mx-auto mb-3 text-gray-300"}),V.jsx("p",{className:"font-medium",children:"No tienes reportes an"}),V.jsx("p",{className:"text-sm mt-1",children:"Crea tu primer reporte para empezar"})]}):V.jsx("div",{className:"space-y-3",children:n.map(m=>{var _;return V.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100",children:[V.jsxs("div",{className:"flex justify-between items-start mb-2",children:[V.jsx("h3",{className:"font-medium text-gray-900",children:((_=m.category)==null?void 0:_.name)||"Reporte"}),V.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${h(m.status)}`,children:m.status})]}),V.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:m.description}),m.imageUrls&&m.imageUrls.length>0&&V.jsx("img",{src:m.imageUrls[0],alt:"Evidencia",className:"w-full h-32 object-cover rounded-lg mb-2"}),V.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400",children:[V.jsxs("div",{className:"flex items-center gap-1",children:[V.jsx(BL,{size:12}),m.date]}),V.jsxs("div",{className:"flex items-center gap-1",children:[V.jsx(sg,{size:12}),"Ver mapa"]})]})]},m.id)})})]})]})}const sC=Y.createContext({});function bB(t){const e=Y.useRef(null);return e.current===null&&(e.current=t()),e.current}const Xy=Y.createContext(null),oC=Y.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function LB(t=!0){const e=Y.useContext(Xy);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=Y.useId();Y.useEffect(()=>{t&&r(o)},[t]);const a=Y.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,a]:[!0]}const Jy=typeof window<"u",NB=Jy?Y.useLayoutEffect:Y.useEffect,In=t=>t;let aC=In;function ev(t){let e;return()=>(e===void 0&&(e=t()),e)}const $a=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i},sr=t=>t*1e3,or=t=>t/1e3,DB={useManualTiming:!1};function MB(t){let e=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function u(f){o.has(f)&&(h.schedule(f),t()),f(a)}const h={schedule:(f,m=!1,_=!1)=>{const I=_&&i?e:n;return m&&o.add(f),I.has(f)||I.add(f),f},cancel:f=>{n.delete(f),o.delete(f)},process:f=>{if(a=f,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(u),e.clear(),i=!1,r&&(r=!1,h.process(f))}};return h}const kh=["read","resolveKeyframes","update","preRender","render","postRender"],OB=40;function lC(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=kh.reduce((A,P)=>(A[P]=MB(o),A),{}),{read:u,resolveKeyframes:h,update:f,preRender:m,render:_,postRender:v}=a,I=()=>{const A=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(A-r.timestamp,OB),1),r.timestamp=A,r.isProcessing=!0,u.process(r),h.process(r),f.process(r),m.process(r),_.process(r),v.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(I))},k=()=>{n=!0,i=!0,r.isProcessing||t(I)};return{schedule:kh.reduce((A,P)=>{const x=a[P];return A[P]=(B,q=!1,K=!1)=>(n||k(),x.schedule(B,q,K)),A},{}),cancel:A=>{for(let P=0;P<kh.length;P++)a[kh[P]].cancel(A)},state:r,steps:a}}const{schedule:$e,cancel:hs,state:bt,steps:Jp}=lC(typeof requestAnimationFrame<"u"?requestAnimationFrame:In,!0),uC=Y.createContext({strict:!1}),QT={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ga={};for(const t in QT)Ga[t]={isEnabled:e=>QT[t].some(n=>!!e[n])};function VB(t){for(const e in t)Ga[e]={...Ga[e],...t[e]}}const FB=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Qd(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||FB.has(t)}let cC=t=>!Qd(t);function UB(t){t&&(cC=e=>e.startsWith("on")?!Qd(e):t(e))}try{UB(require("@emotion/is-prop-valid").default)}catch{}function BB(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(cC(r)||n===!0&&Qd(r)||!e&&!Qd(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}function zB(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...i)=>t(...i);return new Proxy(n,{get:(i,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}const $f=Y.createContext({});function Xu(t){return typeof t=="string"||Array.isArray(t)}function Gf(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const tv=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],nv=["initial",...tv];function Kf(t){return Gf(t.animate)||nv.some(e=>Xu(t[e]))}function hC(t){return!!(Kf(t)||t.variants)}function jB(t,e){if(Kf(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Xu(n)?n:void 0,animate:Xu(i)?i:void 0}}return t.inherit!==!1?e:{}}function HB(t){const{initial:e,animate:n}=jB(t,Y.useContext($f));return Y.useMemo(()=>({initial:e,animate:n}),[YT(e),YT(n)])}function YT(t){return Array.isArray(t)?t.join(" "):t}const WB=Symbol.for("motionComponentSymbol");function ga(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qB(t,e,n){return Y.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ga(n)&&(n.current=i))},[e])}const iv=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),$B="framerAppearId",dC="data-"+iv($B),{schedule:rv}=lC(queueMicrotask,!1),fC=Y.createContext({});function GB(t,e,n,i,r){var o,a;const{visualElement:u}=Y.useContext($f),h=Y.useContext(uC),f=Y.useContext(Xy),m=Y.useContext(oC).reducedMotion,_=Y.useRef(null);i=i||h.renderer,!_.current&&i&&(_.current=i(t,{visualState:e,parent:u,props:n,presenceContext:f,blockInitialAnimation:f?f.initial===!1:!1,reducedMotionConfig:m}));const v=_.current,I=Y.useContext(fC);v&&!v.projection&&r&&(v.type==="html"||v.type==="svg")&&KB(_.current,n,r,I);const k=Y.useRef(!1);Y.useInsertionEffect(()=>{v&&k.current&&v.update(n,f)});const b=n[dC],F=Y.useRef(!!b&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,b))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,b)));return NB(()=>{v&&(k.current=!0,window.MotionIsMounted=!0,v.updateFeatures(),rv.render(v.render),F.current&&v.animationState&&v.animationState.animateChanges())}),Y.useEffect(()=>{v&&(!F.current&&v.animationState&&v.animationState.animateChanges(),F.current&&(queueMicrotask(()=>{var A;(A=window.MotionHandoffMarkAsComplete)===null||A===void 0||A.call(window,b)}),F.current=!1))}),v}function KB(t,e,n,i){const{layoutId:r,layout:o,drag:a,dragConstraints:u,layoutScroll:h,layoutRoot:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:pC(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!a||u&&ga(u),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,layoutScroll:h,layoutRoot:f})}function pC(t){if(t)return t.options.allowProjection!==!1?t.projection:pC(t.parent)}function ZB({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var o,a;t&&VB(t);function u(f,m){let _;const v={...Y.useContext(oC),...f,layoutId:QB(f)},{isStatic:I}=v,k=HB(f),b=i(f,I);if(!I&&Jy){YB();const F=XB(v);_=F.MeasureLayout,k.visualElement=GB(r,b,v,e,F.ProjectionNode)}return V.jsxs($f.Provider,{value:k,children:[_&&k.visualElement?V.jsx(_,{visualElement:k.visualElement,...v}):null,n(r,f,qB(b,k.visualElement,m),b,I,k.visualElement)]})}u.displayName=`motion.${typeof r=="string"?r:`create(${(a=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&a!==void 0?a:""})`}`;const h=Y.forwardRef(u);return h[WB]=r,h}function QB({layoutId:t}){const e=Y.useContext(sC).id;return e&&t!==void 0?e+"-"+t:t}function YB(t,e){Y.useContext(uC).strict}function XB(t){const{drag:e,layout:n}=Ga;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const JB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function sv(t){return typeof t!="string"||t.includes("-")?!1:!!(JB.indexOf(t)>-1||/[A-Z]/u.test(t))}function XT(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function ov(t,e,n,i){if(typeof e=="function"){const[r,o]=XT(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=XT(i);e=e(n!==void 0?n:t.custom,r,o)}return e}const Og=t=>Array.isArray(t),ez=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),tz=t=>Og(t)?t[t.length-1]||0:t,qt=t=>!!(t&&t.getVelocity);function td(t){const e=qt(t)?t.get():t;return ez(e)?e.toValue():e}function nz({scrapeMotionValuesFromProps:t,createRenderState:e,onUpdate:n},i,r,o){const a={latestValues:iz(i,r,o,t),renderState:e()};return n&&(a.onMount=u=>n({props:i,current:u,...a}),a.onUpdate=u=>n(u)),a}const mC=t=>(e,n)=>{const i=Y.useContext($f),r=Y.useContext(Xy),o=()=>nz(t,e,i,r);return n?o():bB(o)};function iz(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=td(o[v]);let{initial:a,animate:u}=t;const h=Kf(t),f=hC(t);e&&f&&!h&&t.inherit!==!1&&(a===void 0&&(a=e.initial),u===void 0&&(u=e.animate));let m=n?n.initial===!1:!1;m=m||a===!1;const _=m?u:a;if(_&&typeof _!="boolean"&&!Gf(_)){const v=Array.isArray(_)?_:[_];for(let I=0;I<v.length;I++){const k=ov(t,v[I]);if(k){const{transitionEnd:b,transition:F,...A}=k;for(const P in A){let x=A[P];if(Array.isArray(x)){const B=m?x.length-1:0;x=x[B]}x!==null&&(r[P]=x)}for(const P in b)r[P]=b[P]}}}return r}const sl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Io=new Set(sl),gC=t=>e=>typeof e=="string"&&e.startsWith(t),_C=gC("--"),rz=gC("var(--"),av=t=>rz(t)?sz.test(t.split("/*")[0].trim()):!1,sz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,yC=(t,e)=>e&&typeof t=="number"?e.transform(t):t,mr=(t,e,n)=>n>e?e:n<t?t:n,ol={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ju={...ol,transform:t=>mr(0,1,t)},bh={...ol,default:1},Tc=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),kr=Tc("deg"),Mi=Tc("%"),ue=Tc("px"),oz=Tc("vh"),az=Tc("vw"),JT={...Mi,parse:t=>Mi.parse(t)/100,transform:t=>Mi.transform(t*100)},lz={borderWidth:ue,borderTopWidth:ue,borderRightWidth:ue,borderBottomWidth:ue,borderLeftWidth:ue,borderRadius:ue,radius:ue,borderTopLeftRadius:ue,borderTopRightRadius:ue,borderBottomRightRadius:ue,borderBottomLeftRadius:ue,width:ue,maxWidth:ue,height:ue,maxHeight:ue,top:ue,right:ue,bottom:ue,left:ue,padding:ue,paddingTop:ue,paddingRight:ue,paddingBottom:ue,paddingLeft:ue,margin:ue,marginTop:ue,marginRight:ue,marginBottom:ue,marginLeft:ue,backgroundPositionX:ue,backgroundPositionY:ue},uz={rotate:kr,rotateX:kr,rotateY:kr,rotateZ:kr,scale:bh,scaleX:bh,scaleY:bh,scaleZ:bh,skew:kr,skewX:kr,skewY:kr,distance:ue,translateX:ue,translateY:ue,translateZ:ue,x:ue,y:ue,z:ue,perspective:ue,transformPerspective:ue,opacity:Ju,originX:JT,originY:JT,originZ:ue},eE={...ol,transform:Math.round},lv={...lz,...uz,zIndex:eE,size:ue,fillOpacity:Ju,strokeOpacity:Ju,numOctaves:eE},cz={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},hz=sl.length;function dz(t,e,n){let i="",r=!0;for(let o=0;o<hz;o++){const a=sl[o],u=t[a];if(u===void 0)continue;let h=!0;if(typeof u=="number"?h=u===(a.startsWith("scale")?1:0):h=parseFloat(u)===0,!h||n){const f=yC(u,lv[a]);if(!h){r=!1;const m=cz[a]||a;i+=`${m}(${f}) `}n&&(e[a]=f)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function uv(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let a=!1,u=!1;for(const h in e){const f=e[h];if(Io.has(h)){a=!0;continue}else if(_C(h)){r[h]=f;continue}else{const m=yC(f,lv[h]);h.startsWith("origin")?(u=!0,o[h]=m):i[h]=m}}if(e.transform||(a||n?i.transform=dz(e,t.transform,n):i.transform&&(i.transform="none")),u){const{originX:h="50%",originY:f="50%",originZ:m=0}=o;i.transformOrigin=`${h} ${f} ${m}`}}const fz={offset:"stroke-dashoffset",array:"stroke-dasharray"},pz={offset:"strokeDashoffset",array:"strokeDasharray"};function mz(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?fz:pz;t[o.offset]=ue.transform(-i);const a=ue.transform(e),u=ue.transform(n);t[o.array]=`${a} ${u}`}function tE(t,e,n){return typeof t=="string"?t:ue.transform(e+n*t)}function gz(t,e,n){const i=tE(e,t.x,t.width),r=tE(n,t.y,t.height);return`${i} ${r}`}function cv(t,{attrX:e,attrY:n,attrScale:i,originX:r,originY:o,pathLength:a,pathSpacing:u=1,pathOffset:h=0,...f},m,_){if(uv(t,f,_),m){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:I,dimensions:k}=t;v.transform&&(k&&(I.transform=v.transform),delete v.transform),k&&(r!==void 0||o!==void 0||I.transform)&&(I.transformOrigin=gz(k,r!==void 0?r:.5,o!==void 0?o:.5)),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),i!==void 0&&(v.scale=i),a!==void 0&&mz(v,a,u,h,!1)}const hv=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),vC=()=>({...hv(),attrs:{}}),dv=t=>typeof t=="string"&&t.toLowerCase()==="svg";function wC(t,{style:e,vars:n},i,r){Object.assign(t.style,e,r&&r.getProjectionStyles(i));for(const o in n)t.style.setProperty(o,n[o])}const TC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function EC(t,e,n,i){wC(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(TC.has(r)?r:iv(r),e.attrs[r])}const Yd={};function _z(t){Object.assign(Yd,t)}function IC(t,{layout:e,layoutId:n}){return Io.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!Yd[t]||t==="opacity")}function fv(t,e,n){var i;const{style:r}=t,o={};for(const a in r)(qt(r[a])||e.style&&qt(e.style[a])||IC(a,t)||((i=n==null?void 0:n.getValue(a))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(o[a]=r[a]);return o}function SC(t,e,n){const i=fv(t,e,n);for(const r in t)if(qt(t[r])||qt(e[r])){const o=sl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}function yz(t,e){try{e.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const nE=["x","y","width","height","cx","cy","r"],vz={useVisualState:mC({scrapeMotionValuesFromProps:SC,createRenderState:vC,onUpdate:({props:t,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let o=!!t.drag;if(!o){for(const u in r)if(Io.has(u)){o=!0;break}}if(!o)return;let a=!e;if(e)for(let u=0;u<nE.length;u++){const h=nE[u];t[h]!==e[h]&&(a=!0)}a&&$e.read(()=>{yz(n,i),$e.render(()=>{cv(i,r,dv(n.tagName),t.transformTemplate),EC(n,i)})})}})},wz={useVisualState:mC({scrapeMotionValuesFromProps:fv,createRenderState:hv})};function PC(t,e,n){for(const i in e)!qt(e[i])&&!IC(i,n)&&(t[i]=e[i])}function Tz({transformTemplate:t},e){return Y.useMemo(()=>{const n=hv();return uv(n,e,t),Object.assign({},n.vars,n.style)},[e])}function Ez(t,e){const n=t.style||{},i={};return PC(i,n,t),Object.assign(i,Tz(t,e)),i}function Iz(t,e){const n={},i=Ez(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}function Sz(t,e,n,i){const r=Y.useMemo(()=>{const o=vC();return cv(o,e,dv(i),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};PC(o,t.style,t),r.style={...o,...r.style}}return r}function Pz(t=!1){return(n,i,r,{latestValues:o},a)=>{const h=(sv(n)?Sz:Iz)(i,o,a,n),f=BB(i,typeof n=="string",t),m=n!==Y.Fragment?{...f,...h,ref:r}:{},{children:_}=i,v=Y.useMemo(()=>qt(_)?_.get():_,[_]);return Y.createElement(n,{...m,children:v})}}function Az(t,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...sv(i)?vz:wz,preloadedFeatures:t,useRender:Pz(r),createVisualElement:e,Component:i};return ZB(a)}}function AC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}function Zf(t,e,n){const i=t.getProps();return ov(i,e,n!==void 0?n:i.custom,t)}const xz=ev(()=>window.ScrollTimeline!==void 0);class Cz{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(xz()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Rz extends Cz{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function pv(t,e){return t?t[e]||t.default||t:void 0}const Vg=2e4;function xC(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<Vg;)e+=n,i=t.next(e);return e>=Vg?1/0:e}function mv(t){return typeof t=="function"}function iE(t,e){t.timeline=e,t.onfinish=null}const gv=t=>Array.isArray(t)&&typeof t[0]=="number",kz={linearEasing:void 0};function bz(t,e){const n=ev(t);return()=>{var i;return(i=kz[e])!==null&&i!==void 0?i:n()}}const Xd=bz(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),CC=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=t($a(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function RC(t){return!!(typeof t=="function"&&Xd()||!t||typeof t=="string"&&(t in Fg||Xd())||gv(t)||Array.isArray(t)&&t.every(RC))}const nu=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,Fg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:nu([0,.65,.55,1]),circOut:nu([.55,0,1,.45]),backIn:nu([.31,.01,.66,-.59]),backOut:nu([.33,1.53,.69,.99])};function kC(t,e){if(t)return typeof t=="function"&&Xd()?CC(t,e):gv(t)?nu(t):Array.isArray(t)?t.map(n=>kC(n,e)||Fg.easeOut):Fg[t]}const ti={x:!1,y:!1};function bC(){return ti.x||ti.y}function Lz(t,e,n){var i;if(t instanceof Element)return[t];if(typeof t=="string"){let r=document;const o=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}function LC(t,e){const n=Lz(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function rE(t){return e=>{e.pointerType==="touch"||bC()||t(e)}}function Nz(t,e,n={}){const[i,r,o]=LC(t,n),a=rE(u=>{const{target:h}=u,f=e(u);if(typeof f!="function"||!h)return;const m=rE(_=>{f(_),h.removeEventListener("pointerleave",m)});h.addEventListener("pointerleave",m,r)});return i.forEach(u=>{u.addEventListener("pointerenter",a,r)}),o}const NC=(t,e)=>e?t===e?!0:NC(t,e.parentElement):!1,_v=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Dz=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Mz(t){return Dz.has(t.tagName)||t.tabIndex!==-1}const iu=new WeakSet;function sE(t){return e=>{e.key==="Enter"&&t(e)}}function em(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Oz=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=sE(()=>{if(iu.has(n))return;em(n,"down");const r=sE(()=>{em(n,"up")}),o=()=>em(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function oE(t){return _v(t)&&!bC()}function Vz(t,e,n={}){const[i,r,o]=LC(t,n),a=u=>{const h=u.currentTarget;if(!oE(u)||iu.has(h))return;iu.add(h);const f=e(u),m=(I,k)=>{window.removeEventListener("pointerup",_),window.removeEventListener("pointercancel",v),!(!oE(I)||!iu.has(h))&&(iu.delete(h),typeof f=="function"&&f(I,{success:k}))},_=I=>{m(I,n.useGlobalTarget||NC(h,I.target))},v=I=>{m(I,!1)};window.addEventListener("pointerup",_,r),window.addEventListener("pointercancel",v,r)};return i.forEach(u=>{!Mz(u)&&u.getAttribute("tabindex")===null&&(u.tabIndex=0),(n.useGlobalTarget?window:u).addEventListener("pointerdown",a,r),u.addEventListener("focus",f=>Oz(f,r),r)}),o}function Fz(t){return t==="x"||t==="y"?ti[t]?null:(ti[t]=!0,()=>{ti[t]=!1}):ti.x||ti.y?null:(ti.x=ti.y=!0,()=>{ti.x=ti.y=!1})}const DC=new Set(["width","height","top","left","right","bottom",...sl]);let nd;function Uz(){nd=void 0}const Oi={now:()=>(nd===void 0&&Oi.set(bt.isProcessing||DB.useManualTiming?bt.timestamp:performance.now()),nd),set:t=>{nd=t,queueMicrotask(Uz)}};function yv(t,e){t.indexOf(e)===-1&&t.push(e)}function vv(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class wv{constructor(){this.subscriptions=[]}add(e){return yv(this.subscriptions,e),()=>vv(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const a=this.subscriptions[o];a&&a(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function MC(t,e){return e?t*(1e3/e):0}const aE=30,Bz=t=>!isNaN(parseFloat(t));class zz{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const o=Oi.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Oi.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Bz(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new wv);const i=this.events[e].add(n);return e==="change"?()=>{i(),$e.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Oi.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>aE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,aE);return MC(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function ec(t,e){return new zz(t,e)}function jz(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,ec(n))}function Hz(t,e){const n=Zf(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const a in o){const u=tz(o[a]);jz(t,a,u)}}function Wz(t){return!!(qt(t)&&t.add)}function Ug(t,e){const n=t.getValue("willChange");if(Wz(n))return n.add(e)}function OC(t){return t.props[dC]}const VC=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,qz=1e-7,$z=12;function Gz(t,e,n,i,r){let o,a,u=0;do a=e+(n-e)/2,o=VC(a,i,r)-t,o>0?n=a:e=a;while(Math.abs(o)>qz&&++u<$z);return a}function Ec(t,e,n,i){if(t===e&&n===i)return In;const r=o=>Gz(o,0,1,t,n);return o=>o===0||o===1?o:VC(r(o),e,i)}const FC=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,UC=t=>e=>1-t(1-e),BC=Ec(.33,1.53,.69,.99),Tv=UC(BC),zC=FC(Tv),jC=t=>(t*=2)<1?.5*Tv(t):.5*(2-Math.pow(2,-10*(t-1))),Ev=t=>1-Math.sin(Math.acos(t)),HC=UC(Ev),WC=FC(Ev),qC=t=>/^0[^.\s]+$/u.test(t);function Kz(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||qC(t):!0}const Tu=t=>Math.round(t*1e5)/1e5,Iv=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Zz(t){return t==null}const Qz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Sv=(t,e)=>n=>!!(typeof n=="string"&&Qz.test(n)&&n.startsWith(t)||e&&!Zz(n)&&Object.prototype.hasOwnProperty.call(n,e)),$C=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,a,u]=i.match(Iv);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(a),alpha:u!==void 0?parseFloat(u):1}},Yz=t=>mr(0,255,t),tm={...ol,transform:t=>Math.round(Yz(t))},Ks={test:Sv("rgb","red"),parse:$C("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+tm.transform(t)+", "+tm.transform(e)+", "+tm.transform(n)+", "+Tu(Ju.transform(i))+")"};function Xz(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Bg={test:Sv("#"),parse:Xz,transform:Ks.transform},_a={test:Sv("hsl","hue"),parse:$C("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Mi.transform(Tu(e))+", "+Mi.transform(Tu(n))+", "+Tu(Ju.transform(i))+")"},zt={test:t=>Ks.test(t)||Bg.test(t)||_a.test(t),parse:t=>Ks.test(t)?Ks.parse(t):_a.test(t)?_a.parse(t):Bg.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Ks.transform(t):_a.transform(t)},Jz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function e6(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(Iv))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(Jz))===null||n===void 0?void 0:n.length)||0)>0}const GC="number",KC="color",t6="var",n6="var(",lE="${}",i6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function tc(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const u=e.replace(i6,h=>(zt.test(h)?(i.color.push(o),r.push(KC),n.push(zt.parse(h))):h.startsWith(n6)?(i.var.push(o),r.push(t6),n.push(h)):(i.number.push(o),r.push(GC),n.push(parseFloat(h))),++o,lE)).split(lE);return{values:n,split:u,indexes:i,types:r}}function ZC(t){return tc(t).values}function QC(t){const{split:e,types:n}=tc(t),i=e.length;return r=>{let o="";for(let a=0;a<i;a++)if(o+=e[a],r[a]!==void 0){const u=n[a];u===GC?o+=Tu(r[a]):u===KC?o+=zt.transform(r[a]):o+=r[a]}return o}}const r6=t=>typeof t=="number"?0:t;function s6(t){const e=ZC(t);return QC(t)(e.map(r6))}const ds={test:e6,parse:ZC,createTransformer:QC,getAnimatableNone:s6},o6=new Set(["brightness","contrast","saturate","opacity"]);function a6(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(Iv)||[];if(!i)return t;const r=n.replace(i,"");let o=o6.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const l6=/\b([a-z-]*)\(.*?\)/gu,zg={...ds,getAnimatableNone:t=>{const e=t.match(l6);return e?e.map(a6).join(" "):t}},u6={...lv,color:zt,backgroundColor:zt,outlineColor:zt,fill:zt,stroke:zt,borderColor:zt,borderTopColor:zt,borderRightColor:zt,borderBottomColor:zt,borderLeftColor:zt,filter:zg,WebkitFilter:zg},Pv=t=>u6[t];function YC(t,e){let n=Pv(t);return n!==zg&&(n=ds),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const c6=new Set(["auto","none","0"]);function h6(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!c6.has(o)&&tc(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=YC(n,r)}const uE=t=>t===ol||t===ue,cE=(t,e)=>parseFloat(t.split(", ")[e]),hE=(t,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return cE(r[1],e);{const o=i.match(/^matrix\((.+)\)$/u);return o?cE(o[1],t):0}},d6=new Set(["x","y","z"]),f6=sl.filter(t=>!d6.has(t));function p6(t){const e=[];return f6.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Ka={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:hE(4,13),y:hE(5,14)};Ka.translateX=Ka.x;Ka.translateY=Ka.y;const Js=new Set;let jg=!1,Hg=!1;function XC(){if(Hg){const t=Array.from(Js).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=p6(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,a])=>{var u;(u=i.getValue(o))===null||u===void 0||u.set(a)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Hg=!1,jg=!1,Js.forEach(t=>t.complete()),Js.clear()}function JC(){Js.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Hg=!0)})}function m6(){JC(),XC()}class Av{constructor(e,n,i,r,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Js.add(this),jg||(jg=!0,$e.read(JC),$e.resolveKeyframes(XC))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=r==null?void 0:r.get(),u=e[e.length-1];if(a!==void 0)e[0]=a;else if(i&&n){const h=i.readValue(n,u);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=u),r&&a===void 0&&r.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Js.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Js.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const eR=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),g6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function _6(t){const e=g6.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function tR(t,e,n=1){const[i,r]=_6(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const a=o.trim();return eR(a)?parseFloat(a):a}return av(r)?tR(r,e,n+1):r}const nR=t=>e=>e.test(t),y6={test:t=>t==="auto",parse:t=>t},iR=[ol,ue,Mi,kr,az,oz,y6],dE=t=>iR.find(nR(t));class rR extends Av{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let h=0;h<e.length;h++){let f=e[h];if(typeof f=="string"&&(f=f.trim(),av(f))){const m=tR(f,n.current);m!==void 0&&(e[h]=m),h===e.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!DC.has(i)||e.length!==2)return;const[r,o]=e,a=dE(r),u=dE(o);if(a!==u)if(uE(a)&&uE(u))for(let h=0;h<e.length;h++){const f=e[h];typeof f=="string"&&(e[h]=parseFloat(f))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)Kz(e[r])&&i.push(r);i.length&&h6(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ka[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(i);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,u=r[a];r[a]=Ka[i](n.measureViewportBox(),window.getComputedStyle(n.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([h,f])=>{n.getValue(h).set(f)}),this.resolveNoneKeyframes()}}const fE=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ds.test(t)||t==="0")&&!t.startsWith("url("));function v6(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function w6(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=fE(r,e),u=fE(o,e);return!a||!u?!1:v6(t)||(n==="spring"||mv(n))&&i}const T6=t=>t!==null;function Qf(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(T6),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return!o||i===void 0?r[o]:i}const E6=40;class sR{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:a="loop",...u}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Oi.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:a,...u},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>E6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&m6(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Oi.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:o,delay:a,onComplete:u,onUpdate:h,isGenerator:f}=this.options;if(!f&&!w6(e,i,r,o))if(a)this.options.duration=0;else{h&&h(Qf(e,this.options,n)),u&&u(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Ze=(t,e,n)=>t+(e-t)*n;function nm(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function I6({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,a=0;if(!e)r=o=a=n;else{const u=n<.5?n*(1+e):n+e-n*e,h=2*n-u;r=nm(h,u,t+1/3),o=nm(h,u,t),a=nm(h,u,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:i}}function Jd(t,e){return n=>n>0?e:t}const im=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},S6=[Bg,Ks,_a],P6=t=>S6.find(e=>e.test(t));function pE(t){const e=P6(t);if(!e)return!1;let n=e.parse(t);return e===_a&&(n=I6(n)),n}const mE=(t,e)=>{const n=pE(t),i=pE(e);if(!n||!i)return Jd(t,e);const r={...n};return o=>(r.red=im(n.red,i.red,o),r.green=im(n.green,i.green,o),r.blue=im(n.blue,i.blue,o),r.alpha=Ze(n.alpha,i.alpha,o),Ks.transform(r))},A6=(t,e)=>n=>e(t(n)),Ic=(...t)=>t.reduce(A6),Wg=new Set(["none","hidden"]);function x6(t,e){return Wg.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function C6(t,e){return n=>Ze(t,e,n)}function xv(t){return typeof t=="number"?C6:typeof t=="string"?av(t)?Jd:zt.test(t)?mE:b6:Array.isArray(t)?oR:typeof t=="object"?zt.test(t)?mE:R6:Jd}function oR(t,e){const n=[...t],i=n.length,r=t.map((o,a)=>xv(o)(o,e[a]));return o=>{for(let a=0;a<i;a++)n[a]=r[a](o);return n}}function R6(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=xv(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function k6(t,e){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],u=t.indexes[a][r[a]],h=(n=t.values[u])!==null&&n!==void 0?n:0;i[o]=h,r[a]++}return i}const b6=(t,e)=>{const n=ds.createTransformer(e),i=tc(t),r=tc(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Wg.has(t)&&!r.values.length||Wg.has(e)&&!i.values.length?x6(t,e):Ic(oR(k6(i,r),r.values),n):Jd(t,e)};function aR(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Ze(t,e,n):xv(t)(t,e)}const L6=5;function lR(t,e,n){const i=Math.max(e-L6,0);return MC(n-t(i),e-i)}const tt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},rm=.001;function N6({duration:t=tt.duration,bounce:e=tt.bounce,velocity:n=tt.velocity,mass:i=tt.mass}){let r,o,a=1-e;a=mr(tt.minDamping,tt.maxDamping,a),t=mr(tt.minDuration,tt.maxDuration,or(t)),a<1?(r=f=>{const m=f*a,_=m*t,v=m-n,I=qg(f,a),k=Math.exp(-_);return rm-v/I*k},o=f=>{const _=f*a*t,v=_*n+n,I=Math.pow(a,2)*Math.pow(f,2)*t,k=Math.exp(-_),b=qg(Math.pow(f,2),a);return(-r(f)+rm>0?-1:1)*((v-I)*k)/b}):(r=f=>{const m=Math.exp(-f*t),_=(f-n)*t+1;return-rm+m*_},o=f=>{const m=Math.exp(-f*t),_=(n-f)*(t*t);return m*_});const u=5/t,h=M6(r,o,u);if(t=sr(t),isNaN(h))return{stiffness:tt.stiffness,damping:tt.damping,duration:t};{const f=Math.pow(h,2)*i;return{stiffness:f,damping:a*2*Math.sqrt(i*f),duration:t}}}const D6=12;function M6(t,e,n){let i=n;for(let r=1;r<D6;r++)i=i-t(i)/e(i);return i}function qg(t,e){return t*Math.sqrt(1-e*e)}const O6=["duration","bounce"],V6=["stiffness","damping","mass"];function gE(t,e){return e.some(n=>t[n]!==void 0)}function F6(t){let e={velocity:tt.velocity,stiffness:tt.stiffness,damping:tt.damping,mass:tt.mass,isResolvedFromDuration:!1,...t};if(!gE(t,V6)&&gE(t,O6))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*mr(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:tt.mass,stiffness:r,damping:o}}else{const n=N6(t);e={...e,...n,mass:tt.mass},e.isResolvedFromDuration=!0}return e}function uR(t=tt.visualDuration,e=tt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],u={done:!1,value:o},{stiffness:h,damping:f,mass:m,duration:_,velocity:v,isResolvedFromDuration:I}=F6({...n,velocity:-or(n.velocity||0)}),k=v||0,b=f/(2*Math.sqrt(h*m)),F=a-o,A=or(Math.sqrt(h/m)),P=Math.abs(F)<5;i||(i=P?tt.restSpeed.granular:tt.restSpeed.default),r||(r=P?tt.restDelta.granular:tt.restDelta.default);let x;if(b<1){const q=qg(A,b);x=K=>{const C=Math.exp(-b*A*K);return a-C*((k+b*A*F)/q*Math.sin(q*K)+F*Math.cos(q*K))}}else if(b===1)x=q=>a-Math.exp(-A*q)*(F+(k+A*F)*q);else{const q=A*Math.sqrt(b*b-1);x=K=>{const C=Math.exp(-b*A*K),E=Math.min(q*K,300);return a-C*((k+b*A*F)*Math.sinh(E)+q*F*Math.cosh(E))/q}}const B={calculatedDuration:I&&_||null,next:q=>{const K=x(q);if(I)u.done=q>=_;else{let C=0;b<1&&(C=q===0?sr(k):lR(x,q,K));const E=Math.abs(C)<=i,R=Math.abs(a-K)<=r;u.done=E&&R}return u.value=u.done?a:K,u},toString:()=>{const q=Math.min(xC(B),Vg),K=CC(C=>B.next(q*C).value,q,30);return q+"ms "+K}};return B}function _E({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:a,min:u,max:h,restDelta:f=.5,restSpeed:m}){const _=t[0],v={done:!1,value:_},I=E=>u!==void 0&&E<u||h!==void 0&&E>h,k=E=>u===void 0?h:h===void 0||Math.abs(u-E)<Math.abs(h-E)?u:h;let b=n*e;const F=_+b,A=a===void 0?F:a(F);A!==F&&(b=A-_);const P=E=>-b*Math.exp(-E/i),x=E=>A+P(E),B=E=>{const R=P(E),N=x(E);v.done=Math.abs(R)<=f,v.value=v.done?A:N};let q,K;const C=E=>{I(v.value)&&(q=E,K=uR({keyframes:[v.value,k(v.value)],velocity:lR(x,E,v.value),damping:r,stiffness:o,restDelta:f,restSpeed:m}))};return C(0),{calculatedDuration:null,next:E=>{let R=!1;return!K&&q===void 0&&(R=!0,B(E),C(E)),q!==void 0&&E>=q?K.next(E-q):(!R&&B(E),v)}}}const U6=Ec(.42,0,1,1),B6=Ec(0,0,.58,1),cR=Ec(.42,0,.58,1),z6=t=>Array.isArray(t)&&typeof t[0]!="number",j6={linear:In,easeIn:U6,easeInOut:cR,easeOut:B6,circIn:Ev,circInOut:WC,circOut:HC,backIn:Tv,backInOut:zC,backOut:BC,anticipate:jC},yE=t=>{if(gv(t)){aC(t.length===4);const[e,n,i,r]=t;return Ec(e,n,i,r)}else if(typeof t=="string")return j6[t];return t};function H6(t,e,n){const i=[],r=n||aR,o=t.length-1;for(let a=0;a<o;a++){let u=r(t[a],t[a+1]);if(e){const h=Array.isArray(e)?e[a]||In:e;u=Ic(h,u)}i.push(u)}return i}function W6(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(aC(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const a=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const u=H6(e,i,r),h=u.length,f=m=>{if(a&&m<t[0])return e[0];let _=0;if(h>1)for(;_<t.length-2&&!(m<t[_+1]);_++);const v=$a(t[_],t[_+1],m);return u[_](v)};return n?m=>f(mr(t[0],t[o-1],m)):f}function q6(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=$a(0,e,i);t.push(Ze(n,1,r))}}function $6(t){const e=[0];return q6(e,t.length-1),e}function G6(t,e){return t.map(n=>n*e)}function K6(t,e){return t.map(()=>e||cR).splice(0,t.length-1)}function ef({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=z6(i)?i.map(yE):yE(i),o={done:!1,value:e[0]},a=G6(n&&n.length===e.length?n:$6(e),t),u=W6(a,e,{ease:Array.isArray(r)?r:K6(e,r)});return{calculatedDuration:t,next:h=>(o.value=u(h),o.done=h>=t,o)}}const Z6=t=>{const e=({timestamp:n})=>t(n);return{start:()=>$e.update(e,!0),stop:()=>hs(e),now:()=>bt.isProcessing?bt.timestamp:Oi.now()}},Q6={decay:_E,inertia:_E,tween:ef,keyframes:ef,spring:uR},Y6=t=>t/100;class Cv extends sR{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:h}=this.options;h&&h()};const{name:n,motionValue:i,element:r,keyframes:o}=this.options,a=(r==null?void 0:r.KeyframeResolver)||Av,u=(h,f)=>this.onKeyframesResolved(h,f);this.resolver=new a(o,u,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:a=0}=this.options,u=mv(n)?n:Q6[n]||ef;let h,f;u!==ef&&typeof e[0]!="number"&&(h=Ic(Y6,aR(e[0],e[1])),e=[0,100]);const m=u({...this.options,keyframes:e});o==="mirror"&&(f=u({...this.options,keyframes:[...e].reverse(),velocity:-a})),m.calculatedDuration===null&&(m.calculatedDuration=xC(m));const{calculatedDuration:_}=m,v=_+r,I=v*(i+1)-r;return{generator:m,mirroredGenerator:f,mapPercentToKeyframes:h,calculatedDuration:_,resolvedDuration:v,totalDuration:I}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:E}=this.options;return{done:!0,value:E[E.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:a,mapPercentToKeyframes:u,keyframes:h,calculatedDuration:f,totalDuration:m,resolvedDuration:_}=i;if(this.startTime===null)return o.next(0);const{delay:v,repeat:I,repeatType:k,repeatDelay:b,onUpdate:F}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const A=this.currentTime-v*(this.speed>=0?1:-1),P=this.speed>=0?A<0:A>m;this.currentTime=Math.max(A,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let x=this.currentTime,B=o;if(I){const E=Math.min(this.currentTime,m)/_;let R=Math.floor(E),N=E%1;!N&&E>=1&&(N=1),N===1&&R--,R=Math.min(R,I+1),!!(R%2)&&(k==="reverse"?(N=1-N,b&&(N-=b/_)):k==="mirror"&&(B=a)),x=mr(0,1,N)*_}const q=P?{done:!1,value:h[0]}:B.next(x);u&&(q.value=u(q.value));let{done:K}=q;!P&&f!==null&&(K=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&K);return C&&r!==void 0&&(q.value=Qf(h,this.options,r)),F&&F(q.value),C&&this.finish(),q}get duration(){const{resolved:e}=this;return e?or(e.calculatedDuration):0}get time(){return or(this.currentTime)}set time(e){e=sr(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=or(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Z6,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const X6=new Set(["opacity","clipPath","filter","transform"]);function J6(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:a="loop",ease:u="easeInOut",times:h}={}){const f={[e]:n};h&&(f.offset=h);const m=kC(u,r);return Array.isArray(m)&&(f.easing=m),t.animate(f,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}const ej=ev(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),tf=10,tj=2e4;function nj(t){return mv(t.type)||t.type==="spring"||!RC(t.ease)}function ij(t,e){const n=new Cv({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:t[0]};const r=[];let o=0;for(;!i.done&&o<tj;)i=n.sample(o),r.push(i.value),o+=tf;return{times:void 0,keyframes:r,duration:o-tf,ease:"linear"}}const hR={anticipate:jC,backInOut:zC,circInOut:WC};function rj(t){return t in hR}class vE extends sR{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:o}=this.options;this.resolver=new rR(o,(a,u)=>this.onKeyframesResolved(a,u),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:o,type:a,motionValue:u,name:h,startTime:f}=this.options;if(!u.owner||!u.owner.current)return!1;if(typeof o=="string"&&Xd()&&rj(o)&&(o=hR[o]),nj(this.options)){const{onComplete:_,onUpdate:v,motionValue:I,element:k,...b}=this.options,F=ij(e,b);e=F.keyframes,e.length===1&&(e[1]=e[0]),i=F.duration,r=F.times,o=F.ease,a="keyframes"}const m=J6(u.owner.current,h,e,{...this.options,duration:i,times:r,ease:o});return m.startTime=f??this.calcStartTime(),this.pendingTimeline?(iE(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:_}=this.options;u.set(Qf(e,this.options,n)),_&&_(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:r,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return or(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return or(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=sr(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return In;const{animation:i}=n;iE(i,e)}return In}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:o,ease:a,times:u}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:f,onUpdate:m,onComplete:_,element:v,...I}=this.options,k=new Cv({...I,keyframes:i,duration:r,type:o,ease:a,times:u,isGenerator:!0}),b=sr(this.time);f.setWithVelocity(k.sample(b-tf).value,k.sample(b).value,tf)}const{onStop:h}=this.options;h&&h(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:o,damping:a,type:u}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:h,transformTemplate:f}=n.owner.getProps();return ej()&&i&&X6.has(i)&&!h&&!f&&!r&&o!=="mirror"&&a!==0&&u!=="inertia"}}const sj={type:"spring",stiffness:500,damping:25,restSpeed:10},oj=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),aj={type:"keyframes",duration:.8},lj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uj=(t,{keyframes:e})=>e.length>2?aj:Io.has(t)?t.startsWith("scale")?oj(e[1]):sj:lj;function cj({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:a,repeatDelay:u,from:h,elapsed:f,...m}){return!!Object.keys(m).length}const Rv=(t,e,n,i={},r,o)=>a=>{const u=pv(i,t)||{},h=u.delay||i.delay||0;let{elapsed:f=0}=i;f=f-sr(h);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...u,delay:-f,onUpdate:v=>{e.set(v),u.onUpdate&&u.onUpdate(v)},onComplete:()=>{a(),u.onComplete&&u.onComplete()},name:t,motionValue:e,element:o?void 0:r};cj(u)||(m={...m,...uj(t,m)}),m.duration&&(m.duration=sr(m.duration)),m.repeatDelay&&(m.repeatDelay=sr(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let _=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(_=!0)),_&&!o&&e.get()!==void 0){const v=Qf(m.keyframes,u);if(v!==void 0)return $e.update(()=>{m.onUpdate(v),m.onComplete()}),new Rz([])}return!o&&vE.supports(m)?new vE(m):new Cv(m)};function hj({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function dR(t,e,{delay:n=0,transitionOverride:i,type:r}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:u,...h}=e;i&&(a=i);const f=[],m=r&&t.animationState&&t.animationState.getState()[r];for(const _ in h){const v=t.getValue(_,(o=t.latestValues[_])!==null&&o!==void 0?o:null),I=h[_];if(I===void 0||m&&hj(m,_))continue;const k={delay:n,...pv(a||{},_)};let b=!1;if(window.MotionHandoffAnimation){const A=OC(t);if(A){const P=window.MotionHandoffAnimation(A,_,$e);P!==null&&(k.startTime=P,b=!0)}}Ug(t,_),v.start(Rv(_,v,I,t.shouldReduceMotion&&DC.has(_)?{type:!1}:k,t,b));const F=v.animation;F&&f.push(F)}return u&&Promise.all(f).then(()=>{$e.update(()=>{u&&Hz(t,u)})}),f}function $g(t,e,n={}){var i;const r=Zf(t,e,n.type==="exit"?(i=t.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(dR(t,r,n)):()=>Promise.resolve(),u=t.variantChildren&&t.variantChildren.size?(f=0)=>{const{delayChildren:m=0,staggerChildren:_,staggerDirection:v}=o;return dj(t,e,m+f,_,v,n)}:()=>Promise.resolve(),{when:h}=o;if(h){const[f,m]=h==="beforeChildren"?[a,u]:[u,a];return f().then(()=>m())}else return Promise.all([a(),u(n.delay)])}function dj(t,e,n=0,i=0,r=1,o){const a=[],u=(t.variantChildren.size-1)*i,h=r===1?(f=0)=>f*i:(f=0)=>u-f*i;return Array.from(t.variantChildren).sort(fj).forEach((f,m)=>{f.notify("AnimationStart",e),a.push($g(f,e,{...o,delay:n+h(m)}).then(()=>f.notify("AnimationComplete",e)))}),Promise.all(a)}function fj(t,e){return t.sortNodePosition(e)}function pj(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>$g(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=$g(t,e,n);else{const r=typeof e=="function"?Zf(t,e,n.custom):e;i=Promise.all(dR(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}const mj=nv.length;function fR(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?fR(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<mj;n++){const i=nv[n],r=t.props[i];(Xu(r)||r===!1)&&(e[i]=r)}return e}const gj=[...tv].reverse(),_j=tv.length;function yj(t){return e=>Promise.all(e.map(({animation:n,options:i})=>pj(t,n,i)))}function vj(t){let e=yj(t),n=wE(),i=!0;const r=h=>(f,m)=>{var _;const v=Zf(t,m,h==="exit"?(_=t.presenceContext)===null||_===void 0?void 0:_.custom:void 0);if(v){const{transition:I,transitionEnd:k,...b}=v;f={...f,...b,...k}}return f};function o(h){e=h(t)}function a(h){const{props:f}=t,m=fR(t.parent)||{},_=[],v=new Set;let I={},k=1/0;for(let F=0;F<_j;F++){const A=gj[F],P=n[A],x=f[A]!==void 0?f[A]:m[A],B=Xu(x),q=A===h?P.isActive:null;q===!1&&(k=F);let K=x===m[A]&&x!==f[A]&&B;if(K&&i&&t.manuallyAnimateOnMount&&(K=!1),P.protectedKeys={...I},!P.isActive&&q===null||!x&&!P.prevProp||Gf(x)||typeof x=="boolean")continue;const C=wj(P.prevProp,x);let E=C||A===h&&P.isActive&&!K&&B||F>k&&B,R=!1;const N=Array.isArray(x)?x:[x];let O=N.reduce(r(A),{});q===!1&&(O={});const{prevResolvedValues:U={}}=P,D={...U,...O},Ne=Ue=>{E=!0,v.has(Ue)&&(R=!0,v.delete(Ue)),P.needsAnimating[Ue]=!0;const $=t.getValue(Ue);$&&($.liveStyle=!1)};for(const Ue in D){const $=O[Ue],le=U[Ue];if(I.hasOwnProperty(Ue))continue;let J=!1;Og($)&&Og(le)?J=!AC($,le):J=$!==le,J?$!=null?Ne(Ue):v.add(Ue):$!==void 0&&v.has(Ue)?Ne(Ue):P.protectedKeys[Ue]=!0}P.prevProp=x,P.prevResolvedValues=O,P.isActive&&(I={...I,...O}),i&&t.blockInitialAnimation&&(E=!1),E&&(!(K&&C)||R)&&_.push(...N.map(Ue=>({animation:Ue,options:{type:A}})))}if(v.size){const F={};v.forEach(A=>{const P=t.getBaseTarget(A),x=t.getValue(A);x&&(x.liveStyle=!0),F[A]=P??null}),_.push({animation:F})}let b=!!_.length;return i&&(f.initial===!1||f.initial===f.animate)&&!t.manuallyAnimateOnMount&&(b=!1),i=!1,b?e(_):Promise.resolve()}function u(h,f){var m;if(n[h].isActive===f)return Promise.resolve();(m=t.variantChildren)===null||m===void 0||m.forEach(v=>{var I;return(I=v.animationState)===null||I===void 0?void 0:I.setActive(h,f)}),n[h].isActive=f;const _=a(h);for(const v in n)n[v].protectedKeys={};return _}return{animateChanges:a,setActive:u,setAnimateFunction:o,getState:()=>n,reset:()=>{n=wE(),i=!0}}}function wj(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!AC(e,t):!1}function Vs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function wE(){return{animate:Vs(!0),whileInView:Vs(),whileHover:Vs(),whileTap:Vs(),whileDrag:Vs(),whileFocus:Vs(),exit:Vs()}}class ws{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Tj extends ws{constructor(e){super(e),e.animationState||(e.animationState=vj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Ej=0;class Ij extends ws{constructor(){super(...arguments),this.id=Ej++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Sj={animation:{Feature:Tj},exit:{Feature:Ij}};function nc(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Sc(t){return{point:{x:t.pageX,y:t.pageY}}}const Pj=t=>e=>_v(e)&&t(e,Sc(e));function Eu(t,e,n,i){return nc(t,e,Pj(n),i)}const TE=(t,e)=>Math.abs(t-e);function Aj(t,e){const n=TE(t.x,e.x),i=TE(t.y,e.y);return Math.sqrt(n**2+i**2)}class pR{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const _=om(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,I=Aj(_.offset,{x:0,y:0})>=3;if(!v&&!I)return;const{point:k}=_,{timestamp:b}=bt;this.history.push({...k,timestamp:b});const{onStart:F,onMove:A}=this.handlers;v||(F&&F(this.lastMoveEvent,_),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,_)},this.handlePointerMove=(_,v)=>{this.lastMoveEvent=_,this.lastMoveEventInfo=sm(v,this.transformPagePoint),$e.update(this.updatePoint,!0)},this.handlePointerUp=(_,v)=>{this.end();const{onEnd:I,onSessionEnd:k,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const F=om(_.type==="pointercancel"?this.lastMoveEventInfo:sm(v,this.transformPagePoint),this.history);this.startEvent&&I&&I(_,F),k&&k(_,F)},!_v(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const a=Sc(e),u=sm(a,this.transformPagePoint),{point:h}=u,{timestamp:f}=bt;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,om(u,this.history)),this.removeListeners=Ic(Eu(this.contextWindow,"pointermove",this.handlePointerMove),Eu(this.contextWindow,"pointerup",this.handlePointerUp),Eu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),hs(this.updatePoint)}}function sm(t,e){return e?{point:e(t.point)}:t}function EE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function om({point:t},e){return{point:t,delta:EE(t,mR(e)),offset:EE(t,xj(e)),velocity:Cj(e,.1)}}function xj(t){return t[0]}function mR(t){return t[t.length-1]}function Cj(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=mR(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>sr(e)));)n--;if(!i)return{x:0,y:0};const o=or(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const a={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}const gR=1e-4,Rj=1-gR,kj=1+gR,_R=.01,bj=0-_R,Lj=0+_R;function Pn(t){return t.max-t.min}function Nj(t,e,n){return Math.abs(t-e)<=n}function IE(t,e,n,i=.5){t.origin=i,t.originPoint=Ze(e.min,e.max,t.origin),t.scale=Pn(n)/Pn(e),t.translate=Ze(n.min,n.max,t.origin)-t.originPoint,(t.scale>=Rj&&t.scale<=kj||isNaN(t.scale))&&(t.scale=1),(t.translate>=bj&&t.translate<=Lj||isNaN(t.translate))&&(t.translate=0)}function Iu(t,e,n,i){IE(t.x,e.x,n.x,i?i.originX:void 0),IE(t.y,e.y,n.y,i?i.originY:void 0)}function SE(t,e,n){t.min=n.min+e.min,t.max=t.min+Pn(e)}function Dj(t,e,n){SE(t.x,e.x,n.x),SE(t.y,e.y,n.y)}function PE(t,e,n){t.min=e.min-n.min,t.max=t.min+Pn(e)}function Su(t,e,n){PE(t.x,e.x,n.x),PE(t.y,e.y,n.y)}function Mj(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Ze(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Ze(n,t,i.max):Math.min(t,n)),t}function AE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function Oj(t,{top:e,left:n,bottom:i,right:r}){return{x:AE(t.x,n,r),y:AE(t.y,e,i)}}function xE(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function Vj(t,e){return{x:xE(t.x,e.x),y:xE(t.y,e.y)}}function Fj(t,e){let n=.5;const i=Pn(t),r=Pn(e);return r>i?n=$a(e.min,e.max-i,t.min):i>r&&(n=$a(t.min,t.max-r,e.min)),mr(0,1,n)}function Uj(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Gg=.35;function Bj(t=Gg){return t===!1?t=0:t===!0&&(t=Gg),{x:CE(t,"left","right"),y:CE(t,"top","bottom")}}function CE(t,e,n){return{min:RE(t,e),max:RE(t,n)}}function RE(t,e){return typeof t=="number"?t:t[e]||0}const kE=()=>({translate:0,scale:1,origin:0,originPoint:0}),ya=()=>({x:kE(),y:kE()}),bE=()=>({min:0,max:0}),at=()=>({x:bE(),y:bE()});function Fn(t){return[t("x"),t("y")]}function yR({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function zj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function jj(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function am(t){return t===void 0||t===1}function Kg({scale:t,scaleX:e,scaleY:n}){return!am(t)||!am(e)||!am(n)}function zs(t){return Kg(t)||vR(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function vR(t){return LE(t.x)||LE(t.y)}function LE(t){return t&&t!=="0%"}function nf(t,e,n){const i=t-n,r=e*i;return n+r}function NE(t,e,n,i,r){return r!==void 0&&(t=nf(t,r,i)),nf(t,n,i)+e}function Zg(t,e=0,n=1,i,r){t.min=NE(t.min,e,n,i,r),t.max=NE(t.max,e,n,i,r)}function wR(t,{x:e,y:n}){Zg(t.x,e.translate,e.scale,e.originPoint),Zg(t.y,n.translate,n.scale,n.originPoint)}const DE=.999999999999,ME=1.0000000000001;function Hj(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,a;for(let u=0;u<r;u++){o=n[u],a=o.projectionDelta;const{visualElement:h}=o.options;h&&h.props.style&&h.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&wa(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,wR(t,a)),i&&zs(o.latestValues)&&wa(t,o.latestValues))}e.x<ME&&e.x>DE&&(e.x=1),e.y<ME&&e.y>DE&&(e.y=1)}function va(t,e){t.min=t.min+e,t.max=t.max+e}function OE(t,e,n,i,r=.5){const o=Ze(t.min,t.max,r);Zg(t,e,n,o,i)}function wa(t,e){OE(t.x,e.x,e.scaleX,e.scale,e.originX),OE(t.y,e.y,e.scaleY,e.scale,e.originY)}function TR(t,e){return yR(jj(t.getBoundingClientRect(),e))}function Wj(t,e,n){const i=TR(t,n),{scroll:r}=e;return r&&(va(i.x,r.offset.x),va(i.y,r.offset.y)),i}const ER=({current:t})=>t?t.ownerDocument.defaultView:null,qj=new WeakMap;class $j{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:_}=this.getProps();_?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Sc(m).point)},o=(m,_)=>{const{drag:v,dragPropagation:I,onDragStart:k}=this.getProps();if(v&&!I&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Fz(v),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fn(F=>{let A=this.getAxisMotionValue(F).get()||0;if(Mi.test(A)){const{projection:P}=this.visualElement;if(P&&P.layout){const x=P.layout.layoutBox[F];x&&(A=Pn(x)*(parseFloat(A)/100))}}this.originPoint[F]=A}),k&&$e.postRender(()=>k(m,_)),Ug(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},a=(m,_)=>{const{dragPropagation:v,dragDirectionLock:I,onDirectionLock:k,onDrag:b}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:F}=_;if(I&&this.currentDirection===null){this.currentDirection=Gj(F),this.currentDirection!==null&&k&&k(this.currentDirection);return}this.updateAxis("x",_.point,F),this.updateAxis("y",_.point,F),this.visualElement.render(),b&&b(m,_)},u=(m,_)=>this.stop(m,_),h=()=>Fn(m=>{var _;return this.getAnimationState(m)==="paused"&&((_=this.getAxisMotionValue(m).animation)===null||_===void 0?void 0:_.play())}),{dragSnapToOrigin:f}=this.getProps();this.panSession=new pR(e,{onSessionStart:r,onStart:o,onMove:a,onSessionEnd:u,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,contextWindow:ER(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&$e.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Lh(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(a=Mj(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&ga(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=Oj(r.layoutBox,n):this.constraints=!1,this.elastic=Bj(i),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Fn(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=Uj(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ga(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=Wj(i,r.root,this.visualElement.getTransformPagePoint());let a=Vj(r.layout.layoutBox,o);if(n){const u=n(zj(a));this.hasMutatedConstraints=!!u,u&&(a=yR(u))}return a}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:u}=this.getProps(),h=this.constraints||{},f=Fn(m=>{if(!Lh(m,n,this.currentDirection))return;let _=h&&h[m]||{};a&&(_={min:0,max:0});const v=r?200:1e6,I=r?40:1e7,k={type:"inertia",velocity:i?e[m]:0,bounceStiffness:v,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...o,..._};return this.startAxisValueAnimation(m,k)});return Promise.all(f).then(u)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return Ug(this.visualElement,e),i.start(Rv(e,i,0,n,this.visualElement,!1))}stopAnimation(){Fn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Fn(n=>{const{drag:i}=this.getProps();if(!Lh(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:a,max:u}=r.layout.layoutBox[n];o.set(e[n]-Ze(a,u,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ga(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Fn(a=>{const u=this.getAxisMotionValue(a);if(u&&this.constraints!==!1){const h=u.get();r[a]=Fj({min:h,max:h},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Fn(a=>{if(!Lh(a,e,null))return;const u=this.getAxisMotionValue(a),{min:h,max:f}=this.constraints[a];u.set(Ze(h,f,r[a]))})}addListeners(){if(!this.visualElement.current)return;qj.set(this.visualElement,this);const e=this.visualElement.current,n=Eu(e,"pointerdown",h=>{const{drag:f,dragListener:m=!0}=this.getProps();f&&m&&this.start(h)}),i=()=>{const{dragConstraints:h}=this.getProps();ga(h)&&h.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),$e.read(i);const a=nc(window,"resize",()=>this.scalePositionWithinConstraints()),u=r.addEventListener("didUpdate",({delta:h,hasLayoutChanged:f})=>{this.isDragging&&f&&(Fn(m=>{const _=this.getAxisMotionValue(m);_&&(this.originPoint[m]+=h[m].translate,_.set(_.get()+h[m].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),u&&u()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:a=Gg,dragMomentum:u=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:a,dragMomentum:u}}}function Lh(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function Gj(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class Kj extends ws{constructor(e){super(e),this.removeGroupControls=In,this.removeListeners=In,this.controls=new $j(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||In}unmount(){this.removeGroupControls(),this.removeListeners()}}const VE=t=>(e,n)=>{t&&$e.postRender(()=>t(e,n))};class Zj extends ws{constructor(){super(...arguments),this.removePointerDownListener=In}onPointerDown(e){this.session=new pR(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ER(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:VE(e),onStart:VE(n),onMove:i,onEnd:(o,a)=>{delete this.session,r&&$e.postRender(()=>r(o,a))}}}mount(){this.removePointerDownListener=Eu(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const id={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function FE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const ql={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ue.test(t))t=parseFloat(t);else return t;const n=FE(t,e.target.x),i=FE(t,e.target.y);return`${n}% ${i}%`}},Qj={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=ds.parse(t);if(r.length>5)return i;const o=ds.createTransformer(t),a=typeof r[0]!="number"?1:0,u=n.x.scale*e.x,h=n.y.scale*e.y;r[0+a]/=u,r[1+a]/=h;const f=Ze(u,h,.5);return typeof r[2+a]=="number"&&(r[2+a]/=f),typeof r[3+a]=="number"&&(r[3+a]/=f),o(r)}};class Yj extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;_z(Xj),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),id.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,a=i.projection;return a&&(a.isPresent=o,r||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||$e.postRender(()=>{const u=a.getStack();(!u||!u.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),rv.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function IR(t){const[e,n]=LB(),i=Y.useContext(sC);return V.jsx(Yj,{...t,layoutGroup:i,switchLayoutGroup:Y.useContext(fC),isPresent:e,safeToRemove:n})}const Xj={borderRadius:{...ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ql,borderTopRightRadius:ql,borderBottomLeftRadius:ql,borderBottomRightRadius:ql,boxShadow:Qj};function Jj(t,e,n){const i=qt(t)?t:ec(t);return i.start(Rv("",i,e,n)),i.animation}function e5(t){return t instanceof SVGElement&&t.tagName!=="svg"}const t5=(t,e)=>t.depth-e.depth;class n5{constructor(){this.children=[],this.isDirty=!1}add(e){yv(this.children,e),this.isDirty=!0}remove(e){vv(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(t5),this.isDirty=!1,this.children.forEach(e)}}function i5(t,e){const n=Oi.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(hs(i),t(o-e))};return $e.read(i,!0),()=>hs(i)}const SR=["TopLeft","TopRight","BottomLeft","BottomRight"],r5=SR.length,UE=t=>typeof t=="string"?parseFloat(t):t,BE=t=>typeof t=="number"||ue.test(t);function s5(t,e,n,i,r,o){r?(t.opacity=Ze(0,n.opacity!==void 0?n.opacity:1,o5(i)),t.opacityExit=Ze(e.opacity!==void 0?e.opacity:1,0,a5(i))):o&&(t.opacity=Ze(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let a=0;a<r5;a++){const u=`border${SR[a]}Radius`;let h=zE(e,u),f=zE(n,u);if(h===void 0&&f===void 0)continue;h||(h=0),f||(f=0),h===0||f===0||BE(h)===BE(f)?(t[u]=Math.max(Ze(UE(h),UE(f),i),0),(Mi.test(f)||Mi.test(h))&&(t[u]+="%")):t[u]=f}(e.rotate||n.rotate)&&(t.rotate=Ze(e.rotate||0,n.rotate||0,i))}function zE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const o5=PR(0,.5,HC),a5=PR(.5,.95,In);function PR(t,e,n){return i=>i<t?0:i>e?1:n($a(t,e,i))}function jE(t,e){t.min=e.min,t.max=e.max}function Vn(t,e){jE(t.x,e.x),jE(t.y,e.y)}function HE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function WE(t,e,n,i,r){return t-=e,t=nf(t,1/n,i),r!==void 0&&(t=nf(t,1/r,i)),t}function l5(t,e=0,n=1,i=.5,r,o=t,a=t){if(Mi.test(e)&&(e=parseFloat(e),e=Ze(a.min,a.max,e/100)-a.min),typeof e!="number")return;let u=Ze(o.min,o.max,i);t===o&&(u-=e),t.min=WE(t.min,e,n,u,r),t.max=WE(t.max,e,n,u,r)}function qE(t,e,[n,i,r],o,a){l5(t,e[n],e[i],e[r],e.scale,o,a)}const u5=["x","scaleX","originX"],c5=["y","scaleY","originY"];function $E(t,e,n,i){qE(t.x,e,u5,n?n.x:void 0,i?i.x:void 0),qE(t.y,e,c5,n?n.y:void 0,i?i.y:void 0)}function GE(t){return t.translate===0&&t.scale===1}function AR(t){return GE(t.x)&&GE(t.y)}function KE(t,e){return t.min===e.min&&t.max===e.max}function h5(t,e){return KE(t.x,e.x)&&KE(t.y,e.y)}function ZE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function xR(t,e){return ZE(t.x,e.x)&&ZE(t.y,e.y)}function QE(t){return Pn(t.x)/Pn(t.y)}function YE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class d5{constructor(){this.members=[]}add(e){yv(this.members,e),e.scheduleRender()}remove(e){if(vv(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function f5(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((r||o||a)&&(i=`translate3d(${r}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:f,rotate:m,rotateX:_,rotateY:v,skewX:I,skewY:k}=n;f&&(i=`perspective(${f}px) ${i}`),m&&(i+=`rotate(${m}deg) `),_&&(i+=`rotateX(${_}deg) `),v&&(i+=`rotateY(${v}deg) `),I&&(i+=`skewX(${I}deg) `),k&&(i+=`skewY(${k}deg) `)}const u=t.x.scale*e.x,h=t.y.scale*e.y;return(u!==1||h!==1)&&(i+=`scale(${u}, ${h})`),i||"none"}const js={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},ru=typeof window<"u"&&window.MotionDebug!==void 0,lm=["","X","Y","Z"],p5={visibility:"hidden"},XE=1e3;let m5=0;function um(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function CR(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=OC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",$e,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&CR(i)}function RR({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(a={},u=e==null?void 0:e()){this.id=m5++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ru&&(js.totalNodes=js.resolvedTargetDeltas=js.recalculatedProjection=0),this.nodes.forEach(y5),this.nodes.forEach(I5),this.nodes.forEach(S5),this.nodes.forEach(v5),ru&&window.MotionDebug.record(js)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=u?u.root||u:this,this.path=u?[...u.path,u]:[],this.parent=u,this.depth=u?u.depth+1:0;for(let h=0;h<this.path.length;h++)this.path[h].shouldResetTransform=!0;this.root===this&&(this.nodes=new n5)}addEventListener(a,u){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new wv),this.eventHandlers.get(a).add(u)}notifyListeners(a,...u){const h=this.eventHandlers.get(a);h&&h.notify(...u)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,u=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=e5(a),this.instance=a;const{layoutId:h,layout:f,visualElement:m}=this.options;if(m&&!m.current&&m.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),u&&(f||h)&&(this.isLayoutDirty=!0),t){let _;const v=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,_&&_(),_=i5(v,250),id.hasAnimatedSinceResize&&(id.hasAnimatedSinceResize=!1,this.nodes.forEach(eI))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&m&&(h||f)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:v,hasRelativeTargetChanged:I,layout:k})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||m.getDefaultTransition()||R5,{onLayoutAnimationStart:F,onLayoutAnimationComplete:A}=m.getProps(),P=!this.targetLayout||!xR(this.targetLayout,k)||I,x=!v&&I;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||v&&(P||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(_,x);const B={...pv(b,"layout"),onPlay:F,onComplete:A};(m.shouldReduceMotion||this.options.layoutRoot)&&(B.delay=0,B.type=!1),this.startAnimation(B)}else v||eI(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=k})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,hs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(P5),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&CR(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const _=this.path[m];_.shouldResetTransform=!0,_.updateScroll("snapshot"),_.options.layoutRoot&&_.willUpdate(!1)}const{layoutId:u,layout:h}=this.options;if(u===void 0&&!h)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(JE);return}this.isUpdating||this.nodes.forEach(T5),this.isUpdating=!1,this.nodes.forEach(E5),this.nodes.forEach(g5),this.nodes.forEach(_5),this.clearAllSnapshots();const u=Oi.now();bt.delta=mr(0,1e3/60,u-bt.timestamp),bt.timestamp=u,bt.isProcessing=!0,Jp.update.process(bt),Jp.preRender.process(bt),Jp.render.process(bt),bt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,rv.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(w5),this.sharedNodes.forEach(A5)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,$e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){$e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let h=0;h<this.path.length;h++)this.path[h].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:u}=this.options;u&&u.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let u=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(u=!1),u){const h=i(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:h,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:h}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,u=this.projectionDelta&&!AR(this.projectionDelta),h=this.getTransformTemplate(),f=h?h(this.latestValues,""):void 0,m=f!==this.prevTransformTemplateValue;a&&(u||zs(this.latestValues)||m)&&(r(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const u=this.measurePageBox();let h=this.removeElementScroll(u);return a&&(h=this.removeTransform(h)),k5(h),{animationId:this.root.animationId,measuredBox:u,layoutBox:h,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:u}=this.options;if(!u)return at();const h=u.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(b5))){const{scroll:m}=this.root;m&&(va(h.x,m.offset.x),va(h.y,m.offset.y))}return h}removeElementScroll(a){var u;const h=at();if(Vn(h,a),!((u=this.scroll)===null||u===void 0)&&u.wasRoot)return h;for(let f=0;f<this.path.length;f++){const m=this.path[f],{scroll:_,options:v}=m;m!==this.root&&_&&v.layoutScroll&&(_.wasRoot&&Vn(h,a),va(h.x,_.offset.x),va(h.y,_.offset.y))}return h}applyTransform(a,u=!1){const h=at();Vn(h,a);for(let f=0;f<this.path.length;f++){const m=this.path[f];!u&&m.options.layoutScroll&&m.scroll&&m!==m.root&&wa(h,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),zs(m.latestValues)&&wa(h,m.latestValues)}return zs(this.latestValues)&&wa(h,this.latestValues),h}removeTransform(a){const u=at();Vn(u,a);for(let h=0;h<this.path.length;h++){const f=this.path[h];if(!f.instance||!zs(f.latestValues))continue;Kg(f.latestValues)&&f.updateSnapshot();const m=at(),_=f.measurePageBox();Vn(m,_),$E(u,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,m)}return zs(this.latestValues)&&$E(u,this.latestValues),u}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==bt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var u;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==h;if(!(a||f&&this.isSharedProjectionDirty||this.isProjectionDirty||!((u=this.parent)===null||u===void 0)&&u.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:v}=this.options;if(!(!this.layout||!(_||v))){if(this.resolvedRelativeTargetAt=bt.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Su(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Dj(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Vn(this.target,this.layout.layoutBox),wR(this.target,this.targetDelta)):Vn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Su(this.relativeTargetOrigin,this.target,I.target),Vn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ru&&js.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Kg(this.parent.latestValues)||vR(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const u=this.getLead(),h=!!this.resumingFrom||this!==u;let f=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(f=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===bt.timestamp&&(f=!1),f)return;const{layout:m,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||_))return;Vn(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,I=this.treeScale.y;Hj(this.layoutCorrected,this.treeScale,this.path,h),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=at());const{target:k}=u;if(!k){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(HE(this.prevProjectionDelta.x,this.projectionDelta.x),HE(this.prevProjectionDelta.y,this.projectionDelta.y)),Iu(this.projectionDelta,this.layoutCorrected,k,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==I||!YE(this.projectionDelta.x,this.prevProjectionDelta.x)||!YE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",k)),ru&&js.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var u;if((u=this.options.visualElement)===null||u===void 0||u.scheduleRender(),a){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ya(),this.projectionDelta=ya(),this.projectionDeltaWithTransform=ya()}setAnimationOrigin(a,u=!1){const h=this.snapshot,f=h?h.latestValues:{},m={...this.latestValues},_=ya();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!u;const v=at(),I=h?h.source:void 0,k=this.layout?this.layout.source:void 0,b=I!==k,F=this.getStack(),A=!F||F.members.length<=1,P=!!(b&&!A&&this.options.crossfade===!0&&!this.path.some(C5));this.animationProgress=0;let x;this.mixTargetDelta=B=>{const q=B/1e3;tI(_.x,a.x,q),tI(_.y,a.y,q),this.setTargetDelta(_),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Su(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),x5(this.relativeTarget,this.relativeTargetOrigin,v,q),x&&h5(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=at()),Vn(x,this.relativeTarget)),b&&(this.animationValues=m,s5(m,f,this.latestValues,q,P,A)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=q},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(hs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=$e.update(()=>{id.hasAnimatedSinceResize=!0,this.currentAnimation=Jj(0,XE,{...a,onUpdate:u=>{this.mixTargetDelta(u),a.onUpdate&&a.onUpdate(u)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:u,target:h,layout:f,latestValues:m}=a;if(!(!u||!h||!f)){if(this!==a&&this.layout&&f&&kR(this.options.animationType,this.layout.layoutBox,f.layoutBox)){h=this.target||at();const _=Pn(this.layout.layoutBox.x);h.x.min=a.target.x.min,h.x.max=h.x.min+_;const v=Pn(this.layout.layoutBox.y);h.y.min=a.target.y.min,h.y.max=h.y.min+v}Vn(u,h),wa(u,m),Iu(this.projectionDeltaWithTransform,this.layoutCorrected,u,m)}}registerSharedNode(a,u){this.sharedNodes.has(a)||this.sharedNodes.set(a,new d5),this.sharedNodes.get(a).add(u);const f=u.options.initialPromotionConfig;u.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(u):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:u}=this.options;return u?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:u}=this.options;return u?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:u,preserveFollowOpacity:h}={}){const f=this.getStack();f&&f.promote(this,h),a&&(this.projectionDelta=void 0,this.needsReset=!0),u&&this.setOptions({transition:u})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let u=!1;const{latestValues:h}=a;if((h.z||h.rotate||h.rotateX||h.rotateY||h.rotateZ||h.skewX||h.skewY)&&(u=!0),!u)return;const f={};h.z&&um("z",a,f,this.animationValues);for(let m=0;m<lm.length;m++)um(`rotate${lm[m]}`,a,f,this.animationValues),um(`skew${lm[m]}`,a,f,this.animationValues);a.render();for(const m in f)a.setStaticValue(m,f[m]),this.animationValues&&(this.animationValues[m]=f[m]);a.scheduleRender()}getProjectionStyles(a){var u,h;if(!this.instance||this.isSVG)return;if(!this.isVisible)return p5;const f={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,f.opacity="",f.pointerEvents=td(a==null?void 0:a.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none",f;const _=this.getLead();if(!this.projectionDelta||!this.layout||!_.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=td(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!zs(this.latestValues)&&(b.transform=m?m({},""):"none",this.hasProjected=!1),b}const v=_.animationValues||_.latestValues;this.applyTransformsToTarget(),f.transform=f5(this.projectionDeltaWithTransform,this.treeScale,v),m&&(f.transform=m(v,f.transform));const{x:I,y:k}=this.projectionDelta;f.transformOrigin=`${I.origin*100}% ${k.origin*100}% 0`,_.animationValues?f.opacity=_===this?(h=(u=v.opacity)!==null&&u!==void 0?u:this.latestValues.opacity)!==null&&h!==void 0?h:1:this.preserveOpacity?this.latestValues.opacity:v.opacityExit:f.opacity=_===this?v.opacity!==void 0?v.opacity:"":v.opacityExit!==void 0?v.opacityExit:0;for(const b in Yd){if(v[b]===void 0)continue;const{correct:F,applyTo:A}=Yd[b],P=f.transform==="none"?v[b]:F(v[b],_);if(A){const x=A.length;for(let B=0;B<x;B++)f[A[B]]=P}else f[b]=P}return this.options.layoutId&&(f.pointerEvents=_===this?td(a==null?void 0:a.pointerEvents)||"":"none"),f}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var u;return(u=a.currentAnimation)===null||u===void 0?void 0:u.stop()}),this.root.nodes.forEach(JE),this.root.sharedNodes.clear()}}}function g5(t){t.updateLayout()}function _5(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Fn(_=>{const v=a?n.measuredBox[_]:n.layoutBox[_],I=Pn(v);v.min=i[_].min,v.max=v.min+I}):kR(o,n.layoutBox,i)&&Fn(_=>{const v=a?n.measuredBox[_]:n.layoutBox[_],I=Pn(i[_]);v.max=v.min+I,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[_].max=t.relativeTarget[_].min+I)});const u=ya();Iu(u,i,n.layoutBox);const h=ya();a?Iu(h,t.applyTransform(r,!0),n.measuredBox):Iu(h,i,n.layoutBox);const f=!AR(u);let m=!1;if(!t.resumeFrom){const _=t.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:v,layout:I}=_;if(v&&I){const k=at();Su(k,n.layoutBox,v.layoutBox);const b=at();Su(b,i,I.layoutBox),xR(k,b)||(m=!0),_.options.layoutRoot&&(t.relativeTarget=b,t.relativeTargetOrigin=k,t.relativeParent=_)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:h,layoutDelta:u,hasLayoutChanged:f,hasRelativeTargetChanged:m})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function y5(t){ru&&js.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function v5(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function w5(t){t.clearSnapshot()}function JE(t){t.clearMeasurements()}function T5(t){t.isLayoutDirty=!1}function E5(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function eI(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function I5(t){t.resolveTargetDelta()}function S5(t){t.calcProjection()}function P5(t){t.resetSkewAndRotation()}function A5(t){t.removeLeadSnapshot()}function tI(t,e,n){t.translate=Ze(e.translate,0,n),t.scale=Ze(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function nI(t,e,n,i){t.min=Ze(e.min,n.min,i),t.max=Ze(e.max,n.max,i)}function x5(t,e,n,i){nI(t.x,e.x,n.x,i),nI(t.y,e.y,n.y,i)}function C5(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const R5={duration:.45,ease:[.4,0,.1,1]},iI=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),rI=iI("applewebkit/")&&!iI("chrome/")?Math.round:In;function sI(t){t.min=rI(t.min),t.max=rI(t.max)}function k5(t){sI(t.x),sI(t.y)}function kR(t,e,n){return t==="position"||t==="preserve-aspect"&&!Nj(QE(e),QE(n),.2)}function b5(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const L5=RR({attachResizeListener:(t,e)=>nc(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cm={current:void 0},bR=RR({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!cm.current){const t=new L5({});t.mount(window),t.setOptions({layoutScroll:!0}),cm.current=t}return cm.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),N5={pan:{Feature:Zj},drag:{Feature:Kj,ProjectionNode:bR,MeasureLayout:IR}};function oI(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&$e.postRender(()=>o(e,Sc(e)))}class D5 extends ws{mount(){const{current:e}=this.node;e&&(this.unmount=Nz(e,n=>(oI(this.node,n,"Start"),i=>oI(this.node,i,"End"))))}unmount(){}}class M5 extends ws{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ic(nc(this.node.current,"focus",()=>this.onFocus()),nc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function aI(t,e,n){const{props:i}=t;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&$e.postRender(()=>o(e,Sc(e)))}class O5 extends ws{mount(){const{current:e}=this.node;e&&(this.unmount=Vz(e,n=>(aI(this.node,n,"Start"),(i,{success:r})=>aI(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Qg=new WeakMap,hm=new WeakMap,V5=t=>{const e=Qg.get(t.target);e&&e(t)},F5=t=>{t.forEach(V5)};function U5({root:t,...e}){const n=t||document;hm.has(n)||hm.set(n,{});const i=hm.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(F5,{root:t,...e})),i[r]}function B5(t,e,n){const i=U5(e);return Qg.set(t,n),i.observe(t),()=>{Qg.delete(t),i.unobserve(t)}}const z5={some:0,all:1};class j5 extends ws{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:z5[r]},u=h=>{const{isIntersecting:f}=h;if(this.isInView===f||(this.isInView=f,o&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:m,onViewportLeave:_}=this.node.getProps(),v=f?m:_;v&&v(h)};return B5(this.node.current,a,u)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(H5(e,n))&&this.startObserver()}unmount(){}}function H5({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const W5={inView:{Feature:j5},tap:{Feature:O5},focus:{Feature:M5},hover:{Feature:D5}},q5={layout:{ProjectionNode:bR,MeasureLayout:IR}},Yg={current:null},LR={current:!1};function $5(){if(LR.current=!0,!!Jy)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Yg.current=t.matches;t.addListener(e),e()}else Yg.current=!1}const G5=[...iR,zt,ds],K5=t=>G5.find(nR(t)),lI=new WeakMap;function Z5(t,e,n){for(const i in e){const r=e[i],o=n[i];if(qt(r))t.addValue(i,r);else if(qt(o))t.addValue(i,ec(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const a=t.getValue(i);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(i);t.addValue(i,ec(a!==void 0?a:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const uI=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Q5{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:a},u={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Av,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const I=Oi.now();this.renderScheduledAt<I&&(this.renderScheduledAt=I,$e.render(this.render,!1,!0))};const{latestValues:h,renderState:f,onUpdate:m}=a;this.onUpdate=m,this.latestValues=h,this.baseTarget={...h},this.initialValues=n.initial?{...h}:{},this.renderState=f,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=u,this.blockInitialAnimation=!!o,this.isControllingVariants=Kf(n),this.isVariantNode=hC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...v}=this.scrapeMotionValuesFromProps(n,{},this);for(const I in v){const k=v[I];h[I]!==void 0&&qt(k)&&k.set(h[I],!1)}}mount(e){this.current=e,lI.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),LR.current||$5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Yg.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){lI.delete(this.current),this.projection&&this.projection.unmount(),hs(this.notifyUpdate),hs(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Io.has(e),r=n.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&$e.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Ga){const n=Ga[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<uI.length;i++){const r=uI[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,a=e[o];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=Z5(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=ec(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(eR(r)||qC(r))?r=parseFloat(r):!K5(r)&&ds.test(n)&&(r=YC(e,n)),this.setBaseTarget(e,qt(r)?r.get():r)),qt(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const a=ov(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(r=a[e])}if(i&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!qt(o)?o:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new wv),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class NR extends Q5{constructor(){super(...arguments),this.KeyframeResolver=rR}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;qt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Y5(t){return window.getComputedStyle(t)}class X5 extends NR{constructor(){super(...arguments),this.type="html",this.renderInstance=wC}readValueFromInstance(e,n){if(Io.has(n)){const i=Pv(n);return i&&i.default||0}else{const i=Y5(e),r=(_C(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return TR(e,n)}build(e,n,i){uv(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return fv(e,n,i)}}class J5 extends NR{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=at}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Io.has(n)){const i=Pv(n);return i&&i.default||0}return n=TC.has(n)?n:iv(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return SC(e,n,i)}build(e,n,i){cv(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){EC(e,n,i,r)}mount(e){this.isSVGTag=dv(e.tagName),super.mount(e)}}const e9=(t,e)=>sv(t)?new J5(e):new X5(e,{allowProjection:t!==Y.Fragment}),t9=Az({...Sj,...W5,...N5,...q5},e9),cI=zB(t9);function n9({onComplete:t}){return V.jsx(cI.div,{className:"fixed inset-0 bg-gray-100 flex items-center justify-center z-50",initial:{opacity:1},animate:{opacity:0},transition:{duration:.5,delay:2.5},onAnimationComplete:t,children:V.jsx(cI.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5},className:"flex flex-col items-center",children:V.jsx("img",{src:"/logo.jpg",alt:"AGSCiudadana Logo",className:"w-3/4 max-w-sm h-auto object-contain mb-4"})})})}function i9(){const[t,e]=Y.useState("home"),[n,i]=Y.useState(!0),[r,o]=Y.useState("login"),{user:a,loading:u}=rl();return n?V.jsx(n9,{onComplete:()=>i(!1)}):u?null:a?V.jsxs(QL,{activeTab:t,setActiveTab:e,children:[t==="home"&&V.jsx(EB,{}),t==="report"&&V.jsx(RB,{onCancel:()=>e("home"),onSuccess:()=>{alert("Reporte enviado con xito!"),e("home")}}),t==="profile"&&V.jsx(kB,{})]}):r==="login"?V.jsx(IB,{onSwitchToSignUp:()=>o("signup")}):V.jsx(SB,{onSwitchToLogin:()=>o("login")})}function r9(){return V.jsx(J3,{children:V.jsx(i9,{})})}dm.createRoot(document.getElementById("root")).render(V.jsx(rd.StrictMode,{children:V.jsx(r9,{})}));
